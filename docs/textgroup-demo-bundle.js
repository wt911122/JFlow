/*! For license information please see textgroup-demo-bundle.js.LICENSE.txt */
(()=>{"use strict";var e={776:t=>{function e(){return n(null,[].slice.call(arguments,0))}function n(t,e){for(var n,s,o,r,a,h=e.length,c=e[0],l={},u=t&&t.equal||i,d=1;d<h;d++)for(n=e[d],o=(s=Object.keys(n)).length,a=0;a<o;a++)u(n[r=s[a]],c[r])||(l[r]=n[r]);return l}function i(t,e){return t===e}e.custom=function(t){return n(t,[].slice.call(arguments,1))},t.exports=e},114:t=>{t.exports=JSON.parse('{"name":"@joskii/jflow","version":"0.1.21-beta","description":"","main":"src/index.js","files":["dist/*.js"],"scripts":{"dev:demo":"cd demo/vue-scopedslots && npm run serve","build:doc":"rm -rf docs && cd jsdoc-plugin && npm run build && cd ../demo/vue-scopedslots && npm run build && cd ../../ && npm run build:jsdoc","build:jsdoc":"rm -rf docs &&  jsdoc -c conf.json -t ~/Documents/Source-Codes/docstrap/template -R README.md -r . && mv out docs","build:lib":"webpack --config configs/webpack.lib.config.js"},"author":"","license":"ISC","dependencies":{"bezier-js":"^4.1.1","object-diff":"0.0.4"},"peerDependencies":{"vue":"^2.6.11"},"devDependencies":{"@babel/core":"^7.17.5","@babel/preset-env":"^7.16.11","@vue/compiler-sfc":"^3.2.26","babel-loader":"^8.2.3","ink-docstrap":"^1.3.2","jsdoc":"^3.6.7","jsdoc-vuejs":"^4.0.0","webpack":"^5.70.0","webpack-cli":"^4.9.2"}}')}},n={};function i(t){var s=n[t];if(void 0!==s)return s.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e={};i.r(e),i.d(e,{BaseLink:()=>Cr,BezierLink:()=>$r,Capsule:()=>wr,CapsuleGroup:()=>Qr,CapsuleVertical:()=>xr,CapsuleVerticalGroup:()=>ia,Diamond:()=>Sr,DiamondGroup:()=>ea,DiamondVerticalGroup:()=>na,ERLayout:()=>Gr,Group:()=>Zr,GroupFactory:()=>_r,Icon:()=>Ir,Instance:()=>Qo,JFLOW_MODE:()=>Ro,JFlowEvent:()=>gr,LinearLayout:()=>Nr,Link:()=>Pr,Lowcodelayout:()=>Yr,Node:()=>tr,Point:()=>yr,PointGroup:()=>sa,PolyLink:()=>Dr,Rectangle:()=>br,Rhombus:()=>kr,RhombusGroup:()=>ta,ShadowDom:()=>Mr,Text:()=>jr,TextElement:()=>Ur,TextGroup:()=>Kr,commonEventAdapter:()=>Tr,default:()=>ra});var n=Object.freeze({}),s=Array.isArray;function o(t){return null==t}function r(t){return null!=t}function a(t){return!0===t}function h(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function c(t){return"function"==typeof t}function l(t){return null!==t&&"object"==typeof t}var u=Object.prototype.toString;function d(t){return"[object Object]"===u.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return r(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function g(t){return null==t?"":Array.isArray(t)||d(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t,e){for(var n=Object.create(null),i=t.split(","),s=0;s<i.length;s++)n[i[s]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}v("slot,component",!0);var _=v("key,ref,slot,slot-scope,is");function y(t,e){var n=t.length;if(n){if(e===t[n-1])return void(t.length=n-1);var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}var b=Object.prototype.hasOwnProperty;function w(t,e){return b.call(t,e)}function x(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var k=/-(\w)/g,S=x((function(t){return t.replace(k,(function(t,e){return e?e.toUpperCase():""}))})),T=x((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,E=x((function(t){return t.replace(C,"-$1").toLowerCase()})),O=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function j(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function I(t,e){for(var n in e)t[n]=e[n];return t}function M(t){for(var e={},n=0;n<t.length;n++)t[n]&&I(e,t[n]);return e}function P(t,e,n){}var L=function(t,e,n){return!1},B=function(t){return t};function D(t,e){if(t===e)return!0;var n=l(t),i=l(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var s=Array.isArray(t),o=Array.isArray(e);if(s&&o)return t.length===e.length&&t.every((function(t,n){return D(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||o)return!1;var r=Object.keys(t),a=Object.keys(e);return r.length===a.length&&r.every((function(n){return D(t[n],e[n])}))}catch(t){return!1}}function R(t,e){for(var n=0;n<t.length;n++)if(D(t[n],e))return n;return-1}function $(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function A(t,e){return t===e?0===t&&1/t!=1/e:t==t||e==e}var N="data-server-rendered",F=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],H={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:P,parsePlatformTagName:B,mustUseProp:L,async:!0,_lifecycleHooks:z};function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function X(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var Y=new RegExp("[^".concat(/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source,".$_\\d]")),q="__proto__"in{},V="undefined"!=typeof window,G=V&&window.navigator.userAgent.toLowerCase(),U=G&&/msie|trident/.test(G),J=G&&G.indexOf("msie 9.0")>0,K=G&&G.indexOf("edge/")>0;G&&G.indexOf("android");var Z=G&&/iphone|ipad|ipod|ios/.test(G);G&&/chrome\/\d+/.test(G),G&&/phantomjs/.test(G);var Q,tt=G&&G.match(/firefox\/(\d+)/),et={}.watch,nt=!1;if(V)try{var it={};Object.defineProperty(it,"passive",{get:function(){nt=!0}}),window.addEventListener("test-passive",null,it)}catch(t){}var st=function(){return void 0===Q&&(Q=!V&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),Q},ot=V&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function rt(t){return"function"==typeof t&&/native code/.test(t.toString())}var at,ht="undefined"!=typeof Symbol&&rt(Symbol)&&"undefined"!=typeof Reflect&&rt(Reflect.ownKeys);at="undefined"!=typeof Set&&rt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ct=null;function lt(t){void 0===t&&(t=null),t||ct&&ct._scope.off(),ct=t,t&&t._scope.on()}var ut=function(){function t(t,e,n,i,s,o,r,a){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=s,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=r,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),dt=function(t){void 0===t&&(t="");var e=new ut;return e.text=t,e.isComment=!0,e};function ft(t){return new ut(void 0,void 0,void 0,String(t))}function pt(t){var e=new ut(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var gt=0,mt=[],vt=function(){function t(){this._pending=!1,this.id=gt++,this.subs=[]}return t.prototype.addSub=function(t){this.subs.push(t)},t.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,mt.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(t){for(var e=this.subs.filter((function(t){return t})),n=0,i=e.length;n<i;n++)e[n].update()},t}();vt.target=null;var _t=[];function yt(t){_t.push(t),vt.target=t}function bt(){_t.pop(),vt.target=_t[_t.length-1]}var wt=Array.prototype,xt=Object.create(wt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=wt[t];X(xt,t,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s,o=e.apply(this,n),r=this.__ob__;switch(t){case"push":case"unshift":s=n;break;case"splice":s=n.slice(2)}return s&&r.observeArray(s),r.dep.notify(),o}))}));var kt=Object.getOwnPropertyNames(xt),St={},Tt=!0;function Ct(t){Tt=t}var Et={notify:P,depend:P,addSub:P,removeSub:P},Ot=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),this.value=t,this.shallow=e,this.mock=n,this.dep=n?Et:new vt,this.vmCount=0,X(t,"__ob__",this),s(t)){if(!n)if(q)t.__proto__=xt;else for(var i=0,o=kt.length;i<o;i++)X(t,a=kt[i],xt[a]);e||this.observeArray(t)}else{var r=Object.keys(t);for(i=0;i<r.length;i++){var a;It(t,a=r[i],St,void 0,e,n)}}}return t.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)jt(t[e],!1,this.mock)},t}();function jt(t,e,n){return t&&w(t,"__ob__")&&t.__ob__ instanceof Ot?t.__ob__:!Tt||!n&&st()||!s(t)&&!d(t)||!Object.isExtensible(t)||t.__v_skip||Rt(t)||t instanceof ut?void 0:new Ot(t,e,n)}function It(t,e,n,i,o,r){var a=new vt,h=Object.getOwnPropertyDescriptor(t,e);if(!h||!1!==h.configurable){var c=h&&h.get,l=h&&h.set;c&&!l||n!==St&&2!==arguments.length||(n=t[e]);var u=!o&&jt(n,!1,r);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=c?c.call(t):n;return vt.target&&(a.depend(),u&&(u.dep.depend(),s(e)&&Lt(e))),Rt(e)&&!o?e.value:e},set:function(e){var i=c?c.call(t):n;if(A(i,e)){if(l)l.call(t,e);else{if(c)return;if(!o&&Rt(i)&&!Rt(e))return void(i.value=e);n=e}u=!o&&jt(e,!1,r),a.notify()}}}),a}}function Mt(t,e,n){if(!Dt(t)){var i=t.__ob__;return s(t)&&f(e)?(t.length=Math.max(t.length,e),t.splice(e,1,n),i&&!i.shallow&&i.mock&&jt(n,!1,!0),n):e in t&&!(e in Object.prototype)?(t[e]=n,n):t._isVue||i&&i.vmCount?n:i?(It(i.value,e,n,void 0,i.shallow,i.mock),i.dep.notify(),n):(t[e]=n,n)}}function Pt(t,e){if(s(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||Dt(t)||w(t,e)&&(delete t[e],n&&n.dep.notify())}}function Lt(t){for(var e=void 0,n=0,i=t.length;n<i;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),s(e)&&Lt(e)}function Bt(t){return function(t,e){Dt(t)||jt(t,e,st())}(t,!0),X(t,"__v_isShallow",!0),t}function Dt(t){return!(!t||!t.__v_isReadonly)}function Rt(t){return!(!t||!0!==t.__v_isRef)}function $t(t,e,n){Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=e[n];if(Rt(t))return t.value;var i=t&&t.__ob__;return i&&i.dep.depend(),t},set:function(t){var i=e[n];Rt(i)&&!Rt(t)?i.value=t:e[n]=t}})}var At,Nt="watcher";"".concat(Nt," callback"),"".concat(Nt," getter"),"".concat(Nt," cleanup");var Ft=function(){function t(t){void 0===t&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=At,!t&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}return t.prototype.run=function(t){if(this.active){var e=At;try{return At=this,t()}finally{At=e}}},t.prototype.on=function(){At=this},t.prototype.off=function(){At=this.parent},t.prototype.stop=function(t){if(this.active){var e=void 0,n=void 0;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].teardown();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},t}();var zt=x((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}}));function Ht(t,e){function n(){var t=n.fns;if(!s(t))return Te(t,null,arguments,e,"v-on handler");for(var i=t.slice(),o=0;o<i.length;o++)Te(i[o],null,arguments,e,"v-on handler")}return n.fns=t,n}function Wt(t,e,n,i,s,r){var h,c,l,u;for(h in t)c=t[h],l=e[h],u=zt(h),o(c)||(o(l)?(o(c.fns)&&(c=t[h]=Ht(c,r)),a(u.once)&&(c=t[h]=s(u.name,c,u.capture)),n(u.name,c,u.capture,u.passive,u.params)):c!==l&&(l.fns=c,t[h]=l));for(h in e)o(t[h])&&i((u=zt(h)).name,e[h],u.capture)}function Xt(t,e,n){var i;t instanceof ut&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function h(){n.apply(this,arguments),y(i.fns,h)}o(s)?i=Ht([h]):r(s.fns)&&a(s.merged)?(i=s).fns.push(h):i=Ht([s,h]),i.merged=!0,t[e]=i}function Yt(t,e,n,i,s){if(r(e)){if(w(e,n))return t[n]=e[n],s||delete e[n],!0;if(w(e,i))return t[n]=e[i],s||delete e[i],!0}return!1}function qt(t){return h(t)?[ft(t)]:s(t)?Gt(t):void 0}function Vt(t){return r(t)&&r(t.text)&&!1===t.isComment}function Gt(t,e){var n,i,c,l,u=[];for(n=0;n<t.length;n++)o(i=t[n])||"boolean"==typeof i||(l=u[c=u.length-1],s(i)?i.length>0&&(Vt((i=Gt(i,"".concat(e||"","_").concat(n)))[0])&&Vt(l)&&(u[c]=ft(l.text+i[0].text),i.shift()),u.push.apply(u,i)):h(i)?Vt(l)?u[c]=ft(l.text+i):""!==i&&u.push(ft(i)):Vt(i)&&Vt(l)?u[c]=ft(l.text+i.text):(a(t._isVList)&&r(i.tag)&&o(i.key)&&r(e)&&(i.key="__vlist".concat(e,"_").concat(n,"__")),u.push(i)));return u}function Ut(t,e){var n,i,o,a,h=null;if(s(t)||"string"==typeof t)for(h=new Array(t.length),n=0,i=t.length;n<i;n++)h[n]=e(t[n],n);else if("number"==typeof t)for(h=new Array(t),n=0;n<t;n++)h[n]=e(n+1,n);else if(l(t))if(ht&&t[Symbol.iterator]){h=[];for(var c=t[Symbol.iterator](),u=c.next();!u.done;)h.push(e(u.value,h.length)),u=c.next()}else for(o=Object.keys(t),h=new Array(o.length),n=0,i=o.length;n<i;n++)a=o[n],h[n]=e(t[a],a,n);return r(h)||(h=[]),h._isVList=!0,h}function Jt(t,e,n,i){var s,o=this.$scopedSlots[t];o?(n=n||{},i&&(n=I(I({},i),n)),s=o(n)||(c(e)?e():e)):s=this.$slots[t]||(c(e)?e():e);var r=n&&n.slot;return r?this.$createElement("template",{slot:r},s):s}function Kt(t){return In(this.$options,"filters",t)||B}function Zt(t,e){return s(t)?-1===t.indexOf(e):t!==e}function Qt(t,e,n,i,s){var o=H.keyCodes[e]||n;return s&&i&&!H.keyCodes[e]?Zt(s,i):o?Zt(o,t):i?E(i)!==e:void 0===t}function te(t,e,n,i,o){if(n&&l(n)){s(n)&&(n=M(n));var r=void 0,a=function(s){if("class"===s||"style"===s||_(s))r=t;else{var a=t.attrs&&t.attrs.type;r=i||H.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var h=S(s),c=E(s);h in r||c in r||(r[s]=n[s],o&&((t.on||(t.on={}))["update:".concat(s)]=function(t){n[s]=t}))};for(var h in n)a(h)}return t}function ee(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e||ie(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),"__static__".concat(t),!1),i}function ne(t,e,n){return ie(t,"__once__".concat(e).concat(n?"_".concat(n):""),!0),t}function ie(t,e,n){if(s(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&se(t[i],"".concat(e,"_").concat(i),n);else se(t,e,n)}function se(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function oe(t,e){if(e&&d(e)){var n=t.on=t.on?I({},t.on):{};for(var i in e){var s=n[i],o=e[i];n[i]=s?[].concat(s,o):o}}return t}function re(t,e,n,i){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var r=t[o];s(r)?re(r,e,n):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return i&&(e.$key=i),e}function ae(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"==typeof i&&i&&(t[e[n]]=e[n+1])}return t}function he(t,e){return"string"==typeof t?e+t:t}function ce(t){t._o=ne,t._n=m,t._s=g,t._l=Ut,t._t=Jt,t._q=D,t._i=R,t._m=ee,t._f=Kt,t._k=Qt,t._b=te,t._v=ft,t._e=dt,t._u=re,t._g=oe,t._d=ae,t._p=he}function le(t,e){if(!t||!t.length)return{};for(var n={},i=0,s=t.length;i<s;i++){var o=t[i],r=o.data;if(r&&r.attrs&&r.attrs.slot&&delete r.attrs.slot,o.context!==e&&o.fnContext!==e||!r||null==r.slot)(n.default||(n.default=[])).push(o);else{var a=r.slot,h=n[a]||(n[a]=[]);"template"===o.tag?h.push.apply(h,o.children||[]):h.push(o)}}for(var c in n)n[c].every(ue)&&delete n[c];return n}function ue(t){return t.isComment&&!t.asyncFactory||" "===t.text}function de(t){return t.isComment&&t.asyncFactory}function fe(t,e,i,s){var o,r=Object.keys(i).length>0,a=e?!!e.$stable:!r,h=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&s&&s!==n&&h===s.$key&&!r&&!s.$hasNormal)return s;for(var c in o={},e)e[c]&&"$"!==c[0]&&(o[c]=pe(t,i,c,e[c]))}else o={};for(var l in i)l in o||(o[l]=ge(i,l));return e&&Object.isExtensible(e)&&(e._normalized=o),X(o,"$stable",a),X(o,"$key",h),X(o,"$hasNormal",r),o}function pe(t,e,n,i){var o=function(){var e=ct;lt(t);var n=arguments.length?i.apply(null,arguments):i({}),o=(n=n&&"object"==typeof n&&!s(n)?[n]:qt(n))&&n[0];return lt(e),n&&(!o||1===n.length&&o.isComment&&!de(o))?void 0:n};return i.proxy&&Object.defineProperty(e,n,{get:o,enumerable:!0,configurable:!0}),o}function ge(t,e){return function(){return t[e]}}function me(t,e,n,i,s){var o=!1;for(var r in e)r in t?e[r]!==n[r]&&(o=!0):(o=!0,ve(t,r,i,s));for(var r in t)r in e||(o=!0,delete t[r]);return o}function ve(t,e,n,i){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n[i][e]}})}function _e(t,e){for(var n in e)t[n]=e[n];for(var n in t)n in e||delete t[n]}var ye=null;function be(t,e){return(t.__esModule||ht&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function we(t){if(s(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||de(n)))return n}}function xe(t,e,n,i,o,u){return(s(n)||h(n))&&(o=i,i=n,n=void 0),a(u)&&(o=2),function(t,e,n,i,o){if(r(n)&&r(n.__ob__))return dt();if(r(n)&&r(n.is)&&(e=n.is),!e)return dt();var a,h;if(s(i)&&c(i[0])&&((n=n||{}).scopedSlots={default:i[0]},i.length=0),2===o?i=qt(i):1===o&&(i=function(t){for(var e=0;e<t.length;e++)if(s(t[e]))return Array.prototype.concat.apply([],t);return t}(i)),"string"==typeof e){var u=void 0;h=t.$vnode&&t.$vnode.ns||H.getTagNamespace(e),a=H.isReservedTag(e)?new ut(H.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!r(u=In(t.$options,"components",e))?new ut(e,n,i,void 0,void 0,t):bn(u,n,t,i,e)}else a=bn(e,n,t,i);return s(a)?a:r(a)?(r(h)&&ke(a,h),r(n)&&function(t){l(t.style)&&Fe(t.style),l(t.class)&&Fe(t.class)}(n),a):dt()}(t,e,n,i,o)}function ke(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),r(t.children))for(var i=0,s=t.children.length;i<s;i++){var h=t.children[i];r(h.tag)&&(o(h.ns)||a(n)&&"svg"!==h.tag)&&ke(h,e,n)}}function Se(t,e,n){yt();try{if(e)for(var i=e;i=i.$parent;){var s=i.$options.errorCaptured;if(s)for(var o=0;o<s.length;o++)try{if(!1===s[o].call(i,t,e,n))return}catch(t){Ce(t,i,"errorCaptured hook")}}Ce(t,e,n)}finally{bt()}}function Te(t,e,n,i,s){var o;try{(o=n?t.apply(e,n):t.call(e))&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(t){return Se(t,i,s+" (Promise/async)")})),o._handled=!0)}catch(t){Se(t,i,s)}return o}function Ce(t,e,n){if(H.errorHandler)try{return H.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Ee(e)}Ee(t)}function Ee(t,e,n){if(!V||"undefined"==typeof console)throw t;console.error(t)}var Oe,je=!1,Ie=[],Me=!1;function Pe(){Me=!1;var t=Ie.slice(0);Ie.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&rt(Promise)){var Le=Promise.resolve();Oe=function(){Le.then(Pe),Z&&setTimeout(P)},je=!0}else if(U||"undefined"==typeof MutationObserver||!rt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Oe="undefined"!=typeof setImmediate&&rt(setImmediate)?function(){setImmediate(Pe)}:function(){setTimeout(Pe,0)};else{var Be=1,De=new MutationObserver(Pe),Re=document.createTextNode(String(Be));De.observe(Re,{characterData:!0}),Oe=function(){Be=(Be+1)%2,Re.data=String(Be)},je=!0}function $e(t,e){var n;if(Ie.push((function(){if(t)try{t.call(e)}catch(t){Se(t,e,"nextTick")}else n&&n(e)})),Me||(Me=!0,Oe()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}function Ae(t){return function(e,n){if(void 0===n&&(n=ct),n)return function(t,e,n){var i=t.$options;i[e]=Cn(i[e],n)}(n,t,e)}}Ae("beforeMount"),Ae("mounted"),Ae("beforeUpdate"),Ae("updated"),Ae("beforeDestroy"),Ae("destroyed"),Ae("activated"),Ae("deactivated"),Ae("serverPrefetch"),Ae("renderTracked"),Ae("renderTriggered"),Ae("errorCaptured");var Ne=new at;function Fe(t){return ze(t,Ne),Ne.clear(),t}function ze(t,e){var n,i,o=s(t);if(!(!o&&!l(t)||t.__v_skip||Object.isFrozen(t)||t instanceof ut)){if(t.__ob__){var r=t.__ob__.dep.id;if(e.has(r))return;e.add(r)}if(o)for(n=t.length;n--;)ze(t[n],e);else if(Rt(t))ze(t.value,e);else for(n=(i=Object.keys(t)).length;n--;)ze(t[i[n]],e)}}var He,We=0,Xe=function(){function t(t,e,n,i,s){var o;void 0===(o=At&&!At._vm?At:t?t._scope:void 0)&&(o=At),o&&o.active&&o.effects.push(this),(this.vm=t)&&s&&(t._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++We,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new at,this.newDepIds=new at,this.expression="",c(e)?this.getter=e:(this.getter=function(t){if(!Y.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){var t;yt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Se(t,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Fe(t),bt(),this.cleanupDeps()}return t},t.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},t.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==sn[e]&&(t!==vt.target||!t.noRecurse)){if(sn[e]=!0,rn){for(var n=en.length-1;n>an&&en[n].id>t.id;)n--;en.splice(n+1,0,t)}else en.push(t);on||(on=!0,$e(dn))}}(this)},t.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'.concat(this.expression,'"');Te(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&y(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function Ye(t,e){He.$on(t,e)}function qe(t,e){He.$off(t,e)}function Ve(t,e){var n=He;return function i(){var s=e.apply(null,arguments);null!==s&&n.$off(t,i)}}function Ge(t,e,n){He=t,Wt(e,n||{},Ye,qe,Ve,t),He=void 0}var Ue=null;function Je(t){var e=Ue;return Ue=t,function(){Ue=e}}function Ke(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ze(t,e){if(e){if(t._directInactive=!1,Ke(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ze(t.$children[n]);tn(t,"activated")}}function Qe(t,e){if(!(e&&(t._directInactive=!0,Ke(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Qe(t.$children[n]);tn(t,"deactivated")}}function tn(t,e,n,i){void 0===i&&(i=!0),yt();var s=ct;i&&lt(t);var o=t.$options[e],r="".concat(e," hook");if(o)for(var a=0,h=o.length;a<h;a++)Te(o[a],t,n||null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),i&&lt(s),bt()}var en=[],nn=[],sn={},on=!1,rn=!1,an=0,hn=0,cn=Date.now;if(V&&!U){var ln=window.performance;ln&&"function"==typeof ln.now&&cn()>document.createEvent("Event").timeStamp&&(cn=function(){return ln.now()})}var un=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function dn(){var t,e;for(hn=cn(),rn=!0,en.sort(un),an=0;an<en.length;an++)(t=en[an]).before&&t.before(),e=t.id,sn[e]=null,t.run();var n=nn.slice(),i=en.slice();an=en.length=nn.length=0,sn={},on=rn=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ze(t[e],!0)}(n),function(t){for(var e=t.length;e--;){var n=t[e],i=n.vm;i&&i._watcher===n&&i._isMounted&&!i._isDestroyed&&tn(i,"updated")}}(i),function(){for(var t=0;t<mt.length;t++){var e=mt[t];e.subs=e.subs.filter((function(t){return t})),e._pending=!1}mt.length=0}(),ot&&H.devtools&&ot.emit("flush")}function fn(t,e){if(t){for(var n=Object.create(null),i=ht?Reflect.ownKeys(t):Object.keys(t),s=0;s<i.length;s++){var o=i[s];if("__ob__"!==o){var r=t[o].from;if(r in e._provided)n[o]=e._provided[r];else if("default"in t[o]){var a=t[o].default;n[o]=c(a)?a.call(e):a}}}return n}}function pn(t,e,i,o,r){var h,c=this,l=r.options;w(o,"_uid")?(h=Object.create(o))._original=o:(h=o,o=o._original);var u=a(l._compiled),d=!u;this.data=t,this.props=e,this.children=i,this.parent=o,this.listeners=t.on||n,this.injections=fn(l.inject,o),this.slots=function(){return c.$slots||fe(o,t.scopedSlots,c.$slots=le(i,o)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return fe(o,t.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=fe(o,t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,i){var r=xe(h,t,e,n,i,d);return r&&!s(r)&&(r.fnScopeId=l._scopeId,r.fnContext=o),r}:this._c=function(t,e,n,i){return xe(h,t,e,n,i,d)}}function gn(t,e,n,i,s){var o=pt(t);return o.fnContext=n,o.fnOptions=i,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function mn(t,e){for(var n in e)t[S(n)]=e[n]}function vn(t){return t.name||t.__name||t._componentTag}ce(pn.prototype);var _n={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;_n.prepatch(n,n)}else(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(n)}(t,Ue)).$mount(e?t.elm:void 0,e)},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,s,o){var r=s.data.scopedSlots,a=t.$scopedSlots,h=!!(r&&!r.$stable||a!==n&&!a.$stable||r&&t.$scopedSlots.$key!==r.$key||!r&&t.$scopedSlots.$key),c=!!(o||t.$options._renderChildren||h),l=t.$vnode;t.$options._parentVnode=s,t.$vnode=s,t._vnode&&(t._vnode.parent=s),t.$options._renderChildren=o;var u=s.data.attrs||n;t._attrsProxy&&me(t._attrsProxy,u,l.data&&l.data.attrs||n,t,"$attrs")&&(c=!0),t.$attrs=u,i=i||n;var d=t.$options._parentListeners;if(t._listenersProxy&&me(t._listenersProxy,i,d||n,t,"$listeners"),t.$listeners=t.$options._parentListeners=i,Ge(t,i,d),e&&t.$options.props){Ct(!1);for(var f=t._props,p=t.$options._propKeys||[],g=0;g<p.length;g++){var m=p[g],v=t.$options.props;f[m]=Mn(m,v,e,t)}Ct(!0),t.$options.propsData=e}c&&(t.$slots=le(o,s.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,tn(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,nn.push(e)):Ze(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Qe(e,!0):e.$destroy())}},yn=Object.keys(_n);function bn(t,e,i,h,c){if(!o(t)){var u=i.$options._base;if(l(t)&&(t=u.extend(t)),"function"==typeof t){var d;if(o(t.cid)&&(t=function(t,e){if(a(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var n=ye;if(n&&r(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),a(t.loading)&&r(t.loadingComp))return t.loadingComp;if(n&&!r(t.owners)){var i=t.owners=[n],s=!0,h=null,c=null;n.$on("hook:destroyed",(function(){return y(i,n)}));var u=function(t){for(var e=0,n=i.length;e<n;e++)i[e].$forceUpdate();t&&(i.length=0,null!==h&&(clearTimeout(h),h=null),null!==c&&(clearTimeout(c),c=null))},d=$((function(n){t.resolved=be(n,e),s?i.length=0:u(!0)})),f=$((function(e){r(t.errorComp)&&(t.error=!0,u(!0))})),g=t(d,f);return l(g)&&(p(g)?o(t.resolved)&&g.then(d,f):p(g.component)&&(g.component.then(d,f),r(g.error)&&(t.errorComp=be(g.error,e)),r(g.loading)&&(t.loadingComp=be(g.loading,e),0===g.delay?t.loading=!0:h=setTimeout((function(){h=null,o(t.resolved)&&o(t.error)&&(t.loading=!0,u(!1))}),g.delay||200)),r(g.timeout)&&(c=setTimeout((function(){c=null,o(t.resolved)&&f(null)}),g.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}(d=t,u),void 0===t))return function(t,e,n,i,s){var o=dt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:i,tag:s},o}(d,e,i,h,c);e=e||{},Yn(t),r(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[i],h=e.model.callback;r(a)?(s(a)?-1===a.indexOf(h):a!==h)&&(o[i]=[h].concat(a)):o[i]=h}(t.options,e);var f=function(t,e,n){var i=e.options.props;if(!o(i)){var s={},a=t.attrs,h=t.props;if(r(a)||r(h))for(var c in i){var l=E(c);Yt(s,h,c,l,!0)||Yt(s,a,c,l,!1)}return s}}(e,t);if(a(t.options.functional))return function(t,e,i,o,a){var h=t.options,c={},l=h.props;if(r(l))for(var u in l)c[u]=Mn(u,l,e||n);else r(i.attrs)&&mn(c,i.attrs),r(i.props)&&mn(c,i.props);var d=new pn(i,c,a,o,t),f=h.render.call(null,d._c,d);if(f instanceof ut)return gn(f,i,d.parent,h);if(s(f)){for(var p=qt(f)||[],g=new Array(p.length),m=0;m<p.length;m++)g[m]=gn(p[m],i,d.parent,h);return g}}(t,f,e,i,h);var g=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<yn.length;n++){var i=yn[n],s=e[i],o=_n[i];s===o||s&&s._merged||(e[i]=s?wn(o,s):o)}}(e);var v=vn(t.options)||c;return new ut("vue-component-".concat(t.cid).concat(v?"-".concat(v):""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:f,listeners:g,tag:c,children:h},d)}}}function wn(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}var xn=P,kn=H.optionMergeStrategies;function Sn(t,e,n){if(void 0===n&&(n=!0),!e)return t;for(var i,s,o,r=ht?Reflect.ownKeys(e):Object.keys(e),a=0;a<r.length;a++)"__ob__"!==(i=r[a])&&(s=t[i],o=e[i],n&&w(t,i)?s!==o&&d(s)&&d(o)&&Sn(s,o):Mt(t,i,o));return t}function Tn(t,e,n){return n?function(){var i=c(e)?e.call(n,n):e,s=c(t)?t.call(n,n):t;return i?Sn(i,s):s}:e?t?function(){return Sn(c(e)?e.call(this,this):e,c(t)?t.call(this,this):t)}:e:t}function Cn(t,e){var n=e?t?t.concat(e):s(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function En(t,e,n,i){var s=Object.create(t||null);return e?I(s,e):s}kn.data=function(t,e,n){return n?Tn(t,e,n):e&&"function"!=typeof e?t:Tn(t,e)},z.forEach((function(t){kn[t]=Cn})),F.forEach((function(t){kn[t+"s"]=En})),kn.watch=function(t,e,n,i){if(t===et&&(t=void 0),e===et&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var r in I(o,t),e){var a=o[r],h=e[r];a&&!s(a)&&(a=[a]),o[r]=a?a.concat(h):s(h)?h:[h]}return o},kn.props=kn.methods=kn.inject=kn.computed=function(t,e,n,i){if(!t)return e;var s=Object.create(null);return I(s,t),e&&I(s,e),s},kn.provide=function(t,e){return t?function(){var n=Object.create(null);return Sn(n,c(t)?t.call(this):t),e&&Sn(n,c(e)?e.call(this):e,!1),n}:e};var On=function(t,e){return void 0===e?t:e};function jn(t,e,n){if(c(e)&&(e=e.options),function(t,e){var n=t.props;if(n){var i,o,r={};if(s(n))for(i=n.length;i--;)"string"==typeof(o=n[i])&&(r[S(o)]={type:null});else if(d(n))for(var a in n)o=n[a],r[S(a)]=d(o)?o:{type:o};t.props=r}}(e),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(s(n))for(var o=0;o<n.length;o++)i[n[o]]={from:n[o]};else if(d(n))for(var r in n){var a=n[r];i[r]=d(a)?I({from:r},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];c(i)&&(e[n]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=jn(t,e.extends,n)),e.mixins))for(var i=0,o=e.mixins.length;i<o;i++)t=jn(t,e.mixins[i],n);var r,a={};for(r in t)h(r);for(r in e)w(t,r)||h(r);function h(i){var s=kn[i]||On;a[i]=s(t[i],e[i],n,i)}return a}function In(t,e,n,i){if("string"==typeof n){var s=t[e];if(w(s,n))return s[n];var o=S(n);if(w(s,o))return s[o];var r=T(o);return w(s,r)?s[r]:s[n]||s[o]||s[r]}}function Mn(t,e,n,i){var s=e[t],o=!w(n,t),r=n[t],a=Dn(Boolean,s.type);if(a>-1)if(o&&!w(s,"default"))r=!1;else if(""===r||r===E(t)){var h=Dn(String,s.type);(h<0||a<h)&&(r=!0)}if(void 0===r){r=function(t,e,n){if(w(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:c(i)&&"Function"!==Ln(e.type)?i.call(t):i}}(i,s,t);var l=Tt;Ct(!0),jt(r),Ct(l)}return r}var Pn=/^\s*function (\w+)/;function Ln(t){var e=t&&t.toString().match(Pn);return e?e[1]:""}function Bn(t,e){return Ln(t)===Ln(e)}function Dn(t,e){if(!s(e))return Bn(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(Bn(e[n],t))return n;return-1}var Rn={enumerable:!0,configurable:!0,get:P,set:P};function $n(t,e,n){Rn.get=function(){return this[e][n]},Rn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Rn)}function An(t){var e=t.$options;if(e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props=Bt({}),s=t.$options._propKeys=[];!t.$parent||Ct(!1);var o=function(o){s.push(o);var r=Mn(o,e,n,t);It(i,o,r),o in t||$n(t,"_props",o)};for(var r in e)o(r);Ct(!0)}(t,e.props),function(t){var e=t.$options,i=e.setup;if(i){var s=t._setupContext=function(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};X(e,"_v_attr_proxy",!0),me(e,t.$attrs,n,t,"$attrs")}return t._attrsProxy},get listeners(){return t._listenersProxy||me(t._listenersProxy={},t.$listeners,n,t,"$listeners"),t._listenersProxy},get slots(){return function(t){return t._slotsProxy||_e(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}(t)},emit:O(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(n){return $t(t,e,n)}))}}}(t);lt(t),yt();var o=Te(i,null,[t._props||Bt({}),s],t,"setup");if(bt(),lt(),c(o))e.render=o;else if(l(o))if(t._setupState=o,o.__sfc){var r=t._setupProxy={};for(var a in o)"__sfc"!==a&&$t(r,o,a)}else for(var a in o)W(a)||$t(t,o,a)}}(t),e.methods&&function(t,e){for(var n in t.$options.props,e)t[n]="function"!=typeof e[n]?P:O(e[n],t)}(t,e.methods),e.data)!function(t){var e=t.$options.data;d(e=t._data=c(e)?function(t,e){yt();try{return t.call(e,e)}catch(t){return Se(t,e,"data()"),{}}finally{bt()}}(e,t):e||{})||(e={});for(var n=Object.keys(e),i=t.$options.props,s=(t.$options.methods,n.length);s--;){var o=n[s];i&&w(i,o)||W(o)||$n(t,"_data",o)}var r=jt(e);r&&r.vmCount++}(t);else{var i=jt(t._data={});i&&i.vmCount++}e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=st();for(var s in e){var o=e[s],r=c(o)?o:o.get;i||(n[s]=new Xe(t,r||P,P,Nn)),s in t||Fn(t,s,o)}}(t,e.computed),e.watch&&e.watch!==et&&function(t,e){for(var n in e){var i=e[n];if(s(i))for(var o=0;o<i.length;o++)Wn(t,n,i[o]);else Wn(t,n,i)}}(t,e.watch)}var Nn={lazy:!0};function Fn(t,e,n){var i=!st();c(n)?(Rn.get=i?zn(e):Hn(n),Rn.set=P):(Rn.get=n.get?i&&!1!==n.cache?zn(e):Hn(n.get):P,Rn.set=n.set||P),Object.defineProperty(t,e,Rn)}function zn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function Hn(t){return function(){return t.call(this,this)}}function Wn(t,e,n,i){return d(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}var Xn=0;function Yn(t){var e=t.options;if(t.super){var n=Yn(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.sealedOptions;for(var s in n)n[s]!==i[s]&&(e||(e={}),e[s]=n[s]);return e}(t);i&&I(t.extendOptions,i),(e=t.options=jn(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function qn(t){this._init(t)}function Vn(t){return t&&(vn(t.Ctor.options)||t.tag)}function Gn(t,e){return s(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(n=t,!("[object RegExp]"!==u.call(n))&&t.test(e));var n}function Un(t,e){var n=t.cache,i=t.keys,s=t._vnode;for(var o in n){var r=n[o];if(r){var a=r.name;a&&!e(a)&&Jn(n,o,i,s)}}}function Jn(t,e,n,i){var s=t[e];!s||i&&s.tag===i.tag||s.componentInstance.$destroy(),t[e]=null,y(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Xn++,e._isVue=!0,e.__v_skip=!0,e._scope=new Ft(!0),e._scope._vm=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var s=i.componentOptions;n.propsData=s.propsData,n._parentListeners=s.listeners,n._renderChildren=s.children,n._componentTag=s.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=jn(Yn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._provided=n?n._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Ge(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,s=i&&i.context;t.$slots=le(e._renderChildren,s),t.$scopedSlots=i?fe(t.$parent,i.data.scopedSlots,t.$slots):n,t._c=function(e,n,i,s){return xe(t,e,n,i,s,!1)},t.$createElement=function(e,n,i,s){return xe(t,e,n,i,s,!0)};var o=i&&i.data;It(t,"$attrs",o&&o.attrs||n,null,!0),It(t,"$listeners",e._parentListeners||n,null,!0)}(e),tn(e,"beforeCreate",void 0,!1),function(t){var e=fn(t.$options.inject,t);e&&(Ct(!1),Object.keys(e).forEach((function(n){It(t,n,e[n])})),Ct(!0))}(e),An(e),function(t){var e=t.$options.provide;if(e){var n=c(e)?e.call(t):e;if(!l(n))return;for(var i=function(t){var e=t._provided,n=t.$parent&&t.$parent._provided;return n===e?t._provided=Object.create(n):e}(t),s=ht?Reflect.ownKeys(n):Object.keys(n),o=0;o<s.length;o++){var r=s[o];Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))}}}(e),tn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(qn),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Mt,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var i=this;if(d(e))return Wn(i,t,e,n);(n=n||{}).user=!0;var s=new Xe(i,t,e,n);if(n.immediate){var o='callback for immediate watcher "'.concat(s.expression,'"');yt(),Te(e,i,[s.value],i,o),bt()}return function(){s.teardown()}}}(qn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(s(t))for(var o=0,r=t.length;o<r;o++)i.$on(t[o],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(s(t)){for(var i=0,o=t.length;i<o;i++)n.$off(t[i],e);return n}var r,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;for(var h=a.length;h--;)if((r=a[h])===e||r.fn===e){a.splice(h,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?j(n):n;for(var i=j(arguments,1),s='event handler for "'.concat(t,'"'),o=0,r=n.length;o<r;o++)Te(n[o],e,i,e,s)}return e}}(qn),function(t){t.prototype._update=function(t,e){var n=this,i=n.$el,s=n._vnode,o=Je(n);n._vnode=t,n.$el=s?n.__patch__(s,t):n.__patch__(n.$el,t,e,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n);for(var r=n;r&&r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode;)r.$parent.$el=r.$el,r=r.$parent},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){tn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),tn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(qn),function(t){ce(t.prototype),t.prototype.$nextTick=function(t){return $e(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,o=n._parentVnode;o&&e._isMounted&&(e.$scopedSlots=fe(e.$parent,o.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&_e(e._slotsProxy,e.$scopedSlots)),e.$vnode=o;try{lt(e),ye=e,t=i.call(e._renderProxy,e.$createElement)}catch(n){Se(n,e,"render"),t=e._vnode}finally{ye=null,lt()}return s(t)&&1===t.length&&(t=t[0]),t instanceof ut||(t=dt()),t.parent=o,t}}(qn);var Kn=[String,RegExp,Array],Zn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Kn,exclude:Kn,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,i=t.vnodeToCache,s=t.keyToCache;if(i){var o=i.tag,r=i.componentInstance,a=i.componentOptions;e[s]={name:Vn(a),tag:o,componentInstance:r},n.push(s),this.max&&n.length>parseInt(this.max)&&Jn(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Jn(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Un(t,(function(t){return Gn(e,t)}))})),this.$watch("exclude",(function(e){Un(t,(function(t){return!Gn(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=we(t),n=e&&e.componentOptions;if(n){var i=Vn(n),s=this.include,o=this.exclude;if(s&&(!i||!Gn(s,i))||o&&i&&Gn(o,i))return e;var r=this.cache,a=this.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):e.key;r[h]?(e.componentInstance=r[h].componentInstance,y(a,h),a.push(h)):(this.vnodeToCache=e,this.keyToCache=h),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return H}};Object.defineProperty(t,"config",e),t.util={warn:xn,extend:I,mergeOptions:jn,defineReactive:It},t.set=Mt,t.delete=Pt,t.nextTick=$e,t.observable=function(t){return jt(t),t},t.options=Object.create(null),F.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,I(t.options.components,Zn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=j(arguments,1);return n.unshift(this),c(t.install)?t.install.apply(t,n):c(t)&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=jn(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,s=t._Ctor||(t._Ctor={});if(s[i])return s[i];var o=vn(t)||vn(n.options),r=function(t){this._init(t)};return(r.prototype=Object.create(n.prototype)).constructor=r,r.cid=e++,r.options=jn(n.options,t),r.super=n,r.options.props&&function(t){var e=t.options.props;for(var n in e)$n(t.prototype,"_props",n)}(r),r.options.computed&&function(t){var e=t.options.computed;for(var n in e)Fn(t.prototype,n,e[n])}(r),r.extend=n.extend,r.mixin=n.mixin,r.use=n.use,F.forEach((function(t){r[t]=n[t]})),o&&(r.options.components[o]=r),r.superOptions=n.options,r.extendOptions=t,r.sealedOptions=I({},r.options),s[i]=r,r}}(t),function(t){F.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&d(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&c(n)&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(qn),Object.defineProperty(qn.prototype,"$isServer",{get:st}),Object.defineProperty(qn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(qn,"FunctionalRenderContext",{value:pn}),qn.version="2.7.14";var Qn=v("style,class"),ti=v("input,textarea,option,select,progress"),ei=v("contenteditable,draggable,spellcheck"),ni=v("events,caret,typing,plaintext-only"),ii=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),si="http://www.w3.org/1999/xlink",oi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},ri=function(t){return oi(t)?t.slice(6,t.length):""},ai=function(t){return null==t||!1===t};function hi(t,e){return{staticClass:ci(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function ci(t,e){return t?e?t+" "+e:t:e||""}function li(t){return Array.isArray(t)?function(t){for(var e,n="",i=0,s=t.length;i<s;i++)r(e=li(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):l(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var ui={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},di=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),fi=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),pi=function(t){return di(t)||fi(t)},gi=Object.create(null),mi=v("text,number,password,search,email,tel,url"),vi=Object.freeze({__proto__:null,createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(ui[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),_i={create:function(t,e){yi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(yi(t,!0),yi(e))},destroy:function(t){yi(t,!0)}};function yi(t,e){var n=t.data.ref;if(r(n)){var i=t.context,o=t.componentInstance||t.elm,a=e?null:o,h=e?void 0:o;if(c(n))Te(n,i,[a],i,"template ref function");else{var l=t.data.refInFor,u="string"==typeof n||"number"==typeof n,d=Rt(n),f=i.$refs;if(u||d)if(l){var p=u?f[n]:n.value;e?s(p)&&y(p,o):s(p)?p.includes(o)||p.push(o):u?(f[n]=[o],bi(i,n,f[n])):n.value=[o]}else if(u){if(e&&f[n]!==o)return;f[n]=h,bi(i,n,a)}else if(d){if(e&&n.value!==o)return;n.value=a}}}}function bi(t,e,n){var i=t._setupState;i&&w(i,e)&&(Rt(i[e])?i[e].value=n:i[e]=n)}var wi=new ut("",{},[]),xi=["create","activate","update","remove","destroy"];function ki(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,i=r(n=t.data)&&r(n=n.attrs)&&n.type,s=r(n=e.data)&&r(n=n.attrs)&&n.type;return i===s||mi(i)&&mi(s)}(t,e)||a(t.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function Si(t,e,n){var i,s,o={};for(i=e;i<=n;++i)r(s=t[i].key)&&(o[s]=i);return o}var Ti={create:Ci,update:Ci,destroy:function(t){Ci(t,wi)}};function Ci(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,s,o=t===wi,r=e===wi,a=Oi(t.data.directives,t.context),h=Oi(e.data.directives,e.context),c=[],l=[];for(n in h)i=a[n],s=h[n],i?(s.oldValue=i.value,s.oldArg=i.arg,Ii(s,"update",e,t),s.def&&s.def.componentUpdated&&l.push(s)):(Ii(s,"bind",e,t),s.def&&s.def.inserted&&c.push(s));if(c.length){var u=function(){for(var n=0;n<c.length;n++)Ii(c[n],"inserted",e,t)};o?Xt(e,"insert",u):u()}if(l.length&&Xt(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Ii(l[n],"componentUpdated",e,t)})),!o)for(n in a)h[n]||Ii(a[n],"unbind",t,t,r)}(t,e)}var Ei=Object.create(null);function Oi(t,e){var n,i,s=Object.create(null);if(!t)return s;for(n=0;n<t.length;n++){if((i=t[n]).modifiers||(i.modifiers=Ei),s[ji(i)]=i,e._setupState&&e._setupState.__sfc){var o=i.def||In(e,"_setupState","v-"+i.name);i.def="function"==typeof o?{bind:o,update:o}:o}i.def=i.def||In(e.$options,"directives",i.name)}return s}function ji(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function Ii(t,e,n,i,s){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,i,s)}catch(i){Se(i,n.context,"directive ".concat(t.name," ").concat(e," hook"))}}var Mi=[_i,Ti];function Pi(t,e){var n=e.componentOptions;if(!(r(n)&&!1===n.Ctor.options.inheritAttrs||o(t.data.attrs)&&o(e.data.attrs))){var i,s,h=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(i in(r(l.__ob__)||a(l._v_attr_proxy))&&(l=e.data.attrs=I({},l)),l)s=l[i],c[i]!==s&&Li(h,i,s,e.data.pre);for(i in(U||K)&&l.value!==c.value&&Li(h,"value",l.value),c)o(l[i])&&(oi(i)?h.removeAttributeNS(si,ri(i)):ei(i)||h.removeAttribute(i))}}function Li(t,e,n,i){i||t.tagName.indexOf("-")>-1?Bi(t,e,n):ii(e)?ai(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):ei(e)?t.setAttribute(e,function(t,e){return ai(e)||"false"===e?"false":"contenteditable"===t&&ni(e)?e:"true"}(e,n)):oi(e)?ai(n)?t.removeAttributeNS(si,ri(e)):t.setAttributeNS(si,e,n):Bi(t,e,n)}function Bi(t,e,n){if(ai(n))t.removeAttribute(e);else{if(U&&!J&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var Di={create:Pi,update:Pi};function Ri(t,e){var n=e.elm,i=e.data,s=t.data;if(!(o(i.staticClass)&&o(i.class)&&(o(s)||o(s.staticClass)&&o(s.class)))){var a=function(t){for(var e=t.data,n=t,i=t;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=hi(i.data,e));for(;r(n=n.parent);)n&&n.data&&(e=hi(e,n.data));return s=e.staticClass,o=e.class,r(s)||r(o)?ci(s,li(o)):"";var s,o}(e),h=n._transitionClasses;r(h)&&(a=ci(a,li(h))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var $i,Ai={create:Ri,update:Ri},Ni="__r",Fi="__c";function zi(t,e,n){var i=$i;return function s(){var o=e.apply(null,arguments);null!==o&&Xi(t,s,n,i)}}var Hi=je&&!(tt&&Number(tt[1])<=53);function Wi(t,e,n,i){if(Hi){var s=hn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=s||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}$i.addEventListener(t,e,nt?{capture:n,passive:i}:n)}function Xi(t,e,n,i){(i||$i).removeEventListener(t,e._wrapper||e,n)}function Yi(t,e){if(!o(t.data.on)||!o(e.data.on)){var n=e.data.on||{},i=t.data.on||{};$i=e.elm||t.elm,function(t){if(r(t[Ni])){var e=U?"change":"input";t[e]=[].concat(t[Ni],t[e]||[]),delete t[Ni]}r(t[Fi])&&(t.change=[].concat(t[Fi],t.change||[]),delete t[Fi])}(n),Wt(n,i,Wi,Xi,zi,e.context),$i=void 0}}var qi,Vi={create:Yi,update:Yi,destroy:function(t){return Yi(t,wi)}};function Gi(t,e){if(!o(t.data.domProps)||!o(e.data.domProps)){var n,i,s=e.elm,h=t.data.domProps||{},c=e.data.domProps||{};for(n in(r(c.__ob__)||a(c._v_attr_proxy))&&(c=e.data.domProps=I({},c)),h)n in c||(s[n]="");for(n in c){if(i=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===h[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=i;var l=o(i)?"":String(i);Ui(s,l)&&(s.value=l)}else if("innerHTML"===n&&fi(s.tagName)&&o(s.innerHTML)){(qi=qi||document.createElement("div")).innerHTML="<svg>".concat(i,"</svg>");for(var u=qi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}else if(i!==h[n])try{s[n]=i}catch(t){}}}}function Ui(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,i=t._vModifiers;if(r(i)){if(i.number)return m(n)!==m(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Ji={create:Gi,update:Gi},Ki=x((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function Zi(t){var e=Qi(t.style);return t.staticStyle?I(t.staticStyle,e):e}function Qi(t){return Array.isArray(t)?M(t):"string"==typeof t?Ki(t):t}var ts,es=/^--/,ns=/\s*!important$/,is=function(t,e,n){if(es.test(e))t.style.setProperty(e,n);else if(ns.test(n))t.style.setProperty(E(e),n.replace(ns,""),"important");else{var i=os(e);if(Array.isArray(n))for(var s=0,o=n.length;s<o;s++)t.style[i]=n[s];else t.style[i]=n}},ss=["Webkit","Moz","ms"],os=x((function(t){if(ts=ts||document.createElement("div").style,"filter"!==(t=S(t))&&t in ts)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<ss.length;n++){var i=ss[n]+e;if(i in ts)return i}}));function rs(t,e){var n=e.data,i=t.data;if(!(o(n.staticStyle)&&o(n.style)&&o(i.staticStyle)&&o(i.style))){var s,a,h=e.elm,c=i.staticStyle,l=i.normalizedStyle||i.style||{},u=c||l,d=Qi(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?I({},d):d;var f=function(t,e){for(var n,i={},s=t;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(n=Zi(s.data))&&I(i,n);(n=Zi(t.data))&&I(i,n);for(var o=t;o=o.parent;)o.data&&(n=Zi(o.data))&&I(i,n);return i}(e);for(a in u)o(f[a])&&is(h,a,"");for(a in f)(s=f[a])!==u[a]&&is(h,a,null==s?"":s)}}var as={create:rs,update:rs},hs=/\s+/;function cs(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(hs).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" ".concat(t.getAttribute("class")||""," ");n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function ls(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(hs).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" ".concat(t.getAttribute("class")||""," "),i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function us(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&I(e,ds(t.name||"v")),I(e,t),e}return"string"==typeof t?ds(t):void 0}}var ds=x((function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}})),fs=V&&!J,ps="transition",gs="animation",ms="transition",vs="transitionend",_s="animation",ys="animationend";fs&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ms="WebkitTransition",vs="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(_s="WebkitAnimation",ys="webkitAnimationEnd"));var bs=V?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function ws(t){bs((function(){bs(t)}))}function xs(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),cs(t,e))}function ks(t,e){t._transitionClasses&&y(t._transitionClasses,e),ls(t,e)}function Ss(t,e,n){var i=Cs(t,e),s=i.type,o=i.timeout,r=i.propCount;if(!s)return n();var a=s===ps?vs:ys,h=0,c=function(){t.removeEventListener(a,l),n()},l=function(e){e.target===t&&++h>=r&&c()};setTimeout((function(){h<r&&c()}),o+1),t.addEventListener(a,l)}var Ts=/\b(transform|all)(,|$)/;function Cs(t,e){var n,i=window.getComputedStyle(t),s=(i[ms+"Delay"]||"").split(", "),o=(i[ms+"Duration"]||"").split(", "),r=Es(s,o),a=(i[_s+"Delay"]||"").split(", "),h=(i[_s+"Duration"]||"").split(", "),c=Es(a,h),l=0,u=0;return e===ps?r>0&&(n=ps,l=r,u=o.length):e===gs?c>0&&(n=gs,l=c,u=h.length):u=(n=(l=Math.max(r,c))>0?r>c?ps:gs:null)?n===ps?o.length:h.length:0,{type:n,timeout:l,propCount:u,hasTransform:n===ps&&Ts.test(i[ms+"Property"])}}function Es(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Os(e)+Os(t[n])})))}function Os(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function js(t,e){var n=t.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=us(t.data.transition);if(!o(i)&&!r(n._enterCb)&&1===n.nodeType){for(var s=i.css,a=i.type,h=i.enterClass,u=i.enterToClass,d=i.enterActiveClass,f=i.appearClass,p=i.appearToClass,g=i.appearActiveClass,v=i.beforeEnter,_=i.enter,y=i.afterEnter,b=i.enterCancelled,w=i.beforeAppear,x=i.appear,k=i.afterAppear,S=i.appearCancelled,T=i.duration,C=Ue,E=Ue.$vnode;E&&E.parent;)C=E.context,E=E.parent;var O=!C._isMounted||!t.isRootInsert;if(!O||x||""===x){var j=O&&f?f:h,I=O&&g?g:d,M=O&&p?p:u,P=O&&w||v,L=O&&c(x)?x:_,B=O&&k||y,D=O&&S||b,R=m(l(T)?T.enter:T),A=!1!==s&&!J,N=Ps(L),F=n._enterCb=$((function(){A&&(ks(n,M),ks(n,I)),F.cancelled?(A&&ks(n,j),D&&D(n)):B&&B(n),n._enterCb=null}));t.data.show||Xt(t,"insert",(function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),L&&L(n,F)})),P&&P(n),A&&(xs(n,j),xs(n,I),ws((function(){ks(n,j),F.cancelled||(xs(n,M),N||(Ms(R)?setTimeout(F,R):Ss(n,a,F)))}))),t.data.show&&(e&&e(),L&&L(n,F)),A||N||F()}}}function Is(t,e){var n=t.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=us(t.data.transition);if(o(i)||1!==n.nodeType)return e();if(!r(n._leaveCb)){var s=i.css,a=i.type,h=i.leaveClass,c=i.leaveToClass,u=i.leaveActiveClass,d=i.beforeLeave,f=i.leave,p=i.afterLeave,g=i.leaveCancelled,v=i.delayLeave,_=i.duration,y=!1!==s&&!J,b=Ps(f),w=m(l(_)?_.leave:_),x=n._leaveCb=$((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),y&&(ks(n,c),ks(n,u)),x.cancelled?(y&&ks(n,h),g&&g(n)):(e(),p&&p(n)),n._leaveCb=null}));v?v(k):k()}function k(){x.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),y&&(xs(n,h),xs(n,u),ws((function(){ks(n,h),x.cancelled||(xs(n,c),b||(Ms(w)?setTimeout(x,w):Ss(n,a,x)))}))),f&&f(n,x),y||b||x())}}function Ms(t){return"number"==typeof t&&!isNaN(t)}function Ps(t){if(o(t))return!1;var e=t.fns;return r(e)?Ps(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Ls(t,e){!0!==e.data.show&&js(e)}var Bs=function(t){var e,n,i={},c=t.modules,l=t.nodeOps;for(e=0;e<xi.length;++e)for(i[xi[e]]=[],n=0;n<c.length;++n)r(c[n][xi[e]])&&i[xi[e]].push(c[n][xi[e]]);function u(t){var e=l.parentNode(t);r(e)&&l.removeChild(e,t)}function d(t,e,n,s,o,h,c){if(r(t.elm)&&r(h)&&(t=h[c]=pt(t)),t.isRootInsert=!o,!function(t,e,n,s){var o=t.data;if(r(o)){var h=r(t.componentInstance)&&o.keepAlive;if(r(o=o.hook)&&r(o=o.init)&&o(t,!1),r(t.componentInstance))return f(t,e),p(n,t.elm,s),a(h)&&function(t,e,n,s){for(var o,a=t;a.componentInstance;)if(r(o=(a=a.componentInstance._vnode).data)&&r(o=o.transition)){for(o=0;o<i.activate.length;++o)i.activate[o](wi,a);e.push(a);break}p(n,t.elm,s)}(t,e,n,s),!0}}(t,e,n,s)){var u=t.data,d=t.children,m=t.tag;r(m)?(t.elm=t.ns?l.createElementNS(t.ns,m):l.createElement(m,t),y(t),g(t,d,e),r(u)&&_(t,e),p(n,t.elm,s)):a(t.isComment)?(t.elm=l.createComment(t.text),p(n,t.elm,s)):(t.elm=l.createTextNode(t.text),p(n,t.elm,s))}}function f(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(_(t,e),y(t)):(yi(t),e.push(t))}function p(t,e,n){r(t)&&(r(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function g(t,e,n){if(s(e))for(var i=0;i<e.length;++i)d(e[i],n,t.elm,null,!0,e,i);else h(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function _(t,n){for(var s=0;s<i.create.length;++s)i.create[s](wi,t);r(e=t.data.hook)&&(r(e.create)&&e.create(wi,t),r(e.insert)&&n.push(t))}function y(t){var e;if(r(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent;r(e=Ue)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function b(t,e,n,i,s,o){for(;i<=s;++i)d(n[i],o,t,e,!1,n,i)}function w(t){var e,n,s=t.data;if(r(s))for(r(e=s.hook)&&r(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function x(t,e,n){for(;e<=n;++e){var i=t[e];r(i)&&(r(i.tag)?(k(i),w(i)):u(i.elm))}}function k(t,e){if(r(e)||r(t.data)){var n,s=i.remove.length+1;for(r(e)?e.listeners+=s:e=function(t,e){function n(){0==--n.listeners&&u(t)}return n.listeners=e,n}(t.elm,s),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&k(n,e),n=0;n<i.remove.length;++n)i.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else u(t.elm)}function S(t,e,n,i){for(var s=n;s<i;s++){var o=e[s];if(r(o)&&ki(t,o))return s}}function T(t,e,n,s,h,c){if(t!==e){r(e.elm)&&r(s)&&(e=s[h]=pt(e));var u=e.elm=t.elm;if(a(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?O(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,p=e.data;r(p)&&r(f=p.hook)&&r(f=f.prepatch)&&f(t,e);var g=t.children,v=e.children;if(r(p)&&m(e)){for(f=0;f<i.update.length;++f)i.update[f](t,e);r(f=p.hook)&&r(f=f.update)&&f(t,e)}o(e.text)?r(g)&&r(v)?g!==v&&function(t,e,n,i,s){for(var a,h,c,u=0,f=0,p=e.length-1,g=e[0],m=e[p],v=n.length-1,_=n[0],y=n[v],w=!s;u<=p&&f<=v;)o(g)?g=e[++u]:o(m)?m=e[--p]:ki(g,_)?(T(g,_,i,n,f),g=e[++u],_=n[++f]):ki(m,y)?(T(m,y,i,n,v),m=e[--p],y=n[--v]):ki(g,y)?(T(g,y,i,n,v),w&&l.insertBefore(t,g.elm,l.nextSibling(m.elm)),g=e[++u],y=n[--v]):ki(m,_)?(T(m,_,i,n,f),w&&l.insertBefore(t,m.elm,g.elm),m=e[--p],_=n[++f]):(o(a)&&(a=Si(e,u,p)),o(h=r(_.key)?a[_.key]:S(_,e,u,p))?d(_,i,t,g.elm,!1,n,f):ki(c=e[h],_)?(T(c,_,i,n,f),e[h]=void 0,w&&l.insertBefore(t,c.elm,g.elm)):d(_,i,t,g.elm,!1,n,f),_=n[++f]);u>p?b(t,o(n[v+1])?null:n[v+1].elm,n,f,v,i):f>v&&x(e,u,p)}(u,g,v,n,c):r(v)?(r(t.text)&&l.setTextContent(u,""),b(u,null,v,0,v.length-1,n)):r(g)?x(g,0,g.length-1):r(t.text)&&l.setTextContent(u,""):t.text!==e.text&&l.setTextContent(u,e.text),r(p)&&r(f=p.hook)&&r(f=f.postpatch)&&f(t,e)}}}function C(t,e,n){if(a(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var E=v("attrs,class,staticClass,staticStyle,key");function O(t,e,n,i){var s,o=e.tag,h=e.data,c=e.children;if(i=i||h&&h.pre,e.elm=t,a(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(h)&&(r(s=h.hook)&&r(s=s.init)&&s(e,!0),r(s=e.componentInstance)))return f(e,n),!0;if(r(o)){if(r(c))if(t.hasChildNodes())if(r(s=h)&&r(s=s.domProps)&&r(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var l=!0,u=t.firstChild,d=0;d<c.length;d++){if(!u||!O(u,c[d],n,i)){l=!1;break}u=u.nextSibling}if(!l||u)return!1}else g(e,c,n);if(r(h)){var p=!1;for(var m in h)if(!E(m)){p=!0,_(e,n);break}!p&&h.class&&Fe(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!o(e)){var h,c=!1,u=[];if(o(t))c=!0,d(e,u);else{var f=r(t.nodeType);if(!f&&ki(t,e))T(t,e,u,null,null,s);else{if(f){if(1===t.nodeType&&t.hasAttribute(N)&&(t.removeAttribute(N),n=!0),a(n)&&O(t,e,u))return C(e,u,!0),t;h=t,t=new ut(l.tagName(h).toLowerCase(),{},[],void 0,h)}var p=t.elm,g=l.parentNode(p);if(d(e,u,p._leaveCb?null:g,l.nextSibling(p)),r(e.parent))for(var v=e.parent,_=m(e);v;){for(var y=0;y<i.destroy.length;++y)i.destroy[y](v);if(v.elm=e.elm,_){for(var b=0;b<i.create.length;++b)i.create[b](wi,v);var k=v.data.hook.insert;if(k.merged)for(var S=1;S<k.fns.length;S++)k.fns[S]()}else yi(v);v=v.parent}r(g)?x([t],0,0):r(t.tag)&&w(t)}}return C(e,u,c),e.elm}r(t)&&w(t)}}({nodeOps:vi,modules:[Di,Ai,Vi,Ji,as,V?{create:Ls,activate:Ls,remove:function(t,e){!0!==t.data.show?Is(t,e):e()}}:{}].concat(Mi)});J&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&Hs(t,"input")}));var Ds={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Xt(n,"postpatch",(function(){Ds.componentUpdated(t,e,n)})):Rs(t,e,n.context),t._vOptions=[].map.call(t.options,Ns)):("textarea"===n.tag||mi(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Fs),t.addEventListener("compositionend",zs),t.addEventListener("change",zs),J&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Rs(t,e,n.context);var i=t._vOptions,s=t._vOptions=[].map.call(t.options,Ns);s.some((function(t,e){return!D(t,i[e])}))&&(t.multiple?e.value.some((function(t){return As(t,s)})):e.value!==e.oldValue&&As(e.value,s))&&Hs(t,"change")}}};function Rs(t,e,n){$s(t,e),(U||K)&&setTimeout((function(){$s(t,e)}),0)}function $s(t,e,n){var i=e.value,s=t.multiple;if(!s||Array.isArray(i)){for(var o,r,a=0,h=t.options.length;a<h;a++)if(r=t.options[a],s)o=R(i,Ns(r))>-1,r.selected!==o&&(r.selected=o);else if(D(Ns(r),i))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}}function As(t,e){return e.every((function(e){return!D(e,t)}))}function Ns(t){return"_value"in t?t._value:t.value}function Fs(t){t.target.composing=!0}function zs(t){t.target.composing&&(t.target.composing=!1,Hs(t.target,"input"))}function Hs(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Ws(t){return!t.componentInstance||t.data&&t.data.transition?t:Ws(t.componentInstance._vnode)}var Xs={model:Ds,show:{bind:function(t,e,n){var i=e.value,s=(n=Ws(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&s?(n.data.show=!0,js(n,(function(){t.style.display=o}))):t.style.display=i?o:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=Ws(n)).data&&n.data.transition?(n.data.show=!0,i?js(n,(function(){t.style.display=t.__vOriginalDisplay})):Is(n,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,s){s||(t.style.display=t.__vOriginalDisplay)}}},Ys={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function qs(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?qs(we(e.children)):t}function Vs(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var s=n._parentListeners;for(var i in s)e[S(i)]=s[i];return e}function Gs(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Us=function(t){return t.tag||de(t)},Js=function(t){return"show"===t.name},Ks={name:"transition",props:Ys,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Us)).length){var i=this.mode,s=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return s;var o=qs(s);if(!o)return s;if(this._leaving)return Gs(t,s);var r="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?r+"comment":r+o.tag:h(o.key)?0===String(o.key).indexOf(r)?o.key:r+o.key:o.key;var a=(o.data||(o.data={})).transition=Vs(this),c=this._vnode,l=qs(c);if(o.data.directives&&o.data.directives.some(Js)&&(o.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,l)&&!de(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var u=l.data.transition=I({},a);if("out-in"===i)return this._leaving=!0,Xt(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Gs(t,s);if("in-out"===i){if(de(o))return c;var d,f=function(){d()};Xt(a,"afterEnter",f),Xt(a,"enterCancelled",f),Xt(u,"delayLeave",(function(t){d=t}))}}return s}}},Zs=I({tag:String,moveClass:String},Ys);function Qs(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function to(t){t.data.newPos=t.elm.getBoundingClientRect()}function eo(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,s=e.top-n.top;if(i||s){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate(".concat(i,"px,").concat(s,"px)"),o.transitionDuration="0s"}}delete Zs.mode;var no={Transition:Ks,TransitionGroup:{props:Zs,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var s=Je(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,s(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,s=this.$slots.default||[],o=this.children=[],r=Vs(this),a=0;a<s.length;a++)(l=s[a]).tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=r);if(i){var h=[],c=[];for(a=0;a<i.length;a++){var l;(l=i[a]).data.transition=r,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?h.push(l):c.push(l)}this.kept=t(e,null,h),this.removed=c}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Qs),t.forEach(to),t.forEach(eo),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,i=n.style;xs(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(vs,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(vs,t),n._moveCb=null,ks(n,e))})}})))},methods:{hasMove:function(t,e){if(!fs)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){ls(n,t)})),cs(n,e),n.style.display="none",this.$el.appendChild(n);var i=Cs(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};function io(t){const e=document.createElement("canvas"),n=e.getContext("2d"),{width:i,height:s,left:o,top:r}=t.getBoundingClientRect();e.style.width=i+"px",e.style.height=s+"px",e.style.userSelect="none";const a=window.devicePixelRatio;return e.width=Math.floor(i*a),e.height=Math.floor(s*a),t&&(t.style.position="relative",t.style.overflow="hidden",t.append(e)),{canvas:e,width:i,height:s,raw_width:e.width,raw_height:e.height,left:o,top:r,ctx:n,scale:a}}qn.config.mustUseProp=function(t,e,n){return"value"===n&&ti(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},qn.config.isReservedTag=pi,qn.config.isReservedAttr=Qn,qn.config.getTagNamespace=function(t){return fi(t)?"svg":"math"===t?"math":void 0},qn.config.isUnknownElement=function(t){if(!V)return!0;if(pi(t))return!1;if(t=t.toLowerCase(),null!=gi[t])return gi[t];var e=document.createElement(t);return t.indexOf("-")>-1?gi[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:gi[t]=/HTMLUnknownElement/.test(e.toString())},I(qn.options.directives,Xs),I(qn.options.components,no),qn.prototype.__patch__=V?Bs:P,qn.prototype.$mount=function(t,e){return function(t,e,n){var i;t.$el=e,t.$options.render||(t.$options.render=dt),tn(t,"beforeMount"),i=function(){t._update(t._render(),n)},new Xe(t,i,P,{before:function(){t._isMounted&&!t._isDestroyed&&tn(t,"beforeUpdate")}},!0),n=!1;var s=t._preWatchers;if(s)for(var o=0;o<s.length;o++)s[o].run();return null==t.$vnode&&(t._isMounted=!0,tn(t,"mounted")),t}(this,t=t&&V?function(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}(t):void 0,e)},V&&setTimeout((function(){H.devtools&&ot&&ot.emit("init",qn)}),0);const so=document.createElement("canvas");so.width=1,so.height=1;const oo=so.getContext("2d"),ro=window.devicePixelRatio;function ao(t){oo.clearRect(0,0,5,5),oo.save(),t(oo),oo.restore(),oo.clearRect(0,0,5,5)}function ho(t){matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`).addEventListener("change",(function(){console.log("devicePixelRatio changed: "+window.devicePixelRatio),t(window.devicePixelRatio),ho(t)}),{once:!0})}oo.scale(ro,ro);const{abs:co,cos:lo,sin:uo,acos:fo,atan2:po,sqrt:go,pow:mo}=Math;function vo(t){return t<0?-mo(-t,1/3):mo(t,1/3)}const _o=Math.PI,yo=2*_o,bo=_o/2,wo=Number.MAX_SAFE_INTEGER||9007199254740991,xo=Number.MIN_SAFE_INTEGER||-9007199254740991,ko={x:0,y:0,z:0},So={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){const n=e(t);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),go(i)},compute:function(t,e,n){if(0===t)return e[0].t=0,e[0];const i=e.length-1;if(1===t)return e[i].t=1,e[i];const s=1-t;let o=e;if(0===i)return e[0].t=t,e[0];if(1===i){const e={x:s*o[0].x+t*o[1].x,y:s*o[0].y+t*o[1].y,t};return n&&(e.z=s*o[0].z+t*o[1].z),e}if(i<4){let e,r,a,h=s*s,c=t*t,l=0;2===i?(o=[o[0],o[1],o[2],ko],e=h,r=s*t*2,a=c):3===i&&(e=h*s,r=h*t*3,a=s*c*3,l=t*c);const u={x:e*o[0].x+r*o[1].x+a*o[2].x+l*o[3].x,y:e*o[0].y+r*o[1].y+a*o[2].y+l*o[3].y,t};return n&&(u.z=e*o[0].z+r*o[1].z+a*o[2].z+l*o[3].z),u}const r=JSON.parse(JSON.stringify(e));for(;r.length>1;){for(let e=0;e<r.length-1;e++)r[e]={x:r[e].x+(r[e+1].x-r[e].x)*t,y:r[e].y+(r[e+1].y-r[e].y)*t},void 0!==r[e].z&&(r[e]=r[e].z+(r[e+1].z-r[e].z)*t);r.splice(r.length-1,1)}return r[0].t=t,r[0]},computeWithRatios:function(t,e,n,i){const s=1-t,o=n,r=e;let a,h=o[0],c=o[1],l=o[2],u=o[3];return h*=s,c*=t,2===r.length?(a=h+c,{x:(h*r[0].x+c*r[1].x)/a,y:(h*r[0].y+c*r[1].y)/a,z:!!i&&(h*r[0].z+c*r[1].z)/a,t}):(h*=s,c*=2*s,l*=t*t,3===r.length?(a=h+c+l,{x:(h*r[0].x+c*r[1].x+l*r[2].x)/a,y:(h*r[0].y+c*r[1].y+l*r[2].y)/a,z:!!i&&(h*r[0].z+c*r[1].z+l*r[2].z)/a,t}):(h*=s,c*=1.5*s,l*=3*s,u*=t*t*t,4===r.length?(a=h+c+l+u,{x:(h*r[0].x+c*r[1].x+l*r[2].x+u*r[3].x)/a,y:(h*r[0].y+c*r[1].y+l*r[2].y+u*r[3].y)/a,z:!!i&&(h*r[0].z+c*r[1].z+l*r[2].z+u*r[3].z)/a,t}):void 0))},derive:function(t,e){const n=[];for(let i=t,s=i.length,o=s-1;s>1;s--,o--){const t=[];for(let n,s=0;s<o;s++)n={x:o*(i[s+1].x-i[s].x),y:o*(i[s+1].y-i[s].y)},e&&(n.z=o*(i[s+1].z-i[s].z)),t.push(n);n.push(t),i=t}return n},between:function(t,e,n){return e<=t&&t<=n||So.approximately(t,e)||So.approximately(t,n)},approximately:function(t,e,n){return co(t-e)<=(n||1e-6)},length:function(t){const e=So.Tvalues.length;let n=0;for(let i,s=0;s<e;s++)i=.5*So.Tvalues[s]+.5,n+=So.Cvalues[s]*So.arcfn(i,t);return.5*n},map:function(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)},lerp:function(t,e,n){const i={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return void 0!==e.z&&void 0!==n.z&&(i.z=e.z+t*(n.z-e.z)),i},pointToString:function(t){let e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(So.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,o=n.x-t.x,r=n.y-t.y;return po(i*r-s*o,i*o+s*r)},round:function(t,e){const n=""+t,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(t,e){const n=t.x-e.x,i=t.y-e.y;return go(n*n+i*i)},closest:function(t,e){let n,i,s=mo(2,63);return t.forEach((function(t,o){i=So.dist(e,t),i<s&&(s=i,n=o)})),{mdist:s,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=mo(t,e)+mo(1-t,e);return co((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=mo(1-t,e);return n/(mo(t,e)+n)},lli8:function(t,e,n,i,s,o,r,a){const h=(t-n)*(o-a)-(e-i)*(s-r);return 0!=h&&{x:((t*i-e*n)*(s-r)-(t-n)*(s*a-o*r))/h,y:((t*i-e*n)*(o-a)-(e-i)*(s*a-o*r))/h}},lli4:function(t,e,n,i){const s=t.x,o=t.y,r=e.x,a=e.y,h=n.x,c=n.y,l=i.x,u=i.y;return So.lli8(s,o,r,a,h,c,l,u)},lli:function(t,e){return So.lli4(t,t.c,e,e.c)},makeline:function(t,e){const n=t.x,i=t.y,s=e.x,o=e.y,r=(s-n)/3,a=(o-i)/3;return new Bo(n,i,n+r,i+a,n+2*r,i+2*a,s,o)},findbbox:function(t){let e=wo,n=wo,i=xo,s=xo;return t.forEach((function(t){const o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),s<o.y.max&&(s=o.y.max)})),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(t,e,n,i,s){if(!So.bboxoverlap(e,i))return[];const o=[],r=[t.startcap,t.forward,t.back,t.endcap],a=[n.startcap,n.forward,n.back,n.endcap];return r.forEach((function(e){e.virtual||a.forEach((function(i){if(i.virtual)return;const r=e.intersects(i,s);r.length>0&&(r.c1=e,r.c2=i,r.s1=t,r.s2=n,o.push(r))}))})),o},makeshape:function(t,e,n){const i=e.points.length,s=t.points.length,o=So.makeline(e.points[i-1],t.points[0]),r=So.makeline(t.points[s-1],e.points[0]),a={startcap:o,forward:t,back:e,endcap:r,bbox:So.findbbox([o,t,e,r]),intersections:function(t){return So.shapeintersections(a,a.bbox,t,t.bbox,n)}};return a},getminmax:function(t,e,n){if(!n)return{min:0,max:0};let i,s,o=wo,r=xo;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let a=0,h=n.length;a<h;a++)i=n[a],s=t.get(i),s[e]<o&&(o=s[e]),s[e]>r&&(r=s[e]);return{min:o,mid:(o+r)/2,max:r,size:r-o}},align:function(t,e){const n=e.p1.x,i=e.p1.y,s=-po(e.p2.y-i,e.p2.x-n);return t.map((function(t){return{x:(t.x-n)*lo(s)-(t.y-i)*uo(s),y:(t.x-n)*uo(s)+(t.y-i)*lo(s)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=t.length-1,i=So.align(t,e),s=function(t){return 0<=t&&t<=1};if(2===n){const t=i[0].y,e=i[1].y,n=i[2].y,o=t-2*e+n;if(0!==o){const i=-go(e*e-t*n),r=-t+e;return[-(i+r)/o,-(-i+r)/o].filter(s)}return e!==n&&0===o?[(2*e-n)/(2*e-2*n)].filter(s):[]}const o=i[0].y,r=i[1].y,a=i[2].y;let h=3*r-o-3*a+i[3].y,c=3*o-6*r+3*a,l=-3*o+3*r,u=o;if(So.approximately(h,0)){if(So.approximately(c,0))return So.approximately(l,0)?[]:[-u/l].filter(s);const t=go(l*l-4*c*u),e=2*c;return[(t-l)/e,(-l-t)/e].filter(s)}c/=h,l/=h,u/=h;const d=(3*l-c*c)/3,f=d/3,p=(2*c*c*c-9*c*l+27*u)/27,g=p/2,m=g*g+f*f*f;let v,_,y,b,w;if(m<0){const t=-d/3,e=go(t*t*t),n=-p/(2*e),i=fo(n<-1?-1:n>1?1:n),o=2*vo(e);return y=o*lo(i/3)-c/3,b=o*lo((i+yo)/3)-c/3,w=o*lo((i+2*yo)/3)-c/3,[y,b,w].filter(s)}if(0===m)return v=g<0?vo(-g):-vo(g),y=2*v-c/3,b=-v-c/3,[y,b].filter(s);{const t=go(m);return v=vo(-g+t),_=vo(g+t),[v-_-c/3].filter(s)}},droots:function(t){if(3===t.length){const e=t[0],n=t[1],i=t[2],s=e-2*n+i;if(0!==s){const t=-go(n*n-e*i),o=-e+n;return[-(t+o)/s,-(-t+o)/s]}return n!==i&&0===s?[(2*n-i)/(2*(n-i))]:[]}if(2===t.length){const e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(t,e,n,i,s){let o,r,a,h,c=0,l=0;const u=So.compute(t,e),d=So.compute(t,n),f=u.x*u.x+u.y*u.y;if(i?(o=go(mo(u.y*d.z-d.y*u.z,2)+mo(u.z*d.x-d.z*u.x,2)+mo(u.x*d.y-d.x*u.y,2)),r=mo(f+u.z*u.z,1.5)):(o=u.x*d.y-u.y*d.x,r=mo(f,1.5)),0===o||0===r)return{k:0,r:0};if(c=o/r,l=r/o,!s){const s=So.curvature(t-.001,e,n,i,!0).k,o=So.curvature(t+.001,e,n,i,!0).k;h=(o-c+(c-s))/2,a=(co(o-c)+co(c-s))/2}return{k:c,r:l,dk:h,adk:a}},inflections:function(t){if(t.length<4)return[];const e=So.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=18*(-3*n+2*i+3*s-e[3].x*e[2].y),r=18*(3*n-i-3*s),a=18*(s-n);if(So.approximately(o,0)){if(!So.approximately(r,0)){let t=-a/r;if(0<=t&&t<=1)return[t]}return[]}const h=r*r-4*o*a,c=Math.sqrt(h),l=2*o;return So.approximately(l,0)?[]:[(c-r)/l,-(r+c)/l].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){const n=["x","y"],i=n.length;for(let s,o,r,a,h=0;h<i;h++)if(s=n[h],o=t[s].mid,r=e[s].mid,a=(t[s].size+e[s].size)/2,co(o-r)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){const i=t.bbox(),s=e.bbox(),o=1e5,r=n||.5;if(i.x.size+i.y.size<r&&s.x.size+s.y.size<r)return[(o*(t._t1+t._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let a=t.split(.5),h=e.split(.5),c=[{left:a.left,right:h.left},{left:a.left,right:h.right},{left:a.right,right:h.right},{left:a.right,right:h.left}];c=c.filter((function(t){return So.bboxoverlap(t.left.bbox(),t.right.bbox())}));let l=[];return 0===c.length||(c.forEach((function(t){l=l.concat(So.pairiteration(t.left,t.right,r))})),l=l.filter((function(t,e){return l.indexOf(t)===e}))),l},getccenter:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,o=n.x-e.x,r=n.y-e.y,a=i*lo(bo)-s*uo(bo),h=i*uo(bo)+s*lo(bo),c=o*lo(bo)-r*uo(bo),l=o*uo(bo)+r*lo(bo),u=(t.x+e.x)/2,d=(t.y+e.y)/2,f=(e.x+n.x)/2,p=(e.y+n.y)/2,g=u+a,m=d+h,v=f+c,_=p+l,y=So.lli8(u,d,g,m,f,p,v,_),b=So.dist(y,t);let w,x=po(t.y-y.y,t.x-y.x),k=po(e.y-y.y,e.x-y.x),S=po(n.y-y.y,n.x-y.x);return x<S?((x>k||k>S)&&(x+=yo),x>S&&(w=S,S=x,x=w)):S<k&&k<x?(w=S,S=x,x=w):S+=yo,y.s=x,y.e=S,y.r=b,y},numberSort:function(t,e){return t-e}};class To{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return So.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var e=t[0].bbox(),n=1;n<t.length;n++)So.expandbox(e,t[n].bbox());return e}offset(t){const e=[];return this.curves.forEach((function(n){e.push(...n.offset(t))})),new To(e)}}const{abs:Co,min:Eo,max:Oo,cos:jo,sin:Io,acos:Mo,sqrt:Po}=Math,Lo=Math.PI;class Bo{constructor(t){let e=t&&t.forEach?t:Array.from(arguments).slice(),n=!1;if("object"==typeof e[0]){n=e.length;const t=[];e.forEach((function(e){["x","y","z"].forEach((function(n){void 0!==e[n]&&t.push(e[n])}))})),e=t}let i=!1;const s=e.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!i&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z,r=this.points=[];for(let t=0,n=o?3:2;t<s;t+=n){var a={x:e[t],y:e[t+1]};o&&(a.z=e[t+2]),r.push(a)}const h=this.order=r.length-1,c=this.dims=["x","y"];o&&c.push("z"),this.dimlen=c.length;const l=So.align(r,{p1:r[0],p2:r[h]});this._linear=!l.some((t=>Co(t.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,e,n,i){if(void 0===i&&(i=.5),0===i)return new Bo(e,e,n);if(1===i)return new Bo(t,e,e);const s=Bo.getABC(2,t,e,n,i);return new Bo(t,s.A,n)}static cubicFromPoints(t,e,n,i,s){void 0===i&&(i=.5);const o=Bo.getABC(3,t,e,n,i);void 0===s&&(s=So.dist(e,o.C));const r=s*(1-i)/i,a=So.dist(t,n),h=(n.x-t.x)/a,c=(n.y-t.y)/a,l=s*h,u=s*c,d=r*h,f=r*c,p=e.x-l,g=e.y-u,m=e.x+d,v=e.y+f,_=o.A,y=_.x+(p-_.x)/(1-i),b=_.y+(g-_.y)/(1-i),w=_.x+(m-_.x)/i,x=_.y+(v-_.y)/i,k={x:t.x+(y-t.x)/i,y:t.y+(b-t.y)/i},S={x:n.x+(w-n.x)/(1-i),y:n.y+(x-n.y)/(1-i)};return new Bo(t,k,S,n)}static getUtils(){return So}getUtils(){return Bo.getUtils()}static get PolyBezier(){return To}valueOf(){return this.toString()}toString(){return So.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,e=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let n=1,i=t.length;n<i;n++)e.push(t[n].x),e.push(t[n].y);return e.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=So.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,e=So.angle(t[0],t[this.order],t[1]);this.clockwise=e>0}length(){return So.length(this.derivative.bind(this))}static getABC(t=2,e,n,i,s=.5){const o=So.projectionratio(s,t),r=1-o,a={x:o*e.x+r*i.x,y:o*e.y+r*i.y},h=So.abcratio(s,t);return{A:{x:n.x+(n.x-a.x)/h,y:n.y+(n.y-a.y)/h},B:n,C:a,S:e,E:i}}getABC(t,e){e=e||this.get(t);let n=this.points[0],i=this.points[this.order];return Bo.getABC(this.order,n,e,i,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(let e,n,i=0;i<t;i++)n=i/(t-1),e=this.compute(n),e.t=n,this._lut.push(e);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),s=[];for(let t,o=0,r=0;o<i.length;o++)t=i[o],So.dist(t,e)<n&&(s.push(t),r+=o/i.length);return!!s.length&&(t/=s.length)}project(t){const e=this.getLUT(),n=e.length-1,i=So.closest(e,t),s=i.mpos,o=(s-1)/n,r=(s+1)/n,a=.1/n;let h,c,l=i.mdist,u=o,d=u;for(l+=1;u<r+a;u+=a)h=this.compute(u),c=So.dist(t,h),c<l&&(l=c,d=u);return d=d<0?0:d>1?1:d,h=this.compute(d),h.t=d,h.d=l,h}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?So.computeWithRatios(t,this.points,this.ratios,this._3d):So.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,e=[t[0]],n=t.length;for(let i,s,o=1;o<n;o++)i=t[o],s=t[o-1],e[o]={x:(n-o)/n*i.x+o/n*s.x,y:(n-o)/n*i.y+o/n*s.y};return e[n]=t[n-1],new Bo(e)}derivative(t){return So.compute(t,this.dpoints[0],this._3d)}dderivative(t){return So.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new Bo(So.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return So.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return So.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const e=this.derivative(t),n=Po(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}}__normal3(t){const e=this.derivative(t),n=this.derivative(t+.01),i=Po(e.x*e.x+e.y*e.y+e.z*e.z),s=Po(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=i,e.y/=i,e.z/=i,n.x/=s,n.y/=s,n.z/=s;const o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},r=Po(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=r,o.y/=r,o.z/=r;const a=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z}}hull(t){let e=this.points,n=[],i=[],s=0;for(i[s++]=e[0],i[s++]=e[1],i[s++]=e[2],3===this.order&&(i[s++]=e[3]);e.length>1;){n=[];for(let o,r=0,a=e.length-1;r<a;r++)o=So.lerp(t,e[r],e[r+1]),i[s++]=o,n.push(o);e=n}return i}split(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;const n=this.hull(t),i={left:2===this.order?new Bo([n[0],n[3],n[5]]):new Bo([n[0],n[4],n[7],n[9]]),right:2===this.order?new Bo([n[5],n[4],n[2]]):new Bo([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=So.map(0,0,1,this._t1,this._t2),i.left._t2=So.map(t,0,1,this._t1,this._t2),i.right._t1=So.map(t,0,1,this._t1,this._t2),i.right._t2=So.map(1,0,1,this._t1,this._t2),e?(e=So.map(e,t,1,0,1),i.right.split(e).left):i}extrema(){const t={};let e=[];return this.dims.forEach(function(n){let i=function(t){return t[n]},s=this.dpoints[0].map(i);t[n]=So.droots(s),3===this.order&&(s=this.dpoints[1].map(i),t[n]=t[n].concat(So.droots(s))),t[n]=t[n].filter((function(t){return t>=0&&t<=1})),e=e.concat(t[n].sort(So.numberSort))}.bind(this)),t.values=e.sort(So.numberSort).filter((function(t,n){return e.indexOf(t)===n})),t}bbox(){const t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=So.getminmax(this,n,t[n])}.bind(this)),e}overlaps(t){const e=this.bbox(),n=t.bbox();return So.bboxoverlap(e,n)}offset(t,e){if(void 0!==e){const n=this.get(t),i=this.normal(t),s={c:n,n:i,x:n.x+i.x*e,y:n.y+i.y*e};return this._3d&&(s.z=n.z+i.z*e),s}if(this._linear){const e=this.normal(0),n=this.points.map((function(n){const i={x:n.x+t*e.x,y:n.y+t*e.y};return n.z&&e.z&&(i.z=n.z+t*e.z),i}));return[new Bo(n)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}simple(){if(3===this.order){const t=So.angle(this.points[0],this.points[3],this.points[1]),e=So.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&e<0||t<0&&e>0)return!1}const t=this.normal(0),e=this.normal(1);let n=t.x*e.x+t.y*e.y;return this._3d&&(n+=t.z*e.z),Co(Mo(n))<Lo/3}reduce(){let t,e,n=0,i=0,s=.01,o=[],r=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],t=1;t<a.length;t++)i=a[t],e=this.split(n,i),e._t1=n,e._t2=i,o.push(e),n=i;return o.forEach((function(t){for(n=0,i=0;i<=1;)for(i=n+s;i<=1.01;i+=s)if(e=t.split(n,i),!e.simple()){if(i-=s,Co(n-i)<s)return[];e=t.split(n,i),e._t1=So.map(n,0,1,t._t1,t._t2),e._t2=So.map(i,0,1,t._t1,t._t2),r.push(e),n=i;break}n<1&&(e=t.split(n,1),e._t1=So.map(n,0,1,t._t1,t._t2),e._t2=t._t2,r.push(e))})),r}scale(t){const e=this.order;let n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);const i=this.clockwise,s=n?n(0):t,o=n?n(1):t,r=[this.offset(0,10),this.offset(1,10)],a=this.points,h=[],c=So.lli4(r[0],r[0].c,r[1],r[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const n=h[t*e]=So.copy(a[t*e]);n.x+=(t?o:s)*r[t].n.x,n.y+=(t?o:s)*r[t].n.y})),n?([0,1].forEach((function(s){if(2!==e||!s){var o=a[s+1],r={x:o.x-c.x,y:o.y-c.y},l=n?n((s+1)/e):t;n&&!i&&(l=-l);var u=Po(r.x*r.x+r.y*r.y);r.x/=u,r.y/=u,h[s+1]={x:o.x+l*r.x,y:o.y+l*r.y}}})),new Bo(h)):([0,1].forEach((t=>{if(2===e&&t)return;const n=h[t*e],i=this.derivative(t),s={x:n.x+i.x,y:n.y+i.y};h[t+1]=So.lli4(n,s,c,a[t+1])})),new Bo(h))}outline(t,e,n,i){e=void 0===e?t:e;const s=this.reduce(),o=s.length,r=[];let a,h=[],c=0,l=this.length();const u=void 0!==n&&void 0!==i;function d(t,e,n,i,s){return function(o){const r=i/n,a=(i+s)/n,h=e-t;return So.map(o,0,1,t+r*h,t+a*h)}}s.forEach((function(s){const o=s.length();u?(r.push(s.scale(d(t,n,l,c,o))),h.push(s.scale(d(-e,-i,l,c,o)))):(r.push(s.scale(t)),h.push(s.scale(-e))),c+=o})),h=h.map((function(t){return a=t.points,a[3]?t.points=[a[3],a[2],a[1],a[0]]:t.points=[a[2],a[1],a[0]],t})).reverse();const f=r[0].points[0],p=r[o-1].points[r[o-1].points.length-1],g=h[o-1].points[h[o-1].points.length-1],m=h[0].points[0],v=So.makeline(g,f),_=So.makeline(p,m),y=[v].concat(r).concat([_]).concat(h);return y.length,new To(y)}outlineshapes(t,e,n){e=e||t;const i=this.outline(t,e).curves,s=[];for(let t=1,e=i.length;t<e/2;t++){const o=So.makeshape(i[t],i[e-t],n);o.startcap.virtual=t>1,o.endcap.virtual=t<e/2-1,s.push(o)}return s}intersects(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof Bo&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)}lineIntersects(t){const e=Eo(t.p1.x,t.p2.x),n=Eo(t.p1.y,t.p2.y),i=Oo(t.p1.x,t.p2.x),s=Oo(t.p1.y,t.p2.y);return So.roots(this.points,t).filter((t=>{var o=this.get(t);return So.between(o.x,e,i)&&So.between(o.y,n,s)}))}selfintersects(t){const e=this.reduce(),n=e.length-2,i=[];for(let s,o,r,a=0;a<n;a++)o=e.slice(a,a+1),r=e.slice(a+2),s=this.curveintersects(o,r,t),i.push(...s);return i}curveintersects(t,e,n){const i=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&i.push({left:t,right:e})}))}));let s=[];return i.forEach((function(t){const e=So.pairiteration(t.left,t.right,n);e.length>0&&(s=s.concat(e))})),s}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,e,n,i){const s=(i-n)/4,o=this.get(n+s),r=this.get(i-s),a=So.dist(t,e),h=So.dist(t,o),c=So.dist(t,r);return Co(h-a)+Co(c-a)}_iterate(t,e){let n,i=0,s=1;do{n=0,s=1;let o,r,a,h,c,l=this.get(i),u=!1,d=!1,f=s,p=1,g=0;do{if(d=u,h=a,f=(i+s)/2,g++,o=this.get(f),r=this.get(s),a=So.getccenter(l,o,r),a.interval={start:i,end:s},u=this._error(a,l,i,s)<=t,c=d&&!u,c||(p=s),u){if(s>=1){if(a.interval.end=p=1,h=a,s>1){let t={x:a.x+a.r*jo(a.e),y:a.y+a.r*Io(a.e)};a.e+=So.angle({x:a.x,y:a.y},t,this.get(1))}break}s+=(s-i)/2}else s=f}while(!c&&n++<100);if(n>=100)break;h=h||a,e.push(h),i=p}while(s<1);return e}}const Do={RIGHT:0,BOTTOM:1,LEFT:2,TOP:3,SELF:100},Ro={DEFAULT:"DEFAULT",LINKING:"LINKING"};function $o(t){if(0===t.length)return{width:1,height:1,x:0,y:0};let e=1/0,n=1/0,i=-1/0,s=-1/0;for(let o in t){const r=t[o];r[0]<e&&(e=r[0]),r[0]>i&&(i=r[0]),r[1]<n&&(n=r[1]),r[1]>s&&(s=r[1])}return{width:Math.max(i-e,10),height:Math.max(s-n,10),x:e,y:n}}function Ao(t){return t*t}function No(t,e){return Ao(t[0]-e[0])+Ao(t[1]-e[1])}function Fo(t,e,n){const i=No(e,n);if(0===i)return No(t,e);let s=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/i;return s=Math.max(0,Math.min(1,s)),No(t,[e[0]+s*(n[0]-e[0]),e[1]+s*(n[1]-e[1])])}function zo(t,e){const n={fromDir:null,fromP:null,toDir:null,toP:null,distMin:1/0};return Object.keys(t).forEach((i=>{if(+i===Do.SELF)return;let s=t[i];Object.keys(e).forEach((t=>{if(+t===Do.SELF)return;let o=e[t];const r=No(s,o);r<n.distMin&&Object.assign(n,{distMin:r,fromDir:+i,fromP:s,toDir:+t,toP:o})}))})),n}function Ho(t,e,n,i){return e===Do.TOP?[t[0],t[1]-i]:e===Do.BOTTOM?[t[0],t[1]+i]:e===Do.LEFT?[t[0]-n,t[1]]:e===Do.RIGHT?[t[0]+n,t[1]]:void 0}function Wo(t,e,n=Do.TOP,i=Do.TOP,s=0,o=0){const r=Math.max(Math.abs((t[0]-e[0])/2),s),a=Math.max(Math.abs((t[1]-e[1])/2),o),h=Ho(t,n,r,a),c=Ho(e,i,r,a),l=[Do.TOP,Do.LEFT].includes(i)?-5:5,u=[Do.TOP,Do.BOTTOM].includes(i);return[...h,...c,u?e[0]:e[0]+l,u?e[1]+l:e[1]]}function Xo(t,e,n,i,s,o,r,a,h){var c=Math.pow(1-t,2)*(i-e)+2*t*(1-t)*(o-i)+t*t*(a-o),l=Math.pow(1-t,2)*(s-n)+2*t*(1-t)*(r-s)+t*t*(h-r);return-Math.atan2(c,l)+.5*Math.PI}function Yo(t,e,n=Do.TOP,i=Do.TOP,s=10,o=10,r){const a=Math.abs(n-i),h=n===Do.TOP||n===Do.BOTTOM;let c=[];switch(a){case 0:if(n===Do.TOP){const n=Math.min(t[1],e[1])-o;c.push([t[0],n]),c.push([e[0],n])}if(n===Do.BOTTOM){const n=Math.max(t[1],e[1])+o;c.push([t[0],n]),c.push([e[0],n])}if(n===Do.LEFT){const n=Math.min(t[0],e[0])-s;c.push([n,t[1]]),c.push([n,e[1]])}if(n===Do.RIGHT){const n=Math.max(t[0],e[0])+s;c.push([n,t[1]]),c.push([n,e[1]])}break;case 1:case 3:if(r)h?(c.push([t[0],t[1]+o]),c.push([e[0]+s,t[1]+o]),c.push([e[0]+s,e[1]])):(c.push([t[0]+s,t[1]]),c.push([t[0]+s,e[1]+o]),c.push([e[0],e[1]+o]));else{const n=h?[t[0],e[1]]:[e[0],t[1]];c.push(n)}break;case 2:const i=[(t[0]-e[0])/2+e[0],(t[1]-e[1])/2+e[1]];h?(c.push([t[0],i[1]]),c.push([e[0],i[1]])):(c.push([i[0],t[1]]),c.push([i[0],e[1]]))}return c.unshift(t),c.push(e),c}function qo(t,e){return[t[0]-e[0],t[1]-e[1]]}function Vo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Go(t,e){return[t[0]*e,t[1]*e]}function Uo(t,e){return t[0]!=t[2]&&t[1]!=t[3]&&e[0]!=e[2]&&e[1]!=e[3]&&!(t[2]<=e[0]||t[3]<=e[1]||t[0]>=e[2]||t[1]>=e[3])}const Jo=Symbol("ishit"),Ko=Symbol("isInViewBox");class Zo extends EventTarget{constructor(t={}){super(),Object.assign(this,t),this.visible=!0,this._belongs=void 0,this[Jo]=!1,this.borderWidth=t.borderWidth||0,this.borderColor=t.borderColor||"transparent",this.backgroundColor=t.backgroundColor||"transparent",this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur||5,this.shadowOffsetX=t.shadowOffsetX||0,this.shadowOffsetY=t.shadowOffsetY||0,this.opacity=t.opacity||1}get _isTargeting(){return this===(this._jflow._target.instance||this._jflow._target.link)}get _isMoving(){return this===this._jflow._getMovingTarget()&&this._jflow._target.status.movingState}get _isHit(){return this[Jo]}get _jflow(){return"jflow"===this._belongs.uniqueName?this._belongs:this._belongs._jflow}set _isHit(t){this[Jo]!==t&&this.dispatchEvent(new CustomEvent(t?"mouseenter":"mouseleave",{detail:{instance:this,jflow:this._jflow}})),this[Jo]=t}get isInViewBox(){return this[Ko]}set _isInViewBox(t){t!==this[Ko]&&(t?this.onEnterViewbox():this.onLeaveViewbox()),this[Ko]=t}onEnterViewbox(){}onLeaveViewbox(){}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e])}))}render(t){throw"require render implement"}isHit(t){throw"require isHit implement"}getBoundingRect(){throw"require getBoundingRect implement"}calculateIntersection(){throw"require calculateIntersection implement"}getIntersectionsInFourDimension(){throw"require getIntersectionsInFourDimension implement"}getCenter(){return this.anchor}getBoundingDimension(){const t=instance.getBoundingRect();let e=1/0,n=-1/0,i=1/0,s=-1/0;return t.forEach((t=>{n=Math.max(n,t[1]),e=Math.min(e,t[1]),s=Math.max(s,t[0]),i=Math.min(i,t[0])})),{height:n-e,width:s-i}}bubbleEvent(t){t.detail.currentTarget=this,this.dispatchEvent(t),t.detail.bubbles&&(this._belongs.bubbleEvent?this._belongs.bubbleEvent(t):this._belongs.dispatchEvent(t))}calculateToRealWorld(t){return this._belongs&&this._belongs.calculateToRealWorld?this._belongs.calculateToRealWorld(t):t}calculateToRealWorldWithScalar(t){return this._jflow.scale*t}recalculateUp(){this.belongs&&this.belongs.recalculateUp()}destroy(){}}const Qo=Zo,tr=class extends Qo{constructor(t={}){super(t),this._rawConfigs=t,this.anchor=t.anchor||[0,0],this.absolutePosition=t.absolutePosition}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])}))}setAnchorX(t){this.anchor[0]=t}setAnchorY(t){this.anchor[1]=t}setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e}clone(){const t=new(0,this.constructor)(this._rawConfigs);return t.visible=this.visible,t}},er=class extends tr{constructor(t){super(t)}render(t){}isHit(t){return!1}calculateIntersection(t){return this.anchor}getBoundingRect(){const[t,e]=this.anchor;return[t,e,t,e]}getBoundingDimension(){return{width:0,height:0}}getIntersectionsInFourDimension(){const[t,e]=this.anchor;return{[Do.RIGHT]:[t+1,e],[Do.LEFT]:[t-1,e],[Do.BOTTOM]:[t,e+1],[Do.TOP]:[t,e-1]}}};class nr{constructor(){this._map=new WeakMap}get(t){return this._map.get(t)}set(t){const e={layoutNode:void 0,jflowNode:void 0,jflowlinks:[],jflowFromLinks:[],jflowToLinks:[]};return this._map.set(t,e),e}has(t){return this._map.has(t)}delete(t){this._map.delete(t)}clear(){this._map.clear()}}const ir={initNodeWeakMap(){this.source_Layout_Render_NodeMap=new nr},getRenderNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.jflowNode},getLayoutNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.layoutNode},getSourceRenderMeta(t){return this.source_Layout_Render_NodeMap.get(t)},_getMap(t){const e=this.source_Layout_Render_NodeMap;let n;return n=e.has(t)?e.get(t):e.set(t),n},setLayoutNodeBySource(t,e){this._getMap(t).layoutNode=e},setRenderNodeBySource(t,e){this._getMap(t).jflowNode=e},addLinkNodeBySource(t,e,n){let i=this._getMap(t);i.jflowFromLinks.push(n),i=this._getMap(e),i.jflowToLinks.push(n)},removeLinkNodeBySource(t,e,n){let i=this._getMap(t),s=i.jflowFromLinks.findIndex((t=>t===n));-1!==s&&i.jflowFromLinks.splice(s,1),i=this._getMap(e),s=i.jflowToLinks.findIndex((t=>t===n)),-1!==s&&i.jflowToLinks.splice(s,1)}},sr=class extends Array{constructor(){super(),this._currentHit=null}render(t,e){let n;this.forEach((i=>{i._isMoving?n=i:!i.visible||e&&!e(i)||(t.save(),i.render(t),t.restore())})),n&&(t.save(),n.render(t),t.restore())}checkHit(t,e,n){let i=this.length-1;for(;i>=0;){const s=this[i];if(s.visible&&!s.ignoreHit){if(e&&e(s)){i--;continue}if(n&&!n(s)){i--;continue}const o=s.isHit(t,e);if(s._isHit=!!o,o)return this._currentHit!==s&&(this._currentHit&&(this._currentHit._isHit=!1),this._currentHit=s),"boolean"!=typeof o?o:s}i--}return this._currentHit=null,null}getBoundingRectPoints(){const t=[];return this.forEach((e=>{if(e.visible&&!e.absolutePosition){const n=e.getBoundingRect();t.push([n[0],n[1]]),t.push([n[2],n[3]])}})),t}getAnchorRectPoints(){const t=[];return this.forEach((e=>{e.visible&&!e.absolutePosition&&t.push(e.anchor)})),t}},or={instances:[],links:[],_stack:null,_linkStack:null,initStack({data:t}){this._stack=new sr,this._linkStack=new sr,t&&(this.instances=t.instances,this.links=t.links,this.instances.forEach((t=>{this._stack.push(t),t._belongs=this})),this.links.forEach((t=>{this._linkStack.push(t),t._belongs=this})))},addToStack(t){t._belongs=this,this._stack.push(t)},replaceFromStack(t,e){const n=this._stack.findIndex((e=>e===t));this._stack.splice(n,1,e),t._belongs=null,e._belongs=this},addToLinkStack(t){t._belongs=this,this._linkStack.push(t)},removeFromStack(t){const e=this._stack.findIndex((e=>e===t));-1!==e&&this._stack.splice(e,1)},removeFromLinkStack(t){const e=this._linkStack.findIndex((e=>e===t));-1!==e&&this._linkStack.splice(e,1)},emptyLink(){this._linkStack=new sr},resetChildrenPosition(){this._stack.forEach((t=>{t.anchor=[0,0]}))},addInstanceToLink(t,e){this.addToStack(e);const{from:n,to:i}=t,s=this._linkStack.findIndex((e=>e===t)),o=t.__proto__.constructor,r=new o({from:n,to:e});r._belongs=this;const a=new o({from:e,to:i});a._belongs=this,this._linkStack.splice(s,1,r,a)},interateNodeStack(t){this._stack.forEach((e=>{t(e)}))}},rr=or,ar={_layout:null,initLayout(t){this._layout=t.layout},recalculateUp(){let t=!0;if(this.getBoundingDimension){const{width:e,height:n}=this.getBoundingDimension();this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const{width:i,height:s}=this.getBoundingDimension();t=e!==i||n!==s}else this.reflow();this._belongs&&t&&this._belongs.recalculateUp()},recalculate(){this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect()},staticCheck(t){return!!this._layout&&this._layout.staticCheck(t,this)},reflow(){this._layout&&this._layout.reflow(this)}},hr={_message:null,sendMessage(t){this._message=t},consumeMessage(){const t=this._message;return this._message=null,t},readMessage(){return this._message}},cr={initAnime(){this.anime_queue=[],this.__animeClock__=void 0},requestJFlowAnime(t){const e=this.enqueueAnime(t);return this._runAnime(),e},enqueueAnime(t){const e={start:void 0,callback:t,cancel:()=>{this._cancelAnime(e),this._render()}};return this.anime_queue.push(e),e},_cancelAnime(t){const e=this.anime_queue.findIndex((e=>e===t));~e&&this.anime_queue.splice(e,1)},runAnime(){this._runAnime()},_runAnime(){this.anime_queue.length&&this.scheduleRender((t=>{this.__animeClock__!==t&&this._runAnime(),this.__animeClock__=t}))},runAnimeFrame(){this.anime_queue.forEach((t=>{const e=Date.now();t.start||(t.start=e);const n=e-t.start;t.callback(n)}))}},lr={captureMap(t,{padding:e=0,placement:n="normal"}){this._getBoundingGroupRect();const{width:i,height:s,x:o,y:r}=this.bounding_box;if(!this.miniMap){this.miniMap=io(t);const{width:e,height:n,raw_width:i,raw_height:s}=this.miniMap;this.addEventListener("zoompan",(()=>{this._renderMap&&this._renderMap()}));let o=!1;this.miniMap.canvas.addEventListener("pointerdown",(t=>{let{offsetX:e,offsetY:n,deltaX:i,deltaY:s}=t;o=!0,this._onMoveMap&&this._onMoveMap(e,n)})),this.miniMap.canvas.addEventListener("pointermove",(t=>{let{offsetX:i,offsetY:s,deltaX:r,deltaY:a}=t;o&&this._onMoveMap&&this._onMoveMap(i,s),(s<5||i<5||i>e-5||s>n-5)&&(o=!1)})),this.miniMap.canvas.addEventListener("pointerup",(()=>{o=!1}));const r=document.createElement("canvas");r.width=i,r.height=s,this.cacheMinimapCtx=r.getContext("2d")}const{width:a,height:h,raw_width:c,raw_height:l,left:u,top:d,scale:f,ctx:p}=this.miniMap,g=2*e,m=e,v=(a-g)/i,_=(h-g)/s,y=Math.min(v,_);let b=0,w=0;"center"===n?(w=(h-s*y)/2-r*y,b=(a-i*y)/2-o*y):v<_?(w=(h-s*y)/2-r*y,b=m):(b=(a-i*y)/2-o*y,w=m);const x=this.cacheMinimapCtx;x.setTransform(),x.clearRect(0,0,c,l),x.scale(f,f),x.transform(y,0,0,y,b,w);const k=[0,0,0,0];this.NodeRenderTop?(this._linkStack.render(x,(t=>(t.isInViewBox(k),!0))),this._stack.render(x)):(this._stack.render(x),this._linkStack.render(x,(t=>(t.isInViewBox(k),!0))));const S=x.getImageData(0,0,c,l);this._renderMap=()=>{p.save(),p.setTransform(),p.clearRect(0,0,c,l),p.scale(f,f),p.putImageData(S,0,0),p.transform(y,0,0,y,b,w);const[t,e,n,i]=this._getViewBox();p.beginPath(),p.rect(t,e,n-t,i-e),p.setTransform(),p.rect(0,0,c,l),p.clip("evenodd"),p.fillStyle="rgba(0,0,0,0.4)",p.fillRect(0,0,c,l),p.restore()},this._renderMap(),this._onMoveMap=(t,e)=>{const[n,i,s,o]=this._getViewBox(),r=[((s-n)/2+n)*y+b,((o-i)/2+i)*y+w];this._recalculatePosition((r[0]-t)/y*this.scale,(r[1]-e)/y*this.scale),this._render(),this._renderMap()}}};class ur{constructor(t,e={}){this.anchor=[0,0],this.width=e.barWidth||4,this.height=e.barWidth||4,this.barMarginX=0,this.barMarginY=0,this.dir=t,this.plainColor=e.plainColor||"rgba(0, 0, 0, 0.15)",this.focusColor=e.focusColor||"rgba(0, 0, 0, 0.25)",this.isFocus=!1}render(t){const[e,n]=this.anchor;if(t.save(),t.beginPath(),"x"===this.dir){const i=this.height/2,s=n+i,o=n+this.height,r=e+this.width-2*this.barMarginX-i,a=e+this.barMarginX+i;t.moveTo(a,o),t.arc(a,s,i,Math.PI/2,Math.PI/2*3),t.lineTo(r,n),t.arc(r,s,i,-Math.PI/2,Math.PI/2),t.closePath()}else{const i=this.width/2,s=n+this.barMarginY+i,o=n+this.height-2*this.barMarginY-i,r=e+i,a=e+this.width;t.moveTo(e,s),t.arc(r,s,i,-Math.PI,0),t.lineTo(a,o),t.arc(r,o,i,0,Math.PI),t.closePath()}t.fillStyle=this.isFocus?this.focusColor:this.plainColor,t.fill(),t.restore()}isHit(t){const e=this.anchor,n=this.width,i=this.height;return t[0]>e[0]-5&&t[0]<e[0]+n+5&&t[1]>e[1]-5&&t[1]<e[1]+i+5}}const dr={initScrollBar(t={}){const{barColor:e,barFocusColor:n,barMarginX:i,barMarginY:s,barWidth:o}=t;this._scrollbarEnable=!0,this._scrollbarX=new ur("x",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarX.barMarginX=i||5,this._scrollbarY=new ur("y",{plainColor:e,focusColor:n,barWidth:o}),this._scrollbarY.barMarginY=s||5,this._scrollBarStatus={dragging:!1,target:null,xscale:void 0,yscale:void 0,barInitX:0,barInitY:0},this.addEventListener("zoompan",(()=>{this.scrollBarOnPanAndZoom()})),this.scrollBarOnPanAndZoom(),this.canvas.addEventListener("pointerdown",(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onScrollbarPressStart(e,n,i,s)}))},checkScrollDragging(){return this._scrollBarStatus&&this._scrollBarStatus.dragging},onScrollbarPressStart(t,e,n,i){this._scrollbarX.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarX,barStartX:this._scrollbarX.anchor[0],barInitX:n}),this._scrollbarY.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarY,barStartY:this._scrollbarY.anchor[1],barInitY:i});const s=(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onDraggingScrollbar(e,n,i,s)}).bind(this);document.addEventListener("pointermove",s);const o=(t=>{Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0}),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",o),this.canvas.removeEventListener("pointerup",o)}).bind(this);this.canvas.addEventListener("pointerup",o,{once:!0}),document.addEventListener("pointerup",o,{once:!0})},onDraggingScrollbar(t,e,n,i){if(this._scrollbarEnable&&this._scrollBarStatus.dragging){const{target:t,barInitX:e,barStartX:s,barInitY:o,barStartY:r,xscale:a,yscale:h,scollbarHeight:c,scollbarWidth:l,realR:u,realL:d,realT:f,realB:p}=this._scrollBarStatus,{actual_width:g,actual_height:m}=this.canvasMeta,{x:v,y:_}=this.bounding_box;if("x"===t.dir){const i=s+(n-e),o=(v-((u-d)*((t.anchor[0]=Math.max(Math.min(i,g-l),0))/g)+d))*this.scale;Object.assign(this.position,{offsetX:o-v*this.scale,x:o})}if("y"===t.dir){const e=r+(i-o),n=(_-((p-f)*((t.anchor[1]=Math.max(Math.min(e,m-c),0))/m)+f))*this.scale;Object.assign(this.position,{offsetY:n-_*this.scale,y:n})}return this.scheduleRender(),!0}return!1},checkScrollBarHover(t,e){if(this._scrollbarEnable){if(this._scrollbarX.isHit([t,e]))return this._scrollbarX.isFocus||(this._scrollbarX.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0;if(this._scrollbarY.isHit([t,e]))return this._scrollbarY.isFocus||(this._scrollbarY.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0}return!1},resetScrollBarHover(){this._scrollbarEnable&&(this._scrollbarY.isFocus||this._scrollbarX.isFocus)&&(this._scrollbarY.isFocus=!1,this._scrollbarX.isFocus=!1,this.scheduleRender())},_getScrollViewBoundingbox(){const{width:t,height:e,x:n,y:i}=this.bounding_box;return{width:t+240,height:e+240,x:n-120,y:i-120}},scrollBarOnPanAndZoom(){if(!this._scrollbarEnable||this._scrollBarStatus.dragging)return;const{width:t,height:e,x:n,y:i}=this._getScrollViewBoundingbox();let[s,o,r,a]=this._getViewBox();const h=Math.max(r,n+t),c=Math.min(s,n),l=Math.min(o,i),u=Math.max(a,i+e),d=r-s,f=a-o,{actual_width:p,actual_height:g}=this.canvasMeta,m=d/(h-c);if(m<1){const t=p*m,e=(s-c)*m*this.scale;this._scrollbarX.anchor=[e,g-10],this._scrollbarX.width=t,this._scrollBarStatus.scollbarWidth=t}const v=f/(u-l);if(v<1){const t=g*v,e=(o-l)*v*this.scale;this._scrollbarY.anchor=[p-10,e],this._scrollbarY.height=t,this._scrollBarStatus.scollbarHeight=t}Object.assign(this._scrollBarStatus,{yscale:v,xscale:m,realR:h,realL:c,realT:l,realB:u})},resetScollBarStatus(){this._scrollbarEnable&&Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0})},renderScrollBar(t){if(this._scrollbarEnable){t.setTransform(),t.scale(this.dpr,this.dpr);const{xscale:e,yscale:n}=this._scrollBarStatus;e<1&&this._scrollbarX.render(t),n<1&&this._scrollbarY.render(t)}}},fr={initSchedule(){this.__clock__=void 0},scheduleRender(t){requestAnimationFrame((e=>{this.__clock__!==e&&this.__render(),t&&t(e),this.__clock__=e}))}};class pr extends CustomEvent{constructor(t,e={}){super(t,{detail:{...e,originEvent:e.event,target:e.target,jflow:e.jflow,bubbles:e.bubbles||!1}})}}const gr=pr,mr={...rr,...ar,_setPadding(t){this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0}},_setMargin(t){this.margin={top:t.marginTop||t.margin||0,right:t.marginRight||t.margin||0,bottom:t.marginBottom||t.margin||0,left:t.marginLeft||t.margin||0}},_getCenter(){const t=this.anchor,e=this.padding,n=this.margin,i=(n.left-n.right)/2,s=(n.top-n.bottom)/2,o=(e.left-e.right)/2+i,r=(e.top-e.bottom)/2+s;return this._shape.anchor=[t[0]+i,t[1]+s],[t[0]+o,t[1]+r]},setAnchorX(t){this.anchor[0]=t,this._getCenter()},setAnchorY(t){this.anchor[1]=t,this._getCenter()},setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e,this._getCenter()},_calculatePointBack(t){const[e,n]=t,[i,s]=this._getCenter();return[e-i,n-s]},calculateToCoordination(t){const[e,n]=t,[i,s]=this._getCenter(),o=[e+i,n+s];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(o):o},calculateToRealWorld(t){const[e,n]=t,[i,s]=this._getCenter(),o=[e+i,n+s];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(o)},clone(){const t=new(0,this.constructor)(Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}));return this.interateNodeStack((e=>{t.addToStack(e.clone())})),t.recalculate(),t.visible=this.visible,t},getBoundingDimension(){return{width:this.width,height:this.height}},getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]},getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Do.RIGHT]:[e+i,n],[Do.LEFT]:[e-i,n],[Do.BOTTOM]:[e,n+s],[Do.TOP]:[e,n-s],[Do.SELF]:[e+.618*i,n+.618*s]}},calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=this.width/2,r=this.height/2,a=i-e,h=s-n,c=r/o,l=Math.abs(h/a),u=e>i,d=n>s;let f,p;return l<c?(f=i+(u?o:-o),p=o*(d?l:-l)+s):(p=s+(d?r:-r),f=r/(u?l:-l)+i),[f,p]},onEnterViewbox(){this.interateNodeStack((t=>{t.onEnterViewbox()}))},onLeaveViewbox(){this.interateNodeStack((t=>{t.onLeaveViewbox()}))},destroy(){this._shape.destroy(),this.interateNodeStack((t=>{t.destroy()}))}};function vr(t,e){return[t,e]}const _r=function(t,e={}){const n="function"==typeof e.shapeShift?e.shapeShift:vr;class i extends tr{constructor(e){super(e),this.initStack(e),this.initLayout(e),this._shape=new t(e),this._shape.anchor=[0,0],this._shape._belongs=this,this._setPadding(e),this._setMargin(e),this.definedWidth=e.width,this.minWidth=e.minWidth,this.definedHeight=e.height,this.lock=e.lock??!0,this.display=e.display||"default",this.transparent=e.transparent??!1,this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect()}}return Object.assign(i.prototype,mr),Object.assign(i.prototype,{reflow(){mr.reflow.call(this);const t=this.margin,[e,i]=n(this.width-t.left-t.right,this.height-t.top-t.bottom,this._shape);this._shape.width=e,this._shape.height=i},setConfig(t){this._shape.setConfig(t),this._setPadding(t),this._setMargin(t),"opacity"in t&&(this.opacity=t.opacity),t.layout&&this._layout!==t.layout&&(this._layout=t.layout)},_getBoundingGroupRect(){const t=$o(this._stack.getBoundingRectPoints()),e=this.padding,i=this.minWidth,s=this.definedWidth,o=t.width+e.left+e.right,r=t.height+e.top+e.bottom,a=i?Math.max(i,o):s||o,h=this.definedHeight||r;this._paddingWidth=a,this._paddingHeight=h;const[c,l]=n(a,h,this._shape);this._shape.width=c,this._shape.height=l;const u=this.margin;this.width=c+u.left+u.right,this.height=l+u.top+u.bottom},render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this._getCenter();this._shape.render(t),t.translate(e,n),this._stack.render(t),this._linkStack.render(t),t.translate(-e,-n),t.restore()},isHit(t,e){const n=this._calculatePointBack(t);this._currentp=n;return this._stack.checkHit(n,e)||!this.transparent&&this._shape.isHit(t)}}),i},yr=class extends tr{constructor(t){super(t),this.type="Point",this.radius=t.radius||10,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.width=2*this.radius,this.height=2*this.radius}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath(),t.arc(this.anchor[0],this.anchor[1],this.radius,0,2*Math.PI),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor;return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)<this.radius*this.radius}getBoundingRect(){const t=this.anchor,e=this.radius;return[t[0]-e,t[1]-e,t[0]+e,t[1]+e]}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=i-e,r=s-n,a=Math.sqrt(o*o+r*r),h=this.radius/a;return[i-h*o,s-h*r]}getIntersectionsInFourDimension(){const[t,e]=this.anchor,n=this.radius;return{[Do.RIGHT]:[t+n,e],[Do.LEFT]:[t-n,e],[Do.BOTTOM]:[t,e+n],[Do.TOP]:[t,e-n]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t,[s,o]=this.anchor,r=this.radius,a=s-n,h=o-i,c={[Do.RIGHT]:[s+r,o],[Do.LEFT]:[s-r,o],[Do.BOTTOM]:[s,o+r],[Do.TOP]:[s,o-r]};let l=Math.abs(h)>Math.abs(a)?h<0?Do.BOTTOM:Do.TOP:a<0?Do.RIGHT:Do.LEFT;return{p:c[l],dir:l}}getBoundingDimension(){return{width:this.width,height:this.height}}},br=class extends tr{constructor(t={}){super(t),this.type="Rectangle",this.width=t.width||10,this.height=t.height||10,this.borderRadius=t.borderRadius||0,this._setBorder(t)}_setBorder(t){this.border={top:{color:t.border?.top?.borderColor||t.borderColor||"transparent",width:t.border?.top?.borderWidth||t.borderWidth||0,enable:t.border?.top?.borderWidth},right:{color:t.border?.right?.borderColor||t.borderColor||"transparent",width:t.border?.right?.borderWidth||t.borderWidth||0,enable:t.border?.right?.borderWidth},bottom:{color:t.border?.bottom?.borderColor||t.borderColor||"transparent",width:t.border?.bottom?.borderWidth||t.borderWidth||0,enable:t.border?.bottom?.borderWidth},left:{color:t.border?.left?.borderColor||t.borderColor||"transparent",width:t.border?.left?.borderWidth||t.borderWidth||0,enable:t.border?.left?.borderWidth}},this.borderColor=t.borderColor||"transparent",this.borderWidth=t.borderWidth||0}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._setBorder(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const{borderRadius:e,anchor:n,width:i,height:s}=this,o=this.anchor[0]-this.width/2,r=this.anchor[1]-this.height/2,a=this.anchor[0]+this.width/2,h=this.anchor[1]+this.height/2;if(this.borderRadius?(t.beginPath(),t.moveTo(o+e,r),t.lineTo(o+i-e,r),t.quadraticCurveTo(o+i,r,o+i,r+e),t.lineTo(o+i,r+s-e),t.quadraticCurveTo(o+i,r+s,o+i-e,r+s),t.lineTo(o+e,r+s),t.quadraticCurveTo(o,r+s,o,r+s-e),t.lineTo(o,r+e),t.quadraticCurveTo(o,r,o+e,r),t.closePath()):(t.beginPath(),t.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height)),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const n=this._jflow.scale;t.shadowBlur=this.shadowBlur*n,t.shadowOffsetX=this.shadowOffsetX*n,t.shadowOffsetY=this.shadowOffsetY*n;let a=new Path2D;this.borderRadius?(a.moveTo(o+e,r),a.lineTo(o+i-e,r),a.quadraticCurveTo(o+i,r,o+i,r+e),a.lineTo(o+i,r+s-e),a.quadraticCurveTo(o+i,r+s,o+i-e,r+s),a.lineTo(o+e,r+s),a.quadraticCurveTo(o,r+s,o,r+s-e),a.lineTo(o,r+e),a.quadraticCurveTo(o,r,o+e,r),a.closePath()):a.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height),a.rect(o-10,r-10,this.width+20,this.height+20),t.save(),t.clip(a,"evenodd"),t.stroke(),t.restore()}if(t.fillStyle=this.backgroundColor,t.fill(),this.borderRadius&&this.borderWidth&&(t.shadowColor="transparent",t.stroke()),this.borderRadius){if(this.border.top.enable){const n=r-this.border.top.width/2;t.beginPath();let s=new Path2D;s.moveTo(o,n+e),s.quadraticCurveTo(o,n,o+e,n),s.lineTo(o+i-e,n),s.quadraticCurveTo(o+i,n,o+i,n+e),s.closePath(),t.clip(s),t.save(),t.shadowColor="transparent",t.fillStyle=this.border.top.color,t.rect(o,n,this.width,this.border.top.width),t.fill(),t.restore()}}else this.border.top.width&&(t.beginPath(),t.moveTo(o,r),t.lineTo(a,r),t.strokeStyle=this.border.top.color,t.lineWidth=this.border.top.width,t.stroke()),this.border.right.width&&(t.beginPath(),t.moveTo(a,r),t.lineTo(a,h),t.strokeStyle=this.border.right.color,t.lineWidth=this.border.right.width,t.stroke()),this.border.bottom.width&&(t.beginPath(),t.moveTo(a,h),t.lineTo(o,h),t.strokeStyle=this.border.bottom.color,t.lineWidth=this.border.bottom.width,t.stroke()),this.border.left.width&&(t.beginPath(),t.moveTo(o,h),t.lineTo(o,r),t.strokeStyle=this.border.left.color,t.lineWidth=this.border.left.width,t.stroke());t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2;return t[0]>e[0]-n&&t[0]<e[0]+n&&t[1]>e[1]-i&&t[1]<e[1]+i}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]}getBoundingDimension(){return{height:this.height,width:this.width}}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,o=this.width/2,r=this.height/2,a=i-e,h=s-n,c=r/o,l=Math.abs(h/a),u=e>i,d=n>s;let f,p;return l<c?(f=i+(u?o:-o),p=o*(d?l:-l)+s):(p=s+(d?r:-r),f=r/(u?l:-l)+i),[f,p]}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Do.RIGHT]:[e+i,n],[Do.LEFT]:[e-i,n],[Do.BOTTOM]:[e,n+s],[Do.TOP]:[e,n-s]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t;let s=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(s=this._belongs.calculateToCoordination(s));const[o,r]=s,a=this.width/2,h=this.height/2,c={[Do.RIGHT]:[o+a,r],[Do.LEFT]:[o-a,r],[Do.BOTTOM]:[o,r+h],[Do.TOP]:[o,r-h]},l=o-n,u=r-i,d=h/a,f=n>o;let p=Math.abs(u/l)>d?i>r?Do.BOTTOM:Do.TOP:f?Do.RIGHT:Do.LEFT;return{p:c[p],dir:p}}},wr=class extends tr{constructor(t={}){super(t),this.type="Capsule",this.width=t.width||20,this.height=t.height||10}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=e-i+s,r=e+i-s,a=n-s,h=n+s;t.moveTo(o,a),t.lineTo(r,a),t.arc(r,n,s,-Math.PI/2,Math.PI/2),t.lineTo(o,h),t.arc(o,n,s,Math.PI/2,Math.PI/2*3),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2,s=Math.abs(n-i),o=e[0]-n+i,r=e[0]+n-i,a=i*i;return t[0]>e[0]-s&&t[0]<e[0]+s&&t[1]>e[1]-i&&t[1]<e[1]+i||Math.pow(t[0]-o,2)+Math.pow(t[1]-e[1],2)<a||Math.pow(t[0]-r,2)+Math.pow(t[1]-e[1],2)<a}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Do.RIGHT]:[e+i,n],[Do.LEFT]:[e-i,n],[Do.BOTTOM]:[e,n+s],[Do.TOP]:[e,n-s]}}},xr=class extends wr{render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=n-s+i,r=n+s-i,a=e-i,h=e+i;t.moveTo(a,o),t.arc(e,o,i,-Math.PI,0),t.lineTo(h,r),t.arc(e,r,i,0,Math.PI),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t,e){const[n,i]=this.anchor,s=this.width/2,o=this.height/2,r=Math.abs(o-s),a=i-o+s,h=i+o-s,c=s*s;return t[0]>n-s&&t[0]<n+s&&t[1]>i-r&&t[1]<i+r||Math.pow(t[0]-n,2)+Math.pow(t[1]-a,2)<c||Math.pow(t[0]-n,2)+Math.pow(t[1]-h,2)<c}},kr=class extends tr{constructor(t={}){super(t),this.type="Rhombus",this.height=t.diagonalsV||10,this.width=t.diagonalsH||20}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const e=this.width/2,n=this.height/2,i=this.anchor;if(t.translate(i[0],i[1]),t.beginPath(),t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor){t.shadowColor=this.shadowColor;const i=this._jflow.scale;t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i;let s=new Path2D;s.moveTo(0,-n),s.lineTo(e,0),s.lineTo(0,n),s.lineTo(-e,0),s.closePath(),s.rect(-e-10,-n-10,this.width+20,this.height+20),t.save(),t.clip(s,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.shadowColor="transparent",t.stroke()),t.translate(-i[0],-i[1]),t.restore()}isHit(t){const e=this.height/2,n=this.width/2,i=this.anchor;return Math.abs(t[0]-i[0])/n+Math.abs(t[1]-i[1])/e<=1}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Do.RIGHT]:[e+i,n],[Do.LEFT]:[e-i,n],[Do.BOTTOM]:[e,n+s],[Do.TOP]:[e,n-s],[Do.SELF]:[e+.618*i,n+.618*s]}}},Sr=class extends tr{constructor(t={}){super(t),this.type="Diamond",this.width=t.width||20,this.height=t.height||10,this.side=t.side||6,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.sinSIDE=Math.sin(Math.PI/3)*this.side,this.cosSIDE=Math.cos(Math.PI/3)*this.side}render(t){const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=s/1.732,r=e-i+o,a=e+i-o,h=e+i,c=e-i,l=n-s,u=n+s;this._cachePoints=[[a,l],[h,n],[a,u],[r,u],[c,n],[r,l]],t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const{side:d,sinSIDE:f,cosSIDE:p}=this;t.moveTo(e,l),t.lineTo(a-d,l),t.quadraticCurveTo(a,l,a+p,l+f),t.lineTo(h-p,n-f),t.quadraticCurveTo(h,n,h-p,n+f),t.lineTo(a+p,u-f),t.quadraticCurveTo(a,u,a-d,u),t.lineTo(r+d,u),t.quadraticCurveTo(r,u,r-p,u-f),t.lineTo(c+p,n+f),t.quadraticCurveTo(c,n,c+p,n-f),t.lineTo(r-p,l+f),t.quadraticCurveTo(r,l,r+d,l),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){if(!this._cachePoints)return!1;const e=this._cachePoints;let n=!1;for(let i=0,s=e.length-1;i<e.length;i++)e[i][1]>t[1]!=e[s][1]>t[1]&&t[0]<(e[s][0]-e[i][0])*(t[1]-e[i][1])/(e[s][1]-e[i][1])+e[i][0]&&(n=!n),s=i;return n}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[Do.RIGHT]:[e+i,n],[Do.LEFT]:[e-i,n],[Do.BOTTOM]:[e,n+s],[Do.TOP]:[e,n-s]}}};Math.sqrt(3);const Tr={canvas:{wheel(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:o}=t;t.ctrlKey&&(o=-o),e.zoomHandler(n,i,s,o,t)}}},Cr=class extends Qo{constructor(t={}){super(),this.from=t.from,this.to=t.to,this.fromDir=t.fromDir,this.toDir=t.toDir,this._cachePoints=null,this.backgroundColor=t.backgroundColor||"#000",this.isSelf=!!t.isSelf}isInViewBox(t){return!0}bringToTop(){const t=this._jflow._linkStack,e=t.findIndex((t=>t===this));t.splice(e,1),t.push(this),this._jflow._render()}},Er="left",Or="right",jr=class extends br{constructor(t){super(t),this.type="Text",this.content=t.content||"",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"28px",this.fontWeight=t.fontWeight||"",this.textColor=t.textColor||"white",this.placeholderColor=t.placeholderColor||t.textColor||"white",this.textAlign=t.textAlign||"center",this.textBaseline=t.textBaseline||"middle",this.lineHeight=t.lineHeight,this.indent=t.indent||0,this.backgroundColor=t.backgroundColor,this.editable=t.editable,this.minWidth=t.minWidth||0,this.maxWidth=t.maxWidth,this.ellipsis=t.ellipsis,this.placeholder=t.placeholder||"",this.emptyWhenInput=t.emptyWhenInput||!1,this.editting=!1,this.disabled=t.disabled,this.textBuffer=document.createElement("canvas"),ao((t=>{this.renderShadowText(t),this.cacheText()})),this._makeEditable()}get currentContent(){return this.content||this.placeholder}get isEmpty(){return!this.content}cacheText(){const t=this.textBuffer,{fontSize:e,fontFamily:n,fontWeight:i}=this;let s=this.currentContent;if(this.ellipsisContent&&(s=this.ellipsisContent),!s)return void(this.cacheTextBounding=null);const o=parseInt(e),r=4*this._textWidth,a=4*o;t.width=r,t.height=a;const h=t.getContext("2d");h.clearRect(-1e3,-1e3,1e4,1e4),h.fillStyle=this.textColor,h.font=`${i} ${a}px ${n}`,h.textBaseline="middle",h.fillText(s,0,a/2),this.cacheTextBounding=[0,0,r,a]}_renderCache(t){if(!this.cacheTextBounding)return;const[e,n,i,s]=this.cacheTextBounding,o=this._textWidth,r=parseInt(this.fontSize);if(this.textAlign===Er){const a=this.width/2;t.drawImage(this.textBuffer,e,n,i,s,this.anchor[0]-a+this.indent/2,this.anchor[1]-r/2,o,r)}else if(this.textAlign===Or){const a=this.width/2,h=this._textWidth;t.drawImage(this.textBuffer,e,n,i,s,this.anchor[0]+a-h,this.anchor[1]-r/2,o,r)}else{const a=this._textWidth/2;t.drawImage(this.textBuffer,e,n,i,s,this.anchor[0]-a+this.indent/2,this.anchor[1]-r/2,o,r)}}_makeEditable(){this.editable&&this.addEventListener("click",(t=>{if(this.disabled)return;let e;const n=this.width/2;e=this.textAlign===Er?this.anchor[0]-n+this.indent/2:this.textAlign===Or?this.anchor[0]+n:this.anchor[0]+this.indent/2;const i=[e,-this.height/2],s=+/(\d+)/.exec(this.fontSize)[1],[o,r]=this.calculateToRealWorld(i);let a=function(){const t=document.createElement("input");return t.setAttribute("style","\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        background-image:none;\n        background-color:transparent;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;"),t}();const h=this._jflow.DOMwrapper;let c=this.content,l=this.textColor;a.style.margin=0,a.style.padding=0,a.style.transform=`translate(${o}px, ${r}px)`,a.style.width=this.calculateToRealWorldWithScalar(this.width)+"px",a.style.height=this.calculateToRealWorldWithScalar(this.height)+"px",a.style.fontFamily=this.fontFamily,h.style.fontSize=s*this._jflow.scale+"px",a.style.fontSize=s*this._jflow.scale+"px",a.style.lineHeight=this.lineHeight*this._jflow.scale+"px",a.style.textIndent=this.indent*this._jflow.scale+"px",a.value=this.emptyWhenInput?"":this.content,a.style.color=this.textColor,a.setAttribute("placeholder",this.placeholder),a.addEventListener("focus",(t=>{this.textColor="transparent",this.editting=!0,this._jflow._render(),a.style.outline="none"}));let u=()=>{this.editting=!1,this.dispatchEvent(new gr("blur",{target:this}));const t=a.value;this.dispatchEvent(new gr("change",{target:this,oldVal:c,val:t})),this.textColor=l,this._jflow._render(),this._jflow.removeEventListener("zoompan",u),a.removeEventListener("blur",u),a.removeEventListener("keypress",d),h.removeChild(a),a=null,u=null,this.inputElement=null};this._jflow.addEventListener("zoompan",u),a.addEventListener("blur",u);const d=t=>{if("Enter"===t.key||13===t.keyCode){t.preventDefault();let e=!0;this.dispatchEvent(new gr("enterkeypressed",{target:this,handler:t=>{e=t}})),e&&(a.removeEventListener("keypress",d),u())}};a.addEventListener("keypress",d),a.addEventListener("input",(t=>{let e=!1;this.dispatchEvent(new gr("input",{target:this,oldVal:c,val:t.target.value,handler(t){c=t,a.value=t,e=!0}})),e||(c=t.target.value)})),h.append(a),a.focus({preventScroll:!0}),this.inputElement=a}))}renderShadowText(t){t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.textColor;const e=parseInt(this.fontSize),n=this.currentContent,{actualBoundingBoxLeft:i,actualBoundingBoxRight:s,fontBoundingBoxAscent:o,fontBoundingBoxDescent:r}=t.measureText(n);if(this._textWidth=this.indent+Math.abs(i)+Math.abs(s),this.maxWidth&&this.ellipsis){if(this._textWidth>this.maxWidth){const t=this.maxWidth/this._textWidth,e=Math.floor(n.length*t-3);this.ellipsisContent=n.substring(0,e)+"..."}else this.ellipsisContent=n;this.width=this.maxWidth}else this.width=Math.max(this.minWidth,this._textWidth);const a=Math.abs(o)+Math.abs(r)||e;this.lineHeight?this.height=this.lineHeight:this.height=a}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),ao((t=>{this.renderShadowText(t),this.cacheText()}))}render(t){if(this._isMoving&&(t.globalAlpha=.6),this.editting)return;if(this._jflow.scale*parseInt(this.fontSize)<8)return void this._renderCache(t);t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.isEmpty?this.placeholderColor:this.textColor;let e=this.currentContent;if(this.ellipsisContent&&(e=this.ellipsisContent),e)if(this.textAlign===Er){const n=this.width/2;t.fillText(e,this.anchor[0]-n+this.indent/2,this.anchor[1])}else if(this.textAlign===Or){const n=this.width/2;t.fillText(e,this.anchor[0]+n,this.anchor[1])}else t.fillText(e,this.anchor[0]+this.indent/2,this.anchor[1])}},Ir=class extends br{constructor(t){super(t),this.image=t.image,this.image.onload=()=>{this._jflow._render()},this.imageBounding={width:t.imageWidth||t.width,height:t.imageHeight||t.height}}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),t.image&&!t.image.complete&&(this.image.onload=()=>{this._jflow._render()}),this.imageBounding={width:t.imageWidth||t.width||this.imageBounding.width,height:t.imageHeight||t.height||this.imageBounding.height}}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),br.prototype.render.call(this,t);const e=this.anchor[0]-this.width/2,n=this.anchor[1]-this.height/2;this.opacity<1&&(t.globalAlpha=this.opacity),this.image.complete&&t.drawImage(this.image,e,n,this.imageBounding.width,this.imageBounding.height),t.restore()}},Mr=class extends br{constructor(t){super(t),this.domFactory=t.createDocument,this._dom=null}getRealWorldPosition(){const t=this.getBoundingRect();return this.calculateToRealWorld(t.slice(0,2))}render(t){if(!this._dom&&this.domFactory)requestAnimationFrame((()=>{if(!this._dom){const t=document.createElement("div"),e=this.getRealWorldPosition(),n=this._jflow.scale;t.setAttribute("style",`\n                        position: absolute;\n                        width: ${this.width}px;\n                        height: ${this.height}px;\n                        transform-origin: left top;\n                        top: 0;\n                        left: 0;\n                        transform: translate(${e[0]}px, ${e[1]}px) scale(${n});`),this._dom=t,this._jflow.DOMwrapper.appendChild(t),this.domFactory(t)}}));else{const t=this.getRealWorldPosition(),e=this._jflow.scale;this._dom.style.transform=`translate(${t[0]}px, ${t[1]}px) scale(${e})`}super.render(t)}onEnterViewbox(){this._dom&&(this._dom.style.display="block")}onLeaveViewbox(){this._dom&&(this._dom.style.display="none")}destroy(){this._dom&&this._jflow.DOMwrapper.removeChild(this._dom),super.destroy()}},Pr=class extends Cr{constructor(t){super(t),this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.lineDash=t.lineDash,this.approximate=t.approximate||6}_calculateAnchorPoints(){const t=this.from.calculateIntersection(this.to.getCenter()),e=this.to.calculateIntersection(this.from.getCenter());this._cachePoints=[t,e];const n=e[0]-t[0],i=e[1]-t[1],s=Math.atan2(i,n);this._cacheAngle=s}isInViewBox(t){return this._calculateAnchorPoints(),!0}render(t){const[e,n]=this._cachePoints,i=this._cacheAngle,s=n[0]-e[0],o=n[1]-e[1];if(t.fillStyle=t.strokeStyle=this.backgroundColor,t.beginPath(),this.content){t.textAlign="center",t.font=`${this.fontSize} ${this.fontFamily}`,t.textBaseline="middle";const{actualBoundingBoxLeft:i,actualBoundingBoxRight:r,fontBoundingBoxAscent:a,fontBoundingBoxDescent:h}=t.measureText(this.content),c=s/2+e[0],l=o/2+e[1];t.fillText(this.content,c,l);const u=Math.abs(i)+Math.abs(r)+20,d=1.5*(Math.abs(a)+Math.abs(h));t.beginPath();let f=new Path2D;f.rect(c-u/2,l-d/2,u,d);const p=Math.min(n[0],e[0])-10,g=Math.min(n[1],e[1])-10,m=Math.abs(s)+20,v=Math.abs(o)+20;f.rect(p,g,m,v),t.clip(f,"evenodd")}t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.translate(n[0],n[1]),t.rotate(i),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-i),t.translate(-n[0],-n[1])}isHit(t){if(!this._cachePoints)return!1;const[e,n]=this._cachePoints;return Fo(t,e,n)<this.approximate}},Lr=Math.PI/180;class Br extends Cr{constructor(t){super(t),this.approximate=t.approximate||6,this.radius=t.radius||0,this.minSpanX=t.minSpanX||10,this.minSpanY=t.minSpanY||10,this.lineDash=t.lineDash,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf,this.noArrow=!!t.noArrow}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){const n=Yo(t[this.fromDir],e[Do.SELF],this.fromDir,this.toDir,this.minSpanX,this.minSpanY,!0);this._cachePoints=n,this._cacheAngle=[this.fromDir,this.toDir]}else if(void 0!==this.fromDir&&void 0!==this.toDir){const n=Yo(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=n,this._cacheAngle=[this.fromDir,this.toDir]}else{const n=zo(t,e),i=Yo(n.fromP,n.toP,n.fromDir,n.toDir,this.minSpanX,this.minSpanY);this._cachePoints=i,this._cacheAngle=[n.fromDir,n.toDir]}}isInViewBox(t){return!!this._static||(this._calculateAnchorPoints(),function(t,e){let n=t[0],i=t.length,s=1;const[o,r,a,h]=e;for(;s<i;){const e=t[s];if(n[0]===e[0]){if(n[0]<a&&n[0]>o&&!(n[1]>h&&e[1]>h||n[1]<r&&e[1]<r))return!0}else if(n[1]<h&&n[1]>r&&!(n[0]>a&&e[0]>a||n[0]<o&&e[0]<o))return!0;n=e,s++}return!1}(this._cachePoints,t))}render(t){const e=this.radius,n=this._cachePoints,i=n[0],s=n[n.length-1],o=(this._cacheAngle[1]+2)%4*90*Lr;if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){const e=(this._cacheAngle[0]+2)%4*90*Lr;t.beginPath(),t.translate(i[0],i[1]),t.rotate(e),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-e),t.translate(-i[0],-i[1])}if(t.beginPath(),t.moveTo(i[0],i[1]),n.slice(1,n.length-1).forEach(((i,s)=>{if(this.radius){const o=n[s],r=n[s+2],{p1:a,p2:h}=function(t,e,n,i){const s=qo(e,t),o=qo(e,n),r=Vo(s),a=Vo(o);if(!r||!a)return{p1:null,p2:null};const h=Go(s,i/r),c=Go(o,i/a);return{p1:qo(e,h),p2:qo(e,c)}}(o,i,r,e);a&&h?(t.lineTo(a[0],a[1]),t.quadraticCurveTo(i[0],i[1],h[0],h[1])):t.lineTo(i[0],i[1])}else t.lineTo(i[0],i[1])})),t.lineTo(s[0],s[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),this.noArrow||(t.beginPath(),t.translate(s[0],s[1]),t.rotate(o),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-o),t.translate(-s[0],-s[1])),this.content)switch(t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,this.fromDir){case Do.BOTTOM:t.textAlign="left",t.fillText(this.content,i[0]+2,i[1]+10);break;case Do.RIGHT:t.textAlign="left",t.fillText(this.content,i[0]+10,i[1]-2)}}isHit(t){if(this._static)return!1;if(!this._cachePoints)return!1;const e=this._cachePoints;let n=e[0];const i=e.slice(1);do{const e=i.shift();if(e&&Fo(t,n,e)<this.approximate)return!0;n=e}while(n);return!1}cloneStatic(){const t=new Br({});return Object.assign(t,{radius:this.radius,_cachePoints:this._cachePoints,_cacheAngle:this._cacheAngle,backgroundColor:this.backgroundColor,doubleLink:this.doubleLink,radius:this.radius,lineDash:this.lineDash,noArrow:this.noArrow,content:this.content,fontSize:this.fontSize,fontFamily:this.fontFamily,fromDir:this.fromDir,_static:!0}),t}}const Dr=Br,Rr=Math.PI/180,$r=class extends Cr{constructor(t){super(t),this.approximate=t.approximate||6,this.minSpanX=t.minSpanX||0,this.minSpanY=t.minSpanY||0,this.lineDash=t.lineDash,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){const n=Wo(t[this.fromDir],e[Do.SELF],this.fromDir,Do.BOTTOM,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,Do.BOTTOM]}else if(void 0!==this.fromDir&&void 0!==this.toDir){const n=Wo(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,this.toDir]}else{const n=zo(t,e),i=Wo(n.fromP,n.toP,n.fromDir,n.toDir);this._cachePoints=[...n.fromP,...i],this._cacheAngle=[n.fromDir,n.toDir]}}render(t){this._calculateAnchorPoints();const e=this._cachePoints,n=Xo.apply(null,[1,...e]);if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){const n=(this._cacheAngle[0]+2)%4*90*Rr;t.beginPath(),t.translate(e[0],e[1]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[0],-e[1])}if(t.beginPath(),t.moveTo(e[0],e[1]),t.bezierCurveTo(...e.slice(2)),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.beginPath(),t.translate(e[6],e[7]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[6],-e[7]),this.content){t.beginPath();const n=e[0]>e[6];let[i,s,o]=function(t,e){const n=.5,i=.125*e[0]+.375*e[2]+.375*e[4]+.125*e[6],s=.125*e[1]+.375*e[3]+.375*e[5]+.125*e[7],o=n*n*(e[2]-e[0])+.5*(e[4]-e[2])+t*t*(e[6]-e[4]),r=n*n*(e[3]-e[1])+.5*(e[5]-e[3])+t*t*(e[7]-e[5]);return[i,s,Math.atan2(r,o)]}(.5,e);t.translate(i,s),t.rotate(o),n&&t.rotate(Math.PI),t.font=`${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.fillText(this.content,0,-(parseInt(this.fontSize)||12)/4),n&&t.rotate(Math.PI),t.rotate(-o),t.translate(-i,-s)}}isHit(t){if(!this._cachePoints)return!1;const e=function(t,e){const n=new Bo(...e).project({x:t[0],y:t[1]});return No(t,[n.x,n.y])}(t,this._cachePoints);return e<this.approximate}};class Ar{constructor(t={}){this.direction=t.direction||"vertical",this.gap=t.gap??5,this.alignment=t.alignment||"center",this.justify=t.justify||"center",this._rawConfigs=t}reflow(t){const e=t._stack.filter((t=>t.visible&&!t.absolutePosition)),n=t._stack.filter((t=>t.visible&&t.absolutePosition)),i=t.width-t.padding.left-t.padding.right;if("vertical"===this.direction){let s=0,o=0,r=0,a=0;const h=e.concat(n);h.forEach(((t,e)=>{"block"===t.display&&(t.width=0,t.resetChildrenPosition(),t.reflow(),t._getBoundingGroupRect())})),e.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension(),h=e>0?this.gap:0;"outstretch"!==t.display&&(r=Math.max(n,r)),a+=i+h,s+=i/2+h+o,o=i/2,t.anchor=[0,s]})),h.forEach(((e,n)=>{if("block"===e.display)e.resetChildrenPosition(),e.width=r,e.reflow();else if("outstretch"===e.display){const n=t._belongs.width-t._belongs.padding.left-t._belongs.padding.right;e.resetChildrenPosition(),e.width=Math.max(n,r),e.reflow()}})),r=Math.max(i,r),a/=2,"start"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=-(r-n)/2,t.anchor[1]-=a})),"end"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=(r-n)/2,t.anchor[1]-=a})),"center"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[1]-=a}))}if("horizontal"===this.direction){let t=0,n=0,s=0,o=0,r=0;if(e.forEach(((e,i)=>{const{width:a,height:h}=e.getBoundingDimension(),c=i>0?this.gap:0;s=Math.max(h,s),o+=a+c,r+=a,t+=a/2+c+n,n=a/2,e.anchor=[t,0]})),"start"===this.justify){const t=i/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("end"===this.justify){const t=i/2-o;e.forEach(((e,n)=>{e.anchor[0]+=t}))}if("center"===this.justify){const t=o/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("space-between"===this.justify&&e.length>1){const t=Math.max(i,o),n=(t-o)/(e.length-1),s=t/2;e.forEach(((t,e)=>{t.anchor[0]+=n*e-s}))}"start"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=-(s-n)/2})),"end"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=(s-n)/2}))}if(n.length){"block"===t.display?t.getBoundingDimension():t._getBoundingGroupRect();const e=t.width/2,i=t.height/2;n.forEach((t=>{t.anchor=this._resolveAbsoluteAnchor(t.absolutePosition,t,e,i)}))}}_resolveAbsoluteAnchor(t,e,n,i){const{top:s,right:o,bottom:r,left:a}=t,{width:h,height:c}=e.getBoundingDimension(),l=h/2,u=c/2;let d=0,f=0;return"number"==typeof s&&(d=s+u-i),"number"==typeof o&&(f=n-o-l),"number"==typeof r&&(d=i-r-u),"number"==typeof a&&(f=a+l-n),[f,d]}clone(){return new Ar(this._rawConfigs)}}const Nr=Ar;class Fr{constructor(t){this.source=t,this.id=t.id,this.type=t.type,this.level=void 0,this.sequence=void 0,this.isFree=!1,this.parent=void 0,this.idx=void 0,this.parentIterateType=void 0,this.hasEndPoint=!1}reflowPreCalculate(t=0,e=0,n){return this.level=t,this.sequence=e,this.spanX=1,this.spanY=1,n&&n(t,e,this),{spanX:this.spanX,spanY:this.spanY,level:t,sequence:e}}makeLink(t){return this}makeEndpoint(){}traverse(t){t(this)}getNodes(t){const e=[];return this.traverse((n=>{const i=t.getRenderNodeBySource(n.source);i&&e.push(i)})),e}linkSource(t){this.parent.source[this.parentIterateType].splice(this.idx+1,0,t)}remove(){this.parent.source[this.parentIterateType].splice(this.idx,1)}}const zr={IfStatement:class extends Fr{constructor(t){super(t),this.consequent=(t.consequent||[]).map(Hr("consequent").bind(this)),this.alternate=(t.alternate||[]).map(Hr("alternate").bind(this)),this.isLocked=!0,this.hasEndPoint=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=1,r=0,a=0,h=0;this.consequent.forEach(((i,s)=>{const{spanX:a,spanY:h}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,a),r+=h,t+=h}));const c=e+o;t=this.level,this.alternate.forEach(((e,i)=>{const{spanX:s,spanY:o}=e.reflowPreCalculate(t+1,c,n);a=Math.max(a,s),h+=o,t+=o})),i=Math.max(1,o+a),s+=Math.max(r,h),t=this.level+s-1;const{spanY:l}=this.Endpoint.reflowPreCalculate(t+1,e,n);return s+=l,this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;this.consequent.forEach((n=>{t({from:e,to:n,part:"consequent",fromDir:Do.BOTTOM,toDir:Do.TOP}),n=n.makeLink(t),e=n})),t({from:e,to:this.Endpoint,fromDir:Do.BOTTOM,toDir:Do.TOP,part:"consequent"});let n=this;return this.alternate.forEach((e=>{t({from:n,to:e,fromDir:n===this?Do.RIGHT:Do.BOTTOM,toDir:Do.TOP,part:"alternate"}),e=e.makeLink(t),n=e})),t({from:n,to:this.Endpoint,fromDir:n===this?Do.RIGHT:Do.BOTTOM,toDir:Do.RIGHT,part:"alternate"}),this.Endpoint}traverse(t){t(this),this.consequent.forEach((e=>{e.traverse(t)})),this.alternate.forEach((e=>{e.traverse(t)})),console.log(this.Endpoint),t(this.Endpoint)}linkSource(t,e){this.source[e.part].unshift(t)}},SwitchStatement:class extends Fr{constructor(t){super(t),this.cases=(t.cases||[]).map(Hr("case").bind(this)),this.cases.length&&(this.cases[this.cases.length-1].lastCase=!0),this.isLocked=!0,this.hasEndPoint=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=1,r=0;if(this.cases.length){const i=this.cases[this.cases.length-1].consequent;t=this.level,i.forEach((i=>{const{spanX:s,spanY:a}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,s),r+=a,t+=a}))}let a=o,h=0;this.cases.forEach(((i,s)=>{const o=e+a;let r=0,c=0;t=this.level,i.alternate.forEach((e=>{const{spanX:i,spanY:s}=e.reflowPreCalculate(t+1,o,n);r=Math.max(r,i),c+=s,t+=s})),a+=r,h=Math.max(h,c)})),i=Math.max(1,a),s=Math.max(r,h),t=this.level+s;const{spanY:c}=this.Endpoint.reflowPreCalculate(t+1,e,n);return s+=c,s+=1,this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;return this.cases.length&&this.cases[this.cases.length-1].consequent.forEach(((n,i)=>{t({from:e,to:n,fromDir:Do.BOTTOM,toDir:Do.TOP,part:"consequent"}),e=n.makeLink(t)})),console.log(e),t({from:e,to:this.Endpoint,fromDir:Do.BOTTOM,toDir:Do.TOP,part:"consequent"}),this.cases.forEach(((e,n)=>{let i=e;e.alternate.forEach((n=>{t({from:i,to:n,fromDir:i===e?Do.RIGHT:Do.BOTTOM,toDir:Do.TOP,part:"alternate"}),i=n.makeLink(t)})),t({from:i,to:this.Endpoint,fromDir:i===e?Do.RIGHT:Do.BOTTOM,toDir:Do.RIGHT,part:"alternate",minSpanX:32*(n+1)})})),this.Endpoint}traverse(t){t(this),this.cases.forEach((e=>{e.traverse(t)})),t(this.Endpoint)}getNodes(t){const e=[];return this.traverse((n=>{if("SwitchCase"===n.type)return;const i=t.getRenderNodeBySource(n.source);i&&e.push(i)})),e}linkSource(t,e){const n=this.source.cases;n[n.length-1].consequent.unshift(t)}},SwitchCase:class extends Fr{constructor(t){super(t),this.consequent=(t.consequent||[]).map(Hr("consequent").bind(this)),this.alternate=(t.alternate||[]).map(Hr("alternate").bind(this)),this.lastCase=!1}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);let o=0,r=0,a=0,h=0;this.lastCase&&this.consequent.forEach(((i,s)=>{const{spanX:a,spanY:h}=i.reflowPreCalculate(t+1,e,n);o=Math.max(o,a),r+=h,t+=h}));const c=e+Math.max(o,1);return t=this.level,this.alternate.forEach(((e,i)=>{const{spanX:s,spanY:o}=e.reflowPreCalculate(t+1,c,n);a=Math.max(a,s),h+=o,t+=o})),i=Math.max(1,o+a),s+=Math.max(r,h),this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}traverse(t){t(this),this.consequent.forEach((e=>{e.traverse(t)})),this.alternate.forEach((e=>{e.traverse(t)}))}linkSource(t,e){this.source[e.part].unshift(t)}},ForEachStatement:class extends Fr{},WhileStatement:class extends Fr{constructor(t){super(t),this.body=(t.body||[]).map(Hr("body").bind(this)),this.isLocked=!0}reflowPreCalculate(t=0,e=0,n){let i=1,s=1;this.level=t,this.sequence=e,n&&n(t,e,this);const o=e+1;return this.body.forEach((e=>{const{spanX:r,spanY:a}=e.reflowPreCalculate(t+1,o,n);i=Math.max(r,i),s+=a,t+=a})),this.spanX=i+1,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}makeLink(t){let e=this;return this.body.forEach(((n,i)=>{t({from:e,to:n,part:"body",fromDir:e===this?Do.RIGHT:Do.BOTTOM,toDir:Do.TOP}),n=n.makeLink(t),e=n})),t({from:e,to:this,part:"body",fromDir:e===this?Do.RIGHT:Do.BOTTOM,anticlock:e===this,toDir:Do.BOTTOM,isSelf:!0,minSpanX:20,minSpanY:20}),this}traverse(t){t(this),this.body.forEach((e=>{e.traverse(t)}))}linkSource(t,e){this.source[e.part].unshift(t)}},Root:class extends Fr{constructor(t){super(t),this.isroot=!0,this.body=(t.body||[]).map(Hr("body").bind(this));const e=Hr("playground").bind(this);this.playground=(t.playground||[]).map(((t,n)=>{const i=e(t,n);return i.isFree=!0,i}))}reflowBodyPreCalculate(t=0,e=0,n){let i=1,s=1;return this.level=t,this.sequence=e,n&&n(t,e,this),this.body.forEach((o=>{const{spanX:r,spanY:a}=o.reflowPreCalculate(t+1,e,n);i=Math.max(r,i),s+=a,t+=a})),this.spanX=i,this.spanY=s,{spanX:i,spanY:s,level:t,sequence:e}}reflowPlaygroundPreCalculate(t,e){this.playground.forEach((n=>{t(n),n.reflowPreCalculate(0,0,e)}))}makeLink(t){let e;return this.body.forEach((n=>{e?(t({from:e,to:n,part:"body",fromDir:Do.BOTTOM,toDir:Do.TOP}),n=n.makeLink(t),e=n):e=n})),this.playground.forEach((e=>{e.makeLink(t)})),this}traverse(t){this.body.forEach((e=>{e.traverse(t)})),this.playground.forEach((e=>{e.traverse(t)}))}},other:Fr};function Hr(t){return function(e,n){const i=Wr(e);if(i.parent=this,i.idx=n,i.parentIterateType=t,i.hasEndPoint){e.__endpoint__||(e.__endpoint__={type:"endpoint",id:`${i.id}-endpoint`});const s=Wr(e.__endpoint__);s.parent=this,s.idx=n,s.parentIterateType=t,i.Endpoint=s}return i}}function Wr(t){const e=t.type;return new(zr[e]||zr.other)(t)}function Xr(t){return t*t}const Yr=class{constructor(t){this.linkLength=t.linkLength||18,this.gap=t.gap||30,this.treeItemDraggable=t.treeItemDraggable??!0,this.reOrder(t.ast),this.static=!0}reOrder(t){this.ast=t,this.flowStack=[],this.flowLinkStack=[],this.root=Wr(this.ast),this.root.traverse((t=>{"playground"!==t.parentIterateType&&(t.isDraggable=this.treeItemDraggable),this.flowStack.push({type:t.type,source:t.source,layoutNode:t})}));const e={vertical:{},horizontal:{}},n={};let i;this.root.reflowBodyPreCalculate(0,0,((t,n,i)=>{i.isroot||(e.vertical[t]||(e.vertical[t]={}),e.vertical[t][n]=i,e.horizontal[n]||(e.horizontal[n]={}),e.horizontal[n][t]=i)})),this.root.reflowPlaygroundPreCalculate((t=>{i=t.id,n[t.id]={vertical:{},horizontal:{},node:t}}),((t,e,s)=>{const o=n[i];o.vertical[t]||(o.vertical[t]={}),o.vertical[t][e]=s,o.horizontal[e]||(o.horizontal[e]={}),o.horizontal[e][t]=s})),this.layoutMapping=e,this.playgroundLayoutMapping=n,this.root.makeLink((t=>{this.flowLinkStack.push(t)}))}staticCheck(t,e){if(t._layoutNode&&t._layoutNode.isFree)return!1;if(!e._linkStack.find((e=>e.from===t||e.to===t)))return!1;const n=t.anchor.slice();if(e.reflow(),e._linkStack.length<2)return;var i,s;return s=t.anchor,Xr((i=n)[0]-s[0])+Xr(i[1]-s[1])>1e3&&(t.dispatchEvent(new gr("outOfFlow",{anchor:n,instance:t,jflow:e,point:n})),!0)}reflowByMapping(t,e,n=0,i=0){const s=this.linkLength,o=this.gap,{vertical:r,horizontal:a}=e;let h=n;Object.keys(a).forEach(((e,n)=>{const i=a[e];let s=0;const r=Object.keys(i);r.forEach((e=>{const n=i[e],o=t.getRenderNodeBySource(n.source),{width:r}=o.getBoundingDimension();s=Math.max(r,s)})),h+=0===n?0:s/2,r.forEach((e=>{const n=i[e];t.getRenderNodeBySource(n.source).anchor[0]=h})),h+=s/2+o}));let c=i;Object.keys(r).forEach(((e,n)=>{const i=r[e];let o=0;const a=Object.keys(i);a.forEach((e=>{const n=i[e],s=t.getRenderNodeBySource(n.source),{height:r,width:a}=s.getBoundingDimension();o=Math.max(r,o)})),c+=0===n?0:o/2,a.forEach((e=>{const n=i[e];t.getRenderNodeBySource(n.source).anchor[1]=c})),c+=o/2+s}))}findLayoutNode(t){const e=this.flowStack.find((e=>e.configs===t));return e?e.layoutMeta:null}reflow(t){this.reflowByMapping(t,this.layoutMapping),Object.values(this.playgroundLayoutMapping).forEach((e=>{const n=t.getRenderNodeBySource(e.node.source);this.reflowByMapping(t,e,n.anchor[0],n.anchor[1])}))}};class qr{constructor(t,e,n){this.type="ERProperty",this.source=t,this.node=e,this.ref=t.ref,this.type=t.type,this.association=t.association,this.id=n?`${e.id}-${t.name}-navigation`:`${e.id}-${t.name}`,this._selfLink=!1,this.parentPropertyRef=void 0,this.getJflowInstance=void 0,this.doubleRef=void 0}}class Vr{constructor(t){this.type="ERNode",this.source=t,this.id=t.name,this.isDraggable=!0,this.getJflowInstance=void 0,this.propertyList=t.propertyList.map((t=>new qr(t,this))),this.navigationPropertyList=t.navigationPropertyList.map((t=>new qr(t,this,!0))),this.idProperty=this.propertyList.find((t=>"id"===t.source.name))}_traverseProperty(t){this.propertyList.forEach((e=>{const n=e.source.idRef;if(e.source.isParentRef,n&&"Array"!==e.source.type&&t[n]){const i=t[n];e.source.isParentRef&&(this.parentRef=i),i===this&&(e._selfLink=!0),e.parentPropertyRef=i.idProperty}})),this.navigationPropertyList.forEach((e=>{const n=e.source.objectRef;if(n&&t[n]){const i=t[n],s=i.navigationPropertyList.find((t=>t.source.objectRef===this.id));i===this&&(e._selfLink=!0),e.doubleRef=s}}))}traverse(t){t(this),this.propertyList.forEach((e=>{e.ref instanceof Vr&&t(e)}))}makeLink(t){this.propertyList.forEach((e=>{if(e.parentPropertyRef instanceof qr){const n=e.parentPropertyRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:Do.LEFT,toDir:Do.LEFT,content:e.association,minSpanX:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",content:e.association,meta:{from:e,to:n}})}})),this.navigationPropertyList.forEach((e=>{if(e.doubleRef instanceof qr){const n=e.doubleRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:Do.LEFT,toDir:Do.TOP,lineDash:[10,5],doubleLink:!0,content:e.association,minSpanX:80,minSpanY:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",lineDash:[10,5],doubleLink:!0,content:e.association,meta:{from:e,to:n,isObjectRef:!0}})}}))}}const Gr=class{constructor(t){this.static=!1,this.flowStack=[],this.flowLinkStack=[],this.erNodes=[],this.reOrder(t.entityRelationship)}reOrder(t){this.er=t,this.flowStack=[],this.flowLinkStack=[];const e=function(t){const e={},n=t.map((t=>{const n=new Vr(t);return e[t.name]=n,n}));return n.forEach((t=>{t._traverseProperty(e)})),n}(this.er),n=[];e.forEach((t=>{t.traverse((t=>{this.flowStack.push({type:t.type,configs:t.source,layoutMeta:t})})),t.makeLink((t=>{const{from:e,to:i,meta:s}=t;if(s.isObjectRef){const o=`${e}-${i}`,r=`${i}-${e}`,a=s.from;if(n.includes(o)||n.includes(r))return;a.source.isParentRef||(n.push(o),n.push(r),this.flowLinkStack.push(t))}else this.flowLinkStack.push(t)}))})),this.erNodes=e}staticCheck(t,e){return!1}reflow(t){this.flowLinkStack,this.erNodes;let e=0;const n={};function i(t,e=[]){let n=[0,0];return t.parentRef?e.includes(t.parentRef)?[n[0]-500+1e3*t.source.diagramWeight,n[1]]:(e.push(t.parentRef),n=i(t.parentRef,e),[n[0]-500+1e3*t.source.diagramWeight,n[1]+600]):n}this.erNodes.forEach((t=>{const s=t.getJflowInstance(),[o,r]=i(t);n[r]||(n[r]=[]),n[r].push(t),s.anchor=[o+500*n[r].length,r],e+=300}))}};class Ur{constructor(t,e){this.type=t,this.source=e,this.needWrap=!1,this.width=0,this.reduceWidth=0,this.height=0,this.anchorX=0,this.anchorY=0,this.dirty=!0,this.isTail=!1}shift(t,e,n){if("text"===this.type){const n=this.source.length,i=t+e;return i<0?"prev":i>n?"next":"self"}return e>0?"next":e<0?"prev":void 0}tailOffset(){return"text"===this.type?this.needWrap||this.isTail?this.source.length:Math.max(0,this.source.length-1):0}headOffset(){return 0}}class Jr extends tr{constructor(t){super(t),this.initStack(t),this.initLayout(t),this._lines=[],this.textColor=t.textColor||"transparent",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"28px",this.fontWeight=t.fontWeight||"",this.elementSpace=t.elementSpace||5,this.lineSpace=t.lineSpace||5,this.resolver=()=>{const e=t.resolver();return"text"!==e[e.length-1].type&&e.push(new Ur("text","")),e},this._textElements=this.resolver(),this._status={editing:!1,dragover:!1,cursorshow:!0,cursoranime:null,lastElapsed:0,refreshElapsed:!1,cursorDragging:!1,shiftOn:!1},this._cursor={row:0,column:[0,0]},this._textRange={enable:!1,rangefrom:null,rangeTo:null},this._makeFunctional()}get currentLineHeight(){return this.lineHeight||parseInt(this.fontSize)}setConfig(t){super.setConfig(t)}refreshTextElements(){this._textElements=this.resolver()}refresh(){this.recalculateUp(),this._jflow._render()}getBoundingDimension(){return{width:this.width,height:this.height}}render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this.anchor,i=this.width,s=this.height,o=this._jflow,r=this._lines;if(t.translate(e,n),t.beginPath(),t.rect(-i/2,-s/2,i,s),t.stroke(),t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.textColor,r.forEach((e=>{const{elements:n}=e;n.forEach((e=>{"text"===e.type&&t.fillText(e.source,e.anchorX,e.anchorY)}))})),this._textElements.forEach((e=>{if("text"!==e.type){const n=o.getRenderNodeBySource(e.source);n.visible&&(t.save(),n.render(t),t.restore())}})),this._status.cursorshow&&(this._status.editing||this._status.dragover)){const{row:e,column:n}=this._cursor,{elements:i,anchorY:s}=r[e],[o,a]=n,h=i[o];let c;if("text"===h.type){const e=h.source.substring(0,a);c=h.anchorX-h.width/2+t.measureText(e).width}else c=h.anchorX-h.width/2;t.beginPath(),t.moveTo(c,s-8),t.lineTo(c,s+8),t.lineWidth=2,t.strokeStyle="#60CFC4",t.stroke()}this._textRange.enable&&this._renderRange(t),t.translate(-e,-n),t.restore()}_renderRange(t){const e=this._lines,n=this.height,i=this.width,{rangefrom:s,rangeTo:o}=this._textRange,[r,a,h]=s,[c,l,u]=o;if(r===c){if(a===l&&h==u)return;const i=e[r];let s=r===e.length-1?0:this.lineSpace;const o=i.reduceHeight-s-i.height-n/2,c=i.height,d=this._measureElementOffsetX(i.elements[a],h,t),f=this._measureElementOffsetX(i.elements[l],u,t);t.beginPath(),t.rect(d,o,f-d,c),t.fillStyle="#4E75EC1A",t.fill()}else{let s=r,o=!0;for(;s<=c;){const r=e[s];let d=s===e.length-1?0:this.lineSpace;const f=r.reduceHeight-d-r.height-n/2,p=r.height;if(o){const e=r.elements[a],n=this._measureElementOffsetX(e,h,t),i=r.elements[r.elements.length-1],s=i.anchorX+i.width/2;t.beginPath(),t.rect(n,f,s-n,p),t.fillStyle="#4E75EC1A",t.fill()}else if(s===c){const e=r.elements[l],n=this._measureElementOffsetX(e,u,t);t.beginPath(),t.rect(-i/2,f,e.reduceWidth+(n-e.anchorX+e.width/2),p),t.fillStyle="#4E75EC1A",t.fill()}else t.beginPath(),t.rect(-i/2,f,r.width,p),t.fillStyle="#4E75EC1A",t.fill();o=!1,s++}}}_measureElementOffsetX(t,e,n){return"text"!==t.type||0===e?t.anchorX-t.width/2:t.anchorX-t.width/2+n.measureText(t.source.substring(0,e)).width}_makeFunctional(){let t;const e=e=>{this._status.editing=!1,t&&t.remove(),this._belongs&&this._jflow._render()};this.addEventListener("dblclick",(t=>{if(t.currentTarget!==this)return;t.detail.bubbles=!1;const e=this._currentp;if(this._status.editing){const t=this._positionToCursorOffset(e);this._selectRowRange(t.row)}})),this.addEventListener("click",(e=>{if(e.currentTarget===this)if(e.detail.bubbles=!1,this._status.editing){const e=this._currentp,n=this._positionToCursorOffset(e);if(this._status.shiftOn){const e=[n.row,...n.column],i=this._textRange.initialRange;this._compareRange(i,e)?(this._textRange.rangefrom=i,this._textRange.rangeTo=e):(this._textRange.rangefrom=e,this._textRange.rangeTo=i),this._textRange.enable=!0;const[s,o,r]=this._textRange.rangeTo;this._cursor={row:s,column:[o,r]},t.focus()}else this._cursor=n,t.focus(),this._refreshCursor()}else{const e=this._currentp,n=this._jflow;this._cursor=this._positionToCursorOffset(e),t=function(t){const e=document.createElement("input");e.setAttribute("style","\n        width: 100%;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;"),e.setAttribute("tabindex",-1),e.setAttribute("aria-hidden",!0),e.setAttribute("spellcheck",!1),e.setAttribute("autocorrect","off");let n=!1;return e.addEventListener("beforeinput",(e=>{e.preventDefault(),e.data&&(n||t("Input",e.data))})),e.addEventListener("compositionstart",(e=>{t("compositionstart"),n=!0})),e.addEventListener("compositionupdate",(e=>{t("compositionupdate",e.data)})),e.addEventListener("compositionend",(i=>{t("compositionend",i.data),e.value="",n=!1})),e.addEventListener("keyup",(e=>{"Shift"===e.key&&t("Shift",!1)})),e.addEventListener("keydown",(e=>{switch(e.code){case"Enter":t("Enter");break;case"Backspace":t("Backspace");break;case"ArrowLeft":t("ArrowLeft");break;case"ArrowRight":t("ArrowRight");break;case"ArrowDown":t("ArrowDown");break;case"ArrowUp":t("ArrowUp")}"Shift"===e.key&&t("Shift",!0)})),e}(this._controlCallback.bind(this)),n.DOMwrapper.append(t),t.focus(),n.setFocusInstance(this),this._status.editing=!0,this._status.cursoranime=n.requestJFlowAnime((t=>{const e=this._status.lastElapsed;this._status.refreshElapsed&&(this._status.lastElapsed=t,this._status.refreshElapsed=!1),t-e>500&&(this._status.cursorshow=!this._status.cursorshow,this._status.lastElapsed=t)}))}})),this.addEventListener("blur",(t=>{console.log("blur"),e(),this.dispatchEvent(new gr("change",{target:this,textElements:this._textElements.slice()})),this._textRange.enable=!1,this._status.cursoranime.cancel(),Object.assign(this._status,{editing:!1,cursorshow:!0,cursoranime:null,lastElapsed:0}),this._status.cursorshow=!0,this._status.cursoranime=null})),this.addEventListener("instancePressStart",(e=>{if(this._status.editing&&!this._status.shiftOn){e.detail.bubbles=!1,e.detail.preventDefault();const n=this._currentp,i=this._positionToCursorOffset(n),s=[i.row,...i.column];this._textRange.initialRange=s;const o=e.detail.jflow;let r=!1;const a=(t=>{r=!0;const{offsetX:e,offsetY:n}=t,i=o._calculatePointBack([e,n]);o._stack.checkHit(i);const s=this._currentp,a=this._positionToCursorOffset(s),h=[a.row,...a.column],c=this._textRange.initialRange;this._status.editing=!1,this._textRange.enable=!0,this._compareRange(c,h)?(this._textRange.rangefrom=c,this._textRange.rangeTo=h):(this._textRange.rangefrom=h,this._textRange.rangeTo=c)}).bind(this);document.addEventListener("pointermove",a),document.addEventListener("pointerup",(e=>{if(console.log("pointerup",r),document.removeEventListener("pointermove",a),!r)return void(this._textRange.initialRange=null);const[n,i,s]=this._textRange.rangeTo;this._cursor={row:n,column:[i,s]},this._status.editing=!0,t.focus(),this._textRange.initialRange=null}),{once:!0})}})),this.addEventListener("dragenter",(()=>{const t=this._currentp;this._cursor=this._positionToCursorOffset(t),this._status.dragover=!0})),this.addEventListener("dragover",(()=>{const t=this._currentp;this._cursor=this._positionToCursorOffset(t)})),this.addEventListener("dragleave",(()=>{this._status.dragover=!1})),this.addEventListener("drop",(e=>{e.detail.bubbles=!1,this._status.dragover=!1;const{row:n,column:i}=this._cursor,s=this._lines[n];let o,[r,a]=i,h=s.elements[r],c=s.elements[r-1];"text"!==h.type&&"text"===c?.type?(a=c.source.length,o=this._textElements.findIndex((t=>t===c))):o=this._textElements.findIndex((t=>t===h));const l=this._textElements.length;this.dispatchEvent(new gr("insert",{...e.detail,textElements:this._textElements.slice(),idx:o,offset:a})),this._status.editing&&(this._textElements.length>l&&(this._cursor.column[0]+=this._textElements.length-l,this._cursor.column[1]=0),t.focus()),this._refreshCursor()}))}_positionToCursorOffset(t){let e,n;const[i,s]=t,o=i+this.width/2,r=s+this.height/2;let a=0;const h=this._lines;for(;a<h.length&&!(h[a].reduceHeight>r);)a++;e=a;const c=h[a],l=c.elements;if(o>=c.width){const t=l[l.length-1];let e=0;"text"===t.type&&(e=t.source.length),n=[l.length-1,e]}else{let t=0,e=0,i=l[t].width;for(;t<l.length-1&&!(i>o);)e=i,t++,i+=l[t].width;const s=l[t];if("text"===s.type){const i=o-e;n=[t,this._calculateOffsetByWidth(i,s)]}else n=[t,0]}return{row:e,column:n}}_calculateOffsetByWidth(t,e){const n=e.source,i=n.length-1;let s=Math.floor(t/e.width);return ao((e=>{let o,r;e.font=`${this.fontSize} ${this.fontFamily}`;do{const i=n.substring(0,s-1),a=n.substring(0,s),h=n.substring(0,s+1),c=e.measureText(i).width,l=e.measureText(a).width;if(o=(l-c)/2+c,r=(e.measureText(h).width-l)/2+l,r<t)s+=1;else if(o>t)s-=1;else if(o<=t&&r>=t)break}while(s>=0&&s<=i)})),s}_selectRowRange(t){const e=this._lines[t].elements,n=e.length-1,i=e[e.length-1];this._textRange={enable:!0,rangefrom:[t,0,0],rangeTo:[t,n,i.tailOffset()]},this._cursor={row:t,column:[n,i.tailOffset()]}}_selectFullRange(){const t=this._lines,e=t.length-1,n=t[e].elements,i=n.length-1,s=n[n.length-1];this._textRange={enable:!0,rangefrom:[0,0,0],rangeTo:[e,i,s.tailOffset()]},this._cursor={row:e,column:[i,s.tailOffset()]}}_compareRange(t,e){return!(t[0]>e[0]||t[0]===e[0]&&t[1]>e[1]||t[0]===e[0]&&t[1]===e[1]&&t[2]>e[2])}_clearTextRange(){if(this._textRange.enable){const{rangefrom:t,rangeTo:e}=this._textRange,n=this._lines[t[0]].elements[t[1]],i=this._lines[e[0]].elements[e[1]];let[s,o]=t.slice(1),r=t[0];if(n===i){const i=n.source;n.source=i.substring(0,t[2])+i.substring(e[2]),n.dirty=!0}else{let a,h="",c="";const l=this._textElements.findIndex((t=>t===n)),u=this._textElements.findIndex((t=>t===i));let d=!1;if("text"===n.type?h=n.source.substring(0,t[2]):a=this._textElements[l-1],"text"===i.type&&(c=i.source.substring(e[2]),d=i.needWrap),a)if(this._textElements.splice(l,u-l+1),"text"===a.type)a.needWrap?r-=1:s-=1,o=a.source.length,a.source+=c,a.dirty=!0,a.needWrap=d;else{const t=new Ur("text",h+c);t.needWrap=d,this._textElements.splice(l,0,t)}else this._textElements.splice(l,u-l),i.source=h+c,i.dirty=!0;0===this._textElements.length&&this._textElements.push(new Ur("text","")),this.reflow()}this._textRange.enable=!1,this._cursor={row:r,column:[s,o]}}}_refreshCursor(){this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),this._textRange.enable&&(this._textRange.enable=!1)}_controlCallback(t,e){switch(this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),t){case"Input":case"compositionstart":case"compositionupdate":case"compositionend":case"Enter":case"Backspace":this._inputControl(t,e);break;case"ArrowLeft":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowLeft();break;case"ArrowRight":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowRight();break;case"ArrowDown":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowDown();break;case"ArrowUp":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowUp();break;case"Shift":this._onShiftToggle(e)}}_inputControl(t,e){if(this._textRange.enable&&(this._clearTextRange(),"Backspace"===t))return this.recalculateUp(),void this._jflow._render();const{row:n,column:i}=this._cursor,s=this._lines[n];let[o,r]=i,a=s.elements[o],h=s.elements[o-1],c="";if("text"===a.type)c=a.source;else if("text"===h?.type)c=h.source,a=h,r=c.length,this._cursor.column[0]-=1,this._cursor.column[1]=c.length;else{const t=new Ur("text",""),e=this._textElements.findIndex((t=>t===a));this._textElements.splice(e,0,t),a=t}let l,u=c.substring(0,r);switch(l=this.cacheIdx?c.substring(this.cacheIdx[1]):c.substring(r),t){case"Input":u+=e,i[1]+=e.length,a.source=u+l,a.dirty=!0;break;case"compositionstart":this.cacheIdx=[u.length,u.length];break;case"compositionupdate":u=u.substring(0,this.cacheIdx[0]),u+=e,a.source=u+l,a.dirty=!0,i[1]=this.cacheIdx[0]+e.length,this.cacheIdx[1]=this.cacheIdx[0]+e.length;break;case"compositionend":u=u.substring(0,this.cacheIdx[0]),i[1]=this.cacheIdx[0]+e.length,this.cacheIdx=null,u+=e,a.source=u+l,a.dirty=!0;break;case"Enter":a.source=u,a.dirty=!0,a.needWrap=!0;const t=new Ur("text",l),s=this._textElements.findIndex((t=>t===a));t.needWrap=s!==this._textElements.length-1,this._textElements.splice(s+1,0,t),this._cursor.row+=1,this._cursor.column=[0,0];break;case"Backspace":switch(a.shift(r,-1)){case"prev":let t=this._textElements.findIndex((t=>t===a));if(o>0){this._textElements.splice(t-1,1),t-=1,a.source=l,a.dirty=!0;const e=this._blandAdjacentElement(this._textElements[t-1],a,t);this._cursor.column=[o-(e>0?2:1),e]}else if(t>0){const e=n-1,i=this._lines[e].elements.length-1,s=this._blandAdjacentElement(this._textElements[t-1],a,t);this._cursor.row=e,this._cursor.column=[i,s]}break;case"self":u=u.substring(0,u.length-1),i[1]-=1,a.source=u+l,a.dirty=!0}}this.recalculateUp(),this._jflow._render()}_onArrowLeft(){const{row:t,column:e}=this._cursor,[n,i]=e,s=this._lines[t].elements,o=s[n],r=this._textElements.findIndex((t=>t===o));switch(o.shift(i,-1)){case"prev":if(n>0){const t=s[n-1];this._cursor.column=[n-1,t.tailOffset()]}else if(r>0){const e=t-1,n=this._lines[e].elements.length-1,i=this._textElements[r-1].tailOffset();this._cursor.row=e,this._cursor.column=[n,i]}this._jflow._render();break;case"self":e[1]-=1,this._jflow._render()}}_onArrowRight(){const{row:t,column:e}=this._cursor,[n,i]=e,s=this._lines[t].elements,o=s[n],r=this._textElements.findIndex((t=>t===o));switch(o.shift(i,1,r===this._textElements.length-1)){case"next":if(n<s.length-1){const t=s[n+1];"text"===o.type&&"text"!==t.type?this._cursor.column=[n+2,t.headOffset()]:this._cursor.column=[n+1,t.headOffset()]}else if(r<this._textElements.length-1){const e=t+1,n=this._textElements[r+1].headOffset();this._cursor.row=e,this._cursor.column=[0,n]}this._jflow._render();break;case"self":e[1]+=1,this._jflow._render()}}_onArrowDown(){const{row:t}=this._cursor;t+1<this._lines.length&&this._ArrowVerticalHanlder(t+1)}_onArrowUp(){const{row:t}=this._cursor;t-1>-1&&this._ArrowVerticalHanlder(t-1)}_onShiftToggle(t){this._status.shiftOn=t,this._textRange.initialRange=t?[this._cursor.row,...this._cursor.column]:null}_ArrowVerticalHanlder(t){const{row:e,column:n}=this._cursor,[i,s]=n;let o=this._lines[e].elements[i],r=o.reduceWidth;s>0&&ao((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,r+=t.measureText(o.source.substring(0,s)).width}));const a=this._lines[t];if(a.width<r){const e=a.elements.length-1,n=a.elements[e];this._cursor.row=t,this._cursor.column=[e,n.tailOffset()]}else{const e=a.elements.slice();let n=0;for(;e.length;){const i=e.shift();if(i.reduceWidth+i.width>r){const e=r-i.reduceWidth;if("text"===i.type){const s=this._calculateOffsetByWidth(e,i);this._cursor.row=t,this._cursor.column=[n,s]}else if(this._cursor.row=t,e<i.width/2){const t=i[n-1];this._cursor.column="text"===t?.type?[n-1,i.tailOffset()]:[n,i.headOffset()]}else this._cursor.column=[n+1,i.headOffset()];break}n++}}this._jflow._render()}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2;return[t[0]-e,t[1]-n,t[0]+e,t[1]+n]}_calculatePointBack(t){const[e,n]=t,[i,s]=this.anchor;return[e-i,n-s]}isHit(t,e){const n=this._calculatePointBack(t),i=this._jflow;this._currentp=n;let s=[];this._textElements.forEach((t=>{if("text"!==t.type){const e=i.getRenderNodeBySource(t.source);e.visible&&s.push(e)}}));const o=this._stack.checkHit(n,e,(t=>s.includes(t)));if(o)return o;const r=this.anchor,a=this.width/2,h=this.height/2;return t[0]>r[0]-a&&t[0]<r[0]+a&&t[1]>r[1]-h&&t[1]<r[1]+h}_blandAdjacentElement(t,e,n){if(!t)return 0;if("text"===t.type&&"text"===e.type){const i=t.source.length;return t.source+=e.source,t.dirty=!0,t.needWrap=e.needWrap,this._textElements.splice(n,1),i}return 0}}Object.assign(Jr.prototype,rr),Object.assign(Jr.prototype,ar),Object.assign(Jr.prototype,{_getBoundingGroupRect(){},resetChildrenPosition(){},reflow(){let t=this.currentLineHeight;const e=this._jflow;ao((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,this._textElements.forEach((e=>{"text"===e.type&&e.dirty&&(e.width=t.measureText(e.source).width,e.dirty=!1)}))}));let n={width:0,height:t,elements:[]};const i=[n];let s=0,o=0,r=null;const a=this.lineSpace;this._textElements.forEach((h=>{if(n.elements.push(h),h.reduceWidth=n.width,"text"===h.type)n.width+=h.width,h.needWrap&&(s+=n.height+a,n.reduceHeight=s,o=Math.max(n.width,o),n={width:0,height:t,elements:[],reduceHeight:0},i.push(n));else{const t=e.getRenderNodeBySource(h.source);n.height=Math.max(n.height,t.height);let i="text"!==r?.type?this.elementSpace:2*this.elementSpace;n.width+=t.width+i}r=h})),this._textElements[this._textElements.length-1].isTail=!0,s+=n.height,n.reduceHeight=s,o=Math.max(n.width,o);const h=o/2;let c=-s/2,l=0;i.forEach((t=>{const{height:n,elements:i,reduceHeight:s}=t,o=c+l+n/2;t.anchorY=o;let r=-h;i.forEach((t=>{if("text"!==t.type){const n=e.getRenderNodeBySource(t.source);let i=this.elementSpace;t.width=n.width+i,t.anchorY=o,t.anchorX=r+t.width/2+i/2,n.anchor=[t.anchorX,t.anchorY],r+=t.width+i/2}else t.anchorY=o,t.anchorX=r+t.width/2,r+=t.width})),l=s})),this._lines=i,this.width=o,this.height=s}});const Kr=Jr,Zr=_r(br),Qr=_r(wr),ta=_r(kr),ea=_r(Sr,{shapeShift:(t,e)=>[t+.28865*e,e]}),na=_r(class extends Sr{constructor(t){super(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,o=i/1.732,r=n-s,a=n+s,h=n-s+o,c=n+s-o,l=e-i,u=e+i;t.moveTo(e,r),t.lineTo(u,h),t.lineTo(u,c),t.lineTo(e,a),t.lineTo(l,c),t.lineTo(l,h),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore(),this._cachePoints=[[e,r],[u,h],[u,c],[e,a],[l,c],[l,h]]}},{shapeShift:(t,e)=>[t,e+.5773*t]}),ia=_r(xr),sa=_r(yr,{shapeShift(t,e,n){const i=Math.ceil(Math.sqrt(t*t+e*e)/2);n.radius=i;const s=2*i;return[s,s]}});class oa extends EventTarget{constructor(t){super(),this.uniqueName="jflow",this.eventAdapter=new class{constructor(t={}){this.plugin=function(){let t={x:void 0,y:void 0,enableClick:!1};return{canvas:{wheel:function(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:o}=t;t.ctrlKey?(o=-o,e.zoomHandler(n,i,s,o,t)):e.panHandler(-s,-o,t)},pointerdown:function(e,n){const{offsetX:i,offsetY:s,deltaY:o,button:r}=e;0===r&&(t.x=i,t.y=s,n.pressStartHandler(i,s,e))},pointermove:function(t,e){const{offsetX:n,offsetY:i}=t;e.pressMoveHandler(n,i,t)},pointerup:function(e,n){e.preventDefault();const{offsetX:i,offsetY:s,button:o}=e;0===o&&(t.x===i&&t.y===s&&(t.x=void 0,t.y=void 0,t.enableClick=!0),n.pressUpHanlder(!1,e))},contextmenu:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.contextMenuHanlder(n,i,t)},dblclick:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.dblclickHandler(n,i,t)},click:function(e,n){e.preventDefault(),e.stopPropagation();const{offsetX:i,offsetY:s}=e;t.enableClick&&(t.enableClick=!1,n.clickHanlder(i,s,e))}},document:{pointerup:function(t,e){e.pressUpHanlder(!0,t)}}}}(),this.use(t),this.canvasHandlers=[],this.documentHandlers=[]}use(t={}){const{canvas:e,document:n}=t;if(e)for(let t in e)e.hasOwnProperty(t)&&(this.plugin.canvas[t]=e[t]);if(n)for(let t in n)n.hasOwnProperty(t)&&(this.plugin.document[t]=n[t])}apply(t){const{canvas:e,document:n}=this.plugin,i=t.canvas;for(let s in e){const o=e[s];function r(e){o(e,t)}i.addEventListener(s,r),this.canvasHandlers.push({eventName:s,handlerWrapperd:r})}for(let a in n){const h=n[a];function c(e){h(e,t)}document.addEventListener(a,c),this.documentHandlers.push({eventName:a,handlerWrapperd:c})}}unload(t){const e=t.canvas;this.canvasHandlers.forEach((({eventName:t,handlerWrapperd:n})=>{e.removeEventListener(t,n)})),this.documentHandlers.forEach((({eventName:t,handlerWrapperd:e})=>{document.removeEventListener(t,e)}))}}(t.eventAdapter),this.initNodeWeakMap(),this.initAnime(),this.initStack(t),this.initLayout(t),this.ctx=null,this.canvas=null,this.dpr=1,this.padding=20,this.position=null,this.scale=null,this.initialZoom=t.initialZoom,this.initialPosition=t.setInitialPosition,this.maxZoom=t.maxZoom||3,this.minZoom=t.minZoom||.5,this.NodeRenderTop=!!t.NodeRenderTop,this.worldMargin=t.worldMargin,this.draggingbehavior=Object.assign({panInBorder:{enable:!0,padding:20,deltamovement:8,allowMovingTargetInPan:!0}},t.draggingbehavior||{}),this.scrollBarBehavior=Object.assign({enable:!0},t.scrollBarBehavior||{}),this.offeset=null,this._lastState={x:null,y:null,dragging:!1,processing:!1},this._lastDragState={target:null,targetLink:null,processing:!1},this._target={instance:null,link:null,moving:null,isInstanceDirty:!1,isLinkDirty:!1,cache:{stack:null,belongs:null,point:null},meta:{x:void 0,y:void 0,initialX:void 0,initialY:void 0},status:{dragovering:!1,dragging:!1,processing:!1,movingState:!1}},this._focus={instance:null},this._dragOverTarget=null,this.allowDrop=t.allowDrop,this._tempNode=null,this._tempLink=null,this.mode=Ro.DEFAULT,this._allowMovingTarget=!0}setMovingTargets(t){Object.assign(this._target,{moving:t})}setTempDraggingInstance(t){t._belongs=this,this._tempNode=t,Object.assign(this._target,{moving:[this._tempNode],dragging:!0})}removeTempDraggingInstance(){if(this._tempNode){const t=this._tempNode.anchor;return this._tempNode=null,t}}preventDefaultDragging(){this._allowMovingTarget=!1}allowDefaultDragging(){this._allowMovingTarget=!0}$mount(t){const{canvas:e,ctx:n,scale:i,width:s,height:o,raw_width:r,raw_height:a,left:h,top:c}=io(t);this.reflow(),this.ctx=n,this.DOMwrapper=t,this.canvas=e,this.canvas.setAttribute("data-jflow",!0),this.canvas.$jflow=this,this.canvasMeta={width:r,height:a,actual_width:s,actual_height:o},this.dpr=i,this._getBoundingGroupRect();const l=this.padding,{width:u,height:d,x:f,y:p}=this.bounding_box,g={x:l,y:l,width:s-2*l,height:o-2*l},m={x:0,y:0,offsetX:0,offsetY:0},v=g.width/u,_=g.height/d,y=v<=_?"x":"y";let b;b=this.initialZoom?this.initialZoom:Math.min(v,_),this.scale=b,b>this.maxZoom&&(this.maxZoom=b),b<this.minZoom&&(this.minZoom=b);const w=f*b,x=p*b,k=g.width,S=g.height;if(this.initialPosition){const{x:t,y:e}=this.initialPosition(w,x,k,S,g.x,g.y,s,o,f,p,u,d);m.x=t,m.y=e}else m.x="x"===y?g.x:(k-u*b)/2+l,m.y="y"===y?g.y:(S-d*b)/2+l;m.offsetX=m.x-w,m.offsetY=m.y-x,this.position=m,this._readyToRender=!0,this.scrollBarBehavior.enable&&this.initScrollBar(this.scrollBarBehavior),this.scheduleRender((()=>{this._createEventHandler()})),ho((t=>{this.dpr=t,this.scheduleRender()}))}setLinkingMode(t,e,n){const i=this.getRenderNodeBySource(t);this._tempNode=new er,this._tempLink=e(n?{from:this._tempNode,to:i}:{from:i,to:this._tempNode}),this.sendMessage({instance:t}),this.mode=Ro.LINKING}isInLinkingMode(){return this.mode===Ro.LINKING}setLinkingLink(t){this.mode===Ro.LINKING&&this._tempLink.setConfig(t)}resetLinkingLink(){this.mode===Ro.LINKING&&this._tempLink.setConfig({to:this._tempNode})}clearTemp(){this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null),this._render()}preventClearTemp(){this._preventClearTemp=!0}resizeCanvas(){const{width:t,height:e,raw_width:n,raw_height:i}=function(t,e){const{width:n,height:i,left:s,top:o}=e.getBoundingClientRect();t.style.width=n+"px",t.style.height=i+"px";const r=window.devicePixelRatio;return t.width=Math.floor(n*r),t.height=Math.floor(i*r),{width:n,height:i,raw_width:t.width,raw_height:t.height}}(this.canvas,this.DOMwrapper);this.canvasMeta={width:n,height:i,actual_width:t,actual_height:e}}setFocusInstance(t){this._focus.instance=t}focusOn(t){const e=this._calculatePointBack([this.canvasMeta.actual_width/2,this.canvasMeta.actual_height/2]);let n=t.anchor;t._belongs.calculateToCoordination&&(n=t._belongs.calculateToCoordination(n));const i=(e[0]-n[0])*this.scale,s=(e[1]-n[1])*this.scale;this._recalculatePosition(i,s),this._render()}_getBoundingGroupRect(){const t=this._stack.getBoundingRectPoints();if(this.bounding_box){this.bounding_box=$o(t);const{x:e,y:n}=this.bounding_box,i=this.scale;this.position.x=this.position.offsetX+e*i,this.position.y=this.position.offsetY+n*i}else this.bounding_box=$o(t)}_createEventHandler(){const t=this.canvas;let e;this.eventAdapter.apply(this);const n=()=>{this.eventAdapter.unload(this)};if(e=n,this.allowDrop){const i=this._onDragover.bind(this),s=this._onDrop.bind(this),o=this._onDragLeave.bind(this);t.addEventListener("dragstart",(t=>{t.preventDefault()})),t.addEventListener("dragover",i),t.addEventListener("drop",s),t.addEventListener("dragleave",o),e=()=>{n(),t.removeEventListener("dragover",i),t.removeEventListener("drop",s),t.removeEventListener("dragleave",o)}}this.destroy=e}_targetLockOn(t,e){let n=this._calculatePointBack(t);const i=n;this._currentp=n;let s=this._stack;const o=this._getViewBox(),r=s.checkHit(n,(t=>this._target.status.dragging&&t===this._getMovingTarget()),(t=>Uo(o,t.getBoundingRect())));let a,h=this._linkStack;if(r&&r._belongs!==this||(a=h.checkHit(n,(t=>{if(!this._target.status.dragging)return!1;const e=this._getMovingTarget();return t.from===e||t.to===e}))),a||(a=h.checkHit(n,(t=>!t.ON_TOP))),Object.assign(this._target,{instance:r,link:a,isInstanceDirty:r===this._target.instance,isLinkDirty:a===this._target.link}),Object.assign(this._target.cache,{stack:s,belongs:this,point:n,topLayerPoint:i}),Object.assign(this._target.meta,{x:t[0],y:t[1]}),"pressStart"===e&&!this._target.status.dragging&&!this._target.status.dragovering){let t=r;for(;t&&t._belongs.lock&&t!==this;)t=t._belongs;this.setMovingTargets(t&&[t]),t&&r.bubbleEvent(new gr("afterResolveMovingTarget",{event:e,target:t,jflow:this,bubbles:!0}))}return["pressStart","click","dblclick","contextclick"].includes(e)&&this._focus.instance&&this._focus.instance!==r&&(this._focus.instance.dispatchEvent(new gr("blur",{relatedTarget:r})),this._focus.instance=null),this._target}_getMovingTarget(){return this._target.moving&&this._target.moving[0]}_processDragOver(t,e){if(this._dragOverTarget!==t){const n=this.readMessage()?.instance;this._dragCurrentData=n;const{point:i}=this._target.cache;if(this._dragOverTarget){const t=this._dragOverTarget;t.dispatchEvent(new gr("dragleave",{event:e,instance:t,target:n,jflow:this,point:i}))}t&&t.dispatchEvent(new gr("dragenter",{event:e,instance:t,target:n,jflow:this,point:i})),this._dragOverTarget=t}else this._dragOverTarget&&this._dragOverTarget.dispatchEvent(new gr("dragover",{event:e,instance:t,jflow:this,target:this._dragCurrentData}));this._processPanInBorder()}_processPanInBorder(){if(this.draggingbehavior?.panInBorder?.enable&&(this.draggingbehavior.panInBorder.timer||(this.draggingbehavior.panInBorder.timer=Date.now()),Date.now()-this.draggingbehavior.panInBorder.timer>500)){const[t,e,n,i]=this._cacheViewBox,[s,o]=this._currentp,{padding:r,deltamovement:a}=this.draggingbehavior.panInBorder;let h=0,c=0;s<t+r&&(h=a),s>n-r&&(h=-a),o<e+r&&(c=a),o>i-r&&(c=-a),this.__processOverAnime&&this.__processOverAnime.cancel(),h||c?this.__processOverAnime=this.requestJFlowAnime((()=>{this.panHandler(h,c)})):this.draggingbehavior.panInBorder.timer=null}}_onDragover(t){if(t.preventDefault(),t.stopPropagation(),this._lastDragState.processing)return;this._lastDragState.processing=!0;const{offsetX:e,offsetY:n}=t;Object.assign(this._target.status,{dragovering:!0}),this._targetLockOn([e,n]);const i=this._target.instance||this._target.link;this._processDragOver(i,t),this._target.isLinkDirty||this._target.isInstanceDirty?Promise.resolve().then((()=>{this._render(),this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._lastDragState.processing=!1})):this._lastDragState.processing=!1}_cancelPanInBorder(){this.__processOverAnime&&this.__processOverAnime.cancel(),this.draggingbehavior?.panInBorder&&(this.draggingbehavior.panInBorder.timer=null)}_onDragLeave(){this._cancelPanInBorder()}_onDrop(t){this._cancelPanInBorder();const e=this.consumeMessage().instance;if(this._dragOverTarget){const e=this._dragOverTarget;e.dispatchEvent(new gr("dragoverend",{event:t,instance:e})),this._dragOverTarget=null}const{link:n,instance:i}=this._target,{point:s,belongs:o}=this._target.cache;n?n.dispatchEvent(new gr("drop",{event:t,instance:e,link:n,jflow:this,belongs:o,point:s})):i?i.bubbleEvent(new gr("drop",{event:t,instance:e,jflow:this,target:i,point:s,bubbles:!0})):this.dispatchEvent(new gr("drop",{event:t,instance:e,jflow:this,target:i,point:s})),requestAnimationFrame((()=>{this.cancelDrop()}))}cancelDrop(){this._target.instance=null,this._target.link=null,Object.assign(this._target.status,{dragovering:!1})}zoomHandler(t,e,n,i,s){if(this._zooming)return;this._zooming=!0;const{width:o,height:r,x:a,y:h}=this.bounding_box,{actual_width:c,actual_height:l}=this.canvasMeta;let u=this.minZoom;if(this.worldMargin){const t=this.worldMargin,e=o+2*t,n=r+2*t;u=Math.max(u,Math.max(c/e,l/n))}let d=this.scale;d*=i>0?1.1:1/1.1,d=Math.min(this.maxZoom,Math.max(u,d));var f=d-this.scale,p=o*this.scale,g=r*this.scale,m=o*f,v=r*f,_=-(t-this.position.x)/p,y=-(e-this.position.y)/g;this.scale=d,this._recalculatePosition(_*m,y*v),this.dispatchEvent(new gr("zoompan",{deltaX:0,deltaY:0})),this.scheduleRender((()=>{this._zooming=!1}))}panHandler(t,e,n){if(this._panning)return;this._panning=!0;const{dragging:i}=this._target.status;if(i){const n=this._target.moving;n&&this.draggingbehavior.panInBorder.allowMovingTargetInPan&&n.forEach((n=>{n.anchor[0]+=-t/this.scale,n.anchor[1]+=-e/this.scale}))}this._recalculatePosition(t,e),this.dispatchEvent(new gr("zoompan",{deltaX:t,deltaY:e})),this.scheduleRender((()=>{this._panning=!1}))}pressStartHandler(t,e,n){if(this.checkScrollDragging())return;Object.assign(this._target.meta,{initialX:t,initialY:e});const{link:i,instance:s}=this._targetLockOn([t,e],"pressStart");if(this.mode===Ro.LINKING)return;if(Object.assign(this._target.status,{dragging:!0,processing:!1}),this._target.moving){const t=this._getMovingTarget();t.dispatchEvent(new gr("pressStart",{event:n,instance:t,jflow:this}))}const o=this._resolveLockOnTarget(i,s);o&&o.bubbleEvent(new gr("instancePressStart",{event:n,target:o,jflow:this,bubbles:!0,preventDefault:()=>{this._preventPressSequeence=!0,this._clearTarget(),document.addEventListener("pointerup",(t=>{t.preventDefault(),t.stopPropagation(),this._preventPressSequeence=!1}),{once:!0})}})),this.dispatchEvent(new gr("jflowPressStart",{event:n,jflow:this}))}pressMoveHandler(t,e,n){if(this._preventPressSequeence)return;if(this.checkScrollDragging())return;const{dragging:i,processing:s}=this._target.status,{x:o,y:r}=this._target.meta;if(!i){if(this.checkScrollBarHover(t,e))return;this.resetScrollBarHover()}if(!i&&!s){const{link:i,instance:s}=this._targetLockOn([t,e]),o=this._resolveLockOnTarget(i,s);if(o?o.bubbleEvent(new gr("instancemousemove",{event:n,instance:o,jflow:this,bubbles:!0})):this.dispatchEvent(new gr("instancemousemove",{event:n,instance:null,jflow:this})),this.mode===Ro.LINKING)return this._tempNode.anchor=this._currentp,this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1})),void this._processPanInBorder()}if(this.dispatchEvent(new gr("canvasmousemove",{event:n,jflow:this})),!i)return;if(s)return;const a=this._target.moving;this._target.status.movingState=!0,this._target.status.processing=!0;const h=t-o,c=e-r;a?this._allowMovingTarget&&a.forEach((t=>{t.anchor[0]+=h/this.scale,t.anchor[1]+=c/this.scale})):(this._recalculatePosition(h,c),this.dispatchEvent(new gr("zoompan",{deltaX:h,deltaY:c})));const{instance:l,link:u}=this._targetLockOn([t,e]);this._processDragOver(l||u,n),this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1}))}pressUpHanlder(t,e){if(!this._preventPressSequeence){if(this.__processOverAnime&&this.__processOverAnime.cancel(),this._cancelPanInBorder(),this._target.meta,this.mode===Ro.LINKING){const t=this._target.instance,n=this.consumeMessage();if(t)t.bubbleEvent(new gr("link",{event:e,target:t,jflow:this,payload:n,bubbles:!0,link:this._tempLink}));else{const{offsetX:t,offsetY:i}=e;this.dispatchEvent(new gr("link",{event:e,jflow:this,payload:n,anchor:this._calculatePointBack([t,i]),link:this._tempLink}))}return this._clearTarget(),this._preventClearTemp||(this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null)),this._preventClearTemp=!1,this.mode=Ro.DEFAULT,void this._render()}if(this._target.moving){let t=!1;if(this._layout.static&&(t=this.staticCheck(this._getMovingTarget())),!t&&this._target.link){const{point:t,belongs:n}=this._target.cache,i=this._target.link,s=this._getMovingTarget();i.dispatchEvent(new gr("drop",{event:e,instance:s,link:i,jflow:this,belongs:n})),this._target.link=null,this._target.instance=null}this._target.moving&&(this._target.instance?this._target.instance.bubbleEvent(new gr("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this,target:this._target.instance,bubbles:!0})):this.dispatchEvent(new gr("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this}))),this._target.moving=null,this.removeTempDraggingInstance(),this._render()}this._clearTarget()}}clickHanlder(t,e,n){const{link:i,instance:s,meta:o}=this._targetLockOn([t,e],"click");if(Math.abs(o.initialX-o.x)<1&&Math.abs(o.initialY-o.y)<1){if(n.target!==this.canvas)return this._clearTarget(),void Object.assign(this._target.meta,{initialX:void 0,initialY:void 0});const{topLayerPoint:t}=this._target.cache,e=this._resolveLockOnTarget(i,s);if(e){const i=e;i.bubbleEvent(new gr("click",{event:n,jflow:this,target:i,topLayerPoint:t,bubbles:!0}))}else this.dispatchEvent(new gr("click",{event:n,jflow:this,topLayerPoint:t}));this._clearTarget(),Object.assign(this._target.meta,{initialX:void 0,initialY:void 0})}}contextMenuHanlder(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"contextclick"),{topLayerPoint:o}=this._target.cache,r=this._resolveLockOnTarget(i,s);if(r){const t=r;t.bubbleEvent(new gr("contextclick",{event:n,jflow:this,target:t,topLayerPoint:o,bubbles:!0}))}else this.dispatchEvent(new gr("contextclick",{event:n,jflow:this,topLayerPoint:o}))}dblclickHandler(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"dblclick"),{topLayerPoint:o}=this._target.cache,r=this._resolveLockOnTarget(i,s);if(r){const t=r;t.bubbleEvent(new gr("dblclick",{event:n,jflow:this,target:t,topLayerPoint:o,bubbles:!0}))}else this.dispatchEvent(new gr("dblclick",{event:n,jflow:this,topLayerPoint:o}))}_resolveLockOnTarget(t,e){return t?.ON_TOP?t:e||t}_clearTarget(){Object.assign(this._target.meta,{x:void 0,y:void 0}),Object.assign(this._target.status,{dragging:!1,processing:!1,movingState:!1}),Object.assign(this._target,{instance:null,link:null,moving:null})}_recalculatePosition(t,e,n){const{x:i,y:s,width:o,height:r}=this.bounding_box,{actual_width:a,actual_height:h}=this.canvasMeta;if(void 0===n&&(n=this.scale),this.worldMargin){const c=this.worldMargin,l=(i+o+c)*n-a,u=(i-c)*n,d=i*n,f=this.position.x+t-d;this.position.offsetX=Math.min(Math.max(-l,f),-u),this.position.x=this.position.offsetX+d;const p=(s+r+c)*n-h,g=(s-c)*n,m=s*n,v=this.position.y+e-m;this.position.offsetY=Math.min(Math.max(-p,v),-g),this.position.y=this.position.offsetY+m}else this.position.x+=t,this.position.y+=e,this.position.offsetX=this.position.x-i*n,this.position.offsetY=this.position.y-s*n}calculateToRealWorld(t){const e=this.scale,n=this.position;return[t[0]*e+n.offsetX,t[1]*e+n.offsetY]}_calculatePointBack(t){const e=this.scale,n=this.position;return[(t[0]-n.offsetX)/e,(t[1]-n.offsetY)/e]}_calculateDistance(t){return this.scale*t}_resetTransform(){const{width:t,height:e}=this.canvasMeta,n=this.position,i=this.scale,s=this.ctx;s.setTransform(),s.clearRect(0,0,t,e),s.scale(this.dpr,this.dpr),s.transform(i,0,0,i,n.offsetX,n.offsetY)}resetTransform(t){const e=this.position,n=this.scale;t.setTransform(),t.scale(this.dpr,this.dpr),t.transform(n,0,0,n,e.offsetX,e.offsetY)}_getViewBox(){const t=[...this._calculatePointBack([0,0]),...this._calculatePointBack([this.canvasMeta.actual_width,this.canvasMeta.actual_height])];return this._cacheViewBox=t,t}setNodeToTopLayer(t){const e=this._stack.findIndex((e=>e===t));if(-1!==e){const[t]=this._stack.splice(e,1);this._stack.push(t)}}getCacheViewBox(){return this._cacheViewBox}_render(){this.scheduleRender()}__render(){if(!this._readyToRender)return;this.runAnimeFrame(),this._resetTransform();const t=this.ctx;this.dispatchEvent(new gr("beforeJflowRender",{ctx:t}));const e=this._getViewBox();this._viewBox=e,this.NodeRenderTop?(this._linkStack.render(t,(t=>!t.ON_TOP&&t.isInViewBox(e))),this._stack.render(t,(t=>{const n=Uo(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.ON_TOP&&t.isInViewBox(e)))):(this._stack.render(t,(t=>{const n=Uo(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.isInViewBox(e)))),this._tempNode&&(t.save(),this._tempNode.render(t),t.restore()),this._tempLink&&(t.save(),this._tempLink.isInViewBox(e),this._tempLink.render(t),t.restore()),this.dispatchEvent(new gr("afterJflowRender",{ctx:t})),this.renderScrollBar(t)}}Object.assign(oa.prototype,hr),Object.assign(oa.prototype,rr),Object.assign(oa.prototype,ar),Object.assign(oa.prototype,ir),Object.assign(oa.prototype,cr),Object.assign(oa.prototype,lr),Object.assign(oa.prototype,fr),Object.assign(oa.prototype,dr);const ra=oa,aa={provide(){return{addToStack:this.addToStack,addToLinkStack:this.addToLinkStack,removeFromStack:this.removeFromStack,removeFromLinkStack:this.removeFromLinkStack}},data:()=>({stack:[]}),methods:{addToStack(t,e){this._jflowInstance.addToStack(t),e&&t._jflow.setRenderNodeBySource(e,t)},addToLinkStack(t,e,n){this._jflowInstance.addToLinkStack(t),e&&n&&t._jflow.addLinkNodeBySource(e,n,t)},removeFromStack(t){this._jflowInstance.removeFromStack(t)},removeFromLinkStack(t,e,n){this._jflowInstance.removeFromLinkStack(t),e&&n&&t._jflow.removeLinkNodeBySource(e,n,t)},onStackChangeHandler(){this._jflowInstance.recalculate(),this._jflowInstance.reflow()}}},ha={mixins:[aa],provide(){return{renderJFlow:this.renderJFlow,getJFlow:this.getInstance}},props:{configs:{type:Object,default:function(){return{}}},loading:Boolean,genVueComponentKey:{type:Function}},data:()=>({renderNodes:[],renderLinks:[]}),render:function(t){return this.renderNodes.length?t("div",[...this.renderNodes.map((({type:t,source:e,layoutNode:n})=>{if(!this.$scopedSlots[t]){if(!this.$scopedSlots.jflowcommon)return;t="jflowcommon"}if(n.__vnode__)return n.__vnode__;const[i]=this.$scopedSlots[t]({source:e,layoutNode:n});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(e)),n.__vnode__=i,i})),...this.renderLinks.map((t=>{let e=t.type||"plainlink";if(!this.$scopedSlots[e])return null;if(t.__vnode__)return t.__vnode__;const[n]=this.$scopedSlots[e]({configs:t});if(this.genVueComponentKey){const e=this.genVueComponentKey(t.from.source),i=this.genVueComponentKey(t.to.source),s=t.part;n.key=`${e}-${i}-${s}`}return t.__vnode__=n,n}))]):t("div",this.$slots.default)},created(){this._jflowInstance=new ra(this.configs),this.genNodeLinkMeta(),this.loadingNodes()},beforeDestroy(){this._jflowInstance.destroy()},methods:{loadingNodes(){this.$emit("update:loading",!0);let t=0;const e=()=>{const n=t+100,i=this.links.slice(t,n);i.length?(this.renderLinks=this.renderLinks.concat(i),t=n,requestAnimationFrame(e)):requestAnimationFrame(this.mountJFlow.bind(this))},n=()=>{const i=t+100,s=this.nodes.slice(t,i);s.length?(this.renderNodes=this.renderNodes.concat(s),t=i,requestAnimationFrame(n)):(t=0,requestAnimationFrame(e))};requestAnimationFrame(n)},mountJFlow(){this._jflowInstance.$mount(this.$el),Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.$emit("update:loading",!1)},genNodeLinkMeta(){this.nodes=this._jflowInstance._layout.flowStack.map((t=>{const{type:e,layoutNode:n,source:i}=t,s=this._jflowInstance.source_Layout_Render_NodeMap;let o;return o=s.has(i)?s.get(i):s.set(i),o.layoutNode=n,t})),this.links=this._jflowInstance._layout.flowLinkStack.slice()},syncNodeLink(){this.renderNodes=this.nodes.slice(),this.renderLinks=this.links.slice()},reflow(t,e){this.genNodeLinkMeta(),this.syncNodeLink(),this.$nextTick((()=>{t&&t(),this._jflowInstance.recalculate(),this._jflowInstance.scheduleRender((()=>{e&&e()}))}))},getInstance(){return this._jflowInstance},renderJFlow(){this.__renderInSchedule__||(this.__renderInSchedule__=!0,this.$nextTick((()=>{this._jflowInstance._render(),this.__renderInSchedule__=!1})))}}};var ca=i(776),la=i.n(ca);function ua(t){const n="string"==typeof t?e[t]:t;return{inject:["addToStack","removeFromStack"],props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){const n=la()(t,e);0!==Object.keys(n).length&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},render:function(t){return null},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,this.bindListeners(),this.addToStack(this._jflowInstance,this.source)},destroyed(){this._jflowInstance.destroy(),this.removeFromStack(this._jflowInstance)},methods:{bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}}}}function da(t,n){const i="string"==typeof t?e[t]:t;return{inject:["addToLinkStack","removeFromLinkStack","getJFlow"],props:{configs:{type:Object,default:function(){return{}}},from:Object,to:Object},render:function(t){return null},created(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this.createInstance(e,n)},mounted(){this.unwatch=this.$watch((()=>[this.from,this.to,this.configs]),(()=>{this.refreshConfig()}))},methods:{createInstance(t,e){t&&e&&(this._jflowInstance=new i({...this.configs,from:t,to:e}),this.bindListeners(),this.addToLinkStack(this._jflowInstance,this.from,this.to))},refreshConfig(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this._jflowInstance?this._jflowInstance.setConfig({...this.configs,from:e,to:n}):this.createInstance(e,n)},bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}},destroyed(){this.unwatch(),this._jflowInstance&&this.removeFromLinkStack(this._jflowInstance,this.from,this.to)}}}function fa(t){const n="string"==typeof t?e[t]:t;return{mixins:[aa],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},render:function(t){return t("jflow-group",this.$slots.default)},props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source)},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)}}}const pa={mixins:[aa],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},data:()=>({nodes:[]}),props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object},genVueComponentKey:{type:Function}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),o=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;o.find((t=>t.handler===e))||n.push(t)})),o.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new Kr(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source),this.genTextElementMeta()},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)},render:function(t){return this.nodes.length?t("div",this.nodes.map((t=>{const{type:e,source:n}=t;if(!this.$scopedSlots[e]){if(!this.$scopedSlots.jflowcommon)return;e="jflowcommon"}if(t.__vnode__)return t.__vnode__;const[i]=this.$scopedSlots[e]({source:n,textElement:t});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(n)),t.__vnode__=i,i}))):t("jflow-group",this.$slots.default)},methods:{genTextElementMeta(){this.nodes=this._jflowInstance._textElements.filter((t=>"text"!==t.type))},reflow(){this._jflowInstance.refreshTextElements(),this.genTextElementMeta(),this.$nextTick((()=>{this._jflowInstance.refresh()}))}}},ga=[{name:"Jflow",component:ha},{name:"Group",component:fa("Group")},...["CapsuleGroup","CapsuleVerticalGroup","DiamondGroup","DiamondVerticalGroup","RhombusGroup","PointGroup"].map((t=>({name:t,component:fa(t)}))),...["Point","Rectangle","Capsule","Diamond","Rhombus","Text","Icon","ShadowDom","TextEditor"].map((t=>({name:t,component:ua(t)}))),...["Link","PolyLink","BezierLink"].map((t=>({name:t,component:da(t)}))),{name:"TextGroup",component:pa}];customElements.define("jflow-group",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}});const ma={install:(t,e={})=>{let n="j";e&&e.prefix&&(n=e.prefix),ga.forEach((e=>{t.component(`${n}${e.name}`,e.component)})),e.customInstance&&Object.keys(e.customInstance).forEach((i=>{t.component(`${n}${i}`,ua(e.customInstance[i]))})),e.customGroups&&Object.keys(e.customGroups).forEach((i=>{t.component(`${n}${i}`,fa(e.customGroups[i]))})),e.customLink&&Object.keys(e.customLink).forEach((i=>{t.component(`${n}${i}`,da(e.customLink[i]))}))}},va=i(114);window.$jflow_version=va.version;var _a=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("button",{staticStyle:{border:"1px solid red"},attrs:{draggable:"true"},on:{dragstart:t.onDragSimpleNode}},[t._v("simplenode")])]),t._v(" "),e("j-jflow",{ref:"jflow",staticStyle:{width:"800px",height:"600px",border:"1px solid #000"},attrs:{genVueComponentKey:t.genVueComponentKey,configs:t.configs},scopedSlots:t._u([{key:"SimpleNode",fn:function({source:t}){return[e("text-group-node",{attrs:{node:t}})]}}])})],1)};_a._withStripped=!0;class ya{constructor(t){this.type="SimpleNode",this.source=t}}var ba=function(){var t=this,e=t._self._c;return e("j-text-group",{ref:"textgroup",attrs:{source:t.node,genVueComponentKey:t.genVueComponentKey,configs:t.configs},on:{change:t.onChange,insert:t.onInsert},scopedSlots:t._u([{key:"SimpleNode",fn:function({source:t}){return[e("simple-node",{attrs:{node:t}})]}}])})};ba._withStripped=!0;var wa=function(){var t=this,e=t._self._c;return e("j-group",{attrs:{source:t.node,configs:t.configs},on:{click:t.onClick,instancePressStart:t.onPressStart}},[e("j-text",{attrs:{configs:{textColor:"#EB6864",content:t.node.name}}})],1)};function xa(t,e,n,i,s,o,r,a){var h,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=h):s&&(h=a?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),h)if(c.functional){c._injectStyles=h;var l=c.render;c.render=function(t,e){return h.call(e),l(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,h):[h]}return{exports:t,options:c}}wa._withStripped=!0;var ka=xa({inject:["renderJFlow"],props:{node:Object},data:()=>({toggle:!1}),computed:{configs(){return{borderRadius:8,borderColor:"#EB6864",borderWidth:2,padding:this.toggle?10:20}}},methods:{onClick(t){t.detail.bubbles=!1,this.toggle=!this.toggle},onPressStart(t){event.detail.bubbles=!1,event.detail.preventDefault()}},mounted(){console.log("simpleNode mount")},updated(){this.renderJFlow()}},wa,[],!1,null,null,null);const Sa=xa({components:{simpleNode:ka.exports},props:{node:Object},data(){return{configs:{borderWidth:1,borderColor:"#ddd",textColor:"#000",lineHeight:22,fontSize:"18px",resolver:this.resolver.bind(this)}}},methods:{resolver(){const t=[];return this.node.elements.map((e=>{if("string"==typeof e){const n=e.split(/\r?\n/);n.forEach(((e,i)=>{let s=new Ur("text",e);void 0!==n[i+1]&&(s.needWrap=!0),t.push(s)}))}else t.push(new Ur(e.type,e))})),t},genVueComponentKey:t=>t.name,onChange(t){const e=t.detail.textElements;console.log(e);const n=this.node.elements.filter((t=>"string"==typeof t)).join("");e.filter((t=>"text"===t.type)).map((t=>`${t.source}${t.needWrap?"\n":""}`)).join("")!==n&&this.refresh(e)},refresh(t){const e=[];let n="";t.forEach((t=>{"text"===t.type?(n+=t.source,t.needWrap&&(n+="\n")):(n&&(e.push(n),n=""),e.push(t.source))})),n&&e.push(n),console.log(e),this.node.elements=e,this.$refs.textgroup.reflow()},onInsert(t){const{idx:e,offset:n,textElements:i,instance:s}=t.detail;if(n>0){const t=i[e],o=t.source,r=o.substring(0,n),a=o.substring(n),h=new Ur("text",a);h.needWrap=t.needWrap,i.splice(e,1,new Ur("text",r),new Ur(s.type,s),h)}else i.splice(e,0,new Ur(s.type,s));this.refresh(i)}}},ba,[],!1,null,null,null).exports;let Ta=10;const Ca=new class{constructor(t){this.static=!1,this.flowLinkStack=[],this.flowStack=[];const e=t.nodes.map((t=>new ya(t)));e.forEach((t=>{this.flowStack.push({type:t.type,source:t.source,layoutNode:t})})),this.erNodes=e}reflow(t){this.erNodes.forEach(((e,n)=>{t.getRenderNodeBySource(e.source).anchor=[0,0]}))}}({nodes:[{elements:["xxxx",{type:"SimpleNode",name:"simpleNode3"},{type:"SimpleNode",name:"simpleNode2"},"asdfs\nfadsf",{type:"SimpleNode",name:"simpleNode1"},"\ndafsdf\ndfasdf",{type:"SimpleNode",name:"simpleNode4"},"asdfas\ndfggf\nddd"]}]}),Ea=xa({provide(){return{renderJFlow:this.renderJFlow}},components:{textGroupNode:Sa},data:()=>({configs:{allowDrop:!0,layout:Ca,eventAdapter:Tr}}),methods:{genVueComponentKey:t=>t.name,onDragSimpleNode(){console.log("dragstart"),this.$refs.jflow.getInstance().sendMessage({instance:{type:"SimpleNode",name:"SimpleNode-"+Ta++}})},renderJFlow(){this.$refs.jflow.renderJFlow()}}},_a,[],!1,null,null,null).exports;qn.config.productionTip=!1,qn.use(ma),new qn({render:t=>t(Ea)}).$mount("#app")})()})();
(function(t){function e(e){for(var i,a,s=e[0],c=e[1],h=e[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"default",(function(){return he})),n.d(i,"JFlowEvent",(function(){return Z})),n.d(i,"Instance",(function(){return G})),n.d(i,"Node",(function(){return K})),n.d(i,"BaseLink",(function(){return tt})),n.d(i,"Point",(function(){return it})),n.d(i,"Rectangle",(function(){return rt})),n.d(i,"Group",(function(){return ht})),n.d(i,"Capsule",(function(){return ut})),n.d(i,"CapsuleGroup",(function(){return ft})),n.d(i,"CapsuleVerticalGroup",(function(){return vt})),n.d(i,"Diamond",(function(){return bt})),n.d(i,"DiamondGroup",(function(){return kt})),n.d(i,"DiamondVerticalGroup",(function(){return wt})),n.d(i,"Rhombus",(function(){return Ot})),n.d(i,"RhombusGroup",(function(){return St})),n.d(i,"Text",(function(){return It})),n.d(i,"Icon",(function(){return Lt})),n.d(i,"Link",(function(){return Mt})),n.d(i,"PolyLink",(function(){return Ft})),n.d(i,"BezierLink",(function(){return Yt})),n.d(i,"LinearLayout",(function(){return Xt})),n.d(i,"Lowcodelayout",(function(){return ne})),n.d(i,"ERLayout",(function(){return se}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("d4ec"),a=n("bee2"),s=n("262e"),c=n("2caf"),h=n("9072");n("18a5"),n("9911"),n("d3b7"),n("159b");function l(t){var e=document.createElement("canvas"),n=e.getContext("2d"),i=t.getBoundingClientRect(),o=i.width,r=i.height,a=i.left,s=i.top;e.style.width=o+"px",e.style.height=r+"px",e.style.userSelect="none";var c=window.devicePixelRatio;return e.width=Math.floor(o*c),e.height=Math.floor(r*c),t&&(t.style.position="relative",t.append(e)),{canvas:e,width:o,height:r,raw_width:e.width,raw_height:e.height,left:a,top:s,ctx:n,scale:c}}var u=document.createElement("canvas");u.width=1,u.height=1;var d=u.getContext("2d"),f=window.devicePixelRatio;function g(t){d.clearRect(0,0,5,5),d.save(),t(d),d.restore(),d.clearRect(0,0,5,5)}d.scale(f,f);var v=n("4478"),p=n("2909"),b=(n("b64b"),n("caad"),n("2532"),n("99af"),n("bb46")),m={RIGHT:0,BOTTOM:1,LEFT:2,TOP:3,SELF:100};var y=6;function k(t){var e=1/0,n=1/0,i=-1/0,o=-1/0;for(var r in t){var a=t[r];a[0]<e&&(e=a[0]),a[0]>i&&(i=a[0]),a[1]<n&&(n=a[1]),a[1]>o&&(o=a[1])}return{width:Math.max(i-e,10),height:Math.max(o-n,10),x:e,y:n}}function _(t){return t*t}function w(t,e){return _(t[0]-e[0])+_(t[1]-e[1])}function j(t,e,n){var i=w(e,n);if(0===i)return w(t,e);var o=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/i;return o=Math.max(0,Math.min(1,o)),w(t,[e[0]+o*(n[0]-e[0]),e[1]+o*(n[1]-e[1])])}function O(t,e){var n={fromDir:null,fromP:null,toDir:null,toP:null,distMin:1/0};return Object.keys(t).forEach((function(i){if(+i!==m.SELF){var o=t[i];Object.keys(e).forEach((function(t){if(+t!==m.SELF){var r=e[t],a=w(o,r);a<n.distMin&&Object.assign(n,{distMin:a,fromDir:+i,fromP:o,toDir:+t,toP:r})}}))}})),n}function T(t,e,n,i){return e===m.TOP?[t[0],t[1]-i]:e===m.BOTTOM?[t[0],t[1]+i]:e===m.LEFT?[t[0]-n,t[1]]:e===m.RIGHT?[t[0]+n,t[1]]:void 0}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.TOP,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.TOP,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=Math.max(Math.abs((t[0]-e[0])/2),o),s=Math.max(Math.abs((t[1]-e[1])/2),r),c=T(t,n,a,s),h=T(e,i,a,s),l=[m.TOP,m.LEFT].includes(i)?-5:5,u=[m.TOP,m.BOTTOM].includes(i),d=u?e[0]:e[0]+l,f=u?e[1]+l:e[1];return[].concat(Object(p["a"])(c),Object(p["a"])(h),[d,f])}function E(t,e){var n=1-t,i=n*n*n*e[0]+3*n*n*t*e[2]+3*n*t*t*e[4]+t*t*t*e[6],o=n*n*n*e[1]+3*n*n*t*e[3]+3*n*t*t*e[5]+t*t*t*e[7],r=n*n*(e[2]-e[0])+2*t*n*(e[4]-e[2])+t*t*(e[6]-e[4]),a=n*n*(e[3]-e[1])+2*t*n*(e[5]-e[3])+t*t*(e[7]-e[5]),s=Math.atan2(a,r);return[i,o,s]}function C(t,e){var n=Object(v["a"])(b["Bezier"],Object(p["a"])(e)),i=n.project({x:t[0],y:t[1]}),o=w(t,[i.x,i.y]);return o}function x(t,e,n,i,o,r,a,s,c){var h=Math.pow(1-t,2)*(i-e)+2*t*(1-t)*(r-i)+t*t*(s-r),l=Math.pow(1-t,2)*(o-n)+2*t*(1-t)*(a-o)+t*t*(c-a);return-Math.atan2(h,l)+.5*Math.PI}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.TOP,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.TOP,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,a=arguments.length>6?arguments[6]:void 0,s=Math.abs(n-i),c=n===m.TOP||n===m.BOTTOM,h=[];switch(s){case 0:if(n===m.TOP){var l=Math.min(t[1],e[1]),u=l-r;h.push([t[0],u]),h.push([e[0],u])}if(n===m.BOTTOM){var d=Math.max(t[1],e[1]),f=d+r;h.push([t[0],f]),h.push([e[0],f])}if(n===m.LEFT){var g=Math.min(t[0],e[0]),v=g-o;h.push([v,t[1]]),h.push([v,e[1]])}if(n===m.RIGHT){var p=Math.max(t[0],e[0]),b=p+o;h.push([b,t[1]]),h.push([b,e[1]])}break;case 1:case 3:if(a)c?(h.push([t[0],t[1]+r]),h.push([e[0]+o,t[1]+r]),h.push([e[0]+o,e[1]])):(h.push([t[0]+o,t[1]]),h.push([t[0]+o,e[1]+r]),h.push([e[0],e[1]+r]));else{var y=c?[t[0],e[1]]:[e[0],t[1]];h.push(y)}break;case 2:var k=[(t[0]-e[0])/2+e[0],(t[1]-e[1])/2+e[1]];c?(h.push([t[0],k[1]]),h.push([e[0],k[1]])):(h.push([k[0],t[1]]),h.push([k[0],e[1]]));break;default:break}return h.unshift(t),h.push(e),h}function P(t,e){return[t[0]-e[0],t[1]-e[1]]}function L(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function D(t,e){return[t[0]*e,t[1]*e]}function M(t,e,n,i){var o=P(e,t),r=P(e,n),a=L(o),s=L(r);if(!a||!s)return{p1:null,p2:null};var c=D(o,i/a),h=D(r,i/s);return{p1:P(e,c),p2:P(e,h)}}n("c740"),n("a434");var B=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;return Object(r["a"])(this,n),t=e.call(this),t._currentHit=null,t}return Object(a["a"])(n,[{key:"render",value:function(t){var e;this.forEach((function(n){n._isMoving?e=n:n.visible&&(t.save(),n.render(t),t.restore())})),e&&(t.save(),e.render(t),t.restore())}},{key:"checkHit",value:function(t,e){var n=this.length-1;while(n>=0){var i=this[n];if(i.visible&&!i.ignoreHit){if(e&&e(i)){n--;continue}var o=i.isHit(t,e);if(i._isHit=!!o,o)return this._currentHit!==i&&(this._currentHit&&(this._currentHit._isHit=!1),this._currentHit=i),"boolean"!==typeof o?o:i}n--}return this._currentHit=null,null}},{key:"getBoundingRectPoints",value:function(){var t=[];return this.forEach((function(e){e.visible&&t.splice.apply(t,[t.length,0].concat(Object(p["a"])(e.getBoundingRect())))})),t}},{key:"getAnchorRectPoints",value:function(){var t=[];return this.forEach((function(e){e.visible&&t.push(e.anchor)})),t}}]),n}(Object(h["a"])(Array)),R=B,F=n("3835"),H=(n("cb29"),n("257e")),W=(n("a4d3"),n("e01a"),Symbol("ishit")),Y=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this),Object.assign(Object(H["a"])(t),i),t.visible=!0,t._belongs=void 0,t[W]=!1,t._layoutNode=void 0,t.borderWidth=i.borderWidth||0,t.borderColor=i.borderColor||"transparent",t.backgroundColor=i.backgroundColor||"transparent",t.shadowColor=i.shadowColor,t.shadowBlur=i.shadowBlur||5,t.shadowOffsetX=i.shadowOffsetX||0,t.shadowOffsetY=i.shadowOffsetY||0,t}return Object(a["a"])(n,[{key:"_isTargeting",get:function(){return this===(this._jflow._target.instance||this._jflow._target.link)}},{key:"_isMoving",get:function(){return this===this._jflow._getMovingTarget()}},{key:"_isHit",get:function(){return this[W]},set:function(t){this[W]!==t&&this.dispatchEvent(new CustomEvent(t?"mouseenter":"mouseleave",{detail:{instance:this}})),this[W]=t}},{key:"_jflow",get:function(){return"jflow"===this._belongs.uniqueName?this._belongs:this._belongs._jflow}},{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n])}))}},{key:"render",value:function(t){throw"require render implement"}},{key:"isHit",value:function(t){throw"require isHit implement"}},{key:"getBoundingRect",value:function(){throw"require getBoundingRect implement"}},{key:"calculateIntersection",value:function(){throw"require calculateIntersection implement"}},{key:"getIntersectionsInFourDimension",value:function(){throw"require getIntersectionsInFourDimension implement"}},{key:"getCenter",value:function(){return this.anchor}},{key:"getBoundingDimension",value:function(){var t=instance.getBoundingRect(),e=1/0,n=-1/0,i=1/0,o=-1/0;return t.forEach((function(t){n=Math.max(n,t[1]),e=Math.min(e,t[1]),o=Math.max(o,t[0]),i=Math.min(i,t[0])})),{height:n-e,width:o-i}}},{key:"bubbleEvent",value:function(t){this.dispatchEvent(t),t.detail.bubbles&&(this._belongs.bubbleEvent?this._belongs.bubbleEvent(t):this._belongs.dispatchEvent(t))}},{key:"calculateToRealWorld",value:function(t){return this._belongs&&this._belongs.calculateToRealWorld?this._belongs.calculateToRealWorld(t):t}},{key:"calculateToRealWorldWithScalar",value:function(t){return this._jflow.scale*t}},{key:"removeFromLayoutSource",value:function(){this._layoutNode&&this._layoutNode.remove()}},{key:"recalculateUp",value:function(){this.belongs&&this.belongs.recalculateUp()}}]),n}(Object(h["a"])(EventTarget)),G=Y,X={instances:[],links:[],_stack:null,_linkStack:null,initStack:function(t){var e=this,n=t.data;this._stack=new R,this._linkStack=new R,n&&(this.instances=n.instances,this.links=n.links,this.instances.forEach((function(t){e._stack.push(t),t._belongs=e})),this.links.forEach((function(t){e._linkStack.push(t),t._belongs=e})))},addToStack:function(t){t._belongs=this,this._stack.push(t)},replaceFromStack:function(t,e){var n=this._stack.findIndex((function(e){return e===t}));this._stack.splice(n,1,e),t._belongs=null,e._belongs=this},addToLinkStack:function(t){t._belongs=this,this._linkStack.push(t)},removeFromStack:function(t){var e=this._stack.findIndex((function(e){return e===t}));this._stack.splice(e,1)},removeFromLinkStack:function(t){var e=this._linkStack.findIndex((function(e){return e===t}));this._linkStack.splice(e,1)},emptyLink:function(){this._linkStack=new R},resetChildrenPosition:function(){this._stack.forEach((function(t){t.anchor=[0,0]}))},addInstanceToLink:function(t,e){this.addToStack(e);var n=t.from,i=t.to,o=this._linkStack.findIndex((function(e){return e===t})),r=t.__proto__.constructor,a=new r({from:n,to:e});a._belongs=this;var s=new r({from:e,to:i});s._belongs=this,this._linkStack.splice(o,1,a,s)},interateNodeStack:function(t){this._stack.forEach((function(e){t(e)}))}},A=X,q={_layout:null,initLayout:function(t){this._layout=t.layout},recalculateUp:function(){var t=!0;if(this.getBoundingDimension){var e=this.getBoundingDimension(),n=e.width,i=e.height;this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();var o=this.getBoundingDimension(),r=o.width,a=o.height;t=n!==r||i!==a}else this.reflow();this._belongs&&t&&this._belongs.recalculateUp()},recalculate:function(){this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect()},staticCheck:function(t){return!!this._layout&&this._layout.staticCheck(t,this)},reflow:function(){this._layout&&this._layout.reflow(this)}},$=q,z={_message:null,sendMessage:function(t){this._message=t},consumeMessage:function(){var t=this._message;return this._message=null,t},readMessage:function(){return this._message}},N=z,J=n("5530"),U=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r["a"])(this,n);var o=Object(J["a"])(Object(J["a"])({},i),{},{originEvent:i.event,target:i.target,jflow:i.jflow,bubbles:i.bubbles||!1});return e.call(this,t,{detail:o})}return n}(Object(h["a"])(CustomEvent)),Z=U,V=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this,i),t._rawConfigs=i,t.anchor=i.anchor||[0,0],t}return Object(a["a"])(n,[{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])}))}},{key:"clone",value:function(){var t=this.constructor,e=new t(this._rawConfigs);return e}}]),n}(G),K=V,Q=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this),t.from=i.from,t.to=i.to,t.fromDir=i.fromDir,t.toDir=i.toDir,t.key=i.key,t._cachePoints=null,t.backgroundColor=i.backgroundColor||"#000",t}return n}(G),tt=Q,et=n("ade3"),nt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.type="Point",i.radius=t.radius||10,i.radiusExpo2=i.radius*i.radius,i}return Object(a["a"])(n,[{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5),t.beginPath(),t.arc(this.anchor[0],this.anchor[1],this.radius,0,2*Math.PI),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}},{key:"isHit",value:function(t){var e=this.anchor;return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)<this.radiusExpo2}},{key:"getBoundingRect",value:function(){var t=this.anchor,e=this.radius,n=t[0]-e,i=t[1]-e,o=t[0]+e,r=t[1]+e;return[[n,i],[o,i],[o,r],[n,r]]}},{key:"calculateIntersection",value:function(t){var e=Object(F["a"])(t,2),n=e[0],i=e[1],o=Object(F["a"])(this.anchor,2),r=o[0],a=o[1],s=r-n,c=a-i,h=Math.sqrt(s*s+c*c),l=this.radius/h;return[r-l*s,a-l*c]}},{key:"getIntersectionsInFourDimension",value:function(){var t,e=Object(F["a"])(this.anchor,2),n=e[0],i=e[1],o=this.radius;return t={},Object(et["a"])(t,m.RIGHT,[n+o,i]),Object(et["a"])(t,m.LEFT,[n-o,i]),Object(et["a"])(t,m.BOTTOM,[n,i+o]),Object(et["a"])(t,m.TOP,[n,i-o]),t}},{key:"calculateIntersectionInFourDimension",value:function(t,e){var n,i=Object(F["a"])(t,2),o=i[0],r=i[1],a=Object(F["a"])(this.anchor,2),s=a[0],c=a[1],h=this.radius,l=s-o,u=c-r,d=(n={},Object(et["a"])(n,m.RIGHT,[s+h,c]),Object(et["a"])(n,m.LEFT,[s-h,c]),Object(et["a"])(n,m.BOTTOM,[s,c+h]),Object(et["a"])(n,m.TOP,[s,c-h]),n),f=Math.abs(u)>Math.abs(l)?u<0?m.BOTTOM:m.TOP:l<0?m.RIGHT:m.LEFT;return{p:d[f],dir:f}}},{key:"getBoundingDimension",value:function(){return{width:2*this.radius,height:2*this.radius}}}]),n}(K),it=nt,ot=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this,i),t.type="Rectangle",t.width=i.width||10,t.height=i.height||10,t.borderRadius=i.borderRadius||0,t._setBorder(i),t}return Object(a["a"])(n,[{key:"_setBorder",value:function(t){var e,n,i,o,r,a,s,c,h,l,u,d,f,g,v,p,b,m,y,k,_,w,j,O;this.border={top:{color:(null===(e=t.border)||void 0===e||null===(n=e.top)||void 0===n?void 0:n.borderColor)||t.borderColor||"transparent",width:(null===(i=t.border)||void 0===i||null===(o=i.top)||void 0===o?void 0:o.borderWidth)||t.borderWidth||0,enable:null===(r=t.border)||void 0===r||null===(a=r.top)||void 0===a?void 0:a.borderWidth},right:{color:(null===(s=t.border)||void 0===s||null===(c=s.right)||void 0===c?void 0:c.borderColor)||t.borderColor||"transparent",width:(null===(h=t.border)||void 0===h||null===(l=h.right)||void 0===l?void 0:l.borderWidth)||t.borderWidth||0,enable:null===(u=t.border)||void 0===u||null===(d=u.right)||void 0===d?void 0:d.borderWidth},bottom:{color:(null===(f=t.border)||void 0===f||null===(g=f.bottom)||void 0===g?void 0:g.borderColor)||t.borderColor||"transparent",width:(null===(v=t.border)||void 0===v||null===(p=v.bottom)||void 0===p?void 0:p.borderWidth)||t.borderWidth||0,enable:null===(b=t.border)||void 0===b||null===(m=b.bottom)||void 0===m?void 0:m.borderWidth},left:{color:(null===(y=t.border)||void 0===y||null===(k=y.left)||void 0===k?void 0:k.borderColor)||t.borderColor||"transparent",width:(null===(_=t.border)||void 0===_||null===(w=_.left)||void 0===w?void 0:w.borderWidth)||t.borderWidth||0,enable:null===(j=t.border)||void 0===j||null===(O=j.left)||void 0===O?void 0:O.borderWidth}},this.borderColor=t.borderColor||"transparent",this.borderWidth=t.borderWidth||0}},{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),this._setBorder(t)}},{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5);var e=this.borderRadius,n=(this.anchor,this.width),i=this.height,o=this.anchor[0]-this.width/2,r=this.anchor[1]-this.height/2,a=this.anchor[0]+this.width/2,s=this.anchor[1]+this.height/2;this.borderRadius?(t.beginPath(),t.moveTo(o+e,r),t.lineTo(o+n-e,r),t.quadraticCurveTo(o+n,r,o+n,r+e),t.lineTo(o+n,r+i-e),t.quadraticCurveTo(o+n,r+i,o+n-e,r+i),t.lineTo(o+e,r+i),t.quadraticCurveTo(o,r+i,o,r+i-e),t.lineTo(o,r+e),t.quadraticCurveTo(o,r,o+e,r),t.closePath(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke())):(t.beginPath(),t.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height)),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderRadius?this.border.top.enable&&(t.save(),t.beginPath(),t.moveTo(o,r+e),t.quadraticCurveTo(o,r,o+e,r),t.lineTo(o+n-e,r),t.quadraticCurveTo(o+n,r,o+n,r+e),t.closePath(),t.clip(),t.beginPath(),t.rect(o,r,this.width,this.border.top.width),t.fillStyle=this.border.top.color,t.fill(),t.restore()):(this.border.top.width&&(t.beginPath(),t.moveTo(o,r),t.lineTo(a,r),t.strokeStyle=this.border.top.color,t.lineWidth=this.border.top.width,t.stroke()),this.border.right.width&&(t.beginPath(),t.moveTo(a,r),t.lineTo(a,s),t.strokeStyle=this.border.right.color,t.lineWidth=this.border.right.width,t.stroke()),this.border.bottom.width&&(t.beginPath(),t.moveTo(a,s),t.lineTo(o,s),t.strokeStyle=this.border.bottom.color,t.lineWidth=this.border.bottom.width,t.stroke()),this.border.left.width&&(t.beginPath(),t.moveTo(o,s),t.lineTo(o,r),t.strokeStyle=this.border.left.color,t.lineWidth=this.border.left.width,t.stroke())),t.restore()}},{key:"isHit",value:function(t){var e=this.anchor,n=this.width/2,i=this.height/2;return t[0]>e[0]-n&&t[0]<e[0]+n&&t[1]>e[1]-i&&t[1]<e[1]+i}},{key:"getBoundingRect",value:function(){var t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,o=t[1]-n,r=t[0]+e,a=t[1]+n;return[[i,o],[r,o],[r,a],[i,a]]}},{key:"getBoundingDimension",value:function(){return{height:this.height,width:this.width}}},{key:"calculateIntersection",value:function(t){var e,n,i=Object(F["a"])(t,2),o=i[0],r=i[1],a=Object(F["a"])(this.anchor,2),s=a[0],c=a[1],h=this.width/2,l=this.height/2,u=s-o,d=c-r,f=l/h,g=Math.abs(d/u),v=o>s,p=r>c;return g<f?(e=s+(v?h:-h),n=h*(p?g:-g)+c):(n=c+(p?l:-l),e=l/(v?g:-g)+s),[e,n]}},{key:"getIntersectionsInFourDimension",value:function(){var t,e=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(e=this._belongs.calculateToCoordination(e));var n=e,i=Object(F["a"])(n,2),o=i[0],r=i[1],a=this.width/2,s=this.height/2;return t={},Object(et["a"])(t,m.RIGHT,[o+a,r]),Object(et["a"])(t,m.LEFT,[o-a,r]),Object(et["a"])(t,m.BOTTOM,[o,r+s]),Object(et["a"])(t,m.TOP,[o,r-s]),t}},{key:"calculateIntersectionInFourDimension",value:function(t,e){var n,i=Object(F["a"])(t,2),o=i[0],r=i[1],a=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(a=this._belongs.calculateToCoordination(a));var s=a,c=Object(F["a"])(s,2),h=c[0],l=c[1],u=this.width/2,d=this.height/2,f=(n={},Object(et["a"])(n,m.RIGHT,[h+u,l]),Object(et["a"])(n,m.LEFT,[h-u,l]),Object(et["a"])(n,m.BOTTOM,[h,l+d]),Object(et["a"])(n,m.TOP,[h,l-d]),n),g=h-o,v=l-r,p=d/u,b=Math.abs(v/g),y=o>h,k=r>l,_=b>p?k?m.BOTTOM:m.TOP:y?m.RIGHT:m.LEFT;return{p:f[_],dir:_}}}]),n}(K),rt=ot,at=Object(J["a"])(Object(J["a"])(Object(J["a"])({},A),$),{},{initGroup:function(t){var e;this.initStack(t),this.initLayout(t),this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0},this.definedWidth=t.width,this.minWidth=t.minWidth,this.definedHeight=t.height,this.lock=null===(e=t.lock)||void 0===e||e,this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect()},setConfig:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0}},_getBoundingGroupRect:function(){var t=this._stack.getBoundingRectPoints(),e=k(t),n=this.padding,i=this.minWidth-n.left-n.right,o=this.definedWidth-n.left-n.right,r=e.width+n.left+n.right,a=e.height+n.top+n.bottom;this.width=i?Math.max(i,r):o||r,this.height=this.definedHeight||a},renderGroup:function(t,e){t.save(),this._isMoving&&(t.globalAlpha=.5);var n=this.anchor;t.save(),e(t),t.restore();var i=this.padding,o=(i.left-i.right)/2,r=(i.top-i.bottom)/2;t.translate(n[0]+o,n[1]+r),this._stack.render(t),this._linkStack.render(t),t.translate(-n[0]-o,-n[1]-r),t.restore()},_calculatePointBack:function(t){var e=Object(F["a"])(t,2),n=e[0],i=e[1],o=this.padding,r=(o.left-o.right)/2,a=(o.top-o.bottom)/2,s=this.anchor,c=[n-s[0]-r,i-s[1]-a];return c},isHitGroup:function(t,e){var n=this._calculatePointBack(t);this._currentp=n;var i=this._stack.checkHit(n,e);return i||!1},calculateToCoordination:function(t){var e=Object(F["a"])(t,2),n=e[0],i=e[1],o=this.padding,r=(o.left-o.right)/2,a=(o.top-o.bottom)/2,s=this.anchor,c=[n+s[0]+r,i+s[1]+a];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(c):c},calculateToRealWorld:function(t){var e=Object(F["a"])(t,2),n=e[0],i=e[1],o=this.padding,r=(o.left-o.right)/2,a=(o.top-o.bottom)/2,s=this.anchor,c=[n+s[0]+r,i+s[1]+a];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(c)},clone:function(){var t=this.constructor,e=Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}),n=new t(e);return this.interateNodeStack((function(t){n.addToStack(t.clone())})),n.recalculate(),n}}),st=at,ct=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){rt.prototype.render.call(e,t)}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);return n||rt.prototype.isHit.call(this,t)}}]),n}(rt);Object.assign(ct.prototype,st),Object.assign(ct.prototype,{setConfig:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0},this._setBorder(t)}});var ht=ct,lt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this,i),t.type="Capsule",t.width=i.width||20,t.height=i.height||10,t}return Object(a["a"])(n,[{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5),t.beginPath();var e=Object(F["a"])(this.anchor,2),n=e[0],i=e[1],o=this.width/2,r=this.height/2,a=n-o+r,s=n+o-r,c=i-r,h=i+r;t.moveTo(a,c),t.lineTo(s,c),t.arc(s,i,r,-Math.PI/2,Math.PI/2),t.lineTo(a,h),t.arc(a,i,r,Math.PI/2,Math.PI/2*3),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}},{key:"isHit",value:function(t){var e=this.anchor,n=this.width/2,i=this.height/2,o=Math.abs(n-i),r=e[0]-n+i,a=e[0]+n-i,s=i*i;return t[0]>e[0]-o&&t[0]<e[0]+o&&t[1]>e[1]-i&&t[1]<e[1]+i||Math.pow(t[0]-r,2)+Math.pow(t[1]-e[1],2)<s||Math.pow(t[0]-a,2)+Math.pow(t[1]-e[1],2)<s}},{key:"getBoundingRect",value:function(){var t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,o=t[1]-n,r=t[0]+e,a=t[1]+n;return[[i,o],[r,o],[r,a],[i,a]]}},{key:"getBoundingDimension",value:function(){return{height:this.height,width:this.width}}},{key:"getIntersectionsInFourDimension",value:function(){var t,e=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(e=this._belongs.calculateToCoordination(e));var n=e,i=Object(F["a"])(n,2),o=i[0],r=i[1],a=this.width/2,s=this.height/2;return t={},Object(et["a"])(t,m.RIGHT,[o+a,r]),Object(et["a"])(t,m.LEFT,[o-a,r]),Object(et["a"])(t,m.BOTTOM,[o,r+s]),Object(et["a"])(t,m.TOP,[o,r-s]),t}}]),n}(K),ut=lt,dt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){ut.prototype.render.call(e,t)}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);return n||ut.prototype.isHit.call(this,t)}}]),n}(ut);Object.assign(dt.prototype,st);var ft=dt,gt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){t.save(),e._isMoving&&(t.globalAlpha=.5),t.beginPath();var n=Object(F["a"])(e.anchor,2),i=n[0],o=n[1],r=e.width/2,a=e.height/2,s=o-a+r,c=o+a-r,h=i-r,l=i+r;t.moveTo(h,s),t.arc(i,s,r,-Math.PI,0),t.lineTo(l,c),t.arc(i,c,r,0,Math.PI),t.closePath(),t.fillStyle=e.backgroundColor,t.fill(),e.borderWidth&&(t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.stroke()),t.restore()}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);if(n)return n;var i=Object(F["a"])(this.anchor,2),o=i[0],r=i[1],a=this.width/2,s=this.height/2,c=Math.abs(s-a),h=r-s+a,l=r+s-a,u=a*a;return t[0]>o-a&&t[0]<o+a&&t[1]>r-c&&t[1]<r+c||Math.pow(t[0]-o,2)+Math.pow(t[1]-h,2)<u||Math.pow(t[0]-o,2)+Math.pow(t[1]-l,2)<u}}]),n}(ut);Object.assign(gt.prototype,st);var vt=gt,pt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this,i),t.type="Diamond",t.width=i.width||20,t.height=i.height||10,t.side=i.side||6,t._cacheSide(),t}return Object(a["a"])(n,[{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),this._cacheSide()}},{key:"_cacheSide",value:function(){this.sinSIDE=Math.sin(Math.PI/3)*this.side,this.cosSIDE=Math.cos(Math.PI/3)*this.side}},{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5),t.beginPath();var e=Object(F["a"])(this.anchor,2),n=e[0],i=e[1],o=this.width/2,r=this.height/2,a=r/1.732,s=n-o+a,c=n+o-a,h=n+o,l=n-o,u=i-r,d=i+r,f=this.side,g=this.sinSIDE,v=this.cosSIDE;t.moveTo(n,u),t.lineTo(c-f,u),t.quadraticCurveTo(c,u,c+v,u+g),t.lineTo(h-v,i-g),t.quadraticCurveTo(h,i,h-v,i+g),t.lineTo(c+v,d-g),t.quadraticCurveTo(c,d,c-f,d),t.lineTo(s+f,d),t.quadraticCurveTo(s,d,s-v,d-g),t.lineTo(l+v,i+g),t.quadraticCurveTo(l,i,l+v,i-g),t.lineTo(s-v,u+g),t.quadraticCurveTo(s,u,s+f,u),t.closePath(),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore(),this._cachePoints=[[c,u],[h,i],[c,d],[s,d],[l,i],[s,u]]}},{key:"isHit",value:function(t){for(var e=this._cachePoints,n=!1,i=0,o=e.length-1;i<e.length;i++)e[i][1]>t[1]!==e[o][1]>t[1]&&t[0]<(e[o][0]-e[i][0])*(t[1]-e[i][1])/(e[o][1]-e[i][1])+e[i][0]&&(n=!n),o=i;return n}},{key:"getBoundingRect",value:function(){var t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,o=t[1]-n,r=t[0]+e,a=t[1]+n;return[[i,o],[r,o],[r,a],[i,a]]}},{key:"getBoundingDimension",value:function(){return{height:this.height,width:this.width}}},{key:"getIntersectionsInFourDimension",value:function(){var t,e=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(e=this._belongs.calculateToCoordination(e));var n=e,i=Object(F["a"])(n,2),o=i[0],r=i[1],a=this.width/2,s=this.height/2;return t={},Object(et["a"])(t,m.RIGHT,[o+a,r]),Object(et["a"])(t,m.LEFT,[o-a,r]),Object(et["a"])(t,m.BOTTOM,[o,r+s]),Object(et["a"])(t,m.TOP,[o,r-s]),t}}]),n}(K),bt=pt,mt=1/Math.sqrt(3),yt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){bt.prototype.render.call(e,t)}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);return n||bt.prototype.isHit.call(this,t)}}]),n}(bt);Object.assign(yt.prototype,st),Object.assign(yt.prototype,{_getBoundingGroupRect:function(){var t=this._stack.getBoundingRectPoints(),e=k(t),n=this.padding,i=this.minWidth-n.left-n.right,o=this.definedWidth-n.left-n.right,r=e.width+n.left+n.right+e.height*mt/2,a=e.height+n.top+n.bottom;this.width=i?Math.max(i,r):o||r,this.height=this.definedHeight||a},setConfig:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0},this._cacheSide()}});var kt=yt,_t=(Math.sqrt(3),function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){t.save(),e._isMoving&&(t.globalAlpha=.5),t.beginPath();var n=Object(F["a"])(e.anchor,2),i=n[0],o=n[1],r=e.width/2,a=e.height/2,s=r/1.732,c=o-a,h=o+a,l=o-a+s,u=o+a-s,d=i-r,f=i+r;t.moveTo(i,c),t.lineTo(f,l),t.lineTo(f,u),t.lineTo(i,h),t.lineTo(d,u),t.lineTo(d,l),t.closePath(),t.fillStyle=e.backgroundColor,t.fill(),e.borderWidth&&(t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.stroke()),t.restore(),e._cachePoints=[[i,c],[f,l],[f,u],[i,h],[d,u],[d,l]],console.log(e._cachePoints)}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);return n||bt.prototype.isHit.call(this,t)}}]),n}(bt));Object.assign(_t.prototype,st),Object.assign(_t.prototype,{_getBoundingGroupRect:function(){var t=this._stack.getBoundingRectPoints(),e=k(t),n=this._stack.getAnchorRectPoints(),i=k(n),o=this.padding,r=this.minWidth-o.left-o.right,a=this.definedWidth-o.left-o.right,s=e.width+o.left+o.right,c=i.height+s/1.732+o.top+o.bottom;this.width=r?Math.max(r,s):a||s,this.height=this.definedHeight||c}});var wt=_t,jt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])(this,n),t=e.call(this,i),t.type="Rhombus",t.height=i.diagonalsV||10,t.width=i.diagonalsH||20,t}return Object(a["a"])(n,[{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5);var e=this.width/2,n=this.height/2,i=this.anchor;t.translate(i[0],i[1]),t.beginPath(),t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),t.translate(-i[0],-i[1]),t.restore()}},{key:"isHit",value:function(t){var e=this.height/2,n=this.width/2,i=this.anchor,o=Math.abs(t[0]-i[0]),r=Math.abs(t[1]-i[1]);return o/n+r/e<=1}},{key:"getBoundingRect",value:function(){var t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,o=t[1]-n,r=t[0]+e,a=t[1]+n;return[[i,o],[r,o],[r,a],[i,a]]}},{key:"getBoundingDimension",value:function(){return{height:this.height,width:this.width}}},{key:"getIntersectionsInFourDimension",value:function(){var t,e=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(e=this._belongs.calculateToCoordination(e));var n=e,i=Object(F["a"])(n,2),o=i[0],r=i[1],a=this.width/2,s=this.height/2;return t={},Object(et["a"])(t,m.RIGHT,[o+a,r]),Object(et["a"])(t,m.LEFT,[o-a,r]),Object(et["a"])(t,m.BOTTOM,[o,r+s]),Object(et["a"])(t,m.TOP,[o,r-s]),Object(et["a"])(t,m.SELF,[o+.618*a,r+.618*s]),t}}]),n}(K),Ot=jt,Tt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.initGroup(t),i}return Object(a["a"])(n,[{key:"render",value:function(t){var e=this;this.renderGroup(t,(function(){Ot.prototype.render.call(e,t)}))}},{key:"isHit",value:function(t,e){var n=this.isHitGroup(t,e);return n||Ot.prototype.isHit.call(this,t)}}]),n}(Ot);Object.assign(Tt.prototype,st);var St=Tt;n("ac1f");function Et(){var t=document.createElement("input");return t.setAttribute("style","\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        background-image:none;\n        background-color:transparent;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;"),t}var Ct={CENTER:"center",LEFT:"left",RIGHT:"right"},xt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.type="Text",i.content=t.content||"",i.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",i.fontSize=t.fontSize||"28px",i.textColor=t.textColor||"white",i.textAlign=t.textAlign||Ct.CENTER,i.textBaseline=t.textBaseline||"middle",i.lineHeight=t.lineHeight,i.indent=t.indent||0,i.backgroundColor=t.backgroundColor,i.editable=t.editable,i.acceptPatten=t.acceptPatten,i.minWidth=t.minWidth||0,i.editStatus={editting:!1},g((function(t){i.renderShadowText(t)})),i._makeEditable(),i}return Object(a["a"])(n,[{key:"_makeEditable",value:function(){var t=this;this.editable&&this.addEventListener("click",(function(e){var n,i=t.width/2;n=t.textAlign===Ct.LEFT?t.anchor[0]-i+t.indent/2:t.textAlign===Ct.RIGHT?t.anchor[0]+i:t.anchor[0]+t.indent/2;var o=[n,-t.height/2],r=+/(\d+)/.exec(t.fontSize)[1],a=t.calculateToRealWorld(o),s=Object(F["a"])(a,2),c=s[0],h=s[1],l=Et(),u=t._jflow.DOMwrapper,d=t.content;l.style.transform="translate(".concat(c,"px, ").concat(h,"px)"),l.style.width=t.calculateToRealWorldWithScalar(t.width)+"px",l.style.height=t.calculateToRealWorldWithScalar(t.height)+"px",l.style.fontFamily=t.fontFamily,u.style.fontSize="".concat(r*t._jflow.scale,"px"),l.style.fontSize="".concat(r*t._jflow.scale,"px"),l.style.lineHeight="".concat(t.lineHeight*t._jflow.scale,"px"),l.style.textIndent="".concat(t.indent*t._jflow.scale,"px"),l.value=t.content,l.style.color=t.textColor,l.addEventListener("focus",(function(){t.content="",t._jflow._render(),l.style.outline="none"}));var f=function(){if(t.acceptPatten);else{var e=l.value;t.dispatchEvent(new Z("change",{target:t,oldVal:d,val:e})),t.content=d,l.removeEventListener("blur",f),u.removeChild(l),l=null,f=null}};l.addEventListener("blur",f);var g=function t(e){"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),l.removeEventListener("keypress",t),f())};l.addEventListener("keypress",g),u.append(l),l.focus()}))}},{key:"renderShadowText",value:function(t){t.beginPath(),t.font="".concat(this.fontSize," ").concat(this.fontFamily),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.textColor;var e=t.measureText(this.content),n=e.actualBoundingBoxLeft,i=e.actualBoundingBoxRight,o=e.fontBoundingBoxAscent,r=e.fontBoundingBoxDescent;this._textWidth=this.indent+Math.abs(n)+Math.abs(i),this.width=Math.max(this.minWidth,this._textWidth);var a=Math.abs(o)+Math.abs(r);this.lineHeight?this.height=this.lineHeight:this.height=a}},{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),g((function(t){e.renderShadowText(t)}))}},{key:"render",value:function(t){if(t.save(),this._isMoving&&(t.globalAlpha=.5),t.beginPath(),t.font="".concat(this.fontSize," ").concat(this.fontFamily),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.textColor,this.textAlign===Ct.LEFT){var e=this.width/2;t.fillText(this.content,this.anchor[0]-e+this.indent/2,this.anchor[1])}else if(this.textAlign===Ct.RIGHT){var n=this.width/2;t.fillText(this.content,this.anchor[0]+n,this.anchor[1])}else t.fillText(this.content,this.anchor[0]+this.indent/2,this.anchor[1]);t.fill(),t.restore()}}]),n}(rt),It=xt,Pt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.image=t.image,i.image.onload=function(){requestAnimationFrame((function(){i._jflow._render()}))},i.imageBounding={width:t.imageWidth||t.width,height:t.imageHeight||t.height},i}return Object(a["a"])(n,[{key:"setConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]&&(e[n]=t[n],e._rawConfigs[n]=t[n])})),t.image&&!t.image.complete&&(this.image.onload=function(){requestAnimationFrame((function(){e._jflow._render()}))}),this.imageBounding={width:t.imageWidth||t.width||this.imageBounding.width,height:t.imageHeight||t.height||this.imageBounding.height}}},{key:"render",value:function(t){t.save(),this._isMoving&&(t.globalAlpha=.5),rt.prototype.render.call(this,t);var e=this.anchor[0]-this.width/2,n=this.anchor[1]-this.height/2;this.image.complete&&t.drawImage(this.image,e,n,this.imageBounding.width,this.imageBounding.height),t.restore()}}]),n}(rt),Lt=Pt,Dt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.from=t.from,i.to=t.to,i.controlPoints=[0,1,-10,1,-10,5],i._cachePoints=null,i.defaultStyle="black",i.hoverStyle="cornflowerblue",i}return Object(a["a"])(n,[{key:"getColor",value:function(){return this._isTargeting?this.hoverStyle:this.defaultStyle}},{key:"_calculateAnchorPoints",value:function(){var t=this.from.calculateIntersection(this.to.getCenter()),e=this.to.calculateIntersection(this.from.getCenter());return this._cachePoints=[t,e],{startX:t[0],startY:t[1],endX:e[0],endY:e[1]}}},{key:"render",value:function(t){var e=this._calculateAnchorPoints(),n=e.startX,i=e.startY,o=e.endX,r=e.endY,a=this.controlPoints,s=o-n,c=r-i,h=Math.sqrt(s*s+c*c),l=c/h,u=s/h,d=[];d.push(0,0);for(var f=0;f<a.length;f+=2){var g=a[f],v=a[f+1];d.push(g<0?h+g:g,v)}d.push(h,0);for(f=a.length;f>0;f-=2){g=a[f-2],v=a[f-1];d.push(g<0?h+g:g,-v)}d.push(0,0),t.fillStyle=t.strokeStyle=this.getColor(),t.beginPath();for(f=0;f<d.length;f+=2){g=d[f]*u-d[f+1]*l+n,v=d[f]*l+d[f+1]*u+i;0===f?t.moveTo(g,v):t.lineTo(g,v)}t.fill()}},{key:"isHit",value:function(t){if(!this._cachePoints)return!1;var e=Object(F["a"])(this._cachePoints,2),n=e[0],i=e[1],o=j(t,n,i);return o<y}},{key:"getBoundingRect",value:function(){var t=this._calculateAnchorPoints(),e=t.startX,n=t.startY,i=t.endX,o=t.endY;return[[e,n],[i,o]]}}]),n}(tt),Mt=Dt,Bt=(n("fb6a"),Math.PI/180),Rt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.approximate=t.approximate||y,i.radius=t.radius||0,i.minSpanX=t.minSpanX||10,i.minSpanY=t.minSpanY||10,i.lineDash=t.lineDash,i.doubleLink=t.doubleLink,i.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",i.fontSize=t.fontSize||"12px",i.content=t.content||"",i.isSelf=!!t.isSelf,i}return Object(a["a"])(n,[{key:"_calculateAnchorPoints",value:function(){var t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){var n=I(t[this.fromDir],e[m.SELF],this.fromDir,m.BOTTOM,this.minSpanX,this.minSpanY,!0);this._cachePoints=n,this._cacheAngle=[this.fromDir,m.BOTTOM]}else if(void 0!==this.fromDir&&void 0!==this.toDir){var i=I(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=i,this._cacheAngle=[this.fromDir,this.toDir]}else{var o=O(t,e);console.log(o);var r=I(o.fromP,o.toP,o.fromDir,o.toDir,this.minSpanX,this.minSpanY);this._cachePoints=r,this._cacheAngle=[o.fromDir,o.toDir]}}},{key:"render",value:function(t){var e=this;this._calculateAnchorPoints();var n=this.radius,i=this._cachePoints,o=i[0],r=i[i.length-1],a=(this._cacheAngle[1]+2)%4*90*Bt;if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){var s=(this._cacheAngle[0]+2)%4*90*Bt;t.beginPath(),t.translate(o[0],o[1]),t.rotate(s),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-s),t.translate(-o[0],-o[1])}t.beginPath(),t.moveTo(o[0],o[1]),i.slice(1,i.length-1).forEach((function(o,r){if(e.radius){var a=i[r],s=i[r+2],c=M(a,o,s,n),h=c.p1,l=c.p2;h&&l?(t.lineTo(h[0],h[1]),t.quadraticCurveTo(o[0],o[1],l[0],l[1])):t.lineTo(o[0],o[1])}else t.lineTo(o[0],o[1])})),t.lineTo(r[0],r[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.beginPath(),t.translate(r[0],r[1]),t.rotate(a),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-a),t.translate(-r[0],-r[1])}},{key:"isHit",value:function(t){var e=this._cachePoints,n=e[0],i=e.slice(1);do{var o=i.shift();if(o){var r=j(t,n,o);if(r<this.approximate)return!0}n=o}while(n);return!1}}]),n}(tt),Ft=Rt,Ht=Math.PI/180,Wt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.approximate=t.approximate||y,i.minSpanX=t.minSpanX||0,i.minSpanY=t.minSpanY||0,i.lineDash=t.lineDash,i.doubleLink=t.doubleLink,i.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",i.fontSize=t.fontSize||"12px",i.content=t.content||"",i.isSelf=!!t.isSelf,i}return Object(a["a"])(n,[{key:"_calculateAnchorPoints",value:function(){var t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){var n=S(t[this.fromDir],e[m.SELF],this.fromDir,m.BOTTOM,this.minSpanX,this.minSpanY);this._cachePoints=[].concat(Object(p["a"])(t[this.fromDir]),Object(p["a"])(n)),console.log(n),this._cacheAngle=[this.fromDir,m.BOTTOM]}else if(void 0!==this.fromDir&&void 0!==this.toDir){var i=S(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=[].concat(Object(p["a"])(t[this.fromDir]),Object(p["a"])(i)),this._cacheAngle=[this.fromDir,this.toDir]}else{var o=O(t,e),r=S(o.fromP,o.toP,o.fromDir,o.toDir);this._cachePoints=[].concat(Object(p["a"])(o.fromP),Object(p["a"])(r)),this._cacheAngle=[o.fromDir,o.toDir]}}},{key:"render",value:function(t){this._calculateAnchorPoints();var e=this._cachePoints,n=x.apply(null,[1].concat(Object(p["a"])(e)));if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){var i=(this._cacheAngle[0]+2)%4*90*Ht;t.beginPath(),t.translate(e[0],e[1]),t.rotate(i),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-i),t.translate(-e[0],-e[1])}if(t.beginPath(),t.moveTo(e[0],e[1]),t.bezierCurveTo.apply(t,Object(p["a"])(e.slice(2))),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.beginPath(),t.translate(e[6],e[7]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[6],-e[7]),this.content){t.beginPath();var o=E(.5,e),r=Object(F["a"])(o,3),a=r[0],s=r[1],c=r[2];t.translate(a,s),t.rotate(c),t.font="".concat(this.fontSize," ").concat(this.fontFamily),t.textAlign="center",t.fillText(this.content,0,10),t.rotate(-c),t.translate(-a,-s)}}},{key:"isHit",value:function(t){if(!this._cachePoints)return!1;var e=this._cachePoints,n=C(t,e);return n<this.approximate}},{key:"getBoundingRect",value:function(){var t=this._calculateAnchorPoints(),e=t.startX,n=t.startY,i=t.endX,o=t.endY;return[[e,n],[i,o]]}}]),n}(tt),Yt=Wt,Gt=(n("4de4"),function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r["a"])(this,t),this.direction=n.direction||"vertical",this.gap=null!==(e=n.gap)&&void 0!==e?e:5,this.alignment=n.alignment||"center",this.justify=n.justify||"center",this._rawConfigs=n}return Object(a["a"])(t,[{key:"reflow",value:function(t){var e=this,n=t._stack.filter((function(t){return t.visible&&!t.outOfFlow})),i=t.width-t.padding.left-t.padding.right;if("vertical"===this.direction){var o=0,r=0,a=0,s=0;n.forEach((function(t,n){var i=t.getBoundingDimension(),c=i.width,h=i.height,l=n>0?e.gap:0;a=Math.max(c,a),s+=h+l,o+=h/2+l+r,r=h/2,t.anchor=[0,o]})),a=Math.max(i,a),s/=2,"start"===this.alignment&&n.forEach((function(t,e){var n=t.getBoundingDimension(),i=n.width;t.anchor[0]=-(a-i)/2,t.anchor[1]-=s})),"end"===this.alignment&&n.forEach((function(t,e){var n=t.getBoundingDimension(),i=n.width;t.anchor[0]=(a-i)/2,t.anchor[1]-=s})),"center"===this.alignment&&n.forEach((function(t,e){var n=t.getBoundingDimension();n.width;t.anchor[1]-=s}))}if("horizontal"===this.direction){var c=0,h=0,l=0,u=0;if(n.forEach((function(t,n){var i=t.getBoundingDimension(),o=i.width,r=i.height,a=n>0?e.gap:0;l=Math.max(r,l),u+=o+a,o,c+=o/2+a+h,h=o/2,t.anchor=[c,0]})),"start"===this.justify){var d=i/2;n.forEach((function(t,e){t.anchor[0]-=d}))}if("end"===this.justify){var f=i/2-u;n.forEach((function(t,e){t.anchor[0]+=f}))}if("center"===this.justify){var g=u/2;n.forEach((function(t,e){t.anchor[0]-=g}))}if("space-between"===this.justify&&n.length>1){var v=Math.max(i,u),p=(v-u)/(n.length-1),b=v/2;n.forEach((function(t,e){t.anchor[0]+=p*e-b}))}"start"===this.alignment&&n.forEach((function(t,e){var n=t.getBoundingDimension(),i=n.height;t.anchor[1]=-(l-i)/2})),"end"===this.alignment&&n.forEach((function(t,e){var n=t.getBoundingDimension(),i=n.height;t.anchor[1]=(l-i)/2}))}}},{key:"clone",value:function(){return new t(this._rawConfigs)}}]),t}()),Xt=Gt,At=(n("7db0"),n("07ac"),n("d81d"),function(){function t(e){var n=this;Object(r["a"])(this,t),this.source=e,this.id=e.id,this.type=e.type,this.isDraggable=!0,this.getJflowInstance=void 0,this.level=void 0,this.sequence=void 0,this.isLocked=!1,this.isFree=!1,this.parent=void 0,this.idx=void 0,this.parentIterateType=void 0,e._getAstNode=function(){return n}}return Object(a["a"])(t,[{key:"reflowPreCalculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return this.level=t,this.sequence=e,this.spanX=1,this.spanY=1,n&&n(t,e,this),{spanX:this.spanX,spanY:this.spanY,level:t,sequence:e}}},{key:"makeLink",value:function(t){return this}},{key:"makeEndpoint",value:function(){}},{key:"traverse",value:function(t){t(this)}},{key:"getNodes",value:function(){var t=[];return this.traverse((function(e){e.getJflowInstance&&t.push(e.getJflowInstance())})),t}},{key:"linkSource",value:function(t){this.parent.source[this.parentIterateType].splice(this.idx+1,0,t)}},{key:"remove",value:function(){this.parent.source[this.parentIterateType].splice(this.idx,1)}}]),t}()),qt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;Object(r["a"])(this,n),i=e.call(this,t),i.isroot=!0,i.body=(t.body||[]).map(Vt("body").bind(Object(H["a"])(i)));var o=Vt("playground").bind(Object(H["a"])(i));return i.playground=(t.playground||[]).map((function(t,e){var n=o(t,e);return n.isFree=!0,n})),i}return Object(a["a"])(n,[{key:"reflowBodyPreCalculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=1,o=1;return this.level=t,this.sequence=e,n&&n(t,e,this),this.body.forEach((function(r){var a=r.reflowPreCalculate(t+1,e,n),s=a.spanX,c=a.spanY;i=Math.max(s,i),o+=c,t+=c})),this.spanX=i,this.spanY=o,{spanX:i,spanY:o,level:t,sequence:e}}},{key:"reflowPlaygroundPreCalculate",value:function(t,e){this.playground.forEach((function(n){t(n),n.reflowPreCalculate(0,0,e)}))}},{key:"makeLink",value:function(t){var e;return this.body.forEach((function(n){e?(t({from:e.id,to:n.id,part:"body",fromDir:m.BOTTOM,toDir:m.TOP,meta:{from:e,to:n}}),n=n.makeLink(t),e=n):e=n})),this.playground.forEach((function(e){e.makeLink(t)})),this}},{key:"traverse",value:function(t){this.body.forEach((function(e){e.traverse(t)})),this.playground.forEach((function(e){e.traverse(t)}))}}]),n}(At),$t=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.consequent=(t.consequent||[]).map(Vt("consequent").bind(Object(H["a"])(i))),i.alternate=(t.alternate||[]).map(Vt("alternate").bind(Object(H["a"])(i))),i.isLocked=!0,i}return Object(a["a"])(n,[{key:"reflowPreCalculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=1,o=1;this.level=t,this.sequence=e,n&&n(t,e,this);var r=1,a=0,s=0,c=0;this.consequent.forEach((function(i,o){var s=i.reflowPreCalculate(t+1,e,n),c=s.spanX,h=s.spanY;r=Math.max(r,c),a+=h,t+=h}));var h=e+r;t=this.level,this.alternate.forEach((function(e,i){var o=e.reflowPreCalculate(t+1,h,n),r=o.spanX,a=o.spanY;s=Math.max(s,r),c+=a,t+=a})),i=Math.max(1,r+s),o+=Math.max(a,c),t=this.level+o-1;var l=this.Endpoint.reflowPreCalculate(t+1,e,n),u=l.spanY;return o+=u,this.spanX=i,this.spanY=o,{spanX:i,spanY:o,level:t,sequence:e}}},{key:"makeLink",value:function(t){var e=this,n=this;this.consequent.forEach((function(e){t({from:n.id,to:e.id,part:"consequent",fromDir:m.BOTTOM,toDir:m.TOP,meta:{from:n,to:e}}),e=e.makeLink(t),n=e})),t({from:n.id,to:this.Endpoint.id,fromDir:m.BOTTOM,toDir:m.TOP,part:"consequent",meta:{from:n,to:this.Endpoint}});var i=this;return this.alternate.forEach((function(n){t({from:i.id,to:n.id,fromDir:i===e?m.RIGHT:m.BOTTOM,toDir:m.TOP,part:"alternate",meta:{from:i,to:n}}),n=n.makeLink(t),i=n})),t({from:i.id,to:this.Endpoint.id,fromDir:i===this?m.RIGHT:m.BOTTOM,toDir:m.RIGHT,part:"alternate",meta:{from:i,to:this.Endpoint}}),this.Endpoint}},{key:"makeEndpoint",value:function(){this.Endpoint=Kt({type:"endpoint",id:"".concat(this.id,"-endpoint")}),this.Endpoint.parent=this.parent,this.Endpoint.idx=this.idx,this.Endpoint.parentIterateType=this.parentIterateType}},{key:"traverse",value:function(t){t(this),this.consequent.forEach((function(e){e.traverse(t)})),this.alternate.forEach((function(e){e.traverse(t)})),t(this.Endpoint)}},{key:"linkSource",value:function(t,e){this.source[e.part].unshift(t)}}]),n}(At),zt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.cases=(t.cases||[]).map(Vt("case").bind(Object(H["a"])(i))),i.cases.length&&(i.cases[i.cases.length-1].lastCase=!0),i.isLocked=!0,i}return Object(a["a"])(n,[{key:"reflowPreCalculate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=1,r=1;this.level=e,this.sequence=n,i&&i(e,n,this);var a=1,s=0;if(this.cases.length){var c=this.cases[this.cases.length-1].consequent;e=this.level,c.forEach((function(t){var o=t.reflowPreCalculate(e+1,n,i),r=o.spanX,c=o.spanY;a=Math.max(a,r),s+=c,e+=c}))}var h=a,l=0;this.cases.forEach((function(o,r){var a=n+h,s=0,c=0;e=t.level,o.alternate.forEach((function(t){var n=t.reflowPreCalculate(e+1,a,i),o=n.spanX,r=n.spanY;s=Math.max(s,o),c+=r,e+=r})),h+=s,l=Math.max(l,c)})),o=Math.max(1,h),r=Math.max(s,l),e=this.level+r;var u=this.Endpoint.reflowPreCalculate(e+1,n,i),d=u.spanY;return r+=d,r+=1,this.spanX=o,this.spanY=r,{spanX:o,spanY:r,level:e,sequence:n}}},{key:"makeLink",value:function(t){var e=this,n=this;if(this.cases.length){var i=this.cases[this.cases.length-1].consequent;i.forEach((function(e,i){t({from:n.id,to:e.id,fromDir:m.BOTTOM,toDir:m.TOP,part:"consequent",meta:{from:n,to:e}}),n=e.makeLink(t)}))}return t({from:n.id,to:this.Endpoint.id,fromDir:m.BOTTOM,toDir:m.TOP,part:"alternate",meta:{from:n,to:this.Endpoint}}),this.cases.forEach((function(n,i){var o=n;n.alternate.forEach((function(e){t({from:o.id,to:e.id,fromDir:o===n?m.RIGHT:m.BOTTOM,toDir:m.TOP,part:"alternate",meta:{from:o,to:e}}),o=e.makeLink(t)})),t({from:o.id,to:e.Endpoint.id,fromDir:o===n?m.RIGHT:m.BOTTOM,toDir:m.RIGHT,part:"alternate",minSpanX:32*(i+1),meta:{from:o,to:e.Endpoint}})})),this.Endpoint}},{key:"makeEndpoint",value:function(){this.Endpoint=Kt({type:"endpoint",id:"".concat(this.id,"-endpoint")}),this.Endpoint.parent=this.parent,this.Endpoint.parentIterateType=this.parentIterateType,this.Endpoint.idx=this.idx}},{key:"traverse",value:function(t){t(this),this.cases.forEach((function(e){e.traverse(t)})),t(this.Endpoint)}}]),n}(At),Nt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return n}(At),Jt=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.body=(t.body||[]).map(Vt("body").bind(Object(H["a"])(i))),i.isLocked=!0,i}return Object(a["a"])(n,[{key:"reflowPreCalculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=1,o=1;this.level=t,this.sequence=e,n&&n(t,e,this);var r=e+1;return this.body.forEach((function(e){var a=e.reflowPreCalculate(t+1,r,n),s=a.spanX,c=a.spanY;i=Math.max(s,i),o+=c,t+=c})),this.spanX=i+1,this.spanY=o,{spanX:i,spanY:o,level:t,sequence:e}}},{key:"makeLink",value:function(t){var e=this,n=this;return this.body.forEach((function(i,o){t({from:n.id,to:i.id,part:"body",fromDir:n===e?m.RIGHT:m.BOTTOM,toDir:m.TOP,meta:{from:n,to:i}}),i=i.makeLink(t),n=i})),t({from:n.id,to:this.id,part:"body",fromDir:n===this?m.RIGHT:m.BOTTOM,anticlock:n===this,toDir:m.BOTTOM,isSelf:!0,minSpanX:20,minSpanY:20,meta:{from:n,to:this}}),this}},{key:"traverse",value:function(t){t(this),this.body.forEach((function(e){e.traverse(t)}))}},{key:"linkSource",value:function(t,e){this.source[e.part].unshift(t)}}]),n}(At),Ut=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this,t),i.consequent=(t.consequent||[]).map(Vt("consequent").bind(Object(H["a"])(i))),i.alternate=(t.alternate||[]).map(Vt("alternate").bind(Object(H["a"])(i))),i.lastCase=!1,i}return Object(a["a"])(n,[{key:"reflowPreCalculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=1,o=1;this.level=t,this.sequence=e,n&&n(t,e,this);var r=0,a=0,s=0,c=0;this.lastCase&&this.consequent.forEach((function(i,o){var s=i.reflowPreCalculate(t+1,e,n),c=s.spanX,h=s.spanY;r=Math.max(r,c),a+=h,t+=h}));var h=e+Math.max(r,1);return t=this.level,this.alternate.forEach((function(e,i){var o=e.reflowPreCalculate(t+1,h,n),r=o.spanX,a=o.spanY;s=Math.max(s,r),c+=a,t+=a})),i=Math.max(1,r+s),o+=Math.max(a,c),this.spanX=i,this.spanY=o,{spanX:i,spanY:o,level:t,sequence:e}}},{key:"traverse",value:function(t){t(this),this.consequent.forEach((function(e){e.traverse(t)})),this.alternate.forEach((function(e){e.traverse(t)}))}},{key:"linkSource",value:function(t,e){this.source[e.part].unshift(t)}}]),n}(At),Zt={IfStatement:$t,SwitchStatement:zt,SwitchCase:Ut,ForEachStatement:Nt,WhileStatement:Jt,Root:qt,other:At};function Vt(t){return function(e,n){var i=Kt(e);return i.parent=this,i.idx=n,i.parentIterateType=t,i.makeEndpoint(),i}}function Kt(t){var e=t.type,n=Zt[e]||Zt.other,i=new n(t);return i}function Qt(t){return t*t}function te(t,e){return Qt(t[0]-e[0])+Qt(t[1]-e[1])}var ee=function(){function t(e){var n;Object(r["a"])(this,t),this.linkLength=e.linkLength||18,this.gap=e.gap||30,this.treeItemDraggable=null===(n=e.treeItemDraggable)||void 0===n||n,this.reOrder(e.ast),this.static=!0}return Object(a["a"])(t,[{key:"reOrder",value:function(t){var e=this;this.ast=t,this.flowStack=[],this.flowLinkStack=[],this.root=Kt(this.ast),this.root.traverse((function(t){"playground"!==t.parentIterateType&&(t.isDraggable=e.treeItemDraggable),e.flowStack.push({type:t.type,configs:t.source,layoutMeta:t})}));var n,i={vertical:{},horizontal:{}},o={};this.root.reflowBodyPreCalculate(0,0,(function(t,e,n){n.isroot||(i.vertical[t]||(i.vertical[t]={}),i.vertical[t][e]=n,i.horizontal[e]||(i.horizontal[e]={}),i.horizontal[e][t]=n)})),this.root.reflowPlaygroundPreCalculate((function(t){n=t.id,o[t.id]={vertical:{},horizontal:{},node:t}}),(function(t,e,i){var r=o[n];r.vertical[t]||(r.vertical[t]={}),r.vertical[t][e]=i,r.horizontal[e]||(r.horizontal[e]={}),r.horizontal[e][t]=i})),this.layoutMapping=i,this.playgroundLayoutMapping=o,this.root.makeLink((function(t){e.flowLinkStack.push(t)}))}},{key:"staticCheck",value:function(t,e){if(t._layoutNode&&t._layoutNode.isFree)return!1;var n=e._linkStack.find((function(e){return e.from===t||e.to===t}));if(!n)return!1;var i=t.anchor.slice();if(e.reflow(),!(e._linkStack.length<2)){var o=t.anchor,r=te(i,o);return r>1e3&&(t.dispatchEvent(new Z("outOfFlow",{anchor:i,instance:t,jflow:e,point:i})),!0)}}},{key:"reflowByMapping",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.linkLength,o=this.gap,r=t.vertical,a=t.horizontal,s=e;Object.keys(a).forEach((function(t,e){var n=a[t],i=0,r=Object.keys(n);r.forEach((function(t){var e=n[t],o=e.getJflowInstance(),r=o.getBoundingDimension(),a=r.width;i=Math.max(a,i)})),s+=0===e?0:i/2,r.forEach((function(t){var e=n[t],i=e.getJflowInstance();i.anchor[0]=s})),s+=i/2+o}));var c=n;Object.keys(r).forEach((function(t,e){var n=r[t],o=0,a=Object.keys(n);a.forEach((function(t){var e=n[t],i=e.getJflowInstance(),r=i.getBoundingDimension(),a=r.height;r.width;o=Math.max(a,o)})),c+=0===e?0:o/2,a.forEach((function(t){var e=n[t],i=e.getJflowInstance();i.anchor[1]=c})),c+=o/2+i}))}},{key:"findLayoutNode",value:function(t){var e=this.flowStack.find((function(e){return e.configs===t}));return e?e.layoutMeta:null}},{key:"reflow",value:function(t){var e=this;this.reflowByMapping(this.layoutMapping),Object.values(this.playgroundLayoutMapping).forEach((function(t){var n=t.node.getJflowInstance();e.reflowByMapping(t,n.anchor[0],n.anchor[1])}))}}]),t}(),ne=ee;n("b0c0");var ie=function t(e,n,i){Object(r["a"])(this,t),this.type="ERProperty",this.source=e,this.node=n,this.ref=e.ref,this.type=e.type,this.association=e.association,this.id=i?"".concat(n.id,"-").concat(e.name,"-navigation"):"".concat(n.id,"-").concat(e.name),this._selfLink=!1,this.parentPropertyRef=void 0,this.getJflowInstance=void 0,this.doubleRef=void 0},oe=function(){function t(e){var n=this;Object(r["a"])(this,t),this.type="ERNode",this.source=e,this.id=e.name,this.isDraggable=!0,this.getJflowInstance=void 0,this.propertyList=e.propertyList.map((function(t){return new ie(t,n)})),this.navigationPropertyList=e.navigationPropertyList.map((function(t){return new ie(t,n,!0)})),this.idProperty=this.propertyList.find((function(t){return"id"===t.source.name}))}return Object(a["a"])(t,[{key:"_traverseProperty",value:function(t){var e=this;this.propertyList.forEach((function(n){var i=n.source.idRef;n.source.isParentRef;if(i&&"Array"!==n.source.type&&t[i]){var o=t[i];n.source.isParentRef&&(e.parentRef=o),o===e&&(n._selfLink=!0),n.parentPropertyRef=o.idProperty}})),this.navigationPropertyList.forEach((function(n){var i=n.source.objectRef;if(i&&t[i]){var o=t[i],r=o.navigationPropertyList.find((function(t){return t.source.objectRef===e.id}));o===e&&(n._selfLink=!0),n.doubleRef=r}}))}},{key:"traverse",value:function(e){e(this),this.propertyList.forEach((function(n){n.ref instanceof t&&e(n)}))}},{key:"makeLink",value:function(t){this.propertyList.forEach((function(e){if(e.parentPropertyRef instanceof ie){var n=e.parentPropertyRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:m.LEFT,toDir:m.LEFT,content:e.association,minSpanX:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",content:e.association,meta:{from:e,to:n}})}})),this.navigationPropertyList.forEach((function(e){if(e.doubleRef instanceof ie){var n=e.doubleRef;e._selfLink?t({from:e.id,to:n.id,part:"property",fromDir:m.LEFT,toDir:m.TOP,lineDash:[10,5],doubleLink:!0,content:e.association,minSpanX:80,minSpanY:80,meta:{from:e,to:n}}):t({from:e.id,to:n.id,part:"property",lineDash:[10,5],doubleLink:!0,content:e.association,meta:{from:e,to:n,isObjectRef:!0}})}}))}}]),t}();function re(t){var e={},n=t.map((function(t){var n=new oe(t);return e[t.name]=n,n}));return n.forEach((function(t){t._traverseProperty(e)})),n}var ae=function(){function t(e){Object(r["a"])(this,t),this.static=!1,this.flowStack=[],this.flowLinkStack=[],this.erNodes=[],this.reOrder(e.entityRelationship)}return Object(a["a"])(t,[{key:"reOrder",value:function(t,e){var n=this;this.er=t,this.flowStack=[],this.flowLinkStack=[];var i=re(this.er),o=[];i.forEach((function(t){t.traverse((function(t){n.flowStack.push({type:t.type,configs:t.source,layoutMeta:t})})),t.makeLink((function(t){var e=t.from,i=t.to,r=t.meta;if(r.isObjectRef){var a="".concat(e,"-").concat(i),s="".concat(i,"-").concat(e),c=r.from;if(o.includes(a)||o.includes(s))return;c.source.isParentRef||(o.push(a),o.push(s),n.flowLinkStack.push(t))}else n.flowLinkStack.push(t)}))})),this.erNodes=i}},{key:"staticCheck",value:function(t,e){return!1}},{key:"reflow",value:function(t){this.flowLinkStack,this.erNodes;var e={},n=1e3;function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[0,0];return t.parentRef?e.includes(t.parentRef)?[o[0]-n/2+t.source.diagramWeight*n,o[1]]:(e.push(t.parentRef),o=i(t.parentRef,e),[o[0]-n/2+t.source.diagramWeight*n,o[1]+600]):o}this.erNodes.forEach((function(t){var n=t.getJflowInstance(),o=i(t),r=Object(F["a"])(o,2),a=r[0],s=r[1];e[s]||(e[s]=[]),e[s].push(t),n.anchor=[a+500*e[s].length,s],300}))}}]),t}(),se=ae,ce=function(t){Object(s["a"])(n,t);var e=Object(c["a"])(n);function n(t){var i;return Object(r["a"])(this,n),i=e.call(this),i.uniqueName="jflow",i.initStack(t),i.initLayout(t),i.ctx=null,i.canvas=null,i.dpr=1,i.padding=20,i.position=null,i.scale=null,i.maxZoom=t.maxZoom||3,i.minZoom=t.minZoom||.5,i.offeset=null,i._lastState={x:null,y:null,dragging:!1,processing:!1},i._lastDragState={target:null,targetLink:null,processing:!1},i._target={instance:null,link:null,moving:null,isInstanceDirty:!1,isLinkDirty:!1,cache:{stack:null,belongs:null,point:null},meta:{x:void 0,y:void 0,initialX:void 0,initialY:void 0},status:{dragovering:!1,dragging:!1,processing:!1}},i._focus={instance:null},i._dragOverTarget=null,i.allowDrop=t.allowDrop,i._tempInstance=null,i}return Object(a["a"])(n,[{key:"setTempDraggingInstance",value:function(t){t._belongs=this,this._tempInstance=t,Object.assign(this._target,{moving:[this._tempInstance],dragging:!0})}},{key:"removeTempDraggingInstance",value:function(){if(this._tempInstance){var t=this._tempInstance.anchor;return this._tempInstance=null,t}}},{key:"$mount",value:function(t){var e=l(t),n=e.canvas,i=e.ctx,o=e.scale,r=e.width,a=e.height,s=e.raw_width,c=e.raw_height;e.left,e.top;this.reflow(),this.ctx=i,this.DOMwrapper=t,this.canvas=n,this.canvasMeta={width:s,height:c,actual_width:r,actual_height:a},this.dpr=o,this._createEventHandler(),this._getBoundingGroupRect();var h=this.padding,u=this.bounding_box,d=u.width,f=u.height,g=u.x,v=u.y,p={x:h,y:h,width:r-2*h,height:a-2*h},b={x:0,y:0,offsetX:0,offsetY:0},m=p.width/d,y=p.height/f,k=m<=y?"x":"y",_=Math.min(m,y);this.scale=_,_>this.maxZoom&&(this.maxZoom=_),_<this.minZoom&&(this.minZoom=_),b.x="x"===k?p.x:(p.width-d*_)/2+h,b.y="y"===k?p.y:(p.height-f*_)/2+h,b.offsetX=b.x-g*_,b.offsetY=b.y-v*_,this.position=b,this._render()}},{key:"_getBoundingGroupRect",value:function(){var t=this._stack.getBoundingRectPoints();if(this.bounding_box){this.bounding_box=k(t);var e=this.bounding_box,n=e.x,i=e.y,o=this.scale;this.position.x=this.position.offsetX+n*o,this.position.y=this.position.offsetY+i*o}else this.bounding_box=k(t)}},{key:"_createEventHandler",value:function(){var t,e=this.canvas,n=this._onZoom.bind(this),i=this._onPressStart.bind(this),o=this._onPressMove.bind(this),r=this._onPressUp.bind(this),a=this._onPressUpDocument.bind(this),s=this._onContextMenu.bind(this);e.addEventListener("wheel",n),e.addEventListener("contextmenu",(function(t){t.preventDefault()})),e.addEventListener("pointerdown",i),e.addEventListener("pointermove",o),e.addEventListener("pointerup",r),e.addEventListener("contextmenu",s),document.addEventListener("pointerup",a);var c=function(){e.removeEventListener("wheel",n),e.removeEventListener("pointerdown",i),e.removeEventListener("pointermove",o),e.removeEventListener("pointerup",r),document.removeEventListener("pointerup",a)};if(t=c,this.allowDrop){var h=this._onDragover.bind(this),l=this._onDrop.bind(this);e.addEventListener("dragover",h),e.addEventListener("drop",l),t=function(){c(),e.removeEventListener("dragover",h),e.removeEventListener("drop",l)}}this.destroy=t}},{key:"_targetLockOn",value:function(t,e){var n=this,i=this._calculatePointBack(t),o=i;this._currentp=i;var r=this._stack,a=r.checkHit(i,(function(t){return n._target.status.dragging&&t===n._getMovingTarget()})),s=this._linkStack,c=this;a&&(s=a._belongs._linkStack,i=a._belongs._currentp,r=a._belongs._stack,c=a._belongs);var h=s.checkHit(i,(function(t){if(!n._target.status.dragging)return!1;var e=n._getMovingTarget();return t.from===e||t.to===e}));if(Object.assign(this._target,{instance:a,link:h,isInstanceDirty:a===this._target.instance,isLinkDirty:h===this._target.link}),Object.assign(this._target.cache,{stack:r,belongs:c,point:i,topLayerPoint:o}),Object.assign(this._target.meta,{x:t[0],y:t[1]}),"pressStart"===e&&!this._target.status.dragging&&!this._target.status.dragovering){var l=a;while(l&&l._belongs.lock&&l!==this)l=l._belongs;l&&(l=l._layoutNode?l._layoutNode.isLocked?l._layoutNode.getNodes():l._layoutNode.isDraggable?[l]:void 0:[l]),Object.assign(this._target,{moving:l})}return this._target}},{key:"_getMovingTarget",value:function(){return this._target.moving&&this._target.moving[0]}},{key:"_processDragOver",value:function(t){if(this._dragOverTarget!==t){var e,n=null===(e=this.readMessage())||void 0===e?void 0:e.instance;if(t&&t.dispatchEvent(new Z("dragover",{event:event,instance:t,target:n})),this._dragOverTarget){var i=this._dragOverTarget;i.dispatchEvent(new Z("dragoverend",{event:event,instance:i,target:n}))}this._dragOverTarget=t}}},{key:"_onDragover",value:function(t){var e=this;if(t.preventDefault(),!this._lastDragState.processing){this._lastDragState.processing=!0;var n=t.offsetX,i=t.offsetY;Object.assign(this._target.status,{dragovering:!0}),this._targetLockOn([n,i]);var o=this._target.instance||this._target.link;this._processDragOver(o),this._target.isLinkDirty||this._target.isInstanceDirty?requestAnimationFrame((function(){e._render(),e._target.isLinkDirty=!1,e._target.isInstanceDirty=!1,e._lastDragState.processing=!1})):this._lastDragState.processing=!1}}},{key:"_onDrop",value:function(t){var e=this,n=(t.offsetX,t.offsetY,t.clientX,t.clientY,this.consumeMessage()),i=n.instance;if(this._dragOverTarget){var o=this._dragOverTarget;o.dispatchEvent(new Z("dragoverend",{event:t,instance:o})),this._dragOverTarget=null}var r=this._target,a=r.link,s=r.instance,c=this._target.cache,h=c.point,l=c.belongs;a?(i.anchor=h,a.dispatchEvent(new Z("drop",{event:t,instance:i,link:a,jflow:this,belongs:l,point:h}))):s?s.dispatchEvent(new Z("drop",{event:t,instance:i,jflow:this,target:s,point:h})):this.dispatchEvent(new Z("drop",{event:t,instance:i,jflow:this,target:s,point:h})),requestAnimationFrame((function(){e._target.instance=null,e._target.link=null,Object.assign(e._target.status,{dragovering:!1})}))}},{key:"_onZoom",value:function(t){var e=this;if(t.preventDefault(),!this._zooming){this._zooming=!0;var n=t.offsetX,i=t.offsetY,o=t.deltaY,r=this.bounding_box,a=r.width,s=r.height,c=r.x,h=r.y,l=this.scale,u=o>0?1.1:1/1.1;l*=u,this.maxZoom&&l>this.maxZoom&&(l=this.maxZoom),this.minZoom&&l<this.minZoom&&(l=this.minZoom);var d=l-this.scale,f=a*this.scale,g=s*this.scale,v=a*d,p=s*d,b=n-this.position.x,m=i-this.position.y,y=-b/f,k=-m/g;this.scale=l,this.position.x+=y*v,this.position.y+=k*p,this.position.offsetX=this.position.x-c*l,this.position.offsetY=this.position.y-h*l,this.dispatchEvent(new Z("zoompan")),requestAnimationFrame((function(){e._render(),e._zooming=!1}))}}},{key:"_onPressStart",value:function(t){var e=t.offsetX,n=t.offsetY,i=(t.deltaY,t.button);if(0===i){if(this._targetLockOn([e,n],"pressStart"),Object.assign(this._target.meta,{initialX:e,initialY:n}),Object.assign(this._target.status,{dragging:!0,processing:!1}),this._target.moving){var o=this._getMovingTarget();o.dispatchEvent(new Z("pressStart",{event:t,instance:o,jflow:this}))}if(this._target.instance){var r=this._target.instance;r.bubbleEvent(new Z("instancePressStart",{event:t,target:r,jflow:this,bubbles:!0}))}}}},{key:"_onPressMove",value:function(t){var e=this,n=this._target.status,i=n.dragging,o=n.processing,r=this._target.meta,a=r.x,s=r.y,c=t.offsetX,h=t.offsetY;t.clientX,t.clientY;if(this.dispatchEvent(new Z("canvasmousemove",{event:t,jflow:this})),!i&&!o){var l=this._targetLockOn([c,h]);l.link,l.instance}if(this.canvas.style.cursor="default",i&&(this.canvas.style.cursor="move",!o)){var u=this._target.moving;this._target.status.processing=!0;var d=c-a,f=h-s;u?u.forEach((function(t){t.anchor[0]+=d/e.scale,t.anchor[1]+=f/e.scale})):(this._recalculatePosition(d,f),this.dispatchEvent(new Z("zoompan")));var g=this._targetLockOn([c,h]),v=g.instance,p=g.link;this._processDragOver(v||p),requestAnimationFrame((function(){e._render(),e._target.isLinkDirty=!1,e._target.isInstanceDirty=!1,e._target.status.processing=!1}))}}},{key:"_onPressUp",value:function(t,e){t.preventDefault(),t.stopPropagation();var n=t.button;if(0===n){var i=this._target.meta;if(i.initialX===i.x&&i.initialY===i.y){if(t.target!==this.canvas)return void this._clearTarget();if(this._target.instance&&!e){var o=this._target.instance;return o.bubbleEvent(new Z("click",{event:t,target:o,jflow:this,bubbles:!0})),this._clearTarget(),void this._render()}return this.dispatchEvent(new Z("click",{event:t,jflow:this})),this._clearTarget(),void this._render()}if(this._target.moving){var r=!1;if(this._layout.static&&(r=this.staticCheck(this._getMovingTarget())),!r&&this._target.link){var a=this._target.cache,s=(a.point,a.belongs),c=this._target.link,h=this._getMovingTarget();c.dispatchEvent(new Z("drop",{event:t,instance:h,link:c,jflow:this,belongs:s})),this._target.link=null,this._target.instance=null}this._target.moving&&(this._target.instance?(console.log("pressEnd",this._target.instance),this._target.instance.bubbleEvent(new Z("pressEnd",{event:t,instance:this._getMovingTarget(),jflow:this,target:this._target.instance,bubbles:!0}))):this.dispatchEvent(new Z("pressEnd",{event:t,instance:this._getMovingTarget(),jflow:this}))),this._target.moving=null,this.removeTempDraggingInstance(),this._render()}this._clearTarget()}}},{key:"_clearTarget",value:function(){Object.assign(this._target.meta,{x:void 0,y:void 0,initialX:void 0,initialY:void 0}),Object.assign(this._target.status,{dragging:!1,processing:!1}),Object.assign(this._target,{instance:null,link:null,moving:null})}},{key:"_onPressUpDocument",value:function(t){this._onPressUp(t,!0)}},{key:"_onClick",value:function(t){var e=t.offsetX,n=t.offsetY,i=this._calculatePointBack([e,n]);this._stack.checkHit(i)}},{key:"_onContextMenu",value:function(t){t.preventDefault(),t.stopPropagation();var e=t.offsetX,n=t.offsetY,i=this._targetLockOn([e,n]),o=i.link,r=i.instance,a=this._target.cache.topLayerPoint;if(r||o){var s=r||o;s.bubbleEvent(new Z("contextclick",{event:t,jflow:this,target:s,topLayerPoint:a,bubbles:!0}))}else this.dispatchEvent(new Z("contextclick",{event:t,jflow:this,topLayerPoint:a}))}},{key:"_recalculatePosition",value:function(t,e,n){var i=this.bounding_box,o=i.x,r=i.y;void 0===n&&(n=this.scale),this.position.x+=t,this.position.y+=e,this.position.offsetX=this.position.x-o*n,this.position.offsetY=this.position.y-r*n}},{key:"calculateToRealWorld",value:function(t){var e=this.scale,n=this.position;return[t[0]*e+n.offsetX,t[1]*e+n.offsetY]}},{key:"_calculatePointBack",value:function(t){var e=this.scale,n=this.position;return[(t[0]-n.offsetX)/e,(t[1]-n.offsetY)/e]}},{key:"_calculateDistance",value:function(t){var e=this.scale;return e*t}},{key:"_resetTransform",value:function(){var t=this.canvasMeta,e=t.width,n=t.height,i=this.position,o=this.scale,r=this.ctx;r.setTransform(),r.clearRect(0,0,e,n),r.scale(this.dpr,this.dpr),r.transform(o,0,0,o,i.offsetX,i.offsetY)}},{key:"_render",value:function(){this._resetTransform();var t=this.ctx;this._stack.render(t),this._linkStack.render(t),this._tempInstance&&(t.save(),this._tempInstance.render(t),t.restore())}}]),n}(Object(h["a"])(EventTarget));Object.assign(ce.prototype,N),Object.assign(ce.prototype,A),Object.assign(ce.prototype,$);var he=ce,le={provide:function(){return{addToStack:this.addToStack,addToLinkStack:this.addToLinkStack,removeFromStack:this.removeFromStack,removeFromLinkStack:this.removeFromLinkStack,getInstanceByJFlowId:this.getInstanceByJFlowId}},data:function(){return{stack:[]}},methods:{getInstanceByJFlowId:function(t){var e=this.stack.find((function(e){return e.jflowId===t}));return e?e.instance:null},addToStack:function(t,e){this._jflowInstance.addToStack(t),e&&this.stack.push({jflowId:e,instance:t})},addToLinkStack:function(t){this._jflowInstance.addToLinkStack(t)},removeFromStack:function(t){this._jflowInstance.removeFromStack(t)},removeFromLinkStack:function(t){this._jflowInstance.removeFromLinkStack(t)},onStackChangeHandler:function(){this._jflowInstance.recalculate(),this._jflowInstance.reflow()}}},ue={mixins:[le],provide:function(){return{renderJFlow:this.renderJFlow,addNameToRootStack:this.addNameToRootStack}},props:{configs:{type:Object,default:function(){return{}}}},data:function(){return{nodes:[],links:[]}},render:function(t){var e=this;if(this.nodes.length){var n=this.nodes.map((function(t){var n=t.type,i=t.configs,o=t.meta;if(!e.$scopedSlots[n]){if(!e.$scopedSlots["jflowcommon"])return;n="jflowcommon"}var r=e.$scopedSlots[n]({configs:i,meta:o}),a=Object(F["a"])(r,1),s=a[0];return o.getJflowInstance=function(){var t=s.componentInstance;while(t&&!t._jflowInstance)t=t.$children[0];return t._jflowInstance._layoutNode=o,t._jflowInstance},s.key=i.id,s})),i=this.links.map((function(t){var n=t.type||"plainlink";if(!e.$scopedSlots[n])return null;var i=e.$scopedSlots[n]({configs:t}),o=Object(F["a"])(i,1),r=o[0];return r.key="".concat(t.from,"-").concat(t.to,"-").concat(t.part),r}));return t("div",[].concat(Object(p["a"])(n),Object(p["a"])(i)))}return t("div",this.$slots.default)},created:function(){this._jflowInstance=new he(this.configs)},mounted:function(){var t=this;this.nodes=this._jflowInstance._layout.flowStack.map((function(t){return{type:t.type,configs:t.configs,meta:t.layoutMeta}})),this.links=this._jflowInstance._layout.flowLinkStack.slice(),this.$nextTick((function(){t._jflowInstance.$mount(t.$el)})),Object.keys(this.$listeners).map((function(e){var n=t.$listeners[e].bind(t);t._jflowInstance.addEventListener(e,n)}))},methods:{reflow:function(t){var e=this,n=this._jflowInstance._layout.flowStack.map((function(t){return{type:t.type,configs:t.configs,meta:t.layoutMeta}}));this.nodes=n,this.links=this._jflowInstance._layout.flowLinkStack.slice(),this.$nextTick((function(){t&&t(),e._jflowInstance.recalculate(),e._jflowInstance._render()}))},getInstance:function(){return this._jflowInstance},renderJFlow:function(){this._jflowInstance._render()},addNameToRootStack:function(t,e){this.stack.push({jflowId:e,instance:t})}}},de=n("dd43"),fe=n.n(de),ge=function(t){var e="string"===typeof t?i[t]:t;return{inject:["addToStack","removeFromStack","addNameToRootStack"],props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},jflowId:{type:String}},watch:{configs:function(t,e){var n=fe()(t,e);0!==Object.keys(n).length&&this._jflowInstance.setConfig(t)},$listeners:function(t,e){var n=this,i=[],o=[],r=Object.keys(t).map((function(e){return{event:e,handler:t[e]}})),a=Object.keys(e).map((function(t){return{event:t,handler:e[t]}}));r.forEach((function(t){var e=t.handler;a.find((function(t){return t.handler===e}))||i.push(t)})),a.forEach((function(t){var e=t.handler;r.find((function(t){return t.handler===e}))||o.push(t)})),i.forEach((function(t){n._jflowInstance.addEventListener(t.event,t.handler)})),o.forEach((function(t){n._jflowInstance.removeEventListener(t.event,t.handler)}))},visible:function(t){this._jflowInstance.visible=t}},render:function(t){return null},created:function(){this._jflowInstance=new e(this.configs),this._jflowInstance.visible=this.visible,this.bindListeners(),this.addToStack(this._jflowInstance,this.jflowId)},destroyed:function(){this.removeFromStack(this._jflowInstance)},methods:{bindListeners:function(){var t=this;Object.keys(this.$listeners).map((function(e){var n=t.$listeners[e];t._jflowInstance.addEventListener(e,n)}))}}}},ve=function(t,e){return{inject:["addToLinkStack","removeFromLinkStack","getInstanceByJFlowId"],props:{configs:{type:Object,default:function(){return{}}},from:String,to:String},watch:{from:function(){this.resetLink()},to:function(){this.resetLink()},configs:function(t,e){t.backgroundColor!==e.backgroundColor&&(this._jflowInstance.backgroundColor=t.backgroundColor)}},render:function(t){return null},created:function(){var e=this.getInstanceByJFlowId(this.from),n=this.getInstanceByJFlowId(this.to),o=this.$vnode.key;e&&n&&(this._jflowInstance=new i[t](Object(J["a"])(Object(J["a"])({},this.configs),{},{key:o,from:e,to:n})),this.bindListeners(),this.addToLinkStack(this._jflowInstance))},methods:{resetLink:function(){var t=this.getInstanceByJFlowId(this.from),e=this.getInstanceByJFlowId(this.to);this._jflowInstance.from=t,this._jflowInstance.to=e},bindListeners:function(){var t=this;Object.keys(this.$listeners).map((function(e){var n=t.$listeners[e];t._jflowInstance.addEventListener(e,n)}))}},destroyed:function(){this._jflowInstance&&this.removeFromLinkStack(this._jflowInstance)}}},pe=(n("e9c4"),function(t){var e="string"===typeof t?i[t]:t;return{mixins:[le],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"},addNameToRootStack:{from:"addNameToRootStack"}},render:function(t){return t("template",this.$slots.default)},props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},jflowId:{type:String}},watch:{configs:function(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners:function(t,e){var n=this,i=[],o=[],r=Object.keys(t).map((function(e){return{event:e,handler:t[e]}})),a=Object.keys(e).map((function(t){return{event:t,handler:e[t]}}));r.forEach((function(t){var e=t.handler;a.find((function(t){return t.handler===e}))||i.push(t)})),a.forEach((function(t){var e=t.handler;r.find((function(t){return t.handler===e}))||o.push(t)})),i.forEach((function(t){n._jflowInstance.addEventListener(t.event,t.handler)})),o.forEach((function(t){n._jflowInstance.removeEventListener(t.event,t.handler)}))},visible:function(t){this._jflowInstance.visible=t}},created:function(){var t=this;this._jflowInstance=new e(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((function(e){var n=t.$listeners[e].bind(t);t._jflowInstance.addEventListener(e,n)})),this.addToBelongStack(this._jflowInstance,this.jflowId),this.addNameToRootStack(this._jflowInstance,this.jflowId)},mounted:function(){this._jflowInstance.recalculate()},updated:function(){this._jflowInstance.recalculateUp()},destroyed:function(){this.removeFromBelongStack(this._jflowInstance)}}}),be=["Point","Rectangle","Capsule","Diamond","Rhombus","Text","Icon"],me=["Link","PolyLink","BezierLink"],ye=["CapsuleGroup","CapsuleVerticalGroup","DiamondGroup","DiamondVerticalGroup","RhombusGroup"],ke=[{name:"Jflow",component:ue},{name:"Group",component:pe("Group")}].concat(Object(p["a"])(ye.map((function(t){return{name:t,component:pe(t)}}))),Object(p["a"])(be.map((function(t){return{name:t,component:ge(t)}}))),Object(p["a"])(me.map((function(t){return{name:t,component:ve(t)}})))),_e="j",we={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_e;e&&e.prefix&&(n=e.prefix),ke.forEach((function(e){t.component("".concat(n).concat(e.name),e.component)})),e.custom&&Object.keys(e.custom).forEach((function(i){t.component("".concat(n).concat(i),ge(e.custom[i]))}))}},je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.body,attrs:{id:"app"}},[n("div",{class:t.$style.sidebar},[n("div",[n("div",{class:t.$style.part,attrs:{draggable:"true",type:"IfStatement"},on:{dragstart:t.onDragStartRectangle}},[t._v("IfStatement")])]),n("div",[n("div",{class:t.$style.part,attrs:{draggable:"true",type:"variable"},on:{dragstart:t.onDragStartPoint}},[t._v("Variable")])])]),n("div",{staticStyle:{position:"relative"}},[n("j-jflow",{ref:"jflow",class:t.$style.wrapper,attrs:{configs:t.configs},on:{click:t.onClickNoWhere,drop:t.onDrop,pressEnd:t.onPressEnd},scopedSlots:t._u([{key:"start",fn:function(t){var e=t.configs;return[n("j-start",{attrs:{node:e}})]}},{key:"end",fn:function(t){var e=t.configs;return[n("j-end",{attrs:{node:e}})]}},{key:"variable",fn:function(e){var i=e.configs,o=e.meta;return[n("j-variable",{attrs:{node:i},on:{pressStart:function(e){return t.onPressStart(i)},outOfFlow:function(e){return t.onOutOfFlow(e,o)},change:function(e){return t.onChangeContent(e,i)}}})]}},{key:"IfStatement",fn:function(e){var i=e.configs,o=e.meta;return[n("j-ifstatement",{attrs:{node:i},on:{pressStart:function(e){return t.onPressStart(i)},outOfFlow:function(e){return t.onOutOfFlow(e,o)}}})]}},{key:"SwitchStatement",fn:function(e){var i=e.configs,o=e.meta;return[n("j-switch",{attrs:{node:i},on:{pressStart:function(e){return t.onPressStart(i)},outOfFlow:function(e){return t.onOutOfFlow(e,o)}}})]}},{key:"WhileStatement",fn:function(e){var i=e.configs,o=e.meta;return[n("j-whilestatement",{attrs:{node:i},on:{pressStart:function(e){return t.onPressStart(i)},outOfFlow:function(e){return t.onOutOfFlow(e,o)}}})]}},{key:"endpoint",fn:function(t){var e=t.configs;return[n("j-endpoint",{attrs:{node:e}})]}},{key:"CallLogic",fn:function(e){var i=e.configs,o=e.meta;return[n("j-calllogic",{attrs:{node:i},on:{"toggle-select":function(e){return t.onToggleSelect(e,i)},pressStart:function(e){return t.onPressStart(i)},outOfFlow:function(e){return t.onOutOfFlow(e,o)}}})]}},{key:"plainlink",fn:function(e){var i=e.configs;return[n("instance-link",{attrs:{linkConfigs:i},on:{drop:function(e){return t.onDropToLink(e,i)}}})]}}])}),t.isHover?n("div",{ref:"hoverblock",class:t.$style.hoverblock,style:"transform: translate("+t.offsetX+"px, "+t.offsetY+"px)"},[n("ul",t._l(t.logics,(function(e){return n("li",{key:e.content,on:{click:function(n){return t.onSelectLogic(e)}}},[t._v(t._s(e.content))])})),0)]):t._e()],1),n("div",{class:t.$style.ast},[n("pre",{domProps:{innerHTML:t._s(t.prettyJson(t.ast))}})])])},Oe=[],Te=(n("53ca"),n("a15b"),n("68ca")),Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-diamond-group",t._g({attrs:{jflowId:t.node.id,configs:t.groupConfig}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#585c63",content:t.node.content,lineHeight:26,editable:!0}},on:{change:t.onContentChange}})],1)},Ee=[],Ce={props:{node:Object},computed:{groupConfig:function(){return{layout:new Xt({direction:"horizontal",gap:0}),borderColor:"#517cff",borderWidth:2,borderRadius:5,padding:10}}},methods:{onContentChange:function(t){console.log(t.detail),this.$emit("change",{val:t.detail.val,oldVal:t.detail.oldVal})}}},xe=Ce,Ie=n("2877"),Pe=Object(Ie["a"])(xe,Se,Ee,!1,null,null,null),Le=Pe.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-rhombus-group",t._g({attrs:{jflowId:t.node.id,configs:t.groupConfig},on:{mouseenter:function(e){t.touch=!0},mouseleave:function(e){t.touch=!1}}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#585c63",content:"ifstatement "+t.node.id,lineHeight:26,indent:10}}})],1)},Me=[],Be={props:{node:Object},inject:["renderJFlow"],data:function(){return{touch:!1}},computed:{groupConfig:function(){return{layout:new Xt({direction:"horizontal",gap:0}),borderColor:"#517cff",backgroundColor:this.touch?"red":"#fff",shadowColor:"#517cff",shadowBlur:15,borderWidth:2,borderRadius:5,padding:30}}},watch:{touch:function(t){console.log(t)}},updated:function(){this.renderJFlow()}},Re=Be,Fe=Object(Ie["a"])(Re,De,Me,!1,null,null,null),He=Fe.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-group",{attrs:{jflowId:t.node.id,configs:t.configs}},[n("j-text",{ref:"start",attrs:{configs:{fontSize:"12px",textColor:"#000",content:"Start"}}}),n("j-point",{attrs:{configs:{backgroundColor:"#99DBC5",radius:20,borderColor:"#33B88C",borderWidth:2,shadowBlur:8,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetY:2,shadowOffsetX:0}}})],1)},Ye=[],Ge={props:{node:Object},data:function(){return{configs:{layout:new Xt({direction:"vertical",gap:10}),borderColor:"transparent",borderWidth:0}}}},Xe=Ge,Ae=Object(Ie["a"])(Xe,We,Ye,!1,null,null,null),qe=Ae.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-group",{attrs:{jflowId:t.node.id,configs:t.configs}},[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#000",content:"End"}}}),n("j-rectangle",{attrs:{configs:{backgroundColor:"#FAAAAA",width:36,height:36,borderRadius:8,borderWidth:2,borderColor:"#F55656",shadowBlur:8,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetY:2,shadowOffsetX:0}}})],1)},ze=[],Ne={props:{node:Object},data:function(){return{configs:{layout:new Xt({direction:"vertical",gap:0}),borderColor:"transparent",borderWidth:0}}}},Je=Ne,Ue=Object(Ie["a"])(Je,$e,ze,!1,null,null,null),Ze=Ue.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-point",{attrs:{jflowId:t.node.id,configs:{backgroundColor:"#fff",borderColor:"#000",borderWidth:1,radius:5,ignoreHit:!0}}})},Ke=[],Qe={props:{node:Object}},tn=Qe,en=Object(Ie["a"])(tn,Ve,Ke,!1,null,null,null),nn=en.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-capsule-vertical-group",t._g({attrs:{jflowId:t.node.id,configs:t.configs}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:t.textColor,content:t.node.id}}}),t._l(t.node.cases,(function(t){return[n("j-switchcase",{key:t.id,attrs:{node:t}})]}))],2)},rn=[],an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-diamond-group",t._g({attrs:{jflowId:t.node.id,configs:t.groupConfig,rootLink:!0}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#585c63",content:t.node.content,lineHeight:26}}})],1)},sn=[],cn={props:{node:Object},computed:{groupConfig:function(){return{layout:new Xt({direction:"horizontal",gap:0}),borderColor:"#517cff",paddingTop:2,paddingBottom:2,padding:10,borderWidth:2,borderRadius:5}}}},hn=cn,ln=Object(Ie["a"])(hn,an,sn,!1,null,null,null),un=ln.exports,dn={components:{"j-switchcase":un},props:{node:Object},data:function(){return{textColor:"#585c63",configs:{layout:new Xt({direction:"vertical",gap:10}),borderColor:"#517cff",borderWidth:2,borderRadius:5,paddingTop:20,paddingBottom:20}}}},fn=dn,gn=Object(Ie["a"])(fn,on,rn,!1,null,null,null),vn=gn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-rhombus-group",t._g({attrs:{jflowId:t.node.id,configs:t.groupConfig}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#585c63",content:t.node.content,lineHeight:26,indent:10}}})],1)},bn=[],mn={props:{node:Object},computed:{groupConfig:function(){return{layout:new Xt({direction:"horizontal",gap:0}),borderColor:"#517cff",borderWidth:2,borderRadius:5,padding:30}}}},yn=mn,kn=Object(Ie["a"])(yn,pn,bn,!1,null,null,null),_n=kn.exports,wn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-group",t._g({attrs:{jflowId:t.node.id,configs:t.configs}},t.$listeners),[n("j-group",{attrs:{configs:t.headerConfigs}},[n("j-icon",{attrs:{configs:t.imageConfig}}),n("j-text",{attrs:{configs:{fontSize:"16px",textColor:"#585c63",content:""}}})],1),n("j-group",{attrs:{configs:t.contentConfigs},on:{click:t.onClick}},[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#585c63",content:t.node.content||""}}})],1),t.node.params&&t.node.params.length?[n("j-group",{ref:"paramGroup",attrs:{configs:t.paramsConfigs}},[n("j-text",{attrs:{configs:{fontSize:"16px",textColor:"#585c63",content:""}}}),t._l(t.node.params,(function(t){return n("j-text",{key:t.content,attrs:{configs:{fontSize:"16px",textColor:"#585c63",content:t.content}}})}))],2)]:t._e()],2)},jn=[],On=n("8896"),Tn=n.n(On),Sn=new Image;Sn.src=Tn.a;var En={props:{node:Object},data:function(){return{configs:{layout:new Xt({direction:"vertical",gap:0,alignment:"start"}),padding:10,borderColor:"#517cff",borderWidth:2,borderRadius:12},headerConfigs:{layout:new Xt({direction:"horizontal",gap:0}),borderRadius:10,borderColor:"#ccc",borderWidth:0},contentConfigs:{layout:new Xt({direction:"horizontal",gap:0,justify:"start"}),borderColor:"#517cff",borderWidth:2,borderRadius:5,width:200,height:36},paramsConfigs:{layout:new Xt({direction:"vertical",gap:0,alignment:"end"}),borderColor:"transparent",hoverStyle:"transparent"},imageConfig:{image:Sn,width:30,height:30}}},watch:{"node.params":function(t){var e=this;this.$nextTick((function(){if(e.$refs.paramGroup){var t=e.$refs.paramGroup._jflowInstance;t.recalculateUp(),t._jflow._render()}}))}},methods:{onClick:function(t){console.log(t),t.detail.bubbles=!1;var e=t.currentTarget,n=[-e.width/2,e.height/2];console.log(n);var i=e.calculateToRealWorld(n);this.$emit("toggle-select",i)}}},Cn=En,xn=Object(Ie["a"])(Cn,wn,jn,!1,null,null,null),In=xn.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("jPolyLink",{attrs:{configs:t.configs,from:t.configs.from,to:t.configs.to},on:{dragover:t.onDragOver,dragoverend:t.onDragOverEnd,drop:t.onDropToLink}})},Ln=[],Dn={props:{linkConfigs:Object},data:function(){return{isDragOver:!1}},computed:{configs:function(){return Object(J["a"])(Object(J["a"])({},this.linkConfigs),{},{radius:5,approximate:400,backgroundColor:this.isDragOver?"rgba(81, 124, 255, 0.5)":"#000"})}},methods:{onDropToLink:function(t){this.$emit("drop",t)},onDragOver:function(t){this.isDragOver=!0},onDragOverEnd:function(){this.isDragOver=!1}}},Mn=Dn,Bn=Object(Ie["a"])(Mn,Pn,Ln,!1,null,null,null),Rn=Bn.exports;var Fn=0,Hn={components:{"j-variable":Le,"j-start":qe,"j-end":Ze,"j-endpoint":nn,"j-switch":vn,"j-ifstatement":He,"j-whilestatement":_n,"j-calllogic":In,instanceLink:Rn},provide:function(){return{renderJFlow:this.renderJFlow}},data:function(){var t={type:"Root",body:[{type:"start",id:"start"},{type:"IfStatement",content:"aaaa",id:"logic1",consequent:[{type:"variable",content:"vvvkjhkjhvvvv",id:"logic5"}],alternate:[{type:"IfStatement",content:"ggggggg",id:"logic6",consequent:[{type:"variable",content:"jkhvvvv",id:"logic77"}],alternate:[{type:"variable",content:"yuuo",id:"logic88"}]},{type:"CallLogic",id:"CallLogic1",content:"",params:[]}]},{type:"SwitchStatement",id:"swtch1",cases:[{type:"SwitchCase",id:"switchcase11",content:"switchcase11",alternate:[{type:"variable",content:"yuuo",id:"sc1111122"}]},{type:"SwitchCase",id:"switchcase12",content:"switchcase12",alternate:[{type:"variable",content:"asdfag",id:"sc12344455"}],consequent:[{type:"variable",content:"dfhsdfg",id:"sc125444"}]}]},{type:"WhileStatement",id:"while1",content:"while1",body:[]},{type:"end",id:"end"}],playground:[]},e=new ne({linkLength:30,ast:t});return{ast:t,configs:{allowDrop:!0,layout:e},isHover:!1,offsetX:0,offsetY:0,currentTarget:null,prepareBody:[],logics:[{content:"aaa",params:[{content:"p1"}]},{content:"vvvv",params:[{content:"p1"},{content:"p2"}]},{content:"sadasdf",params:[{content:"p1"}]},{content:"ggggg",params:[{content:"p1"},{content:"p2"},{content:"p3"}]}],currentEditingTarget:null}},computed:{inflowInstances:function(){return this.ast.body.filter((function(t){return!t.outflow}))}},mounted:function(){console.log(this.$refs.jflow.getInstance())},methods:{prettyJson:function(){return Te["a"].toHtml(this.ast)},onDragStartRectangle:function(){var t=this.$refs.jflow.getInstance();t.sendMessage({instance:{type:"IfStatement",content:"IfStatement-rec".concat(Fn++),id:"IfStatement-rec".concat(Fn++),consequent:[],alternate:[]}})},onDragStartPoint:function(){var t=this.$refs.jflow.getInstance();t.sendMessage({instance:{type:"variable",content:"vvvvvvdasdfasfd",id:"logic-point".concat(Fn++)}})},onOutOfFlow:function(t,e){var n=e.parentIterateType,i=e.idx,o=e.parent.source[n].splice(i,1),r=Object(F["a"])(o,1),a=r[0];this.ast.playground.push(a),this.configs.layout.reOrder(this.ast),this.$refs.jflow.reflow(),e.getJflowInstance().anchor=t.detail.point},onDrop:function(t){var e=this,n=t.detail.instance;this.ast.playground.push(n),this.configs.layout.reOrder(this.ast),this.$refs.jflow.reflow((function(){var i=e.configs.layout.findLayoutNode(n);i&&(i.getJflowInstance().anchor=t.detail.point)}))},onClick:function(t){var e=t.currentTarget,n=[0,e.height/2],i=e.calculateToRealWorld(n),o=Object(F["a"])(i,2),r=o[0],a=o[1];this.isHover=!this.isHover,this.offsetX=r,this.offsetY=a},onPressStart:function(t){console.log("pressStart"),console.log(t),this.currentTarget=t},onPressEnd:function(){console.log("pressEnd"),this.currentTarget=null},onDropToLink:function(t,e){console.log(t,e);var n=t.detail.instance;this.currentTarget&&(n.removeFromLayoutSource(),n=this.currentTarget),e.meta.from.linkSource(n,e),this.configs.layout.reOrder(this.ast),this.$refs.jflow.reflow()},onToggleSelect:function(t,e){var n=Object(F["a"])(t,2),i=n[0],o=n[1];this.offsetX=i,this.offsetY=o,this.isHover=!this.isHover,this.isHover?this.currentEditingTarget=e:this.currentEditingTarget=null},onSelectLogic:function(t){this.isHover=!1,console.log(this.currentEditingTarget),this.currentEditingTarget.content=t.content,this.currentEditingTarget.params=t.params},onClickNoWhere:function(){this.isHover=!1,this.currentEditingTarget=null},onChangeContent:function(t,e){e.content=t.val},renderJFlow:function(){this.$refs.jflow.renderJFlow()}}},Wn=Hn,Yn=n("5bb9");function Gn(t){this["$style"]=Yn["default"].locals||Yn["default"]}var Xn=Object(Ie["a"])(Wn,je,Oe,!1,Gn,null,null),An=Xn.exports;o["a"].config.productionTip=!1,o["a"].use(we),new o["a"]({render:function(t){return t(An)}}).$mount("#app")},"5bb9":function(t,e,n){"use strict";var i=n("a7d4"),o=n.n(i);n.d(e,"default",(function(){return o.a}))},8896:function(t,e,n){t.exports=n.p+"img/logic.17805d7a.svg"},a7d4:function(t,e,n){t.exports={app:"App_app_3cl75",wrapper:"App_wrapper_pE_0j",body:"App_body_1uhyl",sidebar:"App_sidebar_3dMLz",rect:"App_rect_2g-OE",part:"App_part_1uPSl",circle:"App_circle_2pifB",ast:"App_ast_3JyD2",hide:"App_hide_1hYJ-",hoverblock:"App_hoverblock_rjKeE"}}});
//# sourceMappingURL=app.88597f1a.js.map
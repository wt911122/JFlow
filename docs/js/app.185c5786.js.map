{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/canvas.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/constance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/functions.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/instance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/ghostNode.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/nodeWeakMap.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stack.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/layoutMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/messageMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/anime/animeMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/miniMap/minimap-mixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/scrollbar/scrollbarMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/flow/schedule.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/adapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/groupFactory.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/point.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rectangle.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rhombus.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/commonAdapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/base-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/text.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/image.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shadowDom.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/poly-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/bezier-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/linear-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-types/baseNode.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/text-group.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/flow/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/StackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlow.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowInstance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowLink.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowGroup.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowTextGroup.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/JFlowPlugin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/index.js","webpack:///./src/App.vue?a6e4","webpack:///./src/components/variable.vue?9c63","webpack:///src/components/variable.vue","webpack:///./src/components/variable.vue?635d","webpack:///./src/components/variable.vue","webpack:///./src/components/ifstatement.vue?deb4","webpack:///src/components/ifstatement.vue","webpack:///./src/components/ifstatement.vue?d165","webpack:///./src/components/ifstatement.vue","webpack:///./src/components/start.vue?0cb0","webpack:///src/components/start.vue","webpack:///./src/components/start.vue?989d","webpack:///./src/components/start.vue","webpack:///./src/components/end.vue?bd1b","webpack:///src/components/end.vue","webpack:///./src/components/end.vue?df4a","webpack:///./src/components/end.vue","webpack:///./src/components/endpoint.vue?301b","webpack:///src/components/endpoint.vue","webpack:///./src/components/endpoint.vue?fad3","webpack:///./src/components/endpoint.vue","webpack:///./src/components/switch.vue?5686","webpack:///./src/components/switchcase.vue?2fa1","webpack:///src/components/switchcase.vue","webpack:///./src/components/switchcase.vue?48a4","webpack:///./src/components/switchcase.vue","webpack:///src/components/switch.vue","webpack:///./src/components/switch.vue?8fad","webpack:///./src/components/switch.vue","webpack:///./src/components/whilestatement.vue?63bf","webpack:///src/components/whilestatement.vue","webpack:///./src/components/whilestatement.vue?e5d2","webpack:///./src/components/whilestatement.vue","webpack:///./src/components/callLogic.vue?79f1","webpack:///src/components/callLogic.vue","webpack:///./src/components/callLogic.vue?735a","webpack:///./src/components/callLogic.vue","webpack:///./src/components/instance-link.vue?3e83","webpack:///src/components/instance-link.vue","webpack:///./src/components/instance-link.vue?2627","webpack:///./src/components/instance-link.vue","webpack:///./src/components/jsBlock.vue?b1ac","webpack:///src/components/jsBlock.vue","webpack:///./src/components/jsBlock.vue?d3bd","webpack:///./src/components/jsBlock.vue","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?fd8d","webpack:///./src/assets/logic.svg","webpack:///./src/App.vue?8544"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","createCanvas","wrapper","canvas","document","createElement","ctx","getContext","getBoundingClientRect","width","height","left","top","style","userSelect","scale","devicePixelRatio","Math","floor","position","overflow","append","raw_width","raw_height","resizeCanvas","caheCanvas","caheCanvasctx","requestCacheCanvas","render","clearRect","save","restore","listenOnDevicePixelRatio","callback","onChange","console","log","matchMedia","addEventListener","once","DIRECTION","RIGHT","BOTTOM","LEFT","TOP","SELF","APPROXIMATE","JFLOW_MODE","DEFAULT","LINKING","bounding_box","points","x","y","min_x","Infinity","min_y","max_x","max_y","idx","item","max","sqr","dist2","v","w","distToSegmentSquared","l2","min","minIntersectionBetweenNodes","dmsfrom","dmsto","meta","fromDir","fromP","toDir","toP","distMin","keys","forEach","df","pf","dt","pt","dist","assign","_resolveControlPoint","dir","spanx","spany","bezierPoints","p1","p2","start_dir","end_dir","minSpanX","minSpanY","abs","cp1","cp2","arrowspan","includes","isVerticalEnd","endX","endY","bezierPoint","P","q","u","angle","atan2","distToBezierSegmentSquared","b","Bezier","point","project","getBezierAngle","sx","sy","cp1x","cp1y","cp2x","cp2y","ex","ey","dx","pow","dy","PI","polylinePoints","isSelf","dirSpan","isVerticalStart","yp","xp","pmiddle","unshift","minusVec","absVec","vec","sqrt","scaleVec","makeRadiusFromVector","pbefore","pnext","radius","vec1","vec2","absVec1","absVec2","r1","r2","doOverlap","rec1","rec2","isPolyLineIntersectionRectange","polyline","rect","l0","l1","r0","cp","ishitKey","isInViewBox","Instance","configs","visible","_belongs","undefined","borderWidth","borderColor","backgroundColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","opacity","this","_jflow","_target","instance","link","_getMovingTarget","status","movingState","ishit","dispatchEvent","CustomEvent","detail","jflow","uniqueName","val","oldval","onEnterViewbox","onLeaveViewbox","k","anchor","getBoundingRect","customEvent","currentTarget","bubbles","bubbleEvent","calculateToRealWorld","belongs","recalculateUp","EventTarget","Node","_rawConfigs","absolutePosition","C","constructor","GhostNode","x2","y2","getMapObject","layoutNode","jflowNode","jflowlinks","jflowFromLinks","jflowToLinks","NodeWeakMap","_map","WeakMap","source","obj","set","has","delete","clear","NodeWeakMapMixin","initNodeWeakMap","source_Layout_Render_NodeMap","getRenderNodeBySource","mapping","getLayoutNodeBySource","getSourceRenderMeta","map","_getMap","setLayoutNodeBySource","setRenderNodeBySource","addLinkNodeBySource","sourceFrom","sourceTo","removeLinkNodeBySource","findIndex","InstanceStack","_currentHit","condition","movingTarget","_isMoving","currentConstraint","ignoreHit","isHit","_isHit","Array","StackMixin","instances","links","_stack","_linkStack","initStack","addToStack","replaceFromStack","target","index","addToLinkStack","removeFromStack","removeFromLinkStack","emptyLink","resetChildrenPosition","addInstanceToLink","targetLink","from","to","_constuctor","__proto__","interateNodeStack","LayoutMixin","_layout","initLayout","layout","dirty","getBoundingDimension","wold","hold","_getBoundingGroupRect","reflow","wnow","hnow","recalculate","staticCheck","MessageMixin","_message","sendMessage","msg","consumeMessage","readMessage","initAnime","anime_queue","__animeClock__","requestJFlowAnime","frameCallBack","enqueueAnime","_runAnime","animeMeta","start","cancel","_cancelAnime","_render","runAnime","scheduleRender","runAnimeFrame","timestamp","Date","now","elapsed","captureMap","padding","placement","p_width","p_height","p_x","p_y","miniMap","_renderMap","pressDown","event","offsetX","offsetY","deltaX","deltaY","_onMoveMap","cacheMinimapCtx","pad2","pad","m_x","m_y","cachectx","setTransform","transform","br","NodeRenderTop","_cacheMapImageData","getImageData","putImageData","_getViewBox","beginPath","clip","fillStyle","fillRect","a","_recalculatePosition","ScrollBar","barWidth","barMarginX","barMarginY","plainColor","focusColor","isFocus","cy","by","rc","lc","moveTo","arc","lineTo","closePath","tc","bc","cx","rx","fill","h","initScrollBar","barColor","barFocusColor","_scrollbarEnable","_scrollbarX","_scrollbarY","_scrollBarStatus","dragging","xscale","yscale","barInitX","barInitY","scrollBarOnPanAndZoom","e","clientX","clientY","onScrollbarPressStart","checkScrollDragging","xhit","barStartX","yhit","barStartY","f","onDraggingScrollbar","removeEventListener","scollbarHeight","scollbarWidth","realR","realL","realT","realB","canvasMeta","actual_width","actual_height","xnew","ratioInX","ratioX","ynew","ratioInY","ratioY","checkScrollBarHover","cursor","resetScrollBarHover","_getScrollViewBoundingbox","vw","vh","anchorX","anchorY","resetScollBarStatus","renderScrollBar","dpr","initSchedule","__clock__","requestAnimationFrame","isFirstTime","__render","JFlowEvent","originEvent","getDefaultPlugin","wheel","preventDefault","ctrlKey","zoomHandler","panHandler","pointerdown","button","pressStartHandler","pointermove","pressMoveHandler","pointerup","pressUpHanlder","contextmenu","stopPropagation","contextMenuHanlder","dblclick","dblclickHandler","click","clickHanlder","EventAdapter","plugin","use","canvasHandlers","documentHandlers","ca","docObj","eventName","handler","handlerWrapperd","GroupMixin","_setPadding","paddingTop","right","paddingRight","bottom","paddingBottom","paddingLeft","_setMargin","margin","marginTop","marginRight","marginBottom","marginLeft","_getCenter","mx","my","centerX","centerY","_shape","setAnchorX","setAnchorY","setAnchor","_calculatePointBack","gx","gy","calculateToCoordination","clone","ltx","lty","rbx","rby","getIntersectionsInFourDimension","calculateIntersection","x1","y1","vecx","vecy","theta1","theta2","dirx","diry","destroy","defaultShift","GroupFactory","jflowNodeConstructor","options","shapeShift","definedWidth","minWidth","definedHeight","lock","display","transparent","shapeWidth","shapeHeight","setConfig","getBoundingRectPoints","bbox","paddingWidth","paddingHeight","_paddingWidth","_paddingHeight","globalAlpha","translate","_currentp","checkHit","Point","type","_doCache","lineWidth","strokeStyle","stroke","ratio","end","allIntersections","interDir","Rectangle","borderRadius","_setBorder","border","color","enable","xt","yt","quadraticCurveTo","switchPath","Path2D","ty","topPath","Capsule","hw","hh","leftCenter","rightCenter","ww","rr","CapsuleVertical","topCenter","bottomCenter","yy","Rhombus","diagonalsV","diagonalsH","center","Diamond","side","sinSIDE","sin","cosSIDE","cos","xx","_cachePoints","polygon","odd","DiamondVertical","topmiddle","bottommiddle","xleft","xright","BaseLink","viewbox","linkStack","createInputElement","input","setAttribute","TEXT_ALIGN","CENTER","Text","content","fontFamily","fontSize","fontWeight","textColor","placeholderColor","textAlign","textBaseline","lineHeight","indent","editable","maxWidth","ellipsis","placeholder","emptyWhenInput","editting","disabled","textBuffer","renderShadowText","cacheText","_makeEditable","fs","currentContent","ellipsisContent","parseInt","_textWidth","font","fillText","cacheTextBounding","drawImage","tx","exec","inputElement","DOMwrapper","oldVal","calculateToRealWorldWithScalar","textIndent","outline","blurHandler","keyUpHandler","removeChild","keyCode","defaultAct","changed","focus","preventScroll","t_h","measureText","actualBoundingBoxLeft","actualBoundingBoxRight","fontBoundingBoxAscent","fontBoundingBoxDescent","substring","_renderCache","isEmpty","Icon","image","onload","imageBounding","imageWidth","imageHeight","complete","ShadowDom","domFactory","createDocument","_dom","container","pos","getRealWorldPosition","appendChild","Link","lineDash","approximate","p0","getCenter","_cacheAngle","_calculateAnchorPoints","region","ry","rw","rh","setLineDash","rotate","PIINRATIO","PolyLink","doubleLink","noArrow","_static","pEnd","angleEnd","beginAngle","pLast","pNext","lastP","remainPoints","currentP","BezierLink","bezierCurveTo","hasFlip","LinearLayout","direction","gap","alignment","justify","group","stack","filter","absoluteStack","groupWidth","reduceHeight","lastInstanceHeight","allHeight","childAll","concat","reduceWidth","lastInstanceWidth","maxHeight","allWidth","withdraw","gapAverage","WIDTH","HEIGHT","_resolveAbsoluteAnchor","config","BaseNode","id","level","sequence","isFree","parent","parentIterateType","hasEndPoint","spanX","spanY","nodes","traverse","renderNode","Root","isroot","body","mapFunc","playgrounditerator","playground","reflowPreCalculate","preCallback","node","last","part","makeLink","IfStatement","consequent","alternate","isLocked","c_spanX","c_spanY","a_spanX","a_spanY","nextSequeence","Endpoint","lastc","lasta","linkMeta","SwitchStatement","cases","lastCase","cc","s_spanX","s_spanY","ForEachStatement","WhileStatement","anticlock","SwitchCase","TYPE_MAPPING","other","makeAST","__endpoint__","Constructor","LowcodeLayout","linkLength","treeItemDraggable","reOrder","ast","static","flowStack","flowLinkStack","root","isDraggable","currentTopNodeId","layoutMapping","vertical","horizontal","playgroundLayoutMapping","reflowBodyPreCalculate","reflowPlaygroundPreCalculate","topNode","_layoutNode","finded","find","nowAnchor","currentAnchor","verticalMapping","horizontalMapping","columnNumber","column","rowWidth","rows","rowNumber","row","rowHeight","columns","layoutMeta","reflowByMapping","values","ERProperty","isNavigation","ref","association","_selfLink","parentPropertyRef","getJflowInstance","doubleRef","ERNode","propertyList","navigationPropertyList","idProperty","nodeMap","idRef","isParentRef","parentRef","objectRef","targetProperty","toProperty","isObjectRef","makeER","_traverseProperty","ERLayout","erNodes","entityRelationship","er","idMap","id1","id2","fromMeta","lineMapping","size","computeNodeAnchor","recorded","relativeAnchor","diagramWeight","nx","ny","TextElement","needWrap","offset","step","isTail","nextOffset","TextGroup","_lines","elementSpace","lineSpace","resolver","elements","_textElements","_status","editing","dragover","cursorshow","cursoranime","lastElapsed","refreshElapsed","_cursor","_makeFunctional","line","el","elem","cw","elemidx","remove","_positionToCursorOffset","_controlCallback","setFocusInstance","_refreshCursor","textElements","elem_idx","element","preElem","x0","y0","lineNumber","lines","currLine","last_c","_c","textmeta","offx","_calculateOffsetByWidth","maxL","g1","g2","c0","c1","c2","w0","w1","w2","op","_inputControl","_onArrowLeft","_onArrowRight","_onArrowDown","_onArrowUp","newElement","afterContent","preContent","cacheIdx","_blandAdjacentElement","preRow","preElemidx","tailOffset","headOffset","afterRow","rowlength","_ArrowVerticalHanlder","nextRow","currElem","currElemReduceWidth","nextLine","validInstance","elem1","elem2","currentLineHeight","lastElem","lastReduceY","reduceX","lastel","controlCallback","stopInput","code","Group","CapsuleGroup","RhombusGroup","DiamondGroup","DiamondVerticalGroup","CapsuleVerticalGroup","PointGroup","ceil","JFlow","eventAdapter","initialZoom","initialPosition","setInitialPosition","maxZoom","minZoom","worldMargin","draggingbehavior","panInBorder","deltamovement","allowMovingTargetInPan","scrollBarBehavior","offeset","_lastState","processing","_lastDragState","moving","isInstanceDirty","isLinkDirty","cache","initialX","initialY","dragovering","_focus","_dragOverTarget","allowDrop","_tempNode","_tempLink","_allowMovingTarget","targets","dom","c_width","c_height","$jflow","scaleRatio","contentBox","w_ratio","h_ratio","align","realboxX","realboxY","realboxW","realboxH","_readyToRender","_createEventHandler","linkGen","_preventClearTemp","nowx","nowy","destroyListener","destroyPlainEventListener","unload","dragoverHandler","_onDragover","dropHandler","_onDrop","dragleaveHanlder","_onDragLeave","offsetPoint","topLayerPoint","movingtarget","ON_TOP","setMovingTargets","relatedTarget","_dragCurrentData","oldIns","_processPanInBorder","timer","_cacheViewBox","px","py","__processOverAnime","_targetLockOn","_processDragOver","Promise","resolve","then","_cancelPanInBorder","payload","cancelDrop","_zooming","ch","newScale","amount","deltaScale","currentWidth","currentHeight","deltaWidth","deltaHeight","tX","tY","pX","pY","_panning","_resolveLockOnTarget","isDocument","_clearTarget","checkresult","removeTempDraggingInstance","bx1","bx2","by1","by2","cacheViewBox","_resetTransform","_viewBox","_isInViewBox","AnimeMixin","MiniMapMixin","ScheduleMixin","ScrollBarMixin","provide","methods","_jflowInstance","onStackChangeHandler","mixins","renderJFlow","getJFlow","getInstance","props","default","loading","Boolean","genVueComponentKey","Function","renderNodes","renderLinks","vnodes","$scopedSlots","__vnode__","vnode","vlinks","k1","k2","k3","$slots","created","genNodeLinkMeta","loadingNodes","beforeDestroy","$emit","tl","linkPart","mountJFlow","tn","$mount","$el","$listeners","func","syncNodeLink","afterCallback","$nextTick","__renderInSchedule__","nameNode","builder","JFlowInstance","inject","watch","diffed","diff","news","deletes","vnew","vold","hnew","bindListeners","destroyed","isLink","fromInstance","toInstance","createInstance","mounted","unwatch","$watch","refreshConfig","addToBelongStack","removeFromBelongStack","JSON","stringify","updated","genTextElementMeta","textElement","refreshTextElements","refresh","JFLOW_NODES","JFLOW_LINKS","JFLOW_GROUPS","components","component","JFlowComponent","JFlowGroup","JFlowLink","JFlowTextGroup","componentPrefix","customElements","define","attachShadow","HTMLElement","install","Vue","prefixToUse","prefix","customInstance","customGroups","customLink","packageJson","require","$jflow_version","version","_vm","_h","$createElement","_self","class","$style","attrs","sidebar","on","onDragStartRectangle","_v","onDragStartPoint","onDragjsBlock","staticStyle","jflowloading","$event","onClickNoWhere","onDrop","onPressEnd","scopedSlots","_u","fn","onPressStart","onOutOfFlow","onChangeContent","onToggleSelect","onclickdemojsblock","onContentChange","onDropToLink","hoverblock","_l","onSelectLogic","_s","_e","staticRenderFns","_g","groupConfig","onDbClick","touch","onAfterResolveMovingTarget","shrink","switchcase","headerConfigs","imageConfig","contentConfigs","onClick","params","paramsConfigs","param","linkConfigs","onDragEnter","onDragOverEnd","editorRect","getuuuuid","makeAst","number","injectStyles","context","locals","productionTip","JFlowVuePlugin","App"],"mappings":"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","file":"js/app.185c5786.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\n/**\n * @typedef {Object} CanvasMeta\n * @property {Element} canvas - canvas 元素\n * @property {number} width - 画布宽度\n * @property {number} height - 画布高度\n * @property {number} raw_width - 画布元素宽度\n * @property {number} raw_height - 画布元素高度\n * @property {number} left - 画布距离左端距离\n * @property {number} top - 画布距离顶端距离\n * @property {Context2d} ctx - Context2d\n * @property {number} scale - 当前的像素设备比\n */\n/**\n * 创建一个 canvas 元素\n * @param  {Element} wrapper - dom元素\n * @return {CanvasMeta}\n */\nexport function createCanvas(wrapper) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const { width, height, left, top } = wrapper.getBoundingClientRect();\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    canvas.style.userSelect = 'none';\n    const scale = window.devicePixelRatio;\n    canvas.width = Math.floor(width * scale);\n    canvas.height = Math.floor(height * scale);\n\n    if(wrapper) {\n        wrapper.style.position = 'relative';\n        wrapper.style.overflow = 'hidden';\n        wrapper.append(canvas);\n    }\n    return {\n        canvas,\n        width,\n        height,\n        raw_width: canvas.width,\n        raw_height: canvas.height,\n        left,\n        top,\n        ctx,\n        scale,\n    }\n}\n\nexport function resizeCanvas(canvas, wrapper) {\n    const { width, height, left, top } = wrapper.getBoundingClientRect();\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    const scale = window.devicePixelRatio;\n    canvas.width = Math.floor(width * scale);\n    canvas.height = Math.floor(height * scale);\n    return {\n        width,\n        height,\n        raw_width: canvas.width,\n        raw_height: canvas.height,\n    }\n}\n\nconst caheCanvas = document.createElement('canvas');\ncaheCanvas.width = 1;\ncaheCanvas.height = 1;\nconst caheCanvasctx = caheCanvas.getContext('2d');\nconst scale = window.devicePixelRatio;\ncaheCanvasctx.scale(scale, scale);\n\n/**\n * 在离线canvas上绘制元素\n * @param  {render} render - 绘图函数\n */\nexport function requestCacheCanvas(render) {\n    caheCanvasctx.clearRect(0,0,5,5);\n    caheCanvasctx.save();\n    render(caheCanvasctx);\n    caheCanvasctx.restore();\n    caheCanvasctx.clearRect(0,0,5,5);\n}\n\nexport function listenOnDevicePixelRatio(callback) {\n    function onChange() {\n      console.log(\"devicePixelRatio changed: \" + window.devicePixelRatio);\n      callback(window.devicePixelRatio);\n      listenOnDevicePixelRatio(callback);\n    }\n    matchMedia(\n      `(resolution: ${window.devicePixelRatio}dppx)`\n    ).addEventListener(\"change\", onChange, { once: true });\n}","/**\n * 方向\n * @readonly\n * @enum {number}\n */\nexport const DIRECTION = {\n    /** RIGHT */\n    RIGHT: 0,\n    /** BOTTOM */\n    BOTTOM: 1,\n    /** LEFT */\n    LEFT: 2,\n    /** TOP */\n    TOP: 3,\n    /** SELF */\n    SELF: 100,\n}\n\nexport function nextDirection(direction, clockwise) {\n    const nextDir = (direction + (clockwise ? 1 : -1)) % 4;\n    return nextDir;\n}\n\nexport function oppositeDirection(direction) {\n    return (direction + 2) % 4\n}\n\nexport const APPROXIMATE = 6;\n\nexport const JFLOW_MODE = {\n    DEFAULT: 'DEFAULT',\n    LINKING: 'LINKING',\n}\n\nexport const LINE_DIR = {\n    FROM: 'from',\n    TO: 'to',\n}","import {\n    Bezier,\n} from 'bezier-js';\nimport { DIRECTION } from './constance';\n\n/**\n * 根据点计算最小外接矩形\n * @param {number[][]} points - 点集合\n * @return {Object} demension 宽高，坐标\n */\nexport function bounding_box(points) {\n    if(points.length === 0) {\n        return {\n            width: 1,\n            height: 1,\n            x: 0,\n            y: 0,\n        }\n    }\n    let min_x = Infinity; \n    let min_y = Infinity; \n    let max_x = -Infinity; \n    let max_y = -Infinity; \n    for(let idx in points) {\n        const item = points[idx];\n        if(item[0] < min_x){\n            min_x = item[0]\n        }\n\n        if (item[0] > max_x) {\n            max_x = item[0]\n        } \n\n        if (item[1] < min_y) {\n            min_y = item[1]\n        }\n\n        if (item[1] > max_y) {\n            max_y = item[1]\n        }\n    }\n    return {\n        // points: [(min_x,min_y),(max_x,min_y),(max_x,max_y),(min_x,max_y)],\n        width: Math.max(max_x - min_x, 10),\n        height: Math.max(max_y - min_y, 10),\n        x: min_x,\n        y: min_y,\n    }\n}\n\nfunction sqr(x) {\n    return x * x;\n}\nexport function dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n// p - point\n// v - start point of segment\n// w - end point of segment\nexport function distToSegmentSquared(p, v, w) {\n    const l2 = dist2(v, w);\n    if (l2 === 0) return dist2(p, v);\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return dist2(p, [ v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1]) ]);\n}\n\nexport function minIntersectionBetweenNodes(dmsfrom, dmsto) {\n    const meta = {\n        fromDir: null,\n        fromP: null,\n        toDir: null,\n        toP: null,\n        distMin: Infinity\n    }\n    Object.keys(dmsfrom).forEach(df => {\n        if((+df) === DIRECTION.SELF) {\n            return;\n        }\n        let pf = dmsfrom[df];\n        Object.keys(dmsto).forEach(dt => {\n            if((+dt) === DIRECTION.SELF) {\n                return;\n            }\n            let pt = dmsto[dt];\n            const dist = dist2(pf, pt);\n            if(dist < meta.distMin) {\n                Object.assign(meta, {\n                    distMin: dist,\n                    fromDir: +df,\n                    fromP: pf,\n                    toDir: +dt,\n                    toP: pt,\n                })\n            }\n        })\n    });\n    return meta;\n}\n\n// export function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, anticlock = false) {\n//     const isSameDirection = start_dir === end_dir;\n//     const isVerticalStart = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(start_dir);   \n//     const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n//     const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n//     const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n//     const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n//     if(isSameDirection) {\n//         let span = Math.abs(isVerticalStart ? (endY - p1[1]) : (endX - p1[0]))\n//         span = Math.min(span, 50);\n//         const symb = [DIRECTION.RIGHT, DIRECTION.BOTTOM].includes(end_dir)\n//         span = symb ? span : - span;\n//         const cp1 = isVerticalStart ? [p1[0], p1[1] + span] : [p1[0] + span, p1[1]];\n//         const cp2 = isVerticalEnd ? [endX, endY + span] : [endX + span, endY];\n//         return [ \n//             ...cp1,\n//             ...cp2,\n//             endX, endY ];\n//     }\n//     let spanStart = (anticlock ? -5 : 1) * (isVerticalStart ? (endY - p1[1]) / 2 : (endX - p1[0]) / 2)\n//     let spanEnd = (anticlock ? -4 : 1) * (isVerticalEnd ? (p1[1] - endY) / 2 : (p1[0] - endX) / 2)\n//     let u1 = spanStart / Math.abs(spanStart);\n//     spanStart = u1 * Math.min(Math.abs(spanStart), 50);\n//     let u2 = spanEnd / Math.abs(spanEnd);\n//     spanEnd = u2 * Math.min(Math.abs(spanEnd), 50);\n//     const cp1 = isVerticalStart ? [p1[0], p1[1] + spanStart] : [p1[0] + spanStart, p1[1]];\n//     const cp2 = isVerticalEnd ? [endX, endY + spanEnd] : [endX + spanEnd, endY];\n//     return [ \n//         ...cp1,\n//         ...cp2,\n//         endX, endY ];\n// }\nfunction _resolveControlPoint(p, dir, spanx, spany){\n    if(dir === DIRECTION.TOP){\n        return [p[0], p[1]-spany]\n    }\n    if(dir === DIRECTION.BOTTOM){\n        return [p[0], p[1]+spany]\n    }\n    if(dir === DIRECTION.LEFT){\n        return [p[0]-spanx, p[1]]\n    }\n    if(dir === DIRECTION.RIGHT){\n        return [p[0]+spanx, p[1]]\n    }\n}\n\nexport function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 0, minSpanY = 0) {\n    const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const cp1 = _resolveControlPoint(p1, start_dir, spanx, spany);\n    const cp2 = _resolveControlPoint(p2, end_dir, spanx, spany);\n    const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n    const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n    const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n    const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n    return [ \n        ...cp1,\n        ...cp2,\n        endX, endY];\n}\n\nexport function bezierPoint(t, P) {\n    const q = 1-t;\n    const x = q*q*q*P[0] + 3*q*q*t*P[2] + 3*q*t*t*P[4] + t*t*t*P[6];\n    const y = q*q*q*P[1] + 3*q*q*t*P[3] + 3*q*t*t*P[5] + t*t*t*P[7];\n    const u = q*q*(P[2]-P[0]) + 2*t*q*(P[4]-P[2]) + t*t*(P[6]-P[4]);\n    const v = q*q*(P[3]-P[1]) + 2*t*q*(P[5]-P[3]) + t*t*(P[7]-P[5]);\n    let angle = Math.atan2(v, u);\n    // console.log(angle * 180)\n    // if(angle < 0) {\n    //     angle = Math.PI + angle;\n    // }\n    return [x, y, angle];\n}\n\n// export function bezierPoints(p1, p2, start_vec, end_vec) {\n\n// }\n\nexport function distToBezierSegmentSquared(p, points) {\n    const b = new Bezier(...points);\n\n    const point = b.project({ x: p[0], y: p[1] });\n    const d = dist2(p, [ point.x, point.y ]);\n    return d;\n}\n\nexport function getBezierAngle(t, sx, sy, cp1x, cp1y, cp2x, cp2y, ex, ey) {\n  var dx = Math.pow(1-t, 2)*(cp1x-sx) + 2*t*(1-t)*(cp2x-cp1x) + t * t * (ex - cp2x);\n  var dy = Math.pow(1-t, 2)*(cp1y-sy) + 2*t*(1-t)*(cp2y-cp1y) + t * t * (ey - cp2y);\n  return -Math.atan2(dx, dy) + 0.5*Math.PI;\n}\n\n\nexport function getInstanceHeight(instance) {\n    const rect = instance.getBoundingRect();\n    // let min_y = Infinity;\n    // let max_y = -Infinity;\n    // let min_x = Infinity;\n    // let max_x = -Infinity;\n    // rect.forEach(point => {\n    //     max_y = Math.max(max_y, point[1]);\n    //     min_y = Math.min(min_y, point[1]);\n    //     max_x = Math.max(max_x, point[0]);\n    //     min_x = Math.min(min_x, point[0]);\n    // });\n    return {\n        height: rect[3] - rect[1],\n        width: rect[2] - rect[0],\n    }\n}\n\nexport function polylinePoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 10, minSpanY = 10, isSelf) {\n    const dirSpan = Math.abs(start_dir - end_dir);\n    // const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    // const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const isVerticalStart = (start_dir === DIRECTION.TOP || start_dir === DIRECTION.BOTTOM);\n    let points = [];\n    switch (dirSpan) {\n        case 0:\n            // 都按向右好了\n            if(start_dir === DIRECTION.TOP) {\n                const y = Math.min(p1[1], p2[1]);\n                const yp = y - minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.BOTTOM) {\n                const y = Math.max(p1[1], p2[1]);\n                const yp = y + minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.LEFT) {\n                const x = Math.min(p1[0], p2[0]);\n                const xp = x - minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            if(start_dir === DIRECTION.RIGHT) {\n                const x = Math.max(p1[0], p2[0]);\n                const xp = x + minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            break;\n        case 1:\n        case 3:  \n            if(isSelf) {\n                if(!isVerticalStart) {\n                    points.push([p1[0] + minSpanX, p1[1]]);\n                    points.push([p1[0] + minSpanX, p2[1] + minSpanY]);\n                    points.push([p2[0], p2[1] + minSpanY]);\n                } else {\n                    points.push([p1[0], p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p2[1]]);\n                }\n            } else {\n                const point = isVerticalStart ? [p1[0], p2[1]]: [p2[0], p1[1]]\n                points.push(point);\n            }\n            break;\n        case 2:\n            const pmiddle = [\n                (p1[0] - p2[0])/2 + p2[0],\n                (p1[1] - p2[1])/2 + p2[1]\n            ]; \n            if(isVerticalStart) {\n                points.push([p1[0], pmiddle[1]])\n                points.push([p2[0], pmiddle[1]])\n            } else {\n                points.push([pmiddle[0], p1[1]])\n                points.push([pmiddle[0], p2[1]])\n            }\n            break;\n        default:\n            break;\n    }\n    points.unshift(p1);\n    points.push(p2);\n    return points;\n}\n\nfunction minusVec(p1, p2) {\n    return [p1[0] - p2[0], p1[1] - p2[1]]\n}\n\nfunction absVec(vec) {\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\n\nfunction scaleVec(vec, scale) {\n    return [vec[0] * scale, vec[1] * scale];\n}\n\nexport function makeRadiusFromVector(pbefore, p, pnext, radius) {\n    const vec1 = minusVec(p, pbefore);\n    const vec2 = minusVec(p, pnext);\n    const absVec1 = absVec(vec1);\n    const absVec2 = absVec(vec2);\n    if(!absVec1 || !absVec2) {\n        return {\n            p1: null,\n            p2: null,\n        }\n    }\n    const r1 = scaleVec(vec1, radius/absVec1);\n    const r2 = scaleVec(vec2, radius/absVec2);\n    return {\n        p1: minusVec(p, r1),\n        p2: minusVec(p, r2),\n    }\n}\n// 矩形重叠计算\nexport function doOverlap(rec1, rec2) {\n    if (rec1[0] == rec1[2] || rec1[1] == rec1[3] ||\n        rec2[0] == rec2[2] || rec2[1] == rec2[3]) {\n        // the line cannot have positive overlap\n        return false;\n    }\n\n    return !(rec1[2] <= rec2[0] ||   // left\n                rec1[3] <= rec2[1] ||   // bottom\n                rec1[0] >= rec2[2] ||   // right\n                rec1[1] >= rec2[3]);    // top\n}\n\nexport function isPolyLineIntersectionRectange(polyline, rect) {\n    let p = polyline[0];\n    let l = polyline.length;\n    let i = 1;\n    const [l0, l1, r0, r1] = rect;\n    while (i < l) {\n        const cp = polyline[i];\n        if(p[0] === cp[0]) {\n            // vertical\n            if(p[0] < r0 && p[0] > l0 \n                && !((p[1] > r1 && cp[1] > r1) || (p[1] < l1 && cp[1] < l1))){\n                    return true;\n                } \n        } else {\n            // horizontal\n            if(p[1] < r1 && p[1] > l1\n                && !((p[0] > r0 && cp[0] > r0) || (p[0] < l0 && cp[0] < l0))){\n                    return true;\n                } \n        }\n        p = cp;\n        i++;\n    }\n    return false;\n}\n\nexport function debounce(func, timeout = 300){\n    let timer;\n    return () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.call(this); }, timeout);\n    };\n  }","import { setUniqueId, getUniqueId } from '../utils/functions';\nimport { nextDirection } from '../utils/constance';\nconst margin = 5;\nconst ishitKey = Symbol('ishit');\nconst isInViewBox = Symbol('isInViewBox');\n/**\n * @typedef Instance~Configs\n * @type {object}\n * @property {number} borderWidth      - 边的宽度 默认是 2\n * @property {string} borderColor      - 边框颜色 默认 black\n * @property {string} color            - 填充颜色 默认 white\n * @property {string} shadowColor      - 阴影颜色\n * @property {string} shadowBlur       - 阴影扩散范围\n * @property {string} shadowOffsetX    - 阴影偏移 X\n * @property {string} shadowOffsetX    - 阴影偏移 Y\n */\n\n/** \n * 图中的最小单元\n * @constructor Instance\n * @extends EventTarget\n * @param {Instance~Configs} configs - 最小单元的一些通用属性配置\n */\nclass Instance extends EventTarget{\n    constructor(configs = {}) {\n        super();\n        Object.assign(this, configs);\n        // this.anchor = configs.anchor || [0, 0];\n        // this.belongs = undefined;\n        /** @member {boolean}      - 元素可见 默认 true */\n        this.visible = true;\n        // this._jflow = undefined;\n        this._belongs = undefined;\n        this[ishitKey] = false; \n\n        /** @member {number}      - 边的宽度 默认是 0 */\n        this.borderWidth =      configs.borderWidth || 0;\n        /** @member {string}     - 边框颜色 默认 transparent */\n        this.borderColor =      configs.borderColor || 'transparent';\n        /** @member {string}     - 填充颜色 默认 transparent */\n        this.backgroundColor =  configs.backgroundColor || 'transparent';\n        /** @member {string}     - 阴影颜色 空就不显示阴影 */\n        this.shadowColor =      configs.shadowColor;\n        /** @member {string}     - 阴影扩散范围 默认 5 */\n        this.shadowBlur  =      configs.shadowBlur || 5;\n        /** @member {string}     - 阴影偏移 X */\n        this.shadowOffsetX =    configs.shadowOffsetX || 0;\n        /** @member {string}     - 阴影偏移 Y */\n        this.shadowOffsetY =    configs.shadowOffsetY || 0;\n        /** @member {number}     - 透明度 */\n        this.opacity  =         configs.opacity || 1\n\n    }\n    /**\n     * @member {boolean} - 当前单元选中状态\n     */\n    get _isTargeting() {\n        return this === (this._jflow._target.instance || this._jflow._target.link);\n    }\n    /**\n     * @member {boolean} - 当前单元移动状态\n     */\n    get _isMoving() {\n        return this === this._jflow._getMovingTarget() && this._jflow._target.status.movingState; // 移动了之后才能被当做移动状态\n    }\n    /**\n     * @member {boolean}  - 当前单元碰撞检测状态\n     */\n    get _isHit() {\n        return this[ishitKey];\n    }\n    /**\n     * @member {JFlow}  - canvas上 jflow 实体\n     */\n    get _jflow() {\n        return this._belongs.uniqueName === 'jflow' ? this._belongs : this._belongs._jflow;\n    }\n\n    set _isHit(ishit) {\n        if(this[ishitKey] !== ishit) {\n            /**\n             * 鼠标移入事件\n             *\n             * @event Instance#mouseenter\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            /**\n             * 鼠标移出事件\n             *\n             * @event Instance#mouseleave\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            this.dispatchEvent(new CustomEvent(ishit ? 'mouseenter': 'mouseleave' , {\n                detail: {\n                    instance: this,\n                    jflow: this._jflow\n                }\n            }));\n        }\n        this[ishitKey] = ishit; // validation could be checked here such as only allowing non numerical values\n    }\n\n    get isInViewBox() {\n        return this[isInViewBox];\n    }\n\n    set _isInViewBox(val) {\n        const oldval = this[isInViewBox];\n        if(val !== oldval) {\n            if(val) {\n                this.onEnterViewbox();\n            } else {\n                this.onLeaveViewbox();\n            } \n        }    \n        this[isInViewBox] = val;\n    }\n\n    /**\n     * 当节点离开可视区域的回调\n     */\n    onEnterViewbox() {\n        return;\n    }\n\n    /**\n     * 当节点离开可视区域的回调\n     */\n    onLeaveViewbox() {\n        return;\n    }\n\n    /**\n     * 改变当前配置\n     * @param {Configs} configs - The string containing two comma-separated numbers.\n     */\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n            }\n        })\n    }\n    /**\n     * 绘制单元\n     * @param {Context2d} ctx \n     */\n    render(ctx) {\n        throw 'require render implement'\n    }\n    /**\n     * 判断当前单元是否被命中\n     * @param {number[]} point \n     * @return {Boolean}\n     */\n    isHit(point) {\n        throw 'require isHit implement'\n    }\n    /**\n     * 计算当前的最大外接矩形的\n     * @return {number[]} [leftx, lefty, rightx, righty]\n     */\n    getBoundingRect() {\n        throw 'require getBoundingRect implement'\n    }\n    calculateIntersection() {\n        throw 'require calculateIntersection implement'\n    }\n    /**\n     * 计算当前连线接入点的位置\n     * @return {Object} intersection 交叉点\n     * @return {number} intersection[DIRECTION.TOP] 上\n     * @return {number} intersection[DIRECTION.BOTTOM] 下\n     * @return {number} intersection[DIRECTION.LEFT] 上\n     * @return {number} intersection[DIRECTION.RIGHT] 右\n     */\n    getIntersectionsInFourDimension() {\n        throw 'require getIntersectionsInFourDimension implement'\n    }\n\n\n    /**\n     * 获取当前所在层级的坐标\n     * @return {Number[]} 坐标\n     */\n    getCenter() {\n        return this.anchor;\n    }\n    /**\n     * 获取宽高\n     * @return {Object} demension 宽高\n     * @return {number} demension.width 宽\n     * @return {number} demension.height 高\n     */\n    getBoundingDimension() {\n        const rect = instance.getBoundingRect();\n        let min_y = Infinity;\n        let max_y = -Infinity;\n        let min_x = Infinity;\n        let max_x = -Infinity;\n        rect.forEach(point => {\n            max_y = Math.max(max_y, point[1]);\n            min_y = Math.min(min_y, point[1]);\n            max_x = Math.max(max_x, point[0]);\n            min_x = Math.min(min_x, point[0]);\n        });\n        return {\n            height: max_y - min_y,\n            width: max_x - min_x,\n        }\n    }\n    /**\n     * 冒泡事件\n     * @param {JFlowEvent} customEvent 自定义事件\n     */\n    bubbleEvent(customEvent){\n        customEvent.detail.currentTarget = this;\n        this.dispatchEvent(customEvent);\n        if(customEvent.detail.bubbles){\n            if(this._belongs.bubbleEvent) {\n                this._belongs.bubbleEvent(customEvent);\n            } else {\n                this._belongs.dispatchEvent(customEvent); \n            }\n            \n        }\n    }\n    /**\n     * 反算回页面的像素坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(point);\n        } else {\n            return point;\n        }\n    }\n\n    calculateToRealWorldWithScalar(length){\n        return this._jflow.scale * length;\n    }\n\n    /**\n     * 从当前布局中删除虚拟布局节点\n     */\n    // removeFromLayoutSource() {\n    //     if(this._layoutNode) {\n    //         this._layoutNode.remove();\n    //     }\n    // }\n\n    recalculateUp() {\n        if(this.belongs) {\n            this.belongs.recalculateUp();\n        }\n    }\n\n    destroy() {\n        // this._belongs = undefined;\n        // this.removeEventListener();\n    }\n}\n\nexport default Instance;","import Instance from './instance';\nimport { nextDirection } from '../utils/constance';\n\n/**\n * 绝对定位 配置， 绝对定位不受布局影响，相对于当前组来定位\n * @typedef {object} Node~AbsolutePosition \n * @property {number} top       - 上距离\n * @property {number} bottom    - 下距离\n * @property {number} right     - 右距离\n * @property {number} left      - 左距离\n */\n/**\n * Node 配置\n * @typedef {Instance~Configs} Node~Configs \n * @property {number[]} anchor - 坐标\n * @property {Node~AbsolutePosition} absolutePosition - 绝对定位位置\n */\n/**\n * 节点基类\n * @constructor Node\n * @extends Instance\n * @param {Node~Configs} configs - 节点配置\n */\nclass Node extends Instance {\n    constructor(configs = {}) {\n        super(configs);\n        this._rawConfigs = configs;\n        // for layout\n        /** @member {number[]} */\n        this.anchor =           configs.anchor || [0, 0];\n        /** @member {Node~AbsolutePosition} */\n        this.absolutePosition = configs.absolutePosition;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n    }\n    setAnchorX(x) {\n        this.anchor[0] = x;\n    }\n    setAnchorY(y) {\n        this.anchor[1] = y;\n    }\n    setAnchor(x, y) {\n        this.anchor[0] = x;\n        this.anchor[1] = y;\n    }\n    /**\n     * 克隆当前节点.\n     * @return {Node} 当前节点的副本\n     */\n    clone() {\n        const C = this.constructor;\n        const t = new C(this._rawConfigs);\n        t.visible = this.visible;\n        return t;\n    }\n}\n\nexport default Node;","import Node from './node';\nimport { DIRECTION } from '../utils/constance';\n\nclass GhostNode extends Node {\n    constructor(configs) {\n        super(configs);\n    }\n\n    render(ctx) {}\n\n    isHit(point) {\n        return false;\n    }\n    calculateIntersection(point) {\n        return this.anchor;\n    }\n\n    getBoundingRect() {\n        const [x2, y2] = this.anchor;\n        return [x2, y2, x2, y2]\n    }\n\n    getBoundingDimension() {\n        return {\n            width: 0, height: 0\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        const [x2, y2] = this.anchor;\n        return {\n            [DIRECTION.RIGHT]:  [x2+1, y2],\n            [DIRECTION.LEFT]:   [x2-1, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+1],\n            [DIRECTION.TOP]:    [x2, y2-1],\n        }\n    }\n}\n\nexport default GhostNode;","function getMapObject() {\n    return {\n        layoutNode: undefined,\n        jflowNode: undefined,\n        jflowlinks: [],\n        jflowFromLinks: [],\n        jflowToLinks: [],\n    }\n}\nclass NodeWeakMap {\n    constructor() {\n        this._map = new WeakMap();\n    }\n\n    get(source) {\n        return this._map.get(source);\n    }\n\n    set(source) {\n        const obj = getMapObject();\n        this._map.set(source, obj);\n        return obj;\n    }\n\n    has(source) {\n        return this._map.has(source);\n    }\n\n    delete(source) {\n        this._map.delete(source);\n    }\n\n    clear() {\n        this._map.clear();\n    }\n}\n\nexport const NodeWeakMapMixin = {\n    initNodeWeakMap() {\n        this.source_Layout_Render_NodeMap = new NodeWeakMap();\n    },\n    getRenderNodeBySource(source) {\n        const mapping = this.source_Layout_Render_NodeMap.get(source);\n        if(mapping) {\n            return mapping.jflowNode;\n        }\n        return undefined;\n    },  \n    getLayoutNodeBySource(source) {\n        const mapping = this.source_Layout_Render_NodeMap.get(source);\n        if(mapping) {\n            return mapping.layoutNode;\n        }\n        return undefined;\n    },\n    getSourceRenderMeta(source) {\n        const map = this.source_Layout_Render_NodeMap;\n        return map.get(source)\n    },\n    _getMap(source) {\n        const map = this.source_Layout_Render_NodeMap;\n        let obj;\n        if(map.has(source)) {\n            obj = map.get(source);\n        } else {\n            obj = map.set(source);\n        }\n        return obj\n    },\n    setLayoutNodeBySource(source, layoutNode) {\n        let obj = this._getMap(source);\n        obj.layoutNode = layoutNode;\n    },\n    setRenderNodeBySource(source, instance) {\n        let obj = this._getMap(source);\n        obj.jflowNode = instance;\n    },\n    addLinkNodeBySource(sourceFrom, sourceTo, link) {\n        let obj = this._getMap(sourceFrom);\n        obj.jflowFromLinks.push(link);\n\n        obj = this._getMap(sourceTo);\n        obj.jflowToLinks.push(link);\n    },\n    removeLinkNodeBySource(sourceFrom, sourceTo, link) {\n        let obj = this._getMap(sourceFrom);\n        let idx = obj.jflowFromLinks.findIndex(l => l === link);\n        if(idx !== -1) {\n            obj.jflowFromLinks.splice(idx, 1);\n        }\n\n        obj = this._getMap(sourceTo);\n        idx = obj.jflowToLinks.findIndex(l => l === link);\n        if(idx !== -1) {\n            obj.jflowToLinks.splice(idx, 1);\n        }\n    }\n}\n\nexport default NodeWeakMap;\n\n","/**\n * 绘图栈\n * @extends Array\n */\nclass InstanceStack extends Array {\n    constructor() {\n        super();\n        this._currentHit = null;\n    }\n    /**\n     * 绘制当前栈\n     * @param {Context2d} ctx - canvas context2d\n     */\n    render(ctx, condition) {\n        let movingTarget;\n        this.forEach(instance => {\n            if(instance._isMoving) {\n                movingTarget = instance;\n                return;\n            }\n            if(instance.visible && (!condition || condition(instance))) {\n                ctx.save();\n                // if(instance.reflow && !instance._reflowed) {\n                //     instance.reflow();\n                //     instance._reflowed = true;\n                // }\n                instance.render(ctx);\n                ctx.restore();\n            }\n        });\n        if(movingTarget) {\n            ctx.save();\n            // if(movingTarget.reflow && !movingTarget._reflowed) {\n            //     movingTarget.reflow();\n            //     movingTarget._reflowed = true;\n            // }\n            movingTarget.render(ctx);\n            ctx.restore();\n        }\n    }\n\n    /**\n     * 碰撞对象过滤条件\n     * @name InstanceStack~InstanceFilter\n     * @function\n     * @param {Instance} instance - 当前对象\n    */\n    /**\n     * 碰撞检测\n     * @param {number[]} point - 碰撞点\n     * @param {InstanceStack~InstanceFilter} condition - 碰撞对象过滤条件\n     * @return {Instance}\n     */\n    checkHit(point, condition, currentConstraint){\n        let i = this.length - 1;\n        while(i >= 0) {\n            const instance = this[i];\n            \n            if(instance.visible && !instance.ignoreHit) {\n                if(condition && condition(instance)) {\n                    i--\n                    continue;\n                }\n                if(currentConstraint && !currentConstraint(instance)) {\n                    i--\n                    continue\n                }\n                const ishit = instance.isHit(point, condition);\n                instance._isHit = !!ishit;\n                if(ishit) {\n                    if(this._currentHit !== instance) {\n                        if(this._currentHit) {\n                            this._currentHit._isHit = false;\n                        }\n                        this._currentHit = instance;\n                    }\n                    if(typeof ishit !== 'boolean') {\n                        return ishit;\n                    }\n                    return instance;\n                }\n                \n            }\n            i--\n        }\n        this._currentHit = null;\n        return null;\n    }\n    /**\n     * 获取当前层栈的最小外接矩形\n     * @return {number[][]} - 外接矩形坐标\n     */\n    getBoundingRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                const rect = instance.getBoundingRect()\n                points.push([rect[0], rect[1]]);\n                points.push([rect[2], rect[3]]);\n            }\n        });\n        return points;\n    }\n\n    /**\n     * 获取当前层栈的锚点矩形\n     * @return {number[][]} - 锚点矩形坐标\n     */\n    getAnchorRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                points.push(instance.anchor);\n            }\n        });\n        return points;\n    }\n}\n\nexport default InstanceStack;\n","import InstanceStack from './stack';\nimport { setUniqueId, getUniqueId } from '../utils/functions';\n/**\n * 对象栈 mixin 用于方便控制节点栈和连线栈\n *\n * @mixin\n */\nconst StackMixin = {\n    /** @property {Node[]}          - 对象数组 */\n    instances: [],\n    /** @property {BaseLink[]}      - 连线数组 */\n    links: [],\n    /** @property {InstanceStack}       - 对象栈 */\n    _stack: null,\n    /** @property {InstanceStack}       - 连线栈 */\n    _linkStack: null,\n    /**\n     * 初始化对象栈\n     * @param {JflowConfigs} configs - 配置\n     */\n    initStack({ data }) {\n        this._stack = new InstanceStack();\n        this._linkStack = new InstanceStack();\n        if(!data) return;\n        this.instances = data.instances;\n        this.links = data.links;\n        this.instances.forEach(i => { \n            this._stack.push(i);\n            i._belongs = this;\n        })\n        this.links.forEach((link) => {\n            this._linkStack.push(link);\n            link._belongs = this;\n        });\n    },\n    /**\n     * 加入节点对象\n     * @param {Node} instance - 节点对象\n     */\n    addToStack(instance) {\n        instance._belongs = this;\n        this._stack.push(instance);\n        // this.recalculate()\n    },\n    /**\n     * 替换对象\n     * @param {Instance} target - 被替换的对象\n     * @param {Instance} instance - 替换对象\n     */\n    replaceFromStack(target, instance) {\n        const index = this._stack.findIndex(i => i === target);\n        this._stack.splice(index, 1, instance);\n        target._belongs = null;\n        instance._belongs = this;\n        // this.recalculate()\n    },\n    /**\n     * 加入连线对象\n     * @param {BaseLink} instance - 连线对象\n     */\n    addToLinkStack(link) {\n        link._belongs = this;\n        this._linkStack.push(link);\n    },\n    /**\n     * 删除节点对象\n     * @param {Node} target - 节点对象\n     */\n    removeFromStack(target) {\n        // this.removeLinkOnInstance(target);\n        const index = this._stack.findIndex(i => i === target);\n        if(index !== -1) {\n            this._stack.splice(index, 1);\n        }\n        // this.recalculate()\n    },\n    /**\n     * 删除连线对象\n     * @param {Node} target - 连线对象\n     */\n    removeFromLinkStack(target) {\n        const index = this._linkStack.findIndex(i => i === target);\n        if(index !== -1) {\n            this._linkStack.splice(index, 1);\n        }\n    },\n   \n    emptyLink() {\n        this._linkStack = new InstanceStack();\n    },\n    /**\n     * 重置当前栈中对象的位置\n     */\n    resetChildrenPosition() {\n        this._stack.forEach(i => {\n            i.anchor = [0,0]\n        });\n    },\n\n    addInstanceToLink(targetLink, instance) {\n        this.addToStack(instance);\n        const { from, to } = targetLink;\n        const index = this._linkStack.findIndex(l => l === targetLink);\n        const _constuctor = targetLink.__proto__.constructor;\n        const l1 = new _constuctor({\n            from, \n            to: instance,\n        });\n        l1._belongs = this;\n        const l2 = new _constuctor({\n            from: instance, \n            to,\n        });\n        l2._belongs = this;\n\n        this._linkStack.splice(index, 1, l1, l2);\n    },\n    \n    /**\n     * 循环当前栈中节点\n     * @property {stackIteratorCallback} 循环访问栈中每个节点\n     */\n    interateNodeStack(callback) {\n        this._stack.forEach(instance => {\n            callback(instance);\n        })\n    }   \n    /**\n    * 循环访问栈中每个节点\n    * @callback stackIteratorCallback\n    * @param {Node} instance 栈中节点\n    */\n}\n\nexport default StackMixin;","/**\n * Layout mixin 配置\n * @typedef {Object} LayoutMixin~LayoutConfigs\n * @property {Layout} layout             - 布局对象 \n */\n/**\n * 布局 mixin 用于注册和方便控制布局\n *\n * @mixin\n */\nconst LayoutMixin = {\n    /** @property {Layout}      - 布局对象 */\n    _layout: null,\n    /**\n     * 初始化布局\n     * @param {LayoutMixin~LayoutConfigs} configs - 配置\n     */\n    initLayout(configs) {\n        this._layout = configs.layout;\n    },\n    /**\n     * 从当前层出发，向上层递归重排\n     */\n    recalculateUp() {\n        let dirty = true;\n        if(this.getBoundingDimension) {\n            const { width: wold, height: hold } = this.getBoundingDimension();\n            if(this.resetChildrenPosition) {\n                this.resetChildrenPosition();\n            }\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            this.reflow();\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            const { width: wnow, height: hnow } = this.getBoundingDimension();\n            dirty = (wold !== wnow || hold !== hnow)\n        } else {\n            this.reflow();\n        }\n        if(this._belongs && dirty) {\n            this._belongs.recalculateUp();\n        }\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排，并重算当前布局下的最小外接矩形\n     */\n    recalculate() {\n        this.reflow();\n        if(this._getBoundingGroupRect){\n            this._getBoundingGroupRect();\n        }\n    },\n    /**\n     * 布局静态检查\n     * @param {Instance} instance - 检查单元\n     * @return {Boolean} - 检查结果 \n     */\n    staticCheck(instance) {\n        if(this._layout) {\n            return this._layout.staticCheck(instance, this);\n        }\n        return false;\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排\n     */\n    reflow() {\n        if(this._layout) {\n            this._layout.reflow(this);\n        }\n    },\n}\n\nexport default LayoutMixin;","/**\n * 消息 mixin 用于给Jflow传递消息\n *\n * @mixin\n */\nconst MessageMixin = {\n    _message: null,\n    /**\n     * 发送消息\n     * @param {Object} msg - 消息体\n     */\n    sendMessage(msg) {\n        this._message = msg;\n    },\n    /**\n     * 接收消息\n     * @return {Object} msg - 消息体\n     */\n    consumeMessage() {\n        const msg = this._message;\n        this._message = null;\n        return msg;\n    },\n    readMessage() {\n        return this._message;\n    }\n}\n\nexport default MessageMixin;","\nexport default {\n    initAnime() {\n        this.anime_queue = [];\n        this.__animeClock__ = undefined;\n        // this.animeclock = undefined;\n        // this.frameRendered = false;\n    },\n    // setAnimeClock(time) {\n    //     if(time !== this.animeclock) {\n    //         this.frameRendered = false;\n    //         this.animeclock = time;\n    //     }\n    // },\n\n    // hasAnimeAndFrameRendered() {\n    //     return this.anime_queue.length && this.frameRendered;\n    // },\n\n    // setFrameRendered() {\n    //     if(this.anime_queue.length) {\n    //         this.frameRendered = true;\n    //     }\n    // },\n\n    requestJFlowAnime(frameCallBack) {\n        const meta = this.enqueueAnime(frameCallBack);\n        this._runAnime();\n        return meta;\n    },\n\n    enqueueAnime(callback) {\n        const animeMeta = {\n            start: undefined,\n            callback,\n            cancel: () => {\n                this._cancelAnime(animeMeta);\n                this._render();\n            }\n        }\n        this.anime_queue.push(animeMeta);\n        return animeMeta;\n    },\n\n    _cancelAnime(meta) {\n        const idx = this.anime_queue.findIndex(m => m === meta);\n        ~idx && this.anime_queue.splice(idx, 1);\n        \n    },\n\n    runAnime() {\n        this._runAnime();\n        // requestAnimationFrame(this._runAnime.bind(this));\n    },\n    _runAnime() {\n        if (this.anime_queue.length) {\n            this.scheduleRender((t) => {\n                if(this.__animeClock__  !== t) {\n                    this._runAnime()\n                }\n                this.__animeClock__  = t;\n            });\n            // requestAnimationFrame(this._runAnime.bind(this))\n        }\n    },\n\n    runAnimeFrame() {\n        this.anime_queue.forEach(meta => {\n            const timestamp = Date.now();\n            if(!meta.start) {\n                meta.start = timestamp;\n            }\n            const elapsed = timestamp - meta.start;\n            meta.callback(elapsed);\n        });\n    }\n}","import { createCanvas } from '../utils/canvas';\nexport default {\n    // 传入一个别的 context2d 来绘制\n    captureMap(wrapper, {\n        padding = 0,\n        placement = 'normal',\n    }) {\n\n        this._getBoundingGroupRect();\n        const { \n            width: p_width, \n            height: p_height, \n            x: p_x, \n            y: p_y \n        } = this.bounding_box;\n        let miniMap = this.miniMap;\n        if(!miniMap) {\n            this.miniMap = createCanvas(wrapper);\n            const {\n                width, height,\n                raw_width,\n                raw_height,\n            } = this.miniMap;\n            this.addEventListener('zoompan', () => {\n                this._renderMap && this._renderMap();\n            })\n            let pressDown = false;\n            this.miniMap.canvas.addEventListener('pointerdown', (event) => {\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                pressDown = true;\n                this._onMoveMap && this._onMoveMap(offsetX, offsetY)  \n            })\n            this.miniMap.canvas.addEventListener('pointermove', (event) => {\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                if(pressDown) {\n                    this._onMoveMap && this._onMoveMap(offsetX, offsetY)\n                }\n                if(offsetY < 5 || offsetX < 5 || offsetX > width-5 || offsetY > height-5) {\n                    pressDown = false;\n                }\n            })\n            this.miniMap.canvas.addEventListener('pointerup', () => {\n                pressDown = false;\n            })\n\n            const caheCanvas = document.createElement('canvas');\n            caheCanvas.width = raw_width;\n            caheCanvas.height = raw_height;\n            this.cacheMinimapCtx = caheCanvas.getContext('2d');\n        }\n        const { \n            width,\n            height,\n            raw_width,\n            raw_height,\n            left,\n            top,\n            scale,\n            ctx\n        } = this.miniMap\n        const pad2 = padding * 2;\n        const pad = padding;\n        const r1 = (width - pad2) / p_width;\n        const r2 = (height - pad2) / p_height;\n        const r = Math.min(r1, r2);\n        \n        let m_x = 0;\n        let m_y = 0;\n\n        if(placement === 'center') {\n            m_y = (height - p_height * r) / 2 - p_y * r;\n            m_x = (width - p_width * r) / 2 - p_x * r;\n        } else {\n            if(r1 < r2) {\n                m_y = (height - p_height * r) / 2 - p_y * r;\n                m_x = pad;\n            } else {\n                m_x = (width - p_width * r) / 2 - p_x * r;\n                m_y = pad;\n            }\n        }\n        const cachectx = this.cacheMinimapCtx;\n        cachectx.setTransform();\n        cachectx.clearRect(0, 0, raw_width, raw_height);\n        cachectx.scale(scale, scale);\n        cachectx.transform(r, 0, 0, r, m_x, m_y);\n        // ctx.fillStyle = 'red';\n        // ctx.arc( 30, 30, 100, 0, 2*Math.PI);\n        // ctx.fill()\n        // debugger\n        const br = [0,0,0,0]\n        if(this.NodeRenderTop) {\n            this._linkStack.render(cachectx, (link) => { link.isInViewBox(br); return true; });\n            // this._linkStack.render(cachectx);\n            this._stack.render(cachectx);\n        } else {\n            this._stack.render(cachectx);\n            this._linkStack.render(cachectx, (link) => { link.isInViewBox(br); return true; });\n        }\n        const _cacheMapImageData = cachectx.getImageData(0, 0,raw_width, raw_height);\n        this._renderMap = () => {\n            ctx.save();\n            ctx.setTransform();\n            ctx.clearRect(0, 0, raw_width, raw_height);\n            // if(!i) {\n            ctx.scale(scale, scale);\n            ctx.putImageData(_cacheMapImageData, 0, 0);\n            ctx.transform(r, 0, 0, r, m_x, m_y);\n            const [x, y, t, d] = this._getViewBox();\n            ctx.beginPath();\n            ctx.rect(x, y,  t-x, d-y);\n            ctx.setTransform();\n            ctx.rect(0, 0, raw_width, raw_height);\n            ctx.clip(\"evenodd\");\n            \n            ctx.fillStyle = 'rgba(0,0,0,0.4)';\n            ctx.fillRect(0, 0, raw_width, raw_height);\n            ctx.restore();\n            // }\n        }\n        this._renderMap();\n\n        this._onMoveMap = (offsetX, offsetY) => {\n            const [x, y, t, d] = this._getViewBox();\n            // const w = t-x;\n            const a = (t-x)/2 + x;\n            const b = (d-y)/2 + y;\n            \n            const p = [a * r + m_x, b * r + m_y]\n            this._recalculatePosition((p[0] - offsetX)/ r * this.scale, (p[1] - offsetY)/ r * this.scale);\n            this._render();\n            this._renderMap();\n        }\n        // this._render(ctx);\n    }\n\n\n}","class ScrollBar {\n    constructor(dir, configs = {}) {\n        this.anchor = [0,0];\n        this.width = configs.barWidth || 4;\n        this.height = configs.barWidth || 4;  \n        this.barMarginX = 0;\n        this.barMarginY = 0\n        this.dir = dir;\n        this.plainColor = configs.plainColor || 'rgba(0, 0, 0, 0.15)';\n        this.focusColor = configs.focusColor || 'rgba(0, 0, 0, 0.25)';\n        this.isFocus = false;\n    }\n    render(ctx) {\n        const [x, y] = this.anchor;\n        ctx.save();\n        ctx.beginPath();\n        if(this.dir === 'x') {\n            const radius = this.height / 2;\n            const cy = y + radius;\n            const by = y + this.height;\n            const rc = x + this.width - this.barMarginX*2 - radius;\n            const lc = x + this.barMarginX + radius\n            ctx.moveTo(lc, by);\n            ctx.arc(lc, cy, radius, Math.PI/2, Math.PI/2*3);\n            ctx.lineTo(rc, y);\n            ctx.arc(rc, cy, radius,  -Math.PI/2, Math.PI/2);\n            ctx.closePath();\n  \n        } else {\n            const radius = this.width / 2;\n            const tc = y + this.barMarginY + radius;\n            const bc = y + this.height - this.barMarginY*2 - radius\n            const cx = x + radius;\n            const rx = x + this.width;\n            ctx.moveTo(x, tc);\n            ctx.arc(cx, tc, radius, -Math.PI, 0);\n            ctx.lineTo(rx, bc);\n            ctx.arc(cx, bc, radius, 0, Math.PI);\n            ctx.closePath();\n            \n        }\n                //   ctx.rect(\n                // x + this.barMarginX,\n                // y + this.barMarginY,\n                // this.width - this.barMarginX*2,\n                // this.height - this.barMarginY*2);\n\n        ctx.fillStyle = this.isFocus ? this.focusColor : this.plainColor;\n        ctx.fill();\n        ctx.restore();\n    }\n    isHit(point) {\n        const anchor = this.anchor;\n        const w = this.width;\n        const h = this.height;\n        return point[0] > anchor[0] - 5\n            && point[0] < anchor[0] + w + 5\n            && point[1] > anchor[1] - 5\n            && point[1] < anchor[1] + h + 5;\n    }\n}\nexport default {\n    initScrollBar(configs = {}) {\n        const {\n            barColor,\n            barFocusColor,\n            barMarginX,\n            barMarginY,\n            barWidth,\n        } = configs;\n        this._scrollbarEnable = true;\n        this._scrollbarX = new ScrollBar('x', {\n            plainColor: barColor,\n            focusColor: barFocusColor,\n            barWidth,\n        });\n        this._scrollbarX.barMarginX = barMarginX || 5;\n        \n        this._scrollbarY = new ScrollBar('y', {\n            plainColor: barColor,\n            focusColor: barFocusColor,\n            barWidth\n        });\n        this._scrollbarY.barMarginY = barMarginY || 5;\n\n        this._scrollBarStatus = {\n            dragging: false,\n            target: null,\n            xscale: undefined,\n            yscale: undefined,\n\n            barInitX: 0,\n            barInitY: 0,\n        }\n        \n        this.addEventListener('zoompan', () => {\n            this.scrollBarOnPanAndZoom();\n        })\n        \n        this.scrollBarOnPanAndZoom();\n\n        this.canvas.addEventListener('pointerdown', e => {\n            const { offsetX, offsetY, clientX, clientY } = e;\n            this.onScrollbarPressStart(offsetX, offsetY, clientX, clientY)\n        })\n    },\n    checkScrollDragging() {\n        return this._scrollBarStatus && this._scrollBarStatus.dragging;\n    },\n    onScrollbarPressStart(offsetX, offsetY, clientX, clientY) {\n        const xhit = this._scrollbarX.isHit([offsetX, offsetY]);\n        if(xhit) {\n            Object.assign(this._scrollBarStatus, {\n                dragging: true,\n                target: this._scrollbarX,\n                barStartX: this._scrollbarX.anchor[0],\n                barInitX: clientX,\n            });\n        }\n        const yhit = this._scrollbarY.isHit([offsetX, offsetY]);\n        if(yhit) {\n            Object.assign(this._scrollBarStatus, {\n                dragging: true,\n                target: this._scrollbarY,\n                barStartY: this._scrollbarY.anchor[1],\n                barInitY: clientY,\n            });\n        }\n        const f = (e => {\n            const { offsetX, offsetY, clientX, clientY } = e;\n            this.onDraggingScrollbar(offsetX, offsetY, clientX, clientY)\n        }).bind(this);\n        \n        document.addEventListener('pointermove', f);\n        const t = (e => {\n            Object.assign(this._scrollBarStatus, {\n                dragging: false,\n                target: null,\n                x: undefined,\n                y: undefined,\n            });\n            document.removeEventListener('pointermove', f);\n            document.removeEventListener('pointerup', t);\n            this.canvas.removeEventListener('pointerup', t);\n        }).bind(this);\n        this.canvas.addEventListener('pointerup', t, {\n            once: true\n        })\n        document.addEventListener('pointerup', t, {\n            once: true\n        })\n    },\n    onDraggingScrollbar(offsetX, offsetY, clientX, clientY) {\n        if(this._scrollbarEnable && this._scrollBarStatus.dragging) {\n            const {\n                target,\n                barInitX,\n                barStartX,\n                barInitY,\n                barStartY,\n                xscale,\n                yscale,\n                scollbarHeight,\n                scollbarWidth,\n                realR,\n                realL,\n                realT,\n                realB,\n            } = this._scrollBarStatus;\n            const { actual_width, actual_height } = this.canvasMeta;\n            const { \n                x: p_x, \n                y: p_y \n            } = this.bounding_box;\n            // console.log(target.dir, realT, realB)\n            if(target.dir === 'x') {\n                const deltaX = clientX - barInitX;\n                const xnew = barStartX + deltaX;\n                const q = target.anchor[0] = Math.max(Math.min(xnew, actual_width - scollbarWidth), 0);\n                const ratioInX = q / actual_width;\n                // const y = (realB - (realB - realT) * ratioInY) * this.scale\n                const ratioX = (realR - realL) * ratioInX + realL\n                const x = (p_x - ratioX) * this.scale\n                Object.assign(this.position, {\n                    offsetX: x - p_x * this.scale,\n                    x,\n                });\n            }\n\n            if(target.dir === 'y') {      \n                const deltaY = clientY - barInitY;\n                const ynew = barStartY + deltaY;\n                const q = target.anchor[1] = Math.max(Math.min(ynew, actual_height - scollbarHeight), 0);;\n                const ratioInY = q / actual_height;\n                // const y = (realB - (realB - realT) * ratioInY) * this.scale\n                const ratioY = (realB - realT) * ratioInY + realT\n                const y = (p_y - ratioY) * this.scale\n                Object.assign(this.position, {\n                    offsetY: y - p_y * this.scale,\n                    y,\n                });\n            }\n            this.scheduleRender()\n            return true;\n        }\n        return false;\n    },\n    checkScrollBarHover(offsetX, offsetY) {\n        if(this._scrollbarEnable) {\n            const xhit = this._scrollbarX.isHit([offsetX, offsetY]);\n            if(xhit) {\n                // this._scrollBarStatus.hoverTarget = this._scrollbarX;\n                if(!this._scrollbarX.isFocus) {\n                    this._scrollbarX.isFocus = true;\n                    this.scheduleRender();\n                }\n                this.canvas.style.cursor = 'default';\n                return true;\n            }\n            const yhit = this._scrollbarY.isHit([offsetX, offsetY]);\n            if(yhit) {\n                // this._scrollBarStatus.hoverTarget = this._scrollbarY;\n                if(!this._scrollbarY.isFocus) {\n                    this._scrollbarY.isFocus = true;\n                    this.scheduleRender();\n                }\n                this.canvas.style.cursor = 'default';\n                return true;\n            }\n        }\n        return false;\n    },\n    resetScrollBarHover() {\n        if(this._scrollbarEnable) {\n            if(this._scrollbarY.isFocus || this._scrollbarX.isFocus) {\n                this._scrollbarY.isFocus = false;\n                this._scrollbarX.isFocus = false;\n                this.scheduleRender();\n            }\n        }\n    },\n    _getScrollViewBoundingbox() {\n        const padding = 120;\n        const { \n            width: p_width, \n            height: p_height, \n            x: p_x, \n            y: p_y \n        } = this.bounding_box;\n        const p = padding;\n        const p2 = padding * 2;\n        return {\n            width: p_width + p2,\n            height: p_height + p2,\n            x: p_x - p,\n            y: p_y - p\n        }\n    },\n    scrollBarOnPanAndZoom() {\n        if(!this._scrollbarEnable || this._scrollBarStatus.dragging) {\n            return;\n        }\n        const { \n            width: p_width, \n            height: p_height, \n            x: p_x, \n            y: p_y \n        } = this._getScrollViewBoundingbox();\n        \n        let [x, y, r, b] = this._getViewBox();\n        const realR = Math.max(r, p_x + p_width);\n        const realL = Math.min(x, p_x);\n        const realT = Math.min(y, p_y);\n        const realB = Math.max(b, p_y + p_height);\n        const vw = r - x;\n        const vh = b - y;\n        const { actual_width, actual_height } = this.canvasMeta;\n        const xscale = vw / (realR - realL)\n        if(xscale < 1)  {\n            const scollbarWidth = actual_width * xscale;\n            const anchorX = (x - realL) * xscale * this.scale;\n            this._scrollbarX.anchor = [anchorX, actual_height - 10];\n            this._scrollbarX.width = scollbarWidth;\n            this._scrollBarStatus.scollbarWidth = scollbarWidth;\n        }\n        \n        const yscale = vh / (realB - realT);\n        if(yscale < 1)  {\n            const scollbarHeight = actual_height * yscale;\n            const anchorY = (y - realT) * yscale * this.scale;\n            this._scrollbarY.anchor = [actual_width - 10, anchorY];\n            this._scrollbarY.height = scollbarHeight;\n            this._scrollBarStatus.scollbarHeight = scollbarHeight;\n        }\n\n        Object.assign(this._scrollBarStatus, {\n            yscale,\n            xscale,\n            realR,\n            realL,\n            realT,\n            realB,\n        })\n        \n    },\n    resetScollBarStatus() {\n        if(this._scrollbarEnable) {\n            Object.assign(this._scrollBarStatus, {\n                dragging: false,\n                target: null,\n                x: undefined,\n                y: undefined,\n            });\n        }\n    },\n    renderScrollBar(ctx) {\n        if(this._scrollbarEnable) {\n            ctx.setTransform();\n            ctx.scale(this.dpr, this.dpr);\n            const {\n                xscale,\n                yscale\n            } = this._scrollBarStatus;\n            if(xscale < 1)  {\n                this._scrollbarX.render(ctx);\n            }\n            if(yscale < 1)  {\n                this._scrollbarY.render(ctx);\n            }\n        }\n    }\n}","export default {\n    initSchedule() {\n        this.__clock__ = undefined;\n    },\n    scheduleRender(callback) {\n        requestAnimationFrame((timestamp) => {\n            const isFirstTime = this.__clock__ !== timestamp\n            if(isFirstTime) {\n                this.__render();\n            }\n            if(callback) {\n                callback(timestamp);\n            }\n            this.__clock__ = timestamp;\n        })\n    }\n}","/**\n * JFlow 抛出事件\n * @extends CustomEvent\n * @property {Event}  originEvent      - 原始事件\n * @property {Instance} target         - 事件触发对象\n * @property {JFlow} jflow             - JFlow 对象\n * @property {boolean} bubbles         - 冒泡标识\n */\nclass JFlowEvent extends CustomEvent{\n    constructor(event, configs = {}) {\n        const detail = {\n            ...configs,\n            originEvent: configs.event,\n            target: configs.target,\n            jflow: configs.jflow,\n            bubbles: configs.bubbles || false,    \n        }\n        super(event, {\n            detail\n        });\n    }\n}\n\nexport default JFlowEvent;","/**\n * 事件处理函数\n * @name EventAdapter~Handler\n * @function\n * @param {Event} event - 原生事件\n * @param {JFlow} jflow - 当前jflow 对象\n */\n\n/**\n * EventAdapter 对象 plugin 配置\n * @typedef {Object} EventAdapter~pluginDef\n * @property {Object} canvas - canvas 相关的事件\n * @property {EventAdapter~Handler} canvas.eventName - 注册 canvas 上的事件处理\n * @property {Object} document - document 相关的事件\n * @property {EventAdapter~Handler} document.eventName - 注册 document 上的事件处理\n */\n\nfunction getDefaultPlugin() {\n    return {\n        canvas: {\n            wheel: function (event, jflow) {\n                event.preventDefault();\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                if(event.ctrlKey) { \n                    deltaY = -deltaY;\n                    jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n                } else {\n                    jflow.panHandler(-deltaX, -deltaY, event);\n                }\n            },\n            pointerdown: function (event, jflow) {\n                const { offsetX, offsetY, deltaY, button } = event\n                if(button !== 0) return;\n                jflow.pressStartHandler(offsetX, offsetY, event);\n            },\n            pointermove: function (event, jflow) {\n                const { offsetX, offsetY } = event\n                jflow.pressMoveHandler(offsetX, offsetY, event);\n            },\n            pointerup: function (event, jflow) {\n                event.preventDefault();\n                // event.stopPropagation();\n                const { button } = event\n                if(button !== 0) return;\n                jflow.pressUpHanlder(false, event)\n            },\n            contextmenu: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.contextMenuHanlder(offsetX, offsetY, event);\n            },\n            dblclick: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.dblclickHandler(offsetX, offsetY, event);\n            },\n            click: function(event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.clickHanlder(offsetX, offsetY, event);\n            }\n        },\n        document: {\n            pointerup: function(event, jflow) {\n                jflow.pressUpHanlder(true, event);\n            }\n        }\n    }\n}\n\n/** \n * EventAdapter 对象\n * EventAdapter 通过 plugin 的形式实现多种交互方式的映射\n * @constructor EventAdapter\n */\nclass EventAdapter {\n    constructor(plugin = {}) {\n        this.plugin = getDefaultPlugin();\n        this.use(plugin);\n        this.canvasHandlers = [];\n        this.documentHandlers = [];\n    }\n    use(plugin = {}) {\n        const { canvas: ca, document: docObj } = plugin;\n        if(ca) {\n            for(let eventName in ca){\n                if (ca.hasOwnProperty(eventName)) {\n                    this.plugin.canvas[eventName] = ca[eventName];\n                }\n            }\n        }\n        if(docObj) {\n            for(let eventName in docObj){\n                if (docObj.hasOwnProperty(eventName)) {\n                    this.plugin.document[eventName] = docObj[eventName];\n                }\n            }\n        }\n    }\n\n    apply(jflow) {\n        const { canvas: ca, document: docObj } = this.plugin;\n        const canvas = jflow.canvas;\n        for(let eventName in ca){\n            const handler = ca[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            canvas.addEventListener(eventName, handlerWrapperd)\n            this.canvasHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n        for(let eventName in docObj){\n            const handler = docObj[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            document.addEventListener(eventName, handlerWrapperd)\n            this.documentHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n    }\n\n    unload(jflow) {\n        const canvas = jflow.canvas;\n        this.canvasHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            canvas.removeEventListener(eventName, handlerWrapperd);\n        });\n        this.documentHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            document.removeEventListener(eventName, handlerWrapperd);\n        })\n    }\n}\n\nexport default EventAdapter;\n","import Node from './node';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\nconst GroupMixin = {\n    ...StackMixin,\n    ...LayoutMixin,\n    _setPadding(configs) {\n        this.padding = {\n            top: configs.paddingTop || configs.padding || 0,\n            right: configs.paddingRight || configs.padding || 0,\n            bottom: configs.paddingBottom || configs.padding || 0,\n            left: configs.paddingLeft || configs.padding || 0,\n        };\n    },\n    _setMargin(configs)  {\n        this.margin = {\n            top: configs.marginTop || configs.margin || 0,\n            right: configs.marginRight || configs.margin || 0,\n            bottom: configs.marginBottom || configs.margin || 0,\n            left: configs.marginLeft || configs.margin || 0,\n        };\n    },\n    _getCenter() {\n        const anchor = this.anchor;\n        const padding = this.padding;\n        const margin = this.margin;\n        const mx = (margin.left - margin.right)/2;\n        const my = (margin.top - margin.bottom)/2;\n        const centerX = (padding.left - padding.right)/2 + mx;\n        const centerY = (padding.top - padding.bottom)/2 + my;\n        this._shape.anchor = [anchor[0] + mx, anchor[1] + my];\n        return [anchor[0] + centerX, anchor[1] + centerY];\n    },\n    setAnchorX(x) {\n        this.anchor[0] = x;\n        this._getCenter(); \n    },\n    setAnchorY(y) {\n        this.anchor[1] = y;\n        this._getCenter(); \n    },\n    setAnchor(x, y) {\n        this.anchor[0] = x;\n        this.anchor[1] = y;\n        this._getCenter(); \n    },\n    _calculatePointBack(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx - cx, gy - cy]\n        return p\n    },\n    /**\n     * 反算回 canvas 顶层坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToCoordination(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        // const p = [cx + anchor[0] - spanH, cy + anchor[1] - spanV];\n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            return this._belongs.calculateToCoordination(p);\n        } else {\n            return p;\n        }\n    },\n    /**\n     * 反算回页面的像素坐标，重载 {@link Instance#calculateToRealWorld}\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(p);\n        }\n    },\n    clone() {\n        const C = this.constructor;\n        const configs = Object.assign({}, this._rawConfigs, {\n            layout: this._layout && this._layout.clone(),\n        })\n        const t = new C(configs);\n        this.interateNodeStack((instance) => {\n            t.addToStack(instance.clone());\n        })\n        t.recalculate();\n        t.visible = this.visible;\n        return t;\n    },\n    getBoundingDimension() {\n        return {\n            width: this.width,\n            height: this.height,\n        }\n    },\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    },\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    },\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let x, y;\n        if(theta2 < theta1) {\n            x = x2 + (dirx?w:-w);\n            y = w * (diry?theta2:-theta2) + y2;\n        } else {\n            y = y2 + (diry?h:-h);\n            x = h / (dirx?theta2:-theta2) + x2;\n        }\n        return [x, y];\n    },\n    onEnterViewbox() {\n        this.interateNodeStack((instance) => {\n            instance.onEnterViewbox();\n        })\n    },\n    onLeaveViewbox() {\n        this.interateNodeStack((instance) => {\n            instance.onLeaveViewbox();\n        })\n    },\n    destroy() {\n        this._shape.destroy();\n        this.interateNodeStack((instance) => {\n            instance.destroy();\n        })\n    }, \n}\n\nfunction defaultShift(width, height) {\n    return [width, height];\n}\n\n/**\n * 根据paddingbox宽高来计算shapeshiftbox的宽高\n * @function shapeShift\n * @param {number} width            - paddingBox宽\n * @param {number} height           - paddingBox高\n * @return {number[]}\n */\n\n/**\n * 组工厂函数，用于通过JFlow 绘图节点来创建不同的组\n * @global \n * @function GroupFactory\n * @param {Node} jflowNodeConstructor - 绘图节点构造器\n * @param {object} options            - 配置项\n * @param {shapeShift} options.shapeShift - shift层适配方法\n * @return {Group} - 绘图节点构造器\n */\nfunction GroupFactory(jflowNodeConstructor, options = {}) {\n    const shapeShift = typeof options.shapeShift === 'function' ? options.shapeShift : defaultShift;\n\n    /**\n     * Group 配置\n     * @typedef {Object} GroupTemplate~GroupConfigs\n     * @property {number} width             - 设定宽度\n     * @property {number} minWidth          - 最小宽度\n     * @property {number} height            - 设定高度\n     * @property {number} padding          - 内边距\n     * @property {number} paddingTop          - 内上边距\n     * @property {number} paddingRight         - 内右边距\n     * @property {number} paddingBottom        - 内下边距\n     * @property {number} paddingLeft          - 内左边距\n     * @property {number} margin            - 外边距\n     * @property {number} marginTop          - 外上边距\n     * @property {number} marginRight         - 外右边距\n     * @property {number} marginBottom        - 外下边距\n     * @property {number} marginLeft          - 外左边距\n     * @property {boolean} lock            - 布局锁定状态 默认 true\n     */\n    class t extends Node {\n        /**\n        * @constructs GroupTemplate\n        * @param {GroupTemplate~GroupConfigs} configs - 组配置\n        * @mixes LayoutMixin\n        * @mixes StackMixin \n        */\n        constructor(configs) {\n            super(configs);\n                this.initStack(configs);\n                this.initLayout(configs);\n                /** @member {Node}      - 壳绘图单元 */\n                this._shape = new jflowNodeConstructor(configs);\n                this._shape.anchor = [0, 0];\n                this._shape._belongs = this;\n                this._setPadding(configs);\n                this._setMargin(configs);  \n                /** @member {Number}      - 设定宽度 */\n                this.definedWidth =     configs.width;\n                /** @member {Number}      - 最小宽度 */\n                this.minWidth =         configs.minWidth;\n                /** @member {Number}      - 设定的高度 */\n                this.definedHeight =    configs.height;\n                /** @member {Boolean}      - 组内元素是否锁定， 默认true */\n                this.lock =             configs.lock ?? true ;\n                this.display =          configs.display || 'default';\n                /** @member {Boolean}      - 组本身是否进入形状判定范围 */\n                this.transparent =      configs.transparent ?? false;\n                this._getBoundingGroupRect();\n                this.reflow();\n                this._getBoundingGroupRect();  \n        }\n    }\n    Object.assign(t.prototype, GroupMixin);\n    Object.assign(t.prototype, { \n        reflow() {\n            GroupMixin.reflow.call(this);\n            const margin = this.margin;\n            const [shapeWidth, shapeHeight] = shapeShift(\n                    this.width - margin.left - margin.right,\n                    this.height - margin.top - margin.bottom, this._shape);\n            this._shape.width = shapeWidth;\n            this._shape.height = shapeHeight;\n        },\n        setConfig(configs) {\n            this._shape.setConfig(configs);\n            this._setPadding(configs);\n            this._setMargin(configs);  \n            if('opacity' in configs) {\n                this.opacity = configs.opacity\n            }\n            \n            if(configs.layout && this._layout !== configs.layout) {\n                this._layout = configs.layout;\n            }\n        },\n        _getBoundingGroupRect() {\n            const points = this._stack.getBoundingRectPoints();\n            // content box \n            const bbox = bounding_box(points);\n\n             // padding box \n            const padding = this.padding;\n            const minWidth = this.minWidth// - padding.left - padding.right;\n            const definedWidth = this.definedWidth// - padding.left - padding.right;\n            const w = bbox.width + padding.left + padding.right;\n            const h = bbox.height + padding.top + padding.bottom;\n            const paddingWidth = minWidth ? Math.max(minWidth, w) : definedWidth || w;\n            const paddingHeight = this.definedHeight || h;\n            this._paddingWidth = paddingWidth;\n            this._paddingHeight = paddingHeight;\n\n            // shapeBox\n            const [shapeWidth, shapeHeight] = shapeShift(paddingWidth, paddingHeight, this._shape)\n            this._shape.width = shapeWidth;\n            this._shape.height = shapeHeight;\n            // marginBox\n            const margin = this.margin;\n            this.width = shapeWidth + margin.left + margin.right;\n            this.height = shapeHeight + margin.top + margin.bottom;\n        },\n        \n        render(ctx) {\n            ctx.save();\n            if(this._isMoving){\n                ctx.globalAlpha = 0.6\n            } else if(this.opacity !== 1) {\n                ctx.globalAlpha = this.opacity;\n            }\n            const [cx, cy] = this._getCenter(); \n            this._shape.render(ctx);\n            ctx.translate(cx, cy);\n            this._stack.render(ctx);\n            this._linkStack.render(ctx);    \n            ctx.translate(-cx, -cy);\n            ctx.restore();\n\n            // ctx.save();\n            // ctx.beginPath();\n            // ctx.arc(cx, cy, 5, 0, Math.PI*2);\n            // ctx.fillStyle = 'rgb(0,0,0)'\n            // ctx.fill();\n            // ctx.restore();\n        },\n        isHit(point, condition) {\n            const p = this._calculatePointBack(point);\n            this._currentp = p; // 暂存，为了后续计算别的位置\n            const target = this._stack.checkHit(p, condition);\n            if(target) return target;\n            if(!this.transparent) {\n                return this._shape.isHit(point);\n            }\n            return false;\n        },    \n        /* renderCache(ctx) {\n            const rect = this.getBoundingRect();\n            const [a, b] = this._belongs.calculateToRealWorld([rect[0], rect[1]]);\n            const [c, d] = this._belongs.calculateToRealWorld([rect[2], rect[3]]);\n            ctx.putImageData(this._cached, a, b, 0, 0, c-a, d-b)\n        },\n        cache(ctx) {\n            const rect = this.getBoundingRect();\n            const [a, b] = this._belongs.calculateToRealWorld([rect[0], rect[1]]);\n            const [c, d] = this._belongs.calculateToRealWorld([rect[2], rect[3]]);\n            console.log(a, b, c-a ,d-b);\n            this._cached = ctx.getImageData(a, b, c-a, d-b)\n        }  */  \n    });\n    return t\n}\n\nexport default GroupFactory;\n\n","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 圆形单元 配置\n * @typedef {Node~Configs} Point~PointConfigs\n * @property {number} radius  - 半径\n */\n/**\n * 圆形节点\n * @constructor Point\n * @extends Node\n * @param {Point~PointConfigs} configs - 配置\n */\nclass Point extends Node {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Point';\n        /** @member {Number}      - 半径 */\n        this.radius =           configs.radius || 10;\n        this._doCache();\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._doCache();\n    }\n    _doCache() {\n        this.width = this.radius * 2;\n        this.height = this.radius * 2;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        ctx.arc(this.anchor[0], this.anchor[1], this.radius, 0, 2 * Math.PI);\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        return Math.pow(point[0] - anchor[0], 2) + Math.pow(point[1] - anchor[1], 2) < this.radius * this.radius\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const r = this.radius;\n        const ltx = anchor[0] - r;\n        const lty = anchor[1] - r;\n        const rbx = anchor[0] + r;\n        const rby = anchor[1] + r;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const dist = Math.sqrt(vecx * vecx + vecy * vecy);\n\n        const ratio = this.radius / dist;\n        return [x2 - ratio * vecx, y2 - ratio * vecy];\n    }\n\n    getIntersectionsInFourDimension() {\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        return {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n        // console.log(Math.abs(vecx) > Math.abs(vecy), vecx, r)\n        // if() {\n        //     return {\n        //         p: [x2 + (vecx<0?r:-r), y2],\n        //         dir: vecx<0 ? DIRECTION.RIGHT : DIRECTION.LEFT,\n        //     }\n        // } else {\n        //     return {\n        //         p: [x2, y2+(vecy<0?r:-r)],\n        //         dir: vecy<0 ? DIRECTION.BOTTOM : DIRECTION.TOP,\n        //     }\n        // }\n        let interDir = (Math.abs(vecy) > Math.abs(vecx)\n            ? (vecy < 0 ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (vecx < 0 ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // interDir = this.checkLinked(interDir, end);\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n\n    getBoundingDimension() {\n        return {\n            width: this.width,\n            height: this.height\n        }\n    }\n\n}\n\nexport default Point;","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * @typedef Rectangle~border\n * @type {object}\n * @property {number} borderColor      - 边框宽度, 默认 0\n * @property {number} borderWidth      - 边框颜色, 默认 transparent\n */\n/**\n * @typedef Rectangle~borders\n * @type {object}\n * @property {Rectangle~border} top      - 上边框\n * @property {Rectangle~border} right      - 右边框\n * @property {Rectangle~border} bottom      - 下边框\n * @property {Rectangle~border} left      - 左边框\n */\n\n/**\n * 矩形单元 配置\n * @typedef {Node~Configs} Rectangle~RectangleConfigs\n * @property {number} width - 宽\n * @property {number} height - 高\n * @property {number} borderRadius - 圆角矩形半径\n * @property {string} borderColor - 边框颜色, 默认 transparent\n * @property {string} borderWidth - 边框宽度, 默认 0\n * @property {Rectangle~borders} border      - 边框设置\n */\n/**\n * 矩形单元\n * @constructor Rectangle\n * @extends Node\n * @param {Rectangle~RectangleConfigs} configs\n */\nclass Rectangle extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rectangle';\n         /** @member {Number}      - 宽 */\n        this.width =            configs.width || 10;\n         /** @member {Number}      - 高 */\n        this.height =           configs.height || 10;\n         /** @member {Number}      - 圆角矩形半径 */\n        this.borderRadius =     configs.borderRadius || 0;\n        this._setBorder(configs);\n    }\n\n    _setBorder(configs){\n        /** @member {Rectangle~borders}      - 边框设置，优先级高于 borderWidth，borderColor */\n        this.border = {\n            top: {\n                color: configs.border?.top?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.top?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.top?.borderWidth,\n            },\n            right: {\n                color: configs.border?.right?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.right?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.right?.borderWidth,\n            },\n            bottom: {\n                color: configs.border?.bottom?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.bottom?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.bottom?.borderWidth,\n            },\n            left: {\n                color: configs.border?.left?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.left?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.left?.borderWidth,\n            }\n        };\n        this.borderColor = configs.borderColor || 'transparent';\n        this.borderWidth = configs.borderWidth || 0;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._setBorder(configs);\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n\n        const {\n            borderRadius: radius, anchor, width, height\n        } = this;\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        const xt = this.anchor[0] + this.width / 2;\n        const yt = this.anchor[1] + this.height / 2;\n        if(this.borderRadius) {\n            ctx.beginPath();\n            ctx.moveTo(x + radius, y);\n            ctx.lineTo(x + width - radius, y);\n            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n            ctx.lineTo(x + width, y + height - radius);\n            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n            ctx.lineTo(x + radius, y + height);\n            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n            ctx.closePath(); \n        } else {\n            ctx.beginPath();\n            ctx.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n        }\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n        }\n        \n        if(this.shadowColor && this.shadowColor !== 'transparent') {\n            ctx.shadowColor = this.shadowColor;\n            const scale = this._jflow.scale;\n            ctx.shadowBlur = this.shadowBlur * scale;\n            ctx.shadowOffsetX = this.shadowOffsetX * scale;\n            ctx.shadowOffsetY = this.shadowOffsetY * scale;\n            let switchPath = new Path2D();\n            if(this.borderRadius) {\n                switchPath.moveTo(x + radius, y);\n                switchPath.lineTo(x + width - radius, y);\n                switchPath.quadraticCurveTo(x + width, y, x + width, y + radius);\n                switchPath.lineTo(x + width, y + height - radius);\n                switchPath.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n                switchPath.lineTo(x + radius, y + height);\n                switchPath.quadraticCurveTo(x, y + height, x, y + height - radius);\n                switchPath.lineTo(x, y + radius);\n                switchPath.quadraticCurveTo(x, y, x + radius, y);\n                switchPath.closePath();\n            } else {\n                switchPath.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n            }\n            switchPath.rect(x - 10, y - 10, this.width+ 20, this.height+ 20);\n            ctx.save();\n            ctx.clip(switchPath, \"evenodd\");\n            ctx.stroke();\n            ctx.restore();\n        }  \n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderRadius && this.borderWidth) {\n            ctx.shadowColor = 'transparent'\n            ctx.stroke();\n        }\n        \n        if(this.borderRadius) {\n            if(this.border.top.enable) {\n                const ty = y - this.border.top.width / 2;\n                // console.log(this.border.top.width)\n                ctx.beginPath();\n                let topPath = new Path2D();\n                topPath.moveTo(x, ty + radius);\n                topPath.quadraticCurveTo(x, ty, x + radius, ty);\n                topPath.lineTo(x + width - radius, ty);\n                topPath.quadraticCurveTo(x + width, ty, x + width, ty + radius);\n                topPath.closePath();\n                ctx.clip(topPath);             \n                ctx.save();\n                ctx.shadowColor = 'transparent';\n                ctx.fillStyle = this.border.top.color;\n                ctx.rect(x, ty, this.width, this.border.top.width);\n                ctx.fill();\n                ctx.restore();\n\n                // ctx.stroke();\n                // ctx.save();\n                // ctx.beginPath();\n                // ctx.moveTo(x, ty + radius);\n                // ctx.quadraticCurveTo(x, ty, x + radius, ty);\n                // ctx.lineTo(x + width - radius, ty);\n                // ctx.quadraticCurveTo(x + width, ty, x + width, ty + radius);\n                // ctx.closePath();\n\n                // // ctx.fill();\n                // ctx.clip();\n\n                // ctx.beginPath();\n                // ctx.rect(x, ty, this.width, this.border.top.width);\n                // ctx.fillStyle = this.border.top.color;\n                // ctx.shadowColor = 'transparent';\n                // ctx.fill();\n                // ctx.restore();\n            }\n        } else {\n            if(this.border.top.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, y);\n                ctx.lineTo(xt, y);\n                ctx.strokeStyle = this.border.top.color;\n                ctx.lineWidth = this.border.top.width;\n                ctx.stroke();\n            }\n\n            if(this.border.right.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, y);\n                ctx.lineTo(xt, yt);\n                ctx.strokeStyle = this.border.right.color;\n                ctx.lineWidth = this.border.right.width;\n                ctx.stroke();\n            }\n\n            if(this.border.bottom.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, yt);\n                ctx.lineTo(x, yt);\n                ctx.strokeStyle = this.border.bottom.color;\n                ctx.lineWidth = this.border.bottom.width;\n                ctx.stroke();\n            }\n\n            if(this.border.left.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, yt);\n                ctx.lineTo(x, y);\n                ctx.strokeStyle = this.border.left.color;\n                ctx.lineWidth = this.border.left.width;\n                ctx.stroke();\n            }\n        }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        return point[0] > anchor[0] - w\n            && point[0] < anchor[0] + w\n            && point[1] > anchor[1] - h\n            && point[1] < anchor[1] + h;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let x, y;\n        if(theta2 < theta1) {\n            x = x2 + (dirx?w:-w);\n            y = w * (diry?theta2:-theta2) + y2;\n        } else {\n            y = y2 + (diry?h:-h);\n            x = h / (dirx?theta2:-theta2) + x2;\n        }\n        return [x, y];\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let interDir = (theta2 > theta1\n            ? (diry ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (dirx ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(JSON.stringify(this._intersections));\n        //     console.log(interDir)\n        // }\n        // interDir = this.checkLinked(interDir, end);\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(interDir)\n        // }\n\n        // if(!interDir) {\n        //     debugger\n        // }\n        // let endDir = interDir;\n        // if(end === 'to') {\n        //     endDir = oppositeDirection(endDir)\n        // }\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n}\n\nexport default Rectangle;","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * 胶囊单元 配置\n * @typedef {Node~Configs} Capsule~CapsuleConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n */\n/**\n * 胶囊单元\n * @constructor Capsule\n * @extends Node\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass Capsule extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Capsule';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const leftCenter = x - hw + hh;\n        const rightCenter = x + hw - hh;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        ctx.moveTo(leftCenter, top);\n        ctx.lineTo(rightCenter, top);\n        ctx.arc(rightCenter, y, hh, -Math.PI/2, Math.PI/2);\n        ctx.lineTo(leftCenter, bottom);\n        ctx.arc(leftCenter, y, hh, Math.PI/2, Math.PI/2*3);\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const ww =  Math.abs(hw - hh);\n        const leftCenter = anchor[0] - hw + hh;\n        const rightCenter = anchor[0] + hw - hh;\n        const rr = hh * hh;\n        return (point[0] > anchor[0] - ww\n            && point[0] < anchor[0] + ww\n            && point[1] > anchor[1] - hh\n            && point[1] < anchor[1] + hh)\n            || ( Math.pow(point[0] - leftCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n            || ( Math.pow(point[0] - rightCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Capsule;","import Capsule from './capsule';\n/**\n * 垂直胶囊单元\n * @constructor CapsuleVertical\n * @extends Capsule\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass CapsuleVertical extends Capsule {\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const left = x - hw;\n        const right = x + hw;\n\n        ctx.moveTo(left, topCenter);\n        ctx.arc(x, topCenter, hw, -Math.PI, 0);\n        ctx.lineTo(right, bottomCenter);\n        ctx.arc(x, bottomCenter, hw, 0, Math.PI);\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point, condition) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy =  Math.abs(hh - hw);\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const rr = hw * hw;\n        return (point[0] > x - hw\n            && point[0] < x + hw\n            && point[1] > y - yy\n            && point[1] < y + yy)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - topCenter, 2) < rr)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - bottomCenter, 2) < rr)\n    }\n}\nexport default CapsuleVertical;","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 菱形单元 配置\n * @typedef {Node~Configs} Rhombus~RhombusConfigs\n * @property {number} diagonalsV  - 内十字高度\n * @property {number} diagonalsH  - 内十字宽度\n */\n/**\n * 菱形单元\n * @constructor Rhombus\n * @param {Rhombus~RhombusConfigs} configs - 配置\n * @extends Node\n */\nclass Rhombus extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rhombus';\n        /** @member {Number}      - 内十字高度 */\n        this.height =           configs.diagonalsV || 10;\n        /** @member {Number}      - 内十字宽度 */\n        this.width =            configs.diagonalsH || 20;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        const w = this.width / 2;\n        const h = this.height / 2;\n        const center = this.anchor;\n        ctx.translate(center[0], center[1])\n        ctx.beginPath();\n        ctx.moveTo(0, -h);\n        ctx.lineTo(w, 0);\n        ctx.lineTo(0, h);\n        ctx.lineTo(-w, 0);\n        ctx.closePath();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n        }\n\n        \n        if(this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            const scale = this._jflow.scale;\n            ctx.shadowBlur = this.shadowBlur * scale;\n            ctx.shadowOffsetX = this.shadowOffsetX * scale;\n            ctx.shadowOffsetY = this.shadowOffsetY * scale;\n            let switchPath = new Path2D();\n            switchPath.moveTo(0, -h);\n            switchPath.lineTo(w, 0);\n            switchPath.lineTo(0, h);\n            switchPath.lineTo(-w, 0);\n            switchPath.closePath();\n            switchPath.rect(-w - 10,  -h - 10, this.width + 20, this.height+ 20);\n            // switchPath.moveTo(x, y-h);\n            // switchPath.lineTo(x + w, y);\n            // switchPath.lineTo(x, y + h);\n            // switchPath.lineTo(x-w, y);\n            // switchPath.closePath();\n            // switchPath.rect(x - w - 10, y - h - 10, this.width+ 20, this.height+ 20);\n            ctx.save();\n            ctx.clip(switchPath, \"evenodd\");\n            ctx.stroke();\n            ctx.restore();\n        }\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if (this.borderWidth) {\n            ctx.shadowColor = 'transparent'\n            ctx.stroke();\n        }\n       \n        ctx.translate(-center[0], -center[1])\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const v = this.height / 2;\n        const h = this.width / 2;\n        const anchor = this.anchor;\n        const x = Math.abs(point[0] - anchor[0]);\n        const y = Math.abs(point[1] - anchor[1]);\n        return (x / h + y / v) <= 1;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height /2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    }\n}\n\nexport default Rhombus;\n","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\nimport { makeBezierPoints } from '../../utils/functions';\n/**\n * 钻石形单元 配置\n * @typedef {Node~Configs} Diamond~DiamondConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n * @property {number} side   - 两侧三角形的宽\n */\n/**\n * 钻石形单元\n * @constructor Diamond\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Node\n */\n\nclass Diamond extends Node {\n\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Diamond';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n        /** @member {Number}      - 两侧三角形的宽 */\n        this.side =             configs.side || 6;\n        this._doCache();\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._doCache();\n    }\n\n    _doCache() {\n        this.sinSIDE = Math.sin(Math.PI/3) * this.side;\n        this.cosSIDE = Math.cos(Math.PI/3) * this.side;\n    }\n\n    render(ctx) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const xx = hh / 1.732\n        const leftCenter = x - hw + xx;\n        const rightCenter = x + hw - xx;\n        const right = x + hw;\n        const left = x - hw;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        this._cachePoints = [\n            [rightCenter, top],\n            [right, y],\n            [rightCenter, bottom],\n            [leftCenter, bottom],\n            [left, y],\n            [leftCenter, top]\n        ];\n\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const {\n            side, sinSIDE, cosSIDE\n        } = this;\n        ctx.moveTo(x, top);\n        ctx.lineTo(rightCenter - side, top);\n        ctx.quadraticCurveTo(rightCenter, top, rightCenter + cosSIDE, top + sinSIDE);\n        ctx.lineTo(right - cosSIDE, y - sinSIDE);\n        ctx.quadraticCurveTo(right, y, right - cosSIDE, y + sinSIDE);\n        ctx.lineTo(rightCenter + cosSIDE, bottom - sinSIDE);\n        ctx.quadraticCurveTo(rightCenter, bottom, rightCenter - side, bottom);\n\n        ctx.lineTo(leftCenter + side, bottom);\n        ctx.quadraticCurveTo(leftCenter, bottom, leftCenter - cosSIDE, bottom - sinSIDE);\n        ctx.lineTo(left + cosSIDE, y + sinSIDE);\n        ctx.quadraticCurveTo(left, y, left + cosSIDE, y - sinSIDE);\n        ctx.lineTo(leftCenter - cosSIDE, top + sinSIDE);\n        ctx.quadraticCurveTo(leftCenter, top, leftCenter + side, top);\n\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n\n\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const polygon = this._cachePoints;\n        let odd = false;\n        // For each edge (In this case for each point of the polygon and the previous one)\n        for (let i = 0, j = polygon.length - 1; i < polygon.length; i++) {\n            // If a line from the point into infinity crosses this edge\n            if (((polygon[i][1] > point[1]) !== (polygon[j][1] > point[1])) // One point needs to be above, one below our y coordinate\n                // ...and the edge doesn't cross our Y corrdinate before our x coordinate (but between our x coordinate and infinity)\n                && (point[0] < ((polygon[j][0] - polygon[i][0]) * (point[1] - polygon[i][1]) / (polygon[j][1] - polygon[i][1]) + polygon[i][0]))) {\n                // Invert odd\n                odd = !odd;\n            }\n            j = i;\n\n        }\n        return odd;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Diamond;","import Diamond from './diamond';\nconst backsqrt3 = 1/Math.sqrt(3)\n\n/**\n * 垂直钻石形单元\n * @constructor DiamondVertical\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Diamond\n */\nclass DiamondVertical extends Diamond {\n    constructor(configs) {\n        super(configs)\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy = hw / 1.732\n\n        const top = y - hh;\n        const bottom = y + hh;\n        const topmiddle = y - hh + yy;\n        const bottommiddle = y + hh - yy;\n        const xleft = x - hw;\n        const xright = x + hw;\n\n        ctx.moveTo(x, top);\n        ctx.lineTo(xright, topmiddle);\n        ctx.lineTo(xright, bottommiddle);\n        ctx.lineTo(x, bottom);\n        ctx.lineTo(xleft, bottommiddle);\n        ctx.lineTo(xleft, topmiddle);\n        ctx.closePath();\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        ctx.restore();\n        this._cachePoints = [\n            [x, top],\n            [xright, topmiddle],\n            [xright, bottommiddle],\n            [x, bottom],\n            [xleft, bottommiddle],\n            [xleft, topmiddle]\n        ];\n    }\n}\nexport default DiamondVertical;","export default {\n    canvas: {\n        wheel (event, jflow) {\n            event.preventDefault();\n            let { offsetX, offsetY, deltaX, deltaY } = event \n            if(event.ctrlKey) { \n                deltaY = -deltaY;\n            }\n            jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n        },\n    }\n}","import Instance from './instance';\n\n/**\n * @typedef {Instance~Configs} BaseLink~Configs\n * @property {Instance} from   - 起始单元\n * @property {Instance} to     - 终止单元\n * @property {String} fromDir  - 起始方向 \n * @property {String} toDir    - 终止方向 \n * @property {String} key      - 连线唯一键值\n * @property {String} backgroundColor    - 线条颜色 \n */\n/**\n * 连线基类\n * @constructor BaseLink\n * @extends Instance\n * @param {BaseLink~Configs} configs - 配置\n */\nclass BaseLink extends Instance{\n    constructor(configs = {}) {\n        super();\n        /** @member {Instance}      - 起始单元 */\n        this.from     = configs.from;\n        /** @member {Instance}      - 终止单元 */\n        this.to       = configs.to;\n        /** @member {DIRECTION}      - 起始方向 */\n        this.fromDir  = configs.fromDir;\n        /** @member {DIRECTION}      - 终止方向 */\n        this.toDir    = configs.toDir;\n        /** @member {number[][]}     - 连线控制点缓存 */\n        this._cachePoints = null;\n        /** @member {string}     - 连线颜色，默认为 #000 */\n        this.backgroundColor = configs.backgroundColor || '#000';\n\n        this.isSelf        = !!configs.isSelf\n    }\n\n    /**\n     * 是否出现在当前视窗内\n     * @param {number[]} viewbox\n     */\n    isInViewBox(viewbox){\n        return true;\n    }\n\n    bringToTop() {\n        const linkStack = this._jflow._linkStack;\n        const index = linkStack.findIndex(l => l === this);\n        linkStack.splice(index, 1);\n        linkStack.push(this);\n        this._jflow._render();\n    }\n\n    \n}\n\nexport default BaseLink;","import Rectangle from './shapes/rectangle';\nimport { DIRECTION } from '../utils/constance';\nimport { requestCacheCanvas } from '../utils/canvas';\nimport JFlowEvent from '../events';\nfunction createInputElement() {\n    const input = document.createElement('input');\n    input.setAttribute('style',`\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        background-image:none;\n        background-color:transparent;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;`);\n    return input;\n}\n/**\n * 文字对齐方式\n * @readonly\n * @enum {string}\n */\nconst TEXT_ALIGN = {\n    CENTER: 'center',\n    LEFT: 'left',\n    RIGHT: 'right',\n};\n/**\n * 文字单元 配置\n * @typedef {Rectangle~RectangleConfigs} Text~TextConfigs\n * @property {String} fontFamily    - 字体\n * @property {Number} fontSize      - 字号\n * @property {String} content       - 内容\n * @property {String} textColor     - 字体颜色\n * @property {TEXT_ALIGN} textAlign     - 文字对齐方式\n * @property {String} backgroundColor     - 背景颜色\n * @property {number} lineHeight    - 行高\n * @property {number} indent        - 缩进\n * @property {Boolean} editable      - 是否可编辑\n * @property {number} minWidth      - 最小宽度\n * @property {string} placeholder   - 占位文字\n * @property {Boolean} emptyWhenInput - 输入状态时是否清空input框\n */\n/**\n * 文字对象\n * @description 可以绘制文字\n * @constructor Text\n * @extends Rectangle\n * @param {Text~TextConfigs} configs - 配置\n */\nclass Text extends Rectangle {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Text';\n        /** @member {String}      - 内容 */\n        this.content =          configs.content || '';\n        /** @member {String}      - 字体 */\n        this.fontFamily =       configs.fontFamily || '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {String}      - 字号 */\n        this.fontSize =         configs.fontSize || '28px';\n        /** @member {String}      - 字体 */\n        this.fontWeight =       configs.fontWeight || '';\n        /** @member {String}      - 字体颜色 */\n        this.textColor =        configs.textColor || 'white';\n        this.placeholderColor = configs.placeholderColor ||  configs.textColor || 'white';\n        /** @member {String}      - 文字对齐方式 */\n        this.textAlign =        configs.textAlign || TEXT_ALIGN.CENTER;\n        /** @member {String}      - 文字基线方式 */\n        this.textBaseline =     configs.textBaseline || 'middle';\n        /** @member {Number}      - 行高 */\n        this.lineHeight =       configs.lineHeight ;\n        /** @member {Number}      - 缩进 */\n        this.indent =           configs.indent || 0;\n        this.backgroundColor =  configs.backgroundColor;\n        /** @member {Boolean}      - 是否可编辑 */\n        this.editable =         configs.editable;\n        // this.acceptPatten =     configs.acceptPatten;\n        /** @member {number}      - 最小宽度 */\n        this.minWidth =         configs.minWidth || 0;\n        this.maxWidth =         configs.maxWidth;\n        this.ellipsis =         configs.ellipsis;\n\n        this.placeholder =          configs.placeholder || '';\n        this.emptyWhenInput =       configs.emptyWhenInput || false;\n        this.editting =  false;\n        this.disabled =        configs.disabled;\n        this.textBuffer = document.createElement('canvas');\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n            this.cacheText();\n        });\n        this._makeEditable();\n    }\n\n    get currentContent() {\n        return this.content || this.placeholder;\n    }\n\n    get isEmpty() {\n        return !this.content;\n    }\n\n    cacheText() {\n        const scale = 4;\n        const textBuffer = this.textBuffer;\n        const { fontSize:fs, fontFamily, fontWeight } = this;\n        let content = this.currentContent;\n        if(this.ellipsisContent) {\n            content = this.ellipsisContent;\n        }\n        if(!content) {\n            this.cacheTextBounding = null;\n            return;\n        }\n        const fontSize = parseInt(fs);\n        const w = this._textWidth * scale;\n        const h = fontSize * scale;\n        textBuffer.width = w;\n        textBuffer.height = h\n        const ctx = textBuffer.getContext('2d');\n        ctx.clearRect(-1000, -1000, 10000, 10000);\n        ctx.fillStyle = this.textColor;\n        ctx.font = `${fontWeight} ${h}px ${fontFamily}`;\n        ctx.textBaseline = 'middle';\n        ctx.fillText(content, 0, h/2);\n        this.cacheTextBounding = [0, 0, w, h];\n    }\n    _renderCache(ctx) {\n        if(!this.cacheTextBounding) {\n            return;\n        }\n        const [a, b, c, d] = this.cacheTextBounding;\n        const w = this._textWidth;\n        const h = parseInt(this.fontSize);\n        if(this.textAlign === TEXT_ALIGN.LEFT){\n            const hw = this.width / 2;\n            ctx.drawImage(this.textBuffer, \n                a, b, c, d,\n                this.anchor[0] - hw + this.indent / 2, this.anchor[1] - h/2, w, h);\n        } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n            const hw = this.width / 2;\n            const tx = this._textWidth;\n            ctx.drawImage(this.textBuffer, \n                a, b, c, d,\n                this.anchor[0] + hw - tx, this.anchor[1] - h/2, w, h);\n        } else {\n            const tx = this._textWidth / 2;\n            ctx.drawImage(this.textBuffer, \n                a, b, c, d,\n                this.anchor[0] - tx + this.indent / 2, this.anchor[1] - h/2, w, h);\n        }\n        \n    }\n\n    /**\n     * 编辑态\n     */\n    _makeEditable() {\n        if(this.editable) {\n            this.addEventListener('click', (event) => {\n                if(this.disabled) {\n                    return;\n                }\n                let x;\n                const hw = this.width / 2;\n                if(this.textAlign === TEXT_ALIGN.LEFT){\n                    x = this.anchor[0] - hw + this.indent / 2;\n                } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n                    x = this.anchor[0] + hw;\n                } else {\n                    x = this.anchor[0] + this.indent / 2;\n                }\n                const p = [ x, -this.height/2 ];\n                const fontSize = +/(\\d+)/.exec(this.fontSize)[1];\n                const [offsetX, offsetY] = this.calculateToRealWorld(p);\n                let inputElement = createInputElement();\n                const wrapper = this._jflow.DOMwrapper;\n                let oldVal = this.content;\n                let textColor = this.textColor;\n                inputElement.style.margin = 0;\n                inputElement.style.padding = 0;\n                inputElement.style.transform =`translate(${offsetX}px, ${offsetY}px)`;\n                inputElement.style.width = this.calculateToRealWorldWithScalar(this.width) + 'px';\n                inputElement.style.height = this.calculateToRealWorldWithScalar(this.height) + 'px';\n                inputElement.style.fontFamily = this.fontFamily;\n                wrapper.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.lineHeight = `${this.lineHeight * this._jflow.scale}px`;\n                inputElement.style.textIndent = `${this.indent * this._jflow.scale}px`;\n                inputElement.value = this.emptyWhenInput ? '' : this.content;\n                inputElement.style.color = this.textColor;\n                inputElement.setAttribute('placeholder', this.placeholder);\n\n                inputElement.addEventListener(\"focus\",  (e) => {\n                    // e.preventDefault();\n                    // this.content = '';\n                    this.textColor = 'transparent'\n                    this.editting = true;\n                    this._jflow._render();\n                    inputElement.style.outline = \"none\";\n                });\n                let blurHandler = () => {\n                    this.editting = false;\n                    this.dispatchEvent(new JFlowEvent('blur', {\n                        target: this,\n                    }))\n                    const val = inputElement.value;\n                    /**\n                        * 文字改变事件\n                        * @event Text#change\n                        * @type {object}\n                        * @property {Text} target           - 当前文字对象\n                        * @property {String} oldVal         - 原始文字\n                        * @property {String} val            - 当前文字\n                        */\n                    this.dispatchEvent(new JFlowEvent('change', {\n                        target: this,\n                        oldVal,\n                        val,\n                    }))\n                    this.textColor = textColor;\n                    // this.content = oldVal;\n                    this._jflow._render();\n                    this._jflow.removeEventListener('zoompan', blurHandler)\n                    inputElement.removeEventListener('blur', blurHandler)\n                    inputElement.removeEventListener('keypress', keyUpHandler)\n                    wrapper.removeChild(inputElement);\n                    inputElement = null;\n                    blurHandler = null;\n                    this.inputElement = null;\n                };\n                this._jflow.addEventListener('zoompan', blurHandler);\n                inputElement.addEventListener('blur', blurHandler);\n                const keyUpHandler = (e) => {\n                    if (e.key === 'Enter' || e.keyCode === 13) {\n                        e.preventDefault();\n                        let defaultAct = true;\n                        this.dispatchEvent(new JFlowEvent('enterkeypressed', {\n                            target: this,\n                            handler: (val) => {\n                                defaultAct = val;\n                            },\n                        }))\n                        if(defaultAct){\n                            inputElement.removeEventListener('keypress', keyUpHandler)\n                            blurHandler();\n                        }\n                    }\n                };\n                inputElement.addEventListener('keypress', keyUpHandler)\n                inputElement.addEventListener('input', (e) => {\n                    let changed = false;\n                    this.dispatchEvent(new JFlowEvent('input', {\n                        target: this,\n                        oldVal,\n                        val: e.target.value,\n                        handler(val) {\n                            oldVal = val;\n                            inputElement.value = val;\n                            changed = true;\n                        }\n                    }))\n                    if(!changed) {\n                        oldVal = e.target.value\n                    }\n                })\n                wrapper.append(inputElement);\n                inputElement.focus({\n                    preventScroll: true\n                });\n                this.inputElement = inputElement;\n            })\n        }\n    }\n\n    renderShadowText(ctx) {\n        ctx.beginPath();\n        ctx.font = `${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.textColor;\n        const t_h = parseInt(this.fontSize);\n        const content = this.currentContent;\n        const {\n            actualBoundingBoxLeft,\n            actualBoundingBoxRight,\n            fontBoundingBoxAscent,\n            fontBoundingBoxDescent\n        } = ctx.measureText(content);\n        this._textWidth = this.indent + Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight);\n        if(this.maxWidth && this.ellipsis) {\n            if(this._textWidth > this.maxWidth) {\n                const ratio =this.maxWidth / this._textWidth;\n                const l = Math.floor(content.length * ratio - 3);\n                this.ellipsisContent = content.substring(0, l) + '...'; \n            }  else {\n                this.ellipsisContent = content;\n            }\n            this.width = this.maxWidth;\n        } else{ \n            this.width = Math.max(this.minWidth, this._textWidth);\n        }\n        \n        const height = (Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent)) || t_h;\n        if(this.lineHeight) {\n            this.height = this.lineHeight;\n        } else {\n            this.height = height;\n        }\n\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                // if(this.editting && k === 'content') {\n                //     return;\n                // }\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n            this.cacheText();\n        });\n    }\n\n    render(ctx) {\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        if(this.editting) {\n            return;\n        }\n        if(this._jflow.scale * parseInt(this.fontSize) < 8) {\n            this._renderCache(ctx);\n            return;\n        }\n        ctx.beginPath();\n        \n        ctx.font = `${this.fontWeight} ${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.isEmpty ? this.placeholderColor : this.textColor;\n        let content = this.currentContent;\n        if(this.ellipsisContent) {\n            content = this.ellipsisContent;\n        }\n        if(content) {\n            if(this.textAlign === TEXT_ALIGN.LEFT){\n                const hw = this.width / 2;\n                ctx.fillText(content, this.anchor[0] - hw + this.indent / 2, this.anchor[1]);\n            } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n                const hw = this.width / 2;\n                ctx.fillText(content, this.anchor[0] + hw, this.anchor[1]);\n            } else {\n                ctx.fillText(content, this.anchor[0] + this.indent / 2, this.anchor[1]);\n            }\n        }\n    }\n}\n\nexport default Text;","import Rectangle from './shapes/rectangle';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\n\n/**\n * @typedef {Object} Icon~ImageBounding\n * @property {number} width   - 图片宽度\n * @property {number} height   - 图片高度 \n */\n/**\n * 图片单元 配置\n * @typedef {Rectangle~RectangleConfigs} Icon~IconConfigs\n * @property {number} image   - 图片地址\n * @property {number} imageWidth   - 图片宽度\n * @property {number} imageHeight   - 图片高度\n */\n\n/**\n * 图片单元\n * @description 图片单元可以绘制图片，图片加载后会自动重新绘制\n * @constructor Icon\n * @extends Rectangle\n * @param {Icon~IconConfigs} configs - 配置\n */\nclass Icon extends Rectangle {\n    constructor(configs) {\n        super(configs)\n        /** @member {CanvasImageSource}      - 图片 */\n        this.image = configs.image;\n        this.image.onload = () => {\n            this._jflow._render();\n            // requestAnimationFrame(() => {\n                \n            // })\n        }\n        /** @member {Icon~ImageBounding}      - 图片维度 */\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width,\n            height: configs.imageHeight ||  configs.height,\n        }\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        if(configs.image && !configs.image.complete) {\n            this.image.onload = () => {\n                this._jflow._render();\n                // requestAnimationFrame(() => {\n                //     this._jflow._render();\n                // })\n            }\n        }\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width || this.imageBounding.width,\n            height: configs.imageHeight ||  configs.height || this.imageBounding.height,\n        }\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        Rectangle.prototype.render.call(this, ctx);\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        if(this.opacity < 1) {\n            ctx.globalAlpha = this.opacity;\n        }\n        if(this.image.complete) {\n            ctx.drawImage(this.image, x, y, this.imageBounding.width, this.imageBounding.height);\n        }\n        ctx.restore();\n    }\n}\nexport default Icon;","import Rectangle from './shapes/rectangle';\n/**\n * @funtion domFactory\n * @param {Element} container - DOM容器\n */\n/**\n * DOM元素容器 配置\n * @typedef {Rectangle~Configs} ShadowDom~RectangleConfigs\n * @property {domFactory} createDocument - 宽\n */\n/**\n * DOM元素容器 内容可贴 DOM 元素，支持缩放平移\n * @constructor ShadowDom\n * @extends Rectangle\n * @param {ShadowDom~RectangleConfigs} configs\n */\nclass ShadowDom extends Rectangle {\n    constructor(configs) {\n        super(configs);\n        this.domFactory = configs.createDocument;\n        this._dom = null;\n    }\n\n    getRealWorldPosition() {\n        const b = this.getBoundingRect();\n        return this.calculateToRealWorld(b.slice(0, 2));\n    }\n\n    render(ctx) {\n        if(!this._dom && this.domFactory) {\n            requestAnimationFrame(() => {\n                if(!this._dom) {\n                    const container = document.createElement('div');\n                    const pos = this.getRealWorldPosition();\n                    const scale = this._jflow.scale;\n                    container.setAttribute('style', `\n                        position: absolute;\n                        width: ${this.width}px;\n                        height: ${this.height}px;\n                        transform-origin: left top;\n                        top: 0;\n                        left: 0;\n                        transform: translate(${pos[0]}px, ${pos[1]}px) scale(${scale});`);\n                    this._dom = container;\n                    this._jflow.DOMwrapper.appendChild(container);\n                    this.domFactory(container);\n                }\n            });\n        } else {\n            const pos = this.getRealWorldPosition();\n            const scale = this._jflow.scale;\n            this._dom.style.transform = `translate(${pos[0]}px, ${pos[1]}px) scale(${scale})`\n        }\n        super.render(ctx)\n    }    \n\n    onEnterViewbox() {\n        if(this._dom) {\n            this._dom.style.display = 'block';\n        }\n    }\n\n    onLeaveViewbox(){\n        if(this._dom) {\n            this._dom.style.display = 'none';\n        }\n    }\n\n    destroy() {\n        \n        if(this._dom) {\n            this._jflow.DOMwrapper.removeChild(this._dom);\n        }\n        super.destroy();\n    }\n}\nexport default ShadowDom;\n","import BaseLink from './base-link';\nimport { distToSegmentSquared, isPolyLineIntersectionRectange } from '../utils/functions';\nimport { APPROXIMATE } from '../utils/constance';\n/**\n * @typedef {BaseLink~Configs} Link~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n */\n/**\n * 直线\n * @constructor Link\n * @extends BaseLink\n * @param {Link~Configs} configs - 配置\n */\nclass Link extends BaseLink {\n    constructor(configs) {\n        super(configs);\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        this.fontSize      = configs.fontSize || '12px';\n        this.content       = configs.content || '';\n        this.lineDash      = configs.lineDash;\n        this.approximate  = configs.approximate || APPROXIMATE;\n    }\n\n    _calculateAnchorPoints() {\n        const p0 = this.from.calculateIntersection(this.to.getCenter());\n        const p1 = this.to.calculateIntersection(this.from.getCenter());\n        this._cachePoints = [p0, p1];\n        const dx = p1[0] - p0[0];\n        const dy = p1[1] - p0[1];\n        const angle = Math.atan2(dy, dx);\n        this._cacheAngle = angle;\n    }\n    \n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return true;\n    }\n\n    render(ctx) {\n        const [ p0, p1 ] = this._cachePoints;\n        const angle = this._cacheAngle;\n        const dx = p1[0] - p0[0];\n        const dy = p1[1] - p0[1];\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        ctx.beginPath();\n        if(this.content){ \n\n            ctx.textAlign = 'center';\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            ctx.textBaseline = 'middle';\n            const {\n                actualBoundingBoxLeft,\n                actualBoundingBoxRight,\n                fontBoundingBoxAscent,\n                fontBoundingBoxDescent\n            } = ctx.measureText(this.content);\n            const x = dx /2 + p0[0];\n            const y = dy /2 + p0[1];\n            ctx.fillText(this.content, x, y);\n            const width = Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) + 20;\n            const height = (Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent)) * 1.5;\n            ctx.beginPath();\n            let region = new Path2D();\n            region.rect(x - width/2 , y - height/2, width, height);\n            const rx = Math.min(p1[0], p0[0]) - 10;\n            const ry = Math.min(p1[1], p0[1]) - 10;\n            const rw = Math.abs(dx) + 20;\n            const rh = Math.abs(dy) + 20;\n            region.rect(rx , ry, rw, rh);\n            ctx.clip(region, \"evenodd\");\n        }\n\n\n        ctx.moveTo(p0[0], p0[1]);\n        ctx.lineTo(p1[0], p1[1]);\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        ctx.translate(p1[0], p1[1]);\n        ctx.rotate(angle);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-5, -4);\n        ctx.lineTo(-5, 4);\n        ctx.lineTo(0, 0);\n        ctx.fill();\n        ctx.rotate(-angle);\n        ctx.translate(-p1[0], -p1[1]);\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const [ start, end ] = this._cachePoints;\n        const dist = distToSegmentSquared(point, start, end)\n        return dist < this.approximate;\n    }\n}\n\nexport default Link;","import BaseLink from './base-link';\nimport { \n    polylinePoints, \n    distToSegmentSquared, \n    makeRadiusFromVector, \n    minIntersectionBetweenNodes,\n    isPolyLineIntersectionRectange\n} from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\n// import { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} PolyLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} radius        - 拐角弧度\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {String} isSelf        - 是否为自连接\n */\n/**\n * 方形折线\n * @constructor PolyLink\n * @extends BaseLink\n * @param {PolyLink~Configs} configs - 配置\n */\nclass PolyLink extends BaseLink {\n     /**\n     * 创建方形折线\n     * @param {PolyLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}   - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}   - 拐角弧度 */\n        this.radius        = configs.radius || 0;\n        /** @member {Number}   - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 10;\n        /** @member {Number}   - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 10;\n        /** @member {Number}    - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Number}    - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {Number}    - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}    - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {Number}    - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Number}    - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n\n        this.noArrow       = !!configs.noArrow \n    }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf){\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                this.toDir, \n                this.minSpanX, \n                this.minSpanY,\n                true);\n\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = polylinePoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir,\n                this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [meta.fromDir, meta.toDir]\n        }\n    }\n    \n    isInViewBox(br) {\n        if(this._static) {\n            return true;\n        }\n        this._calculateAnchorPoints();\n        return isPolyLineIntersectionRectange(this._cachePoints, br);\n    }\n\n    render(ctx) {\n        // this._calculateAnchorPoints();\n        const radius = this.radius;\n        const points = this._cachePoints;\n        const p = points[0];\n        const pEnd = points[points.length - 1];\n        const angleEnd = ((this._cacheAngle[1] + 2) % 4) * 90 * PIINRATIO;\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(p[0], p[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-p[0], -p[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(p[0], p[1]);\n        points.slice(1, points.length - 1).forEach((p, idx) => {\n            if(this.radius) {\n                const pLast = points[idx];\n                const pNext = points[idx+2];\n                const { p1, p2 } = makeRadiusFromVector(pLast, p, pNext, radius);\n                if(p1 && p2){\n                    ctx.lineTo(p1[0], p1[1]);\n                    ctx.quadraticCurveTo(p[0], p[1], p2[0], p2[1]);\n                } else {\n                    ctx.lineTo(p[0], p[1]);\n                }  \n            } else {\n                ctx.lineTo(p[0], p[1]);\n            }\n        });\n        ctx.lineTo(pEnd[0], pEnd[1]);\n\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        if(!this.noArrow) {\n            ctx.beginPath();\n            ctx.translate(pEnd[0], pEnd[1]);\n            ctx.rotate(angleEnd);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-5, -4);\n            ctx.lineTo(-5, 4);\n            ctx.lineTo(0, 0);\n            ctx.fill();\n            ctx.rotate(-angleEnd);\n            ctx.translate(-pEnd[0], -pEnd[1]);\n        }\n        if(this.content) {\n            ctx.beginPath();\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            switch (this.fromDir) {\n                case DIRECTION.BOTTOM:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 2, p[1] + 10);\n                    break;\n                case DIRECTION.RIGHT:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 10, p[1] - 2);\n                    break;\n                default:\n                    break;\n            }\n        }\n\n    }\n\n    isHit(point) {\n        if(this._static) {\n            return false;\n        }\n        if(!this._cachePoints) {\n            return false;\n        }\n        const points = this._cachePoints;\n        let lastP = points[0];\n        const remainPoints = points.slice(1)\n        do {\n            const currentP = remainPoints.shift();\n            if(currentP) {\n                const dist = distToSegmentSquared(point, lastP, currentP);\n                if(dist < this.approximate){\n                    return true;\n                }\n            }\n            lastP = currentP;\n        } while(lastP)\n\n        return false\n    }\n\n    cloneStatic() {\n        const t = new PolyLink({});\n        Object.assign(t, {\n            radius: this.radius,\n            _cachePoints: this._cachePoints,\n            _cacheAngle: this._cacheAngle,\n            backgroundColor: this.backgroundColor,\n            doubleLink: this.doubleLink,\n            radius: this.radius,\n            lineDash: this.lineDash,\n            noArrow: this.noArrow,\n            content: this.content,\n            fontSize: this.fontSize,\n            fontFamily: this.fontFamily,\n            fromDir: this.fromDir,\n            _static: true,\n        });\n        return t;\n    }\n}\n\nexport default PolyLink;","import BaseLink from './base-link';\nimport { bezierPoints, distToBezierSegmentSquared, getBezierAngle, minIntersectionBetweenNodes } from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\nimport { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} BezierLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {Number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {Boolean} isSelf        - 是否为自连接\n */\n/**\n * 贝塞尔曲线\n * @constructor BezierLink\n * @extends BaseLink\n * @param {BezierLink~Configs} configs - 配置\n */\nclass BezierLink extends BaseLink {\n     /**\n     * 创建贝塞尔曲线.\n     * @param {BezierLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}      - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}      - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 0;\n        /** @member {Number}      - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 0;\n        /** @member {Number[]}      - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Boolean}      - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {String}      - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}      - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {String}      - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Boolean}      - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n    }\n    \n    // getColor() {\n    //     if(this._isTargeting) {\n    //         return this.hoverStyle;\n    //     }\n    //     return this.defaultStyle;\n    // }\n    \n    // _calculateAnchorPoints() {\n    //     let start;\n    //     let end;\n    //     if(this.fromDir !== undefined) {\n    //         start = {\n    //             dir: this.fromDir,\n    //             p: this.from.getIntersectionsInFourDimension()[this.fromDir],\n    //         }\n    //     } else {\n    //         start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     }\n    //     if(this.toDir !== undefined) {\n    //         end = {\n    //             dir: this.toDir,\n    //             p: this.to.getIntersectionsInFourDimension()[this.toDir],\n    //         }\n    //     } else {\n    //         end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     }\n        \n        \n    //     // const start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     // const end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     const p1 = start.p;\n    //     const p2 = end.p;\n    //     const points = bezierPoints(p1, p2, start.dir, end.dir, this.anticlock);\n\n    //     this._cachePoints = [...p1, ...points]\n    // }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                DIRECTION.BOTTOM, \n                this.minSpanX, \n                this.minSpanY);\n\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, DIRECTION.BOTTOM]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = bezierPoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir);\n\n            this._cachePoints = [...meta.fromP, ...points];\n            this._cacheAngle = [meta.fromDir, meta.toDir];\n        }\n    }\n\n    render(ctx) {\n        this._calculateAnchorPoints();\n        const points = this._cachePoints;\n        const angle = getBezierAngle.apply(null, [1, ...points])\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-points[0], -points[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(points[0], points[1])\n        ctx.bezierCurveTo(...points.slice(2));\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n        ctx.beginPath();\n        ctx.translate(points[6], points[7]);\n        ctx.rotate(angle);\n        ctx.moveTo(5, 0);\n        ctx.lineTo(0, -4);\n        ctx.lineTo(0, 4);\n        ctx.lineTo(5, 0);\n        ctx.fill();\n        ctx.rotate(-angle);\n        ctx.translate(-points[6], -points[7]);\n        if(this.content) {\n            ctx.beginPath();\n            const hasFlip = points[0] > points[6];\n            let [x, y, angle] = bezierPoint(0.5, points);\n            ctx.translate(x, y);\n            ctx.rotate(angle);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            ctx.textAlign = 'center';\n            ctx.fillText(this.content, 0, -(parseInt(this.fontSize) || 12)/4);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.rotate(-angle);\n            ctx.translate(-x, -y);\n        }\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const points = this._cachePoints;\n        const dist = distToBezierSegmentSquared(point, points)\n        return dist < this.approximate;\n    }\n}\n\nexport default BezierLink;","/**\n * 线性布局配置\n * @typedef {Object} LinearLayout~Configs\n * @property {string} direction     - 排列方向 默认 vertical\n * @property {number} gap           - 边距, 默认是 5\n * @property {string} alignment     - 垂直排列方向对齐方式 默认 center\n * @property {string} justify       - 排列方向对齐方式 默认 center\n */\n/**\n    线性布局\n\n    排列方向\n    direction:\n        + vertical 从上至下排布\n        + horizontal 从左至右排布\n    \n    不重叠，中线对齐\n    只针对当前的 group\n\n    对齐方式\n    alignment: \n        + start 主轴左侧对齐\n        + center 主轴对齐\n        + end   主轴右侧对齐\n    justify: \n        + start 开始时对齐\n        + center 居中对齐\n        + end   末尾对齐\n        + space-between 平均分配空间对齐\n\n * @constructor LinearLayout\n * @implements {Layout}\n * @param {LinearLayout~Configs} configs - 配置\n */\n\nclass LinearLayout {\n    constructor(configs = {}) {\n        /** @member {string}  - 排列方向 默认 vertical */\n        this.direction =     configs.direction || 'vertical';\n        /** @member {number}  - 边距, 默认是 5 */\n        this.gap =           configs.gap ?? 5;\n        /** @member {string}  - 垂直排列方向对齐方式 默认 center */\n        this.alignment =     configs.alignment || 'center';\n        /** @member {string}  - 排列方向对齐方式 默认 center */\n        this.justify =       configs.justify || 'center';\n        // this.widthSetByParent =  configs.width === '100%'\n        this._rawConfigs = configs;\n    }\n\n\n    reflow(group) {\n        const stack = group._stack.filter(instance => instance.visible && !instance.absolutePosition);\n        const absoluteStack = group._stack.filter(instance => instance.visible && instance.absolutePosition)\n        const groupWidth = group.width - group.padding.left - group.padding.right;\n        if(this.direction === 'vertical') {\n            let reduceHeight = 0;\n            let lastInstanceHeight = 0;\n            let maxWidth = 0;\n            let allHeight = 0;\n            const childAll = stack.concat(absoluteStack);\n            childAll.forEach((instance, idx) =>  {\n                if(instance.display === 'block') {\n                    instance.width = 0;\n                    // instance.definedWidth = maxWidth;\n                    instance.resetChildrenPosition();\n                    instance.reflow();\n                    instance._getBoundingGroupRect();\n                }\n            });\n\n            stack.forEach((instance, idx) =>  {\n                \n                const { width, height } = instance.getBoundingDimension();\n                // console.log(height, instance.type);\n                const gap = (idx > 0 ? this.gap : 0);\n                if(instance.display !== 'outstretch') {\n                    maxWidth = Math.max(width, maxWidth);\n                }\n                allHeight += (height + gap);\n                reduceHeight += (height/2 + gap + lastInstanceHeight)\n                lastInstanceHeight = height / 2;\n                instance.anchor = [0, reduceHeight];\n            });\n            childAll.forEach((instance, idx) =>  {\n                if(instance.display === 'block') {\n                    // instance.definedWidth = maxWidth;\n                    instance.resetChildrenPosition();\n                    instance.width = maxWidth;\n                    instance.reflow();\n                    // instance._getBoundingGroupRect();\n                } else if(instance.display === 'outstretch') {\n                    const w = group._belongs.width - group._belongs.padding.left - group._belongs.padding.right;\n                    instance.resetChildrenPosition();\n                    instance.width = Math.max(w, maxWidth);\n                    instance.reflow();\n                }\n            });\n\n            maxWidth = Math.max(groupWidth, maxWidth);\n            \n            allHeight = allHeight/2;\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = -(maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                    // console.log(maxWidth, width, instance.anchor[0])\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = (maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n            if(this.alignment === 'center') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n        } \n        if(this.direction === 'horizontal') {\n            let reduceWidth = 0;\n            let lastInstanceWidth = 0;\n            let maxHeight = 0;\n            let allWidth = 0;\n            let allPureWidth = 0;\n            \n            stack.forEach((instance, idx) =>  {\n                const { width, height } = instance.getBoundingDimension();\n                const gap = (idx > 0 ? this.gap : 0);\n                maxHeight = Math.max(height, maxHeight);\n                allWidth += (width+gap);\n                allPureWidth += width;\n                reduceWidth += (width/2 + gap + lastInstanceWidth)\n                lastInstanceWidth = width / 2;\n                instance.anchor = [reduceWidth, 0]\n            });\n            if(this.justify === 'start') {\n                const withdraw = groupWidth/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                });  \n            }\n            if(this.justify === 'end') {\n                const withdraw = groupWidth/2 - allWidth;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += withdraw;\n                });  \n            }\n            if(this.justify === 'center') { \n                const withdraw = allWidth / 2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                })                \n            }\n            if(this.justify === 'space-between' && stack.length > 1) {\n                \n                const width = Math.max(groupWidth, allWidth);\n                const gapAverage = (width - allWidth) / (stack.length - 1);\n                const withdraw = width/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += ((gapAverage * idx) - withdraw);\n                });  \n            }\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = -(maxHeight - height) / 2;\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = (maxHeight - height) / 2;\n                })\n            }\n        }\n\n        if(absoluteStack.length) {\n            if(group.display === 'block') {\n                group.getBoundingDimension();\n            } else {\n                group._getBoundingGroupRect();\n            }\n            const WIDTH = group.width /2;\n            const HEIGHT = group.height /2;\n            absoluteStack.forEach(instance => {\n                instance.anchor = this._resolveAbsoluteAnchor(instance.absolutePosition, instance, WIDTH, HEIGHT);\n            })\n        }\n    }\n\n    _resolveAbsoluteAnchor(config, instance, w, h){\n        const { top, right, bottom, left } = config;\n        const { width, height } = instance.getBoundingDimension();\n        const hw = width / 2;\n        const hh = height / 2;\n        let y = 0;\n        let x = 0;\n        if(typeof top === 'number') {\n            y = top + hh - h;\n        }\n        if(typeof right === 'number') {\n            x = w - right - hw;\n        }\n        if(typeof bottom === 'number') {\n            y = h - bottom - hh;\n        }\n        if(typeof left === 'number') {\n            x = left + hw - w;\n        }\n        return [x, y]\n    }\n\n    clone() {\n        return new LinearLayout(this._rawConfigs);\n    }\n}\n\nexport default LinearLayout;","\n// import EventEmitter from '../../utils/EventEmitter';\nimport { DIRECTION } from '../../utils/constance';\nclass BaseNode {\n    constructor(source) {\n        this.source = source;\n        this.id = source.id;\n        this.type = source.type;\n        // this.isDraggable = true;\n        // this.getJflowInstance = undefined;\n        this.level = undefined;\n        this.sequence = undefined;\n        // this.isLocked = false;\n        this.isFree = false;\n        this.parent = undefined;\n        this.idx = undefined;\n        this.parentIterateType = undefined;\n        \n        this.hasEndPoint = false;\n        // source._getAstNode = () => this;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        this.level = level;\n        this.sequence = sequence;\n        this.spanX = 1;\n        this.spanY = 1;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            level, sequence,\n        }\n    }\n\n    makeLink(callback) {\n        return this;\n    }\n\n    makeEndpoint() { }\n\n    traverse(callback) {\n        callback(this);\n    }\n\n    getNodes(jflow) {\n        const nodes = [];\n        this.traverse(n => {\n            const renderNode = jflow.getRenderNodeBySource(n.source);\n            if(renderNode)\n                nodes.push(renderNode);\n        })\n        return nodes;\n    }\n\n    linkSource(source) {\n        this.parent.source[this.parentIterateType].splice(this.idx + 1, 0, source);\n    }\n\n    remove() {\n        this.parent.source[this.parentIterateType].splice(this.idx, 1);\n    }\n}\n\nclass Root extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.isroot = true;\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        const playgrounditerator = mapFunc('playground').bind(this)\n        this.playground = (source.playground || []).map((s, idx) => {\n            const n = playgrounditerator(s, idx);\n            n.isFree = true;\n            return n;\n        });\n    }\n\n    reflowBodyPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, sequence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    reflowPlaygroundPreCalculate(preCallback, callback) {\n        this.playground.forEach(node => {\n            preCallback(node)\n            node.reflowPreCalculate(0, 0, callback)\n        })\n    }\n\n\n    makeLink(callback) {\n        let last;\n        this.body.forEach(b => {\n            if(!last) {\n                last = b;\n                return;\n            }\n            callback({\n                from: last,\n                to: b,\n                part: 'body',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n\n        this.playground.forEach(n => {\n            n.makeLink(callback);\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n\n        this.playground.forEach(n => {\n            n.traverse(callback);\n        })\n    }\n}\n\nclass IfStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.isLocked = true;\n        this.hasEndPoint = true;\n    }\n    \n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        let c_spanX = 1;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        this.consequent.forEach((c, idx) => {   \n            const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n            c_spanX = Math.max(c_spanX, sx);\n            c_spanY += sy;\n            level += sy;\n        });\n        const nextSequeence = sequence + c_spanX;\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n        level = this.level + spanY - 1;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        this.consequent.forEach(c => {\n            callback({\n                from: lastc,\n                to: c,\n                part: 'consequent',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            });\n\n            c = c.makeLink(callback)\n            lastc = c;\n        })\n\n        callback({\n            from: lastc,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n        });\n\n        let lasta = this;\n        this.alternate.forEach(a => {\n            callback({\n                from: lasta,\n                to: a,\n                fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                part: 'alternate',\n            })\n            a = a.makeLink(callback)\n            lasta = a;\n        });\n        callback({\n            from: lasta,\n            to: this.Endpoint,\n            fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            toDir: DIRECTION.RIGHT,\n            part: 'alternate',\n        });\n\n        return this.Endpoint;\n    }\n\n    // makeEndpoint() {\n    //     const fakeSource = {\n    //         type: 'endpoint',\n    //         id: `${this.id}-endpoint`,\n    //     };\n    //     this.Endpoint = makeAST(fakeSource);\n    //     this.Endpoint.parent = this.parent;\n    //     this.Endpoint.idx = this.idx;\n    //     this.Endpoint.parentIterateType = this.parentIterateType;\n    //     return fakeSource;     \n    // }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n        console.log(this.Endpoint)\n        callback(this.Endpoint);\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.cases = (source.cases || []).map(mapFunc('case').bind(this))\n        if(this.cases.length) {\n            this.cases[this.cases.length - 1].lastCase = true;\n        }\n        this.isLocked = true;\n        this.hasEndPoint = true;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n\n        let c_spanX = 1;\n        let c_spanY = 0;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            level = this.level;\n            consequent.forEach(cc => {\n                const { spanX: sx, spanY: sy } = cc.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        \n        let s_spanX = c_spanX;\n        let s_spanY = 0;\n        this.cases.forEach((c, idx) => {\n            const nextSequeence = sequence + s_spanX;\n            let a_spanX = 0;\n            let a_spanY = 0;\n            level = this.level;\n            c.alternate.forEach(ca => {\n                const { spanX: sx, spanY: sy } = ca.reflowPreCalculate(level + 1, nextSequeence, callback);\n                a_spanX = Math.max(a_spanX, sx);\n                a_spanY += sy;\n                level += sy;\n            });\n            s_spanX += a_spanX;\n            s_spanY = Math.max(s_spanY, a_spanY);\n        });\n       \n        \n        spanX = Math.max(1, s_spanX);\n        spanY = Math.max(c_spanY, s_spanY);\n        level = this.level + spanY;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        spanY += 1 // 要算上自己\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            consequent.forEach((c, idx) => {\n                callback({\n                    from: lastc,\n                    to: c,\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'consequent',\n                });\n                lastc = c.makeLink(callback)\n            });\n        }\n        console.log(lastc)\n        callback({\n            from: lastc,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n        });\n\n        this.cases.forEach((c, idx) => {\n            let lasta = c;\n            c.alternate.forEach(a => {\n                callback({\n                    from: lasta,\n                    to: a,\n                    fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'alternate',\n                });\n                lasta = a.makeLink(callback)\n            })\n            \n            callback({\n                from: lasta,\n                to: this.Endpoint,\n                fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.RIGHT,\n                part: 'alternate',\n                minSpanX: 32 * (idx + 1),\n            });\n        });\n\n        return this.Endpoint;\n    }\n\n    // makeEndpoint() {\n    //     this.Endpoint = makeAST({\n    //         type: 'endpoint',\n    //         id: `${this.id}-endpoint`,\n    //     });\n    //     this.Endpoint.parent = this.parent;\n    //     this.Endpoint.parentIterateType = this.parentIterateType;     \n    //     this.Endpoint.idx = this.idx;\n    // }\n\n    traverse(callback) {\n        callback(this);\n        this.cases.forEach(n => {\n            n.traverse(callback);\n        });\n        callback(this.Endpoint);\n    }\n\n    getNodes(jflow) {\n        const nodes = [];\n        this.traverse(n => {\n            if(n.type === 'SwitchCase') return\n            const renderNode = jflow.getRenderNodeBySource(n.source);\n            if(renderNode)\n                nodes.push(renderNode);\n        })\n        return nodes;\n    }\n\n    linkSource(source, linkMeta) {\n        const cases = this.source.cases;\n        const consequent = cases[cases.length - 1].consequent;\n        consequent.unshift(source);\n    }\n}\n\nclass ForEachStatement extends BaseNode {\n    \n}\n\nclass WhileStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        this.isLocked = true\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        const nextSequeence = sequence + 1;\n        // level--;\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, nextSequeence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX + 1;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let last = this;\n        // const lastIdx = this.body.length - 1;\n        this.body.forEach((b, idx) => {\n            callback({\n                from: last,\n                to: b,\n                part: 'body',\n                fromDir: last === this ? DIRECTION.RIGHT: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n        callback({\n            from: last,\n            to: this,\n            part: 'body',\n            fromDir: last === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            anticlock: last === this,\n            toDir: DIRECTION.BOTTOM,\n            isSelf: true,\n            minSpanX: 20,\n            minSpanY: 20,\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchCase extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.lastCase = false;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        \n        let c_spanX = 0;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        if(this.lastCase) {\n            this.consequent.forEach((c, idx) => {\n                const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        const nextSequeence = sequence + Math.max(c_spanX, 1);\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n\n    // makeLink()\n}\n \nconst TYPE_MAPPING = {\n    IfStatement,\n    SwitchStatement,\n    SwitchCase,\n    ForEachStatement,\n    WhileStatement,\n    Root,\n    other: BaseNode,\n}\n\nfunction mapFunc(type)  {\n    return function(n, idx) {\n        const p = makeAST(n);\n        p.parent = this;\n        p.idx = idx;\n        p.parentIterateType = type;\n\n        // 重要！！！ weakMap 功能需要 endPoint source 保持一致\n        if(p.hasEndPoint) {\n            if(!n.__endpoint__) {\n                n.__endpoint__ = {\n                    type: 'endpoint',\n                    id: `${p.id}-endpoint`,\n                };\n            }\n            const e = makeAST(n.__endpoint__);\n            e.parent = this;\n            e.idx = idx;\n            e.parentIterateType = type;\n            p.Endpoint = e;\n        }\n        return p;\n    }\n}\nfunction makeAST(source) {\n    const type = source.type;\n    const Constructor = TYPE_MAPPING[type] || TYPE_MAPPING.other;\n    const node = new Constructor(source);\n    return node;\n}\nexport { \n    makeAST,\n}\n\n","import JFlowEvent from '../events'; \nimport { DIRECTION } from '../utils/constance';\nimport { makeAST } from './low-code-types/baseNode';\n\nfunction sqr(x) {\n    return x * x;\n}\nfunction dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n/**\n * @typedef {Object} LowcodeLayout~Configs\n * @property {number} linkLength - 最小连线长度\n * @property {number} gap       - 列间隙\n * @property {boolean} treeItemDraggable - 树上的是否可以拖动\n * @property {Object} ast       - 语法树\n */\n\n/**\n    lowcode layout\n\n    type: \n        + IfStatement,\n        + SwitchStatement,\n        + SwitchCase,\n        + ForEachStatement,\n        + WhileStatement,\n        + Root,\n        + other,\n    \n    * @implements {Layout}\n    * @param {LowcodeLayout~Configs} - 配置\n    \n */\nclass LowcodeLayout {\n    constructor(configs) {\n        /** @member {number}      - 最小连线长度 */\n        this.linkLength = configs.linkLength || 18;\n        /** @member {number}      - 列间隙 */\n        this.gap = configs.gap || 30;\n        /** @member {boolean}      - 树上的是否可以拖动 */\n        this.treeItemDraggable = configs.treeItemDraggable ?? true;\n        this.reOrder(configs.ast);\n        /** @member {boolean}      - true 需要检查元素拖动 */\n        this.static = true;\n    }\n    /**\n     * 从 ast 计算布局\n     * @param {AstNode} ast - ASL 树\n     */\n    reOrder(ast) {\n        this.ast = ast;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n\n        this.root = makeAST(this.ast)// new AstNode(this.ast, this.flowStack, true);\n        this.root.traverse((node) => {\n            if(node.parentIterateType !== 'playground') {\n                node.isDraggable = this.treeItemDraggable\n            }\n            this.flowStack.push({\n                type: node.type,\n                source: node.source,\n                layoutNode: node,\n            });\n        });\n\n        const layoutMapping = {\n            vertical: {},\n            horizontal: {},\n        };\n        const playgroundLayoutMapping = {}\n        this.root.reflowBodyPreCalculate(0, 0, (level, sequence, node) => {\n            if(!node.isroot) {\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            }\n        });\n\n        let currentTopNodeId;\n        this.root.reflowPlaygroundPreCalculate(\n            (topNode) => {\n                currentTopNodeId = topNode.id;\n                playgroundLayoutMapping[topNode.id] = {\n                    vertical: {},\n                    horizontal: {},\n                    node: topNode,\n                }\n            },\n            (level, sequence, node) => {\n                const layoutMapping = playgroundLayoutMapping[currentTopNodeId];\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            })\n\n        this.layoutMapping = layoutMapping;\n        this.playgroundLayoutMapping = playgroundLayoutMapping;\n        this.root.makeLink((configs) => {\n            this.flowLinkStack.push(configs)\n        })\n    }\n\n    staticCheck(instance, jflow) {\n\n        if(instance._layoutNode && instance._layoutNode.isFree) {\n            return false;\n        }\n        const finded = jflow._linkStack.find(l => l.from === instance || l.to === instance);\n        if(!finded) {\n            return false;\n        }\n        const nowAnchor = instance.anchor.slice();\n        jflow.reflow();\n        if(jflow._linkStack.length < 2) return;\n        const currentAnchor = instance.anchor;\n        const d = dist2(nowAnchor, currentAnchor);\n        if(d > 1000) {\n            instance.dispatchEvent(new JFlowEvent('outOfFlow', {\n                anchor: nowAnchor,\n                instance,\n                jflow,\n                point: nowAnchor,\n            }))\n            return true;\n        }\n        return false;\n    }\n\n    reflowByMapping(jflow, layoutMapping, x = 0, y = 0) {\n        const linkLength = this.linkLength;\n        const gap = this.gap;\n        const {\n            vertical: verticalMapping,\n            horizontal: horizontalMapping,\n        } = layoutMapping;\n\n        let reduceWidth = x;\n        Object.keys(horizontalMapping).forEach((columnNumber, idx) => {\n            const column = horizontalMapping[columnNumber];\n            let rowWidth = 0;\n            const rows = Object.keys(column)\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source) // ast.getJflowInstance();\n                const { width } = instance.getBoundingDimension();\n                rowWidth = Math.max(width, rowWidth);\n            });\n            reduceWidth += idx === 0 ? 0: rowWidth/2\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                instance.anchor[0] = reduceWidth;\n            });\n            reduceWidth += (rowWidth/2 + gap) ;\n        });\n\n        let reduceHeight = y;\n        // console.log(verticalMapping)\n        Object.keys(verticalMapping).forEach((rowNumber, idx) => {\n            const row = verticalMapping[rowNumber];\n            let rowHeight = 0;\n            const columns = Object.keys(row)\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                const { height, width } = instance.getBoundingDimension();\n                rowHeight = Math.max(height, rowHeight);\n            });\n            reduceHeight += idx === 0 ? 0 : rowHeight/2;\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                instance.anchor[1] = reduceHeight;\n            });\n            reduceHeight += (rowHeight/2 + linkLength) ;\n        });\n        \n    }\n\n    findLayoutNode(configs) {\n        const finded = this.flowStack.find(node => node.configs === configs);\n        if(finded) {\n            return finded.layoutMeta;\n        }\n        return null;\n    }\n\n    reflow(jflow){\n        this.reflowByMapping(jflow, this.layoutMapping);\n        Object.values(this.playgroundLayoutMapping).forEach(mapping => {\n            // const node = mapping.node.getJflowInstance();\n            const node = jflow.getRenderNodeBySource(mapping.node.source)\n            this.reflowByMapping(jflow, mapping, node.anchor[0], node.anchor[1]);\n        })\n    }\n}\n\nexport default LowcodeLayout;","import { DIRECTION } from '../../utils/constance';\nfunction getRelationShip(p1, p2) {\n    if(p1.type === 'Array' && p2.type !== 'Array') {\n        return '多对一'\n    }\n    if(p2.type === 'Array' && p1.type !== 'Array') {\n        return '一对多'\n    }\n    if(p1.type === 'Array' && p2.type === 'Array') {\n        return '多对多'\n    }\n    if(p1.type !== 'Array' && p2.type !== 'Array') {\n        return '一对一'\n    }\n}\n/**\n    ER property Node\n    * @implements {LayoutNode}\n */\nclass ERProperty {\n    constructor(source, node, isNavigation) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERProperty';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        this.node = node;\n        this.ref = source.ref;\n        this.type = source.type;\n        this.association = source.association;\n        /** @member {String}      - 唯一标识 */\n        this.id = isNavigation ? `${node.id}-${source.name}-navigation` : `${node.id}-${source.name}`\n        this._selfLink = false;\n        this.parentPropertyRef = undefined;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        this.doubleRef = undefined;\n    }\n}\n/**\n ER Node\n * @implements {LayoutNode}\n * @param {Object} source\n */\nclass ERNode { \n    constructor(source) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERNode';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        /** @member {String}      - 唯一标识 */\n        this.id = source.name;\n        /** @member {Boolean}      - true, 可拖动 */\n        this.isDraggable = true;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        // this.adjacencyList = []\n        this.propertyList = source.propertyList.map(p => new ERProperty(p, this));\n        this.navigationPropertyList = source.navigationPropertyList.map(p => new ERProperty(p, this, true))\n        this.idProperty = this.propertyList.find(p => p.source.name === 'id');\n        // this.VertexNameProperty = this.propertyList.find(p => p.source.type === 'VertexName');\n    }\n\n    _traverseProperty(nodeMap) {\n        this.propertyList.forEach(property => {\n            const idRef = property.source.idRef; // 决定链接的对象\n            const isParentRef = property.source.isParentRef; // 决定连接的性质\n            if(idRef && property.source.type !== 'Array' && nodeMap[idRef]) {\n                const parentRef = nodeMap[idRef];\n                if (property.source.isParentRef) {\n                    this.parentRef = parentRef;\n                }\n                if (parentRef === this) {\n                    property._selfLink = true;\n                }\n                property.parentPropertyRef = parentRef.idProperty;\n            }\n        });\n        this.navigationPropertyList.forEach(property => {\n            const objectRef = property.source.objectRef;\n            if(objectRef && nodeMap[objectRef]) {\n                const node = nodeMap[objectRef];\n                const targetProperty = node.navigationPropertyList.find(n => n.source.objectRef === this.id)\n                if (node === this) {\n                    property._selfLink = true;\n                }\n                property.doubleRef = targetProperty;\n            }\n        })\n        \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.propertyList.forEach(property => {\n            if(property.ref instanceof ERNode) {\n                callback(property);\n            }\n        })\n    }\n\n    makeLink(callback) {\n        this.propertyList.forEach(property => {\n            if(property.parentPropertyRef instanceof ERProperty) {\n                const toProperty = property.parentPropertyRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.LEFT,\n                        content: property.association,\n                        minSpanX: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                }\n            }\n        });\n\n        \n        this.navigationPropertyList.forEach(property => {\n            if(property.doubleRef instanceof ERProperty) {\n                const toProperty = property.doubleRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.TOP,\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        minSpanX: 80,\n                        minSpanY: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                            isObjectRef: true,\n                        }\n                    });\n                }\n            }\n        })\n    }\n}\n\nfunction makeER(source) {\n    const nodeMap = {};\n    const nodes = source.map(s => {\n        const node = new ERNode(s);\n        nodeMap[s.name] = node\n        return node;\n    });\n    nodes.forEach(node => {\n        node._traverseProperty(nodeMap);\n    });\n    return nodes;\n}\nexport { \n    makeER,\n}","\nimport { makeER } from './er-node';\n/**\n * ER source\n * @typedef {Object} ERLayout~sourceConfigs\n * @property {string} type - node\n * @property {string} id - 唯一标识\n * @property {Object[]} properties - 描述\n */\n/**\n * ER布局数据源配置\n * @typedef {Object} ERLayout~Configs\n * @property {ERLayout~sourceConfigs[]} entityRelationship - 关系\n */\n/**\n    ER layout\n\n    Entity Relationship Structure\n    tree = [\n        {\n            type: 'node',\n            id: 'uniqueID',\n            properties: [\n                {\n                    name: 'xxxx',\n                    ref: someUniqueId,\n                    description: 'xxxxxx',\n                },\n                ...\n            ]\n        },\n        ...\n    ]\n    \n    * @implements {Layout}\n */\n\nclass ERLayout {\n    constructor(configs) {\n        /** @member {boolean}      - false 不需要布局变化检查 */\n        this.static = false;\n        /** @member {Layout~NodeMeta[]}      - 布局节点单元数组 */\n        this.flowStack = [];\n        /** @member {Layout~LinkMeta[]}      - 布局连线单元数组 */\n        this.flowLinkStack = [];\n        /** @member {LayoutNode[]}      - 布局节点数组 */\n        this.erNodes = [];\n        this.reOrder(configs.entityRelationship);\n    }\n    /**\n     * 从 tree 计算布局\n     * @param {AstNode} tree - ER 树\n     */\n    reOrder(er) {\n        this.er = er;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n        const nodes = makeER(this.er);\n        const idMap = [];\n        nodes.forEach(node => {\n            node.traverse((n) => {\n                this.flowStack.push({\n                    type: n.type,\n                    configs: n.source,\n                    layoutMeta: n,\n                })\n            });\n            node.makeLink(configs => {\n                const {\n                    from: property,\n                    to: toProperty,\n                    meta,\n                } = configs;\n                if(meta.isObjectRef) {\n                    const id1 = `${property}-${toProperty}`;\n                    const id2 = `${toProperty}-${property}`;\n                    \n                    const fromMeta = meta.from;\n                    if(idMap.includes(id1) || idMap.includes(id2)) {\n                        return;\n                    }\n                    if(!fromMeta.source.isParentRef) {  \n                        idMap.push(id1);\n                        idMap.push(id2);\n                        this.flowLinkStack.push(configs)\n                    }\n                } else {\n                    this.flowLinkStack.push(configs)\n                }\n               \n            })\n        });\n        this.erNodes = nodes;\n    }\n\n    staticCheck(instance, jflow) {\n        return false;\n    }\n\n    reflow(jflow){\n        const links = this.flowLinkStack;\n        const nodes = this.erNodes;\n        let x = 0;\n        const lineMapping = {};\n        const size = 1000;\n        function computeNodeAnchor(node, recorded = []) {\n            let relativeAnchor = [0, 0];\n            \n            \n            if (node.parentRef) {\n                if(recorded.includes(node.parentRef)) {\n                    // debugger;\n                    return [\n                        relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                        relativeAnchor[1]\n                    ];\n                }\n                recorded.push(node.parentRef);\n                \n                relativeAnchor = computeNodeAnchor(node.parentRef, recorded);\n                return [\n                    relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                    relativeAnchor[1] + 600,\n                ];\n            } else {\n                return relativeAnchor;\n            }\n        }\n        this.erNodes.forEach(node => {\n            const instance = node.getJflowInstance();\n            const [nx, ny] = computeNodeAnchor(node);\n            if(!lineMapping[ny]) {\n                lineMapping[ny] = [];\n            }\n            lineMapping[ny].push(node);\n            instance.anchor = [nx + lineMapping[ny].length * 500, ny];\n            x+=300\n        });\n        // debugger\n        // // Kahn’s Algorithm\n        // // Calcuate the incoming degree of each vertex\n        // const vertices = nodes.slice();\n        // debugger\n        // const inDegree = {};\n        // vertices.forEach(v => {\n        //     v.adjacencyList.forEach(p => {\n        //         const name = p.name;\n        //         inDegree[name] = inDegree[name] + 1 || 1;\n        //     })\n            \n        // })\n        // console.log(inDegree)\n        // debugger\n\n        // // Create a queue which stores the vertex without dependencies\n        // const queue = vertices.filter((v) => !inDegree[v.name]);\n        // console.log(queue)\n        // debugger\n        // const topNums = {};\n        // let index = 0;\n        // while (queue.length) {\n        //     const v = queue.shift();\n        //     topNums[v.name] = index++;\n        //     v.adjacencyList.forEach(neighbor => {\n        //         const name = neighbor.name;\n        //         inDegree[name]--;\n        //         if (inDegree[name] === 0) {\n        //             queue.push(neighbor);\n        //         }\n        //     });\n        // }\n        // if (index !== vertices.length) {\n        //     console.log(\"Detect a cycle\");\n        // }\n        // console.log(topNums);\n    }\n}\n\nexport default ERLayout;","import Node from './node';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport JFlowEvent from '../events/index';\nimport { requestCacheCanvas } from '../utils/canvas';\n\nexport class TextElement {\n    constructor(type, source) {\n        this.type = type;\n        this.source = source;\n        this.needWrap = false;\n        this.width = 0;\n        this.reduceWidth = 0;\n        this.height = 0;\n        this.anchorX = 0;\n        this.anchorY = 0;\n        this.dirty = true;\n    }\n\n    shift(offset, step, isTail) {\n        if(this.type === 'text') {\n            const content = this.source;\n            const l = content.length;\n            const nextOffset = offset + step;\n            if(nextOffset < 0) {\n                return 'prev';\n            }\n            if(nextOffset > l ){//- ((isTail || this.needWrap) ? 0 : 1)) {\n                return 'next';\n            }\n            return 'self';\n        } else {\n            if(step > 0) {\n                return 'next';\n            } \n            if(step < 0){\n                return 'prev';\n            }\n        }\n    }\n\n    tailOffset() {\n        if(this.type === 'text') {\n            if(this.needWrap){\n                return this.source.length;\n            } else {\n                return Math.max(0, this.source.length - 1);\n            }\n        } else {\n            return 0;\n        }\n    }\n\n    headOffset() {\n        return 0;\n    }\n}\n\nclass TextGroup extends Node {\n    constructor(configs) {\n        super(configs);\n        this.initStack(configs);\n        this.initLayout(configs);\n\n        this._lines = [];\n\n        this.textColor = configs.textColor || 'transparent';\n        this.fontFamily = configs.fontFamily || '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        this.fontSize = configs.fontSize || '28px';\n        this.fontWeight = configs.fontWeight || '';\n        this.elementSpace = configs.elementSpace || 5;\n        this.lineSpace = configs.lineSpace || 5;\n        this.resolver = () => {\n            const elements = configs.resolver();\n            if(elements[elements.length-1].type !== 'text') {\n                elements.push(new TextElement('text', ''))\n            }\n            return elements;\n        }\n        this._textElements = this.resolver();\n\n        this._status = {\n            editing: false,\n            dragover: false,\n            cursorshow: true,\n            cursoranime: null,\n            lastElapsed: 0,\n            refreshElapsed: false,\n        }\n        this._cursor = {\n            row: 0,\n            column: [0,0],\n        }\n        this._makeFunctional();\n    }\n\n    get currentLineHeight() {\n        return this.lineHeight || parseInt(this.fontSize);\n    }\n\n    // 外部输入    \n    setConfig(configs) {\n        super.setConfig(configs);\n        \n    }\n\n    refreshTextElements() {\n        this._textElements = this.resolver();\n    }\n\n    refresh() {\n        this.recalculateUp();\n        this._jflow._render();\n    }\n\n    getBoundingDimension() {\n        return {\n            width: this.width,\n            height: this.height,\n        } \n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        } else if(this.opacity !== 1) {\n            ctx.globalAlpha = this.opacity;\n        }\n        const [cx, cy] = this.anchor;\n        const width = this.width;\n        const height = this.height;\n        const jflow = this._jflow;\n        ctx.translate(cx, cy);\n        ctx.beginPath();\n        ctx.rect(-width/2, -height/2, width, height);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.font = `${this.fontWeight} ${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = this.textColor;\n        this._lines.forEach(line => {\n            const { elements } = line;\n            elements.forEach(el => {\n                if(el.type === 'text') {\n                    ctx.fillText(el.source, el.anchorX, el.anchorY)\n                } \n            })\n        })\n        this._textElements.forEach(elem => {\n            if(elem.type !== 'text') {\n                const instance = jflow.getRenderNodeBySource(elem.source);\n                if(instance.visible) {\n                    ctx.save();\n                    instance.render(ctx);\n                    ctx.restore();\n                }\n            }\n        })\n\n        if(this._status.cursorshow && (this._status.editing || this._status.dragover)) {\n            const { row, column } = this._cursor;\n            const { elements, anchorY } = this._lines[row];\n            const [elemidx, offset] = column;\n            const meta = elements[elemidx];\n            let cw;\n            if(meta.type === 'text') {\n                const c = meta.source.substring(0, offset);\n                cw = meta.anchorX - meta.width/2 + ctx.measureText(c).width\n            } else {\n                cw = meta.anchorX - meta.width/2\n            }\n            ctx.beginPath();\n            ctx.moveTo(cw, anchorY - 8);\n            ctx.lineTo(cw, anchorY + 8);\n            ctx.lineWidth = 2;\n            ctx.strokeStyle = '#60CFC4';\n            ctx.stroke();\n        }\n\n        \n          \n        ctx.translate(-cx, -cy);\n        \n\n        ctx.restore();\n    }\n\n    _makeFunctional() {\n        let inputElement;\n        const blurHandler = (event) => {\n            this._status.editing = false;\n            if(inputElement) {\n                inputElement.remove();\n            }\n            if(this._belongs) {\n                this._jflow._render();\n            } \n        };\n        this.addEventListener('dblclick', (event) => {\n            if(event.currentTarget !== this) {\n                return\n            }\n            event.detail.bubbles = false;\n            const point = this._currentp;\n            const jflow = this._jflow;\n            if(this._status.editing) {\n                // this._positionToCursorOffset(point);\n            } else {   \n                this._positionToCursorOffset(point);\n                inputElement = createInputElement(this._controlCallback.bind(this));\n                const wrapper = jflow.DOMwrapper;\n                wrapper.append(inputElement);  \n                inputElement.focus();      \n                jflow.setFocusInstance(this);\n                this._status.editing = true;   \n                \n                this._status.cursoranime = jflow.requestJFlowAnime((elapsed) => {\n                    const lastElapsed = this._status.lastElapsed;\n                    if(this._status.refreshElapsed) {\n                        this._status.lastElapsed = elapsed;\n                        this._status.refreshElapsed = false;\n                    }\n                    if(elapsed - lastElapsed > 500) {\n                        this._status.cursorshow = !this._status.cursorshow;\n                        this._status.lastElapsed = elapsed;\n                    } \n                }) \n            }\n        });\n\n        this.addEventListener('click', (event) => {\n            if(this._status.editing) {\n                event.detail.bubbles = false;\n                const point = this._currentp;\n                this._positionToCursorOffset(point);\n                inputElement.focus();   \n                this._refreshCursor();   \n            }\n        })\n        this.addEventListener('blur', (event) => {\n            blurHandler(event);\n            this.dispatchEvent(new JFlowEvent('change', {\n                target: this,\n                textElements: this._textElements.slice(),\n            }));\n            this._status.cursoranime.cancel()\n            Object.assign(this._status, {\n                cursorshow: true,\n                cursoranime: null,\n                lastElapsed: 0,\n            })\n            this._status.cursorshow = true;\n            this._status.cursoranime = null;\n        })\n        this.addEventListener('dragenter', () => {\n            const point = this._currentp;\n            this._positionToCursorOffset(point);\n            this._status.dragover = true;\n        })\n        this.addEventListener('dragover', () => {\n            const point = this._currentp;\n            this._positionToCursorOffset(point);\n        });\n        this.addEventListener('dragleave', () => {\n            this._status.dragover = false;\n        });\n        this.addEventListener('drop', (event) => {\n            event.detail.bubbles = false;\n            this._status.dragover = false;\n            const {\n                row, column,\n            } = this._cursor;\n    \n            const meta = this._lines[row];\n            let [elem_idx, offset] = column;\n            let element = meta.elements[elem_idx];\n            let preElem = meta.elements[elem_idx-1];\n            let idx;\n            if(element.type !== 'text') {\n                if(preElem?.type ==='text'){\n                    offset = preElem.source.length;\n                    idx = this._textElements.findIndex(el => el === preElem);\n                } else {\n                    idx = this._textElements.findIndex(el => el === element);\n                }\n            } else {\n                idx = this._textElements.findIndex(el => el === element);\n            }\n            this.dispatchEvent(new JFlowEvent('insert', {\n                ...event.detail,\n                textElements: this._textElements.slice(),\n                idx, offset,\n            }));\n        })\n    }\n\n    _positionToCursorOffset(point) {\n        const [x, y] = point;\n        const [x0, y0] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const offsetX = x - x0 + w;\n        const offsetY = y - y0 + h;\n        let lineNumber = 0;\n        const lines = this._lines;\n        while(lineNumber < lines.length) {\n            if(lines[lineNumber].reduceHeight > offsetY) {\n                break;\n            }\n            lineNumber ++;\n        }\n\n        this._cursor.row = lineNumber;\n        const currLine = lines[lineNumber];\n        const elements = currLine.elements;\n        if(offsetX >= currLine.width) {\n            const elem = elements[elements.length - 1];\n            let q = 0;\n            if(elem.type === 'text') {\n                q = elem.source.length;\n            } \n            this._cursor.column = [elements.length - 1, q]\n        } else {\n            let elem_idx = 0;\n            let last_c = 0;\n            let _c = elements[elem_idx].width; \n            while(elem_idx < elements.length -1) {\n                if(_c > offsetX) {\n                    break;\n                }\n                last_c = _c;\n                elem_idx++;\n                _c += elements[elem_idx].width;\n            }\n\n            const textmeta = elements[elem_idx];\n            if(textmeta.type === 'text') {\n                const offx = offsetX - last_c;\n                const idx = this._calculateOffsetByWidth(offx, textmeta)\n                this._cursor.column = [elem_idx, idx];\n            } else {\n                this._cursor.column = [elem_idx, 0];\n            }\n        }\n    }\n\n    _calculateOffsetByWidth(offx, textmeta) {\n        const content = textmeta.source;\n        const maxL = content.length - 1;\n        let idx = Math.floor(offx / textmeta.width);\n        requestCacheCanvas((ctx) => {\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            let g1, g2;\n            do {\n                const c0 = content.substring(0, idx-1);\n                const c1 = content.substring(0, idx);\n                const c2 = content.substring(0, idx+1);\n                const w0 = ctx.measureText(c0).width;\n                const w1 = ctx.measureText(c1).width;\n                const w2 = ctx.measureText(c2).width;\n                g1 = (w1 - w0)/2 + w0;\n                g2 = (w2 - w1)/2 + w1;\n                if(g2 < offx) {\n                    idx+=1\n                } else if(g1 > offx) {\n                    idx-=1\n                } else if(g1 <= offx && g2 >= offx) {\n                    break;\n                }\n            } while(idx >= 0 && idx <= maxL);\n        });\n        return idx;\n    }\n\n    _refreshCursor() {\n        Object.assign(this._status, {\n            cursorshow: true,\n            refreshElapsed: true,\n        });\n    }\n\n    _controlCallback(op, data) {\n        this._refreshCursor();\n        switch(op){\n            case \"Input\":\n            case \"compositionstart\":\n            case \"compositionupdate\":\n            case \"compositionend\":\n            case \"Enter\":\n            case \"Backspace\":\n                this._inputControl(op, data);\n                break;\n            case \"ArrowLeft\":\n                this._onArrowLeft();\n                break;\n            case \"ArrowRight\":\n                this._onArrowRight();\n                break;\n            case \"ArrowDown\":\n                this._onArrowDown();\n                break;\n            case \"ArrowUp\":\n                this._onArrowUp();\n                break;\n            default:\n                break;\n        }\n    }\n    // 内部输入\n    _inputControl(op, data) {\n        const {\n            row, column,\n        } = this._cursor;\n\n        const meta = this._lines[row];\n        let [elem_idx, offset] = column;\n        let element = meta.elements[elem_idx];\n        let preElem = meta.elements[elem_idx-1];\n        let content = '';\n        if(element.type === 'text') {\n            content = element.source;\n        } else if(preElem?.type ==='text'){\n            content = preElem.source;\n            element = preElem;\n            offset = content.length;\n            this._cursor.column[0] -= 1;\n            this._cursor.column[1] = content.length;\n        } else {\n            const newElement = new TextElement('text', '');\n            const idx = this._textElements.findIndex(el => el === element);\n            this._textElements.splice(idx, 0, newElement);\n            element = newElement;\n        }\n\n        let preContent = content.substring(0, offset);\n        let afterContent \n        if(this.cacheIdx) {\n            afterContent = content.substring(this.cacheIdx[1]);\n        } else {\n            afterContent = content.substring(offset);\n        }\n        \n        switch(op){\n            case \"Input\":\n                preContent += data;\n                column[1] += data.length;\n                element.source = preContent + afterContent;\n                element.dirty = true;\n                break;\n            case \"compositionstart\":\n                this.cacheIdx = [preContent.length, preContent.length];\n                break;\n            case \"compositionupdate\":\n                preContent = preContent.substring(0, this.cacheIdx[0]);\n                preContent += data;\n                element.source = preContent + afterContent;\n                element.dirty = true;\n                column[1] = this.cacheIdx[0] + data.length;\n                this.cacheIdx[1] = this.cacheIdx[0] + data.length;\n                break;\n            case \"compositionend\":\n                preContent = preContent.substring(0, this.cacheIdx[0]);\n                column[1] = this.cacheIdx[0] + data.length;\n                this.cacheIdx = null;\n                preContent += data;\n                element.source = preContent + afterContent;\n                element.dirty = true;\n                break;\n            case \"Enter\":\n                element.source = preContent;\n                element.dirty = true;\n                element.needWrap = true;\n                const t = new TextElement('text', afterContent);\n                const idx = this._textElements.findIndex(el => el === element);\n                t.needWrap = (idx !== this._textElements.length - 1)\n                this._textElements.splice(idx+1, 0, t);\n                this._cursor.row += 1;\n                this._cursor.column = [0, 0];\n                break;\n            case \"Backspace\":\n                const result = element.shift(offset, -1);\n                switch(result) {\n                    case 'prev':\n                        let idx = this._textElements.findIndex(el => el === element);\n                        if(elem_idx > 0) {\n                            // 行内\n                            this._textElements.splice(idx-1, 1);\n                            idx -= 1;\n                            element.source = afterContent;\n                            element.dirty = true;\n                            const offset = this._blandAdjacentElement(this._textElements[idx-1], element, idx);\n                            this._cursor.column = [elem_idx - (offset > 0?2:1), offset];\n                            \n                        } else if(idx > 0) {\n                            // 换行了\n                            const preRow = row - 1;\n                            const preElemidx = this._lines[preRow].elements.length - 1;\n                            const offset = this._blandAdjacentElement(this._textElements[idx-1], element, idx);\n                            this._cursor.row = preRow;\n                            this._cursor.column = [preElemidx, offset];\n                        }\n\n                        break;\n                    case 'self':\n                        preContent = preContent.substring(0, preContent.length - 1);\n                        column[1] -= 1;\n                        element.source = preContent + afterContent;\n                        element.dirty = true;\n                        break;\n                }\n                break;\n        }\n        \n        this.recalculateUp();\n        this._jflow._render();\n    }\n\n    _onArrowLeft() {\n        const { row, column } = this._cursor;\n        const [elemidx, offset] = column;\n        const elements = this._lines[row].elements;\n        const element = elements[elemidx];\n        const idx = this._textElements.findIndex(el => el === element);\n        const result = element.shift(offset, -1);\n        switch(result) {\n            case 'prev':\n                if(elemidx > 0) {\n                    const el = elements[elemidx - 1];\n                    this._cursor.column = [elemidx - 1, el.tailOffset()];\n                } else if(idx > 0) {\n                    const preRow = row - 1;\n                    const preElemidx = this._lines[preRow].elements.length - 1\n                    const offset = this._textElements[idx-1].tailOffset();\n                    this._cursor.row = preRow;\n                    this._cursor.column = [preElemidx, offset];\n                }\n                this._jflow._render();\n                break;\n            case 'self':\n                column[1] -= 1;\n                this._jflow._render();\n                break;\n        }\n    }\n\n    _onArrowRight() {\n        const { row, column } = this._cursor;\n        const [elemidx, offset] = column;\n        const elements = this._lines[row].elements;\n        const element = elements[elemidx];\n        const idx = this._textElements.findIndex(el => el === element);\n        const result = element.shift(offset, 1, idx === this._textElements.length-1);\n        \n        switch(result) {\n            case 'next':\n                if(elemidx < elements.length-1) {\n                    const el = elements[elemidx + 1];\n                    if(element.type === 'text' && el.type !== 'text') {\n                        this._cursor.column = [elemidx + 2, el.headOffset()];\n                    } else {\n                        this._cursor.column = [elemidx + 1, el.headOffset()];\n                    }\n                } else if(idx < this._textElements.length-1) {\n                    const afterRow = row + 1;\n                    const offset = this._textElements[idx + 1].headOffset();\n                    this._cursor.row = afterRow;\n                    this._cursor.column = [0, offset];\n                }\n                this._jflow._render();\n                break;\n            case 'self':\n                column[1] += 1;\n                this._jflow._render();\n                break;\n        }\n    }\n\n    _onArrowDown() {\n        const { row } = this._cursor;\n        const rowlength = this._lines.length;\n        if(row + 1 < rowlength){\n            this._ArrowVerticalHanlder(row + 1);\n        }\n    }\n\n    _onArrowUp() {\n        const { row } = this._cursor;\n        if(row - 1 > -1){\n            this._ArrowVerticalHanlder(row - 1);\n        }\n    }\n\n    _ArrowVerticalHanlder(nextRow) {\n        const { row, column } = this._cursor;\n        const [elemidx, offset] = column;\n        let currElem = this._lines[row].elements[elemidx];\n        let currElemReduceWidth = currElem.reduceWidth;\n        if(offset > 0) {\n            requestCacheCanvas((ctx) => {\n                ctx.font = `${this.fontSize} ${this.fontFamily}`;\n                currElemReduceWidth += ctx.measureText(currElem.source.substring(0, offset)).width;\n            });\n        }\n        const nextLine = this._lines[nextRow];\n        if(nextLine.width < currElemReduceWidth) {\n            const i = nextLine.elements.length-1;\n            const elem = nextLine.elements[i];\n            this._cursor.row = nextRow;\n            this._cursor.column = [i, elem.tailOffset()];\n        } else {\n            const t = nextLine.elements.slice();\n            let i = 0;\n            while(t.length) {\n                const elem = t.shift();\n                if(elem.reduceWidth + elem.width > currElemReduceWidth) {\n                    const l = currElemReduceWidth - elem.reduceWidth;\n                    if(elem.type === 'text') {\n                        const offset = this._calculateOffsetByWidth(l, elem);\n                        this._cursor.row = nextRow;\n                        this._cursor.column = [i, offset];\n                    } else {\n                        this._cursor.row = nextRow;\n                        if(l < elem.width/2) {\n                            const preElem = elem[i-1];\n                            if(preElem?.type === 'text') {\n                                this._cursor.column = [i-1, elem.tailOffset()];\n                            } else {\n                                this._cursor.column = [i, elem.headOffset()];\n                            }\n                        } else {\n                            // const afterElem = elem[i+1];\n                            this._cursor.column = [i+1, elem.headOffset()];\n                        }\n                        \n                    }\n                    break;\n                }\n                i++;\n            }\n        }\n        this._jflow._render();\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    _calculatePointBack(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this.anchor;\n        const p = [gx - cx, gy - cy]\n        return p\n    }\n\n    isHit(point, condition) {\n        const p = this._calculatePointBack(point);\n        const jflow = this._jflow;\n        this._currentp = p; // 暂存，为了后续计算别的位置\n        let validInstance = [];\n        this._textElements.forEach(elem => {\n            if(elem.type !== 'text') {\n                const instance = jflow.getRenderNodeBySource(elem.source);\n                if(instance.visible) {\n                    validInstance.push(instance);\n                }\n            }\n        })\n        const target = this._stack.checkHit(p, condition, (i) => validInstance.includes(i));\n        \n        if(target) return target;\n\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        return point[0] > anchor[0] - w\n            && point[0] < anchor[0] + w\n            && point[1] > anchor[1] - h\n            && point[1] < anchor[1] + h;\n    }\n\n    _blandAdjacentElement(elem1, elem2, idx) {\n        if(!elem1) {\n            return 0;\n        }\n        if(elem1.type === 'text' && elem2.type === 'text') {\n            const offset = elem1.source.length;\n            elem1.source += elem2.source;\n            elem1.dirty = true;\n            elem1.needWrap = elem2.needWrap;\n            this._textElements.splice(idx, 1);\n            return offset;\n            // if(elem1.needWrap) {\n                \n            // } else {\n            //     const offset = elem1.source.length;\n            //     elem1.source += elem2.source;\n            //     elem1.needWrap = elem2.needWrap;\n            //     this._textElements.splice(idx, 1);\n            //     return offset;\n            // }\n        }\n        return 0;\n    }\n}\n\nObject.assign(TextGroup.prototype, StackMixin);\nObject.assign(TextGroup.prototype, LayoutMixin);\nObject.assign(TextGroup.prototype, {\n        // 屏蔽这两个方法，只根据reflow重算\n    _getBoundingGroupRect() {},\n    resetChildrenPosition() {},\n    reflow() {\n        let lineHeight = this.currentLineHeight;\n        const jflow = this._jflow;\n        requestCacheCanvas((ctx) => {\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            this._textElements.forEach(element => {\n                if(element.type === 'text' && element.dirty) {\n                    element.width = ctx.measureText(element.source).width;\n                    element.dirty = false;\n                }\n            });\n        });\n        let line = {\n            width: 0,\n            height: lineHeight,\n            elements: [],\n        };\n        const lines = [line];\n        let allHeight = 0;\n        let allWidth = 0;\n        let lastElem = null;\n        const lineSpace = this.lineSpace;\n        this._textElements.forEach(element => {\n            line.elements.push(element);\n            element.reduceWidth = line.width;\n            if(element.type === 'text') {\n                line.width += element.width;\n                if(element.needWrap){\n                    allHeight += (line.height + lineSpace);\n                    line.reduceHeight = allHeight;\n                    allWidth = Math.max(line.width, allWidth);\n                    line = {\n                        width: 0,\n                        height: lineHeight,\n                        elements: [],\n                        reduceHeight: 0\n                    }\n                    lines.push(line);\n                }\n            } else {\n                const node = jflow.getRenderNodeBySource(element.source);\n                line.height = Math.max(line.height, node.height);\n                let margin = lastElem?.type !== 'text' ? this.elementSpace : this.elementSpace*2;\n                line.width += node.width+margin;\n            }\n            lastElem = element;\n        });\n        allHeight += line.height\n        line.reduceHeight = allHeight;\n        allWidth = Math.max(line.width, allWidth);\n        \n        const hh = allHeight/2;\n        const hw = allWidth/2;\n        let ty = -hh;\n        let lastReduceY = 0;\n\n        lines.forEach(l => {\n            const { height, elements, reduceHeight } = l;\n            const anchorY = ty + lastReduceY + height / 2;\n            l.anchorY = anchorY;\n            let reduceX = -hw;\n            let lastel = null;\n            elements.forEach(el => {\n                if(el.type !== 'text') {\n                    const renderNode = jflow.getRenderNodeBySource(el.source);\n                    let margin = lastel?.type !== 'text' ? this.elementSpace : this.elementSpace*2;\n                    el.width = renderNode.width + margin;\n                    el.anchorY = anchorY;\n                    el.anchorX = reduceX + el.width/2 + margin/2;\n                    renderNode.anchor = [el.anchorX, el.anchorY];\n                    reduceX += el.width + margin/2;\n                } else {\n                    el.anchorY = anchorY;\n                    el.anchorX = reduceX + el.width/2;\n                    reduceX += el.width;\n                }\n                \n            })\n            lastReduceY = reduceHeight;\n        });\n        this._lines = lines;\n        \n        this.width = allWidth;\n        this.height = allHeight;\n    }\n})\n\n\nexport default TextGroup;\n\nfunction createInputElement(controlCallback) {\n    const input = document.createElement('input');\n    input.setAttribute('style',`\n        width: 100%;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;`);\n    input.setAttribute('tabindex', -1);\n    input.setAttribute('aria-hidden', true);\n    input.setAttribute('spellcheck', false);\n    input.setAttribute('autocorrect', 'off');\n\n\n    // let content = configs.content;\n    // let startidx = 0;\n\n    // function renderContent() {\n    //     configs.callback(content)\n    // }\n    let stopInput = false;\n\n    input.addEventListener('beforeinput', e => {\n        e.preventDefault();\n        if(e.data) {\n            // content += e.data;\n            // renderContent();\n            if(!stopInput) {\n                controlCallback('Input', e.data);\n            }\n        }\n    })\n\n    input.addEventListener('compositionstart', (e) => {\n        // cache composition start offset\n        // startidx = content.length;\n        controlCallback('compositionstart');\n        stopInput = true;\n    });\n    input.addEventListener('compositionupdate', (e) => {\n        // update content\n        // content = content.substring(0, startidx);\n        // content += e.data;\n        // renderContent();\n        controlCallback('compositionupdate', e.data);\n    });\n    input.addEventListener('compositionend', (e) => {\n        // replace text at start offset\n        // content = content.substring(0, startidx);\n        // startidx = 0;\n        // content += e.data;\n        // renderContent();\n        controlCallback('compositionend', e.data);\n        input.value = '';\n        stopInput = false\n    });\n\n    input.addEventListener('keydown', (event) => {\n        switch(event.code) {\n            case \"Enter\":\n                // content = content + '\\n';\n                // renderContent();\n                controlCallback('Enter');\n                break;\n            case \"Backspace\":\n                // content = content.substring(0, content.length - 1);\n                // renderContent();\n                controlCallback('Backspace');\n                break;\n            case \"ArrowLeft\":\n                controlCallback(\"ArrowLeft\");\n                break;\n            case \"ArrowRight\":\n                controlCallback(\"ArrowRight\");\n                break;\n            case \"ArrowDown\":\n                controlCallback(\"ArrowDown\");\n                break;\n            case \"ArrowUp\":\n                controlCallback(\"ArrowUp\");\n                break;\n        }\n    })\n    return input;\n}\n","import { createCanvas, resizeCanvas, listenOnDevicePixelRatio } from '../utils/canvas';\nimport { bounding_box, doOverlap, debounce } from '../utils/functions';\nimport { JFLOW_MODE } from '../utils/constance';\nimport GhostNode from '../instance/ghostNode';\nimport { NodeWeakMapMixin } from '../instance/nodeWeakMap';\nimport StackMixin from '../instance/stackMixin';\n// import InstanceStack from '../instance/stack';\nimport LayoutMixin from '../instance/layoutMixin';\nimport MessageMixin from '../instance/messageMixin';\nimport AnimeMixin from '../anime/animeMixin';\nimport MiniMapMixin from '../miniMap/minimap-mixin';\nimport ScrollBarMixin from '../scrollbar/scrollbarMixin';\nimport ScheduleMixin from './schedule';\n// import { setUniqueId, getUniqueId } from '../utils/functions';\nimport JFlowEvent from '../events';\n\nimport EventAdapter from '../events/adapter';\n\nimport GroupFactory from '../instance/groupFactory';\nimport Point from '../instance/shapes/point';\nimport Rectangle from '../instance/shapes/rectangle';\nimport Capsule from '../instance/shapes/capsule';\nimport CapsuleVertical from '../instance/shapes/capsule-vertical';\nimport Rhombus from '../instance/shapes/rhombus';\nimport Diamond from '../instance/shapes/diamond';\nimport DiamondVertical from '../instance/shapes/diamond-vertical';\n/**\n * @funtion setInitialPosition\n * @param {Number} RealboxX - 内容映射到canvas上的 X\n * @param {Number} RealboxY - 内容映射到canvas上的 Y \n * @param {Number} RealboxW - 内容映射到canvas上的宽度\n * @param {Number} RealboxH - 内容映射到canvas上的高度 \n * @param {Number} CanvasWidth  - 视窗宽度\n * @param {Number} CanvasHeight  - 视窗高度\n * @return {Object} - 初始位置 { x, y }\n */\n\n/**\n * @funtion linkGen\n * @param {Node} from - 出发绘图节点\n * @param {Node} to - 临时节点，当前鼠标指的地方\n * @return {BaseeLink} - 连线对象\n */\n\n\n/** \n * @class Group\n * @classdesc 矩形组单元 由 {@link GroupFactory} 通过 {@link Rectangle} 生成\n * @groupfrom Rectangle\n * @augments GroupTemplate\n * @augments Rectangle\n * @param {(Rectangle~RectangleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const Group = GroupFactory(Rectangle);\n/** \n * @class CapsuleGroup\n * @classdesc 胶囊组单元 由 {@link GroupFactory} 通过 {@link Capsule} 生成\n * @groupfrom Capsule\n * @augments GroupTemplate\n * @augments Capsule\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleGroup = GroupFactory(Capsule);\n/** \n * @class RhombusGroup\n * @classdesc 菱形组单元 由 {@link GroupFactory} 通过 {@link Rhombus} 生成\n * @augments GroupTemplate\n * @augments Rhombus\n * @groupfrom Rhombus\n * @param {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const RhombusGroup = GroupFactory(Rhombus);\n/** \n * @class DiamondGroup\n * @classdesc 钻石形组单元 由 {@link GroupFactory} 通过 {@link Diamond} 生成\n * @groupfrom Diamond\n * @augments GroupTemplate\n * @augments Diamond\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondGroup = GroupFactory(Diamond, {\n    shapeShift(width, height) {\n        return [width + height * 0.28865, height]\n    }\n});\n/** \n * @class DiamondVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link DiamondVertical} 生成\n * @groupfrom DiamondVertical\n * @augments GroupTemplate\n * @augments DiamondVertical\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondVerticalGroup = GroupFactory(DiamondVertical, {\n    shapeShift(width, height) {\n        return [width, height + width * 0.5773]\n    }\n});\n/** \n * @class CapsuleVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link CapsuleVertical} 生成\n * @groupfrom CapsuleVertical\n * @augments GroupTemplate\n * @augments CapsuleVertical\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleVerticalGroup = GroupFactory(CapsuleVertical);\n\nexport const PointGroup = GroupFactory(Point, {\n    shapeShift(width, height, p) {\n        const r = Math.ceil(Math.sqrt(width * width + height * height) / 2);\n        p.radius = r;\n        const w = r * 2;\n        return [w, w];\n    }\n});\n/**\n * @typedef JFlow~JFlowConfigs\n * @type {object}\n * @property {Boolean} allowDrop      - 是否允许 dragdrop\n * @property {Number} maxZoom         - 最大缩放\n * @property {Number} minZoom         - 最小缩放\n * @property {number} initialZoom     - 初始缩放比\n * @property {EventAdapter~pluginDef} eventAdapter\n */\n\n/**\n * @typedef {JFlow~JFlowConfigs | LayoutMixin~LayoutConfigs} JFlow~JFlowLayoutConfigs\n */\n/** \n * JFlow 对象\n * JFlow 是 canvas 上面封装的一个顶层对象，具有处理事件和绘制的功能\n * @constructor JFlow\n * @param {JFlow~JFlowLayoutConfigs} configs - 配置项\n * @mixes LayoutMixin\n * @mixes StackMixin\n * @mixes MessageMixin\n */\nclass JFlow extends EventTarget{\n    constructor(configs) {\n        super();\n        this.uniqueName = 'jflow';\n        /**\n         * @member {EventAdapter} eventAdapter    - eventAdapter 对象\n         **/\n        this.eventAdapter = new EventAdapter(configs.eventAdapter);\n        this.initNodeWeakMap();\n        this.initAnime();\n        this.initStack(configs);\n        this.initLayout(configs);\n        /** @member {Context2d}     - Context2d 对象 */\n        this.ctx = null;\n        /** @member {Element}       - canvas 元素 */\n        this.canvas = null;\n        /** @member {number}       - 设备DPR */\n        this.dpr = 1;\n        /** @member {number}       - 内边距 */\n        this.padding = 20;\n        this.position = null;\n        /** @member {number}     - 缩放 */\n\t\tthis.scale = null;\n        /** @member {number}     - 初始缩放 */\n        this.initialZoom = configs.initialZoom;\n        /** @member {setInitialPosition} - 初始位置计算 */\n        this.initialPosition = configs.setInitialPosition;\n        /** @member {number}     - 最大缩放 */\n        this.maxZoom = configs.maxZoom || 3;\n        /** @member {number}     - 最小缩放 */\n        this.minZoom = configs.minZoom || .5;\n        \n        this.NodeRenderTop = !!configs.NodeRenderTop\n\n        this.worldMargin = configs.worldMargin;\n\n        this.draggingbehavior = Object.assign({\n            panInBorder: {\n                enable: true,\n                padding: 20,\n                deltamovement: 8,\n                allowMovingTargetInPan: true,\n            },\n        }, configs.draggingbehavior || {});\n        this.scrollBarBehavior = Object.assign({\n            enable: true,\n        }, configs.scrollBarBehavior || {})\n\t\t// this.initScale = 1;\n\t\t// this.initPosition = null\n\t\tthis.offeset = null;\n        this._lastState = {\n            x: null,\n            y: null,\n            dragging: false,\n            processing: false\n        };\n        this._lastDragState = {\n            target: null,\n            targetLink: null,\n            processing: false,\n        }\n\n        this._target = {\n            instance: null,\n            link: null,\n            moving: null,\n            isInstanceDirty: false, \n            isLinkDirty: false, \n            // isMovingDirty: false, \n            cache: {\n                stack: null,\n                belongs: null,\n                point: null,\n            },\n            meta: {\n                x: undefined,\n                y: undefined,\n                initialX: undefined,\n                initialY: undefined, \n            },\n            status: {\n                dragovering: false,\n                dragging: false,\n                processing: false,\n                movingState: false,\n            }\n        }\n\n        this._focus = {\n            instance: null,\n        }\n\n        this._dragOverTarget = null;\n        // this.lock = configs.lock;\n\n        this.allowDrop = configs.allowDrop;\n        // 临时绘制的对象\n        this._tempNode = null;\n        this._tempLink = null;\n\n        this.mode = JFLOW_MODE.DEFAULT;\n\n        this._allowMovingTarget = true;\n\n        // this._allowZoom = true;\n    }\n\n    // allowZoom() {\n    //     this._allowZoom = true;\n    // }\n\n    // abandonZoom() {\n    //     this._allowZoom = false;\n    // }\n    /**\n     * 设置当前拖动的 JFlow 对象\n     * @param {Object[]} targets - 具有 anchor 属性的对象\n     */\n    setMovingTargets(targets) {\n        Object.assign(this._target, {\n            moving: targets,       \n        })\n    }\n\n    /**\n     * 设置当前拖动的 JFlow 对象\n     * @param {Instance} instance - JFlow 对象\n     */\n    setTempDraggingInstance(instance) {\n        instance._belongs = this;\n        this._tempNode = instance;\n        Object.assign(this._target, {\n            moving: [this._tempNode],\n            dragging: true,\n        })\n    }\n\n    /**\n     * 取消当前拖动的 JFlow 对象\n     * @return {number[]} point - JFlow 坐标\n     */\n    removeTempDraggingInstance() {\n        if(this._tempNode) {\n            // this.removeFromStack(this._tempNode);\n            const anchor = this._tempNode.anchor;\n            this._tempNode = null;\n            return anchor;\n        }\n    }\n    /**\n     * 关闭默认对象拖动效果\n     */\n    preventDefaultDragging() {\n        this._allowMovingTarget = false;\n    }\n    /**\n     * 开启默认对象拖动效果\n     */\n    allowDefaultDragging() {\n        this._allowMovingTarget = true;\n    }\n    /**\n     * 在 Document 元素上初始化实例\n     * @param {Element} dom \n     */\n    $mount(dom) {\n        const { \n            canvas, \n            ctx, \n            scale: dpr, \n            width: c_width, \n            height: c_height, \n            raw_width,\n            raw_height,\n            left, top \n        } = createCanvas(dom);\n        this.reflow();\n        this.ctx = ctx;\n        this.DOMwrapper = dom;\n        this.canvas = canvas;\n        this.canvas.setAttribute('data-jflow', true);\n        this.canvas.$jflow = this;\n        this.canvasMeta = {\n            width: raw_width,\n            height: raw_height,\n            actual_width: c_width,\n            actual_height: c_height\n        }\n        this.dpr = dpr;\n        \n        this._getBoundingGroupRect();\n\n        const padding = this.padding;\n        const { width: p_width, height: p_height, x: p_x, y: p_y } = this.bounding_box;\n        const contentBox = {\n            x: padding,\n            y: padding,\n            width: c_width - padding * 2,\n            height: c_height - padding * 2,\n        }\n        const position = { x: 0, y: 0, offsetX: 0, offsetY: 0 };\n        const w_ratio = contentBox.width / p_width;\n        const h_ratio = contentBox.height / p_height;\n        const align = w_ratio <= h_ratio ? 'x' : 'y';\n        let scaleRatio;\n        if(this.initialZoom) {\n            scaleRatio = this.initialZoom;\n        } else {\n            scaleRatio = Math.min(w_ratio, h_ratio);\n        }\n       \n        this.scale = scaleRatio;\n        if(scaleRatio > this.maxZoom) {\n            this.maxZoom = scaleRatio;\n        }\n        if(scaleRatio < this.minZoom) {\n            this.minZoom = scaleRatio;\n        }\n        const realboxX = p_x * scaleRatio;\n        const realboxY = p_y * scaleRatio;\n        const realboxW = contentBox.width;\n        const realboxH = contentBox.height;\n        if(this.initialPosition) {\n            const { x, y } = this.initialPosition(realboxX, realboxY, realboxW, realboxH, contentBox.x, contentBox.y, c_width, c_height, p_x, p_y, p_width, p_height);\n            position.x = x;\n            position.y = y;\n        } else {\n            position.x = align === 'x' ? contentBox.x : (realboxW - p_width * scaleRatio) / 2 + padding\n            position.y = align === 'y' ? contentBox.y : (realboxH - p_height * scaleRatio) / 2 + padding\n        }\n        \n        position.offsetX = position.x - realboxX;\n        position.offsetY = position.y - realboxY;\n        this.position = position;\n        this._readyToRender = true;\n        if(this.scrollBarBehavior.enable) {\n            this.initScrollBar(this.scrollBarBehavior);\n        }\n        this.scheduleRender(() => {\n            this._createEventHandler();\n        });\n        \n        listenOnDevicePixelRatio((dpr) => {\n            this.dpr = dpr;\n            this.scheduleRender();\n        })\n    }\n\n    /**\n     * 设置Jflow进入连线模式\n     * @param {Object} source - 当前连线的出发原始数据\n     * @param {linkGen} linkGen - 生成连线单元的方法\n     */\n    setLinkingMode(source, linkGen, isTail) {\n        const renderNode = this.getRenderNodeBySource(source)\n        this._tempNode = new GhostNode();\n        if(isTail) {\n            this._tempLink = linkGen({\n                from: this._tempNode,\n                to: renderNode,\n            })\n        } else {\n            this._tempLink = linkGen({\n                from: renderNode,\n                to: this._tempNode,\n            })\n        }\n        \n        this.sendMessage({\n            instance: source\n        });\n        this.mode = JFLOW_MODE.LINKING;\n    }\n\n    isInLinkingMode() {\n        return this.mode === JFLOW_MODE.LINKING;\n    }\n\n    /**\n     * 连线模式下，设置当前临时连线的属性\n     * @param {BaseLink~Configs} configs - 当前连线的出发原始数据\n     */\n    setLinkingLink(configs) {\n        if(this.mode === JFLOW_MODE.LINKING) {\n            this._tempLink.setConfig(configs);\n        }\n    }\n    /**\n     * 连线模式下，重连回临时鼠标节点\n     */\n    resetLinkingLink() {\n        if(this.mode === JFLOW_MODE.LINKING) {\n            this._tempLink.setConfig({\n                to: this._tempNode\n            })\n        }\n    }\n\n    clearTemp() {\n        if(this._tempNode) {\n            this._tempNode.destroy();\n            this._tempNode = null;\n        }\n        if(this._tempLink) {\n            this._tempLink.destroy();\n            this._tempLink = null;\n        }\n        this._render();\n    }\n\n    preventClearTemp() {\n        this._preventClearTemp = true;\n    }\n\n    /**\n     * 外层容器大小变化后，调用此方法可以改变当前canvas的状态\n     */\n    resizeCanvas() {\n        const {\n            width: c_width, \n            height: c_height, \n            raw_width,\n            raw_height,\n        } = resizeCanvas(this.canvas, this.DOMwrapper);\n        this.canvasMeta = {\n            width: raw_width,\n            height: raw_height,\n            actual_width: c_width,\n            actual_height: c_height\n        }\n    }\n\n    setFocusInstance(node) {\n        this._focus.instance = node;\n    }\n\n    /**\n     * 移动画布到以目标绘图节点为中心的位置上\n     * @param {Node} node - 绘图节点\n     */\n    focusOn(node) {\n        const center = this._calculatePointBack([\n            this.canvasMeta.actual_width/2,\n            this.canvasMeta.actual_height/2\n        ]);\n        let offset = node.anchor;\n        if(node._belongs.calculateToCoordination) {\n            offset = node._belongs.calculateToCoordination(offset);\n        }\n\n        const deltaX = (center[0] - offset[0]) * this.scale;\n        const deltaY = (center[1] - offset[1]) * this.scale;\n        \n\n        this._recalculatePosition(deltaX, deltaY)\n        this._render();\n    }\n    \n    _getBoundingGroupRect() {\n        const points = this._stack.getBoundingRectPoints();\n        if(this.bounding_box) {\n            this.bounding_box = bounding_box(points);\n            const {\n                x: nowx,\n                y: nowy,\n            } = this.bounding_box;\n            const scale = this.scale;\n            this.position.x = this.position.offsetX + nowx * scale;\n            this.position.y = this.position.offsetY + nowy * scale;\n        } else {\n            this.bounding_box = bounding_box(points);\n        }\n    }\n\n    _createEventHandler() { \n        const canvas = this.canvas;\n        let destroyListener;\n        this.eventAdapter.apply(this);\n        const destroyPlainEventListener = () => {\n            this.eventAdapter.unload(this);\n        }\n        destroyListener = destroyPlainEventListener;\n\n        if(this.allowDrop) {\n            const dragoverHandler = this._onDragover.bind(this);\n            const dropHandler = this._onDrop.bind(this);\n            const dragleaveHanlder = this._onDragLeave.bind(this);\n            canvas.addEventListener('dragstart', (e) => {\n                e.preventDefault()\n            })\n            canvas.addEventListener('dragover', dragoverHandler);\n            canvas.addEventListener('drop', dropHandler);\n            canvas.addEventListener('dragleave', dragleaveHanlder);\n            destroyListener = () => {\n                destroyPlainEventListener();\n                canvas.removeEventListener('dragover', dragoverHandler);\n                canvas.removeEventListener('drop', dropHandler);\n                canvas.removeEventListener('dragleave', dragleaveHanlder);\n            }\n        } \n        this.destroy = destroyListener;\n    }\n\n    _targetLockOn(offsetPoint, event) {\n        let point = this._calculatePointBack(offsetPoint);\n        const topLayerPoint = point;\n        this._currentp = point;\n        let stack = this._stack;\n        const br = this._getViewBox();\n        const target = stack.checkHit(\n            point, \n            // 应用于所有\n            (instance) => {\n                return (this._target.status.dragging \n                    && (instance === this._getMovingTarget()))\n            },\n            // 仅对于本层过滤\n            (instance) => {\n                return doOverlap(br, instance.getBoundingRect())\n            });\n        let linkStack = this._linkStack;\n        let belongs = this;\n        /*\n        if(target) {\n            linkStack = target._belongs._linkStack;\n            point = target._belongs._currentp;\n            stack = target._belongs._stack;\n            belongs = target._belongs\n        }*/\n        // 暂时设定只有顶层有连线\n        let targetLink;\n        if(!target || target._belongs === this) {\n            targetLink = linkStack.checkHit(point, (link) => {\n                if(!this._target.status.dragging) {\n                    return false;\n                }\n                const movingtarget = this._getMovingTarget();\n                return link.from === movingtarget || link.to === movingtarget;\n            });\n        }\n        if(!targetLink) {\n            targetLink = linkStack.checkHit(point, (link) => {\n                return !link.ON_TOP;\n            });\n        }\n        \n        Object.assign(this._target, {\n            instance: target,\n            link: targetLink, \n            isInstanceDirty: target === this._target.instance,\n            isLinkDirty: targetLink === this._target.link,\n        });\n        Object.assign(this._target.cache, {\n            stack,\n            belongs,\n            point,\n            topLayerPoint,\n        })\n        Object.assign(this._target.meta, {\n            x: offsetPoint[0],\n            y: offsetPoint[1],\n        });\n     \n        if(event === 'pressStart' && !this._target.status.dragging && !this._target.status.dragovering) {\n            let movingtarget = target;\n            while (movingtarget && movingtarget._belongs.lock && movingtarget !== this) {\n                movingtarget = movingtarget._belongs;\n            }\n            this.setMovingTargets(movingtarget && [ movingtarget ])\n            if(movingtarget) {\n                /**\n                 * \n                 * 开始拖拽时，拖拽对象设置之前\n                 * @event Node#afterResolveMovingTarget\n                 * @type {object}\n                 * @property {Event} event           - 原始事件 \n                 * @property {JFlow} jflow           - 当前JFlow对象 \n                 * @property {Node} target           - 目标节点\n                 */\n                target.bubbleEvent(new JFlowEvent('afterResolveMovingTarget', {\n                    event,\n                    target: movingtarget,\n                    jflow: this,\n                    bubbles: true,\n                }))\n            }\n        }\n        \n        if(['pressStart', 'click', 'dblclick', 'contextclick'].includes(event)) {\n            if(this._focus.instance && this._focus.instance !== target) {\n                this._focus.instance.dispatchEvent(new JFlowEvent('blur', {\n                    relatedTarget: target,\n                }));\n                this._focus.instance = null;\n            }   \n        }\n        return this._target;\n    }\n\n    _getMovingTarget() {\n        return this._target.moving && this._target.moving[0];\n    }\n\n    _processDragOver(instance, event) {\n        if(this._dragOverTarget !== instance) {\n            const target = this.readMessage()?.instance;\n            this._dragCurrentData = target;\n            const { point } = this._target.cache;\n            // console.log('_processDragOver', this._dragOverTarget)\n            if(this._dragOverTarget) {\n                const oldIns = this._dragOverTarget;\n                /**\n                * dragleave 退出事件\n                * @event Instance#dragleave\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragleave的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                oldIns.dispatchEvent(new JFlowEvent('dragleave', {\n                    event,\n                    instance: oldIns,\n                    target,\n                    jflow: this,\n                    point,\n                }));\n            }\n            if(instance) {\n                /**\n                * dragenter 进入事件\n                * @event Instance#dragenter\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragenter的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                instance.dispatchEvent(new JFlowEvent('dragenter', {\n                    event,\n                    instance,\n                    target,\n                    jflow: this,\n                    point\n                }));\n            }\n            this._dragOverTarget = instance;\n        } else if(this._dragOverTarget){\n            /**\n            * dragover 进入事件\n            * @event Instance#dragover\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - dragover的对象 \n            * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n            */\n            this._dragOverTarget.dispatchEvent(new JFlowEvent('dragover', {\n                event,\n                instance,\n                jflow: this,\n                target: this._dragCurrentData,\n            }));\n        }\n\n        this._processPanInBorder();\n    }\n\n    _processPanInBorder() {\n        if(this.draggingbehavior?.panInBorder?.enable) {\n            if(!this.draggingbehavior.panInBorder.timer) {\n                this.draggingbehavior.panInBorder.timer = Date.now();\n            }\n            if(Date.now() - this.draggingbehavior.panInBorder.timer > 500) {\n                const [x, y, w, h] = this._cacheViewBox;\n                const [px, py] = this._currentp;\n                const {\n                    padding,\n                    deltamovement\n                } = this.draggingbehavior.panInBorder;\n                let deltaX = 0;\n                let deltaY = 0;\n                if(px < x + padding) {\n                    deltaX = deltamovement;\n                } \n                if(px > w - padding) {\n                    deltaX = -deltamovement;\n                } \n                if(py < y + padding) {\n                    deltaY = deltamovement;\n                } \n                if(py > h - padding) {\n                    deltaY = -deltamovement;\n                } \n                if(this.__processOverAnime) {\n                    this.__processOverAnime.cancel();\n                }\n                if(deltaX || deltaY) {\n                    this.__processOverAnime = this.requestJFlowAnime(() => {\n                        this.panHandler(deltaX, deltaY);\n                    }) \n                } else {\n                    this.draggingbehavior.panInBorder.timer = null;\n                }\n            }\n        }\n    }\n\n    _onDragover(event) {\n        // console.log(event);\n        event.preventDefault();\n        event.stopPropagation();\n        if(this._lastDragState.processing) return;\n        this._lastDragState.processing = true;\n        const { offsetX, offsetY } = event\n        Object.assign(this._target.status, {\n            dragovering: true,\n        })\n        this._targetLockOn([offsetX, offsetY])\n        const instance = this._target.instance || this._target.link;\n        this._processDragOver(instance, event);\n        if(this._target.isLinkDirty || this._target.isInstanceDirty) {\n            Promise.resolve().then(() => {\n                this._render();    \n                this._target.isLinkDirty = false; \n                this._target.isInstanceDirty = false;\n                this._lastDragState.processing = false;\n            })\n        } else {\n            this._lastDragState.processing = false;\n        } \n    }\n\n    _cancelPanInBorder() {\n        if(this.__processOverAnime) {\n            this.__processOverAnime.cancel();\n        }\n        if(this.draggingbehavior?.panInBorder) {\n            this.draggingbehavior.panInBorder.timer = null;\n        }\n    }\n\n    _onDragLeave() {\n        this._cancelPanInBorder();\n    }\n\n    _onDrop(event) {\n        this._cancelPanInBorder();\n        const payload = this.consumeMessage();\n        const instance = payload.instance;\n        if(this._dragOverTarget) {\n            const oldIns = this._dragOverTarget;\n            oldIns.dispatchEvent(new JFlowEvent('dragoverend', {\n                event,\n                instance: oldIns,\n            }));\n            this._dragOverTarget = null;\n        }\n        const {\n            link,\n            instance: target,\n        } = this._target;\n        const {\n            point, belongs\n        } = this._target.cache;\n        if(link) {   \n            /**\n             * 丢在线上事件\n             *\n             * @event BaseLink#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {BaseLink} link         - 目标连线 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            // instance.anchor = point;\n            link.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                link,\n                jflow: this,\n                belongs,\n                point\n            }))\n        } else if(target) {\n            /**\n             * 丢在节点上事件\n             *\n             * @event Node#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Node} target           - 目标节点\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            target.bubbleEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point,\n                bubbles: true,\n            }));\n        } else {\n            /**\n            * 丢在主图上事件\n            *\n            * @event JFlow#drop\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - 拖动的对象 \n            * @property {JFlow} jflow           - 当前JFlow对象 \n            * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n            */\n            this.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point,\n            }))\n        }\n        requestAnimationFrame(() => {\n            this.cancelDrop();\n        })\n    }\n    cancelDrop() {\n        this._target.instance = null;\n        this._target.link = null;\n        Object.assign(this._target.status, {\n            dragovering: false,\n        })\n    }\n    \n    /**\n     * 缩放操作处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    zoomHandler(offsetX, offsetY, deltaX, deltaY, event) {\n        // if(!this._allowZoom) return;\n        if(this._zooming) return;\n        this._zooming = true;\n        const { width: p_width, height: p_height, x, y } = this.bounding_box;\n        const { actual_width: cw, actual_height: ch } = this.canvasMeta;\n        let minZoom = this.minZoom;\n        if(this.worldMargin) {\n            const m = this.worldMargin;\n            const maxWidth = p_width + m * 2;\n            const maxHeight = p_height + m * 2;\n            minZoom = Math.max(minZoom, Math.max(cw / maxWidth, ch / maxHeight));\n        }\n        let newScale = this.scale;\n        const amount = deltaY > 0 ? 1.1 : 1 / 1.1;\n        newScale *= amount;\n        newScale = Math.min(this.maxZoom, Math.max(minZoom, newScale))\n        // console.log(newScale);\n        // if (this.maxZoom && newScale > this.maxZoom){\n        //     // could just return but then won't stop exactly at maxZoom\n        //     newScale = this.maxZoom;\n        // }\n\n        // if(this.minZoom && newScale < this.minZoom) {\n        //     newScale = this.minZoom;\n        // }\n\n        var deltaScale    = newScale - this.scale;\n        var currentWidth  = p_width * this.scale;\n        var currentHeight = p_height * this.scale;\n        var deltaWidth    = p_width * deltaScale;\n        var deltaHeight   = p_height * deltaScale;\n\n        var tX = offsetX - this.position.x;\n        var tY = offsetY - this.position.y;\n        var pX = -tX / currentWidth;\n        var pY = -tY / currentHeight;\n\n        this.scale = newScale;\n        this._recalculatePosition(pX * deltaWidth, pY * deltaHeight);\n        \n        // this.position.x += pX * deltaWidth;\n        // this.position.y += pY * deltaHeight;\n        // this.position.offsetX = this.position.x - x * newScale;\n        // this.position.offsetY = this.position.y - y * newScale;\n        this.dispatchEvent(new JFlowEvent('zoompan', {\n             deltaX: 0, deltaY: 0\n        }));\n        // this.setAnimeClock()\n        this.scheduleRender(() => {\n            this._zooming = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this.setAnimeClock(timestamp);\n        //     this._render();\n        //     this._zooming = false;\n        // })\n    }\n    /**\n     * 平移画布操作处理函数\n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    panHandler(deltaX, deltaY, event) {\n        if(this._panning) return;\n        this._panning = true;\n        const {\n            dragging,\n        } = this._target.status;\n        if(dragging) {\n            // const { x, y } = this._target.meta;\n            const movingtarget = this._target.moving;// this._tempNode ? [this._tempNode] : this._target.moving;\n            // this._target.status.movingState = true\n            // this._target.status.processing = true;\n            if(movingtarget) {\n                if(this.draggingbehavior.panInBorder.allowMovingTargetInPan) {\n                    movingtarget.forEach(t => {\n                        t.anchor[0] += -deltaX / this.scale;\n                        t.anchor[1] += -deltaY / this.scale;\n                    })\n                }\n            }\n            // this._targetLockOn([offsetX, offsetY]);\n        }\n\n        this._recalculatePosition(deltaX, deltaY);\n        /**\n         * 缩放平移事件\n         *\n         * @event JFlow#zoompan\n        */\n        this.dispatchEvent(new JFlowEvent('zoompan', {\n            deltaX,\n            deltaY\n        }));\n        this.scheduleRender(() => {\n            this._panning = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this.setAnimeClock(timestamp);\n        //     this._render();\n        //     this._panning = false;\n        // })\n    }\n    /**\n     * 开始按压处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressStartHandler(offsetX, offsetY, event) {\n        if(this.checkScrollDragging()) {\n            return;\n        }\n        Object.assign(this._target.meta, {\n            initialX: offsetX,\n            initialY: offsetY,\n        })\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY], 'pressStart');\n        // 后续只支持 click 动作\n        if(this.mode === JFLOW_MODE.LINKING) return;\n        Object.assign(this._target.status, {\n            dragging: true,\n            processing: false,\n        });\n        if(this._target.moving) {\n            const moving = this._getMovingTarget();\n            /**\n             * 开始拖动组的事件（特指lock的顶层组）\n             *\n             * @event Node#pressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             */\n            moving.dispatchEvent(new JFlowEvent('pressStart', {\n                event,\n                instance: moving,\n                jflow: this,\n            }))\n        }\n        const t = this._resolveLockOnTarget(link, instance)\n        if(t) {\n            /**\n             * 开始拖动对象事件（就是目标对象的拖动事件，事件支持冒泡）\n             *\n             * @event Node#instancePressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance     - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Boolean} bubbles       - 冒泡\n             */\n            // const t = this._target.instance;\n            t.bubbleEvent(new JFlowEvent('instancePressStart', {\n                event,\n                target: t,\n                jflow: this,\n                bubbles: true,\n            }))\n        }\n\n        this.dispatchEvent(new JFlowEvent('jflowPressStart', {\n            event,\n            jflow: this,\n        }));\n    }\n    /**\n     * 按压中处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressMoveHandler(offsetX, offsetY, event) {\n        if(this.checkScrollDragging()) {\n            return;\n        }\n        const {\n            dragging, processing\n        } = this._target.status;\n        const { x, y } = this._target.meta;\n        // this.canvas.style.cursor = 'default';\n        if(!dragging) {\n            if(this.checkScrollBarHover(offsetX, offsetY)) {\n                return;\n            } else {\n                this.resetScrollBarHover();\n            }\n            \n        }\n\n        if(!dragging && !processing) {\n            const {\n                link,\n                instance\n            } = this._targetLockOn([offsetX, offsetY]);\n            const t = this._resolveLockOnTarget(link, instance);\n            if(t) {\n                \n                /**\n                * instance mousemove 原生事件，仅在无拖拽时触发\n                *\n                * @event Node#instancemousemove\n                * @type {object}\n                * @property {Event} event           - 原始事件\n                * @property {Node} instance           - 原始事件\n                * @property {JFlow} jflow           - 当前JFlow对象 \n                */\n                // instance.dispatchEvent(new JFlowEvent('instancemousemove', {\n                //     event,\n                //     instance,\n                //     jflow: this,\n                // }))\n                t.bubbleEvent(new JFlowEvent('instancemousemove', {\n                    event,\n                    instance: t,\n                    jflow: this,\n                    bubbles: true\n                }));\n            } else {\n                this.dispatchEvent(new JFlowEvent('instancemousemove', {\n                    event,\n                    instance: null,\n                    jflow: this,\n                }));\n            }\n            \n\n            if(this.mode === JFLOW_MODE.LINKING) {\n                // if(instance) {\n                //     instance.bubbleEvent(new JFlowEvent('linking', {\n                //         event,\n                //         target: instance,\n                //         jflow: this,\n                //         bubbles: true,\n                //         callback: (p) => {\n                //             this._currentp = p;\n                //         }\n                //     }))\n                // }\n                \n\n                this._tempNode.anchor = this._currentp;\n                \n                this.scheduleRender(() => {\n                    this._target.isLinkDirty = false; \n                    this._target.isInstanceDirty = false;\n                    this._target.status.processing = false;\n                })\n                this._processPanInBorder();\n                // requestAnimationFrame((timestamp) => {\n                //     this.setAnimeClock(timestamp);\n                //     this._render();\n                //     this._target.isLinkDirty = false; \n                //     this._target.isInstanceDirty = false;\n                //     this._target.status.processing = false;\n                // })\n                return;\n            }\n        }\n\n        \n        /**\n         * canvas mousemove 原生事件\n         *\n         * @event JFlow#canvasmousemove\n         * @type {object}\n         * @property {Event} event           - 原始事件\n         * @property {JFlow} jflow           - 当前JFlow对象 \n         */\n        this.dispatchEvent(new JFlowEvent('canvasmousemove', {\n            event,\n            jflow: this,\n        }))\n\n        \n        \n        if(!dragging) return;\n        // this.canvas.style.cursor = 'grabbing';\n        if(processing) return;\n        \n        const movingtarget = this._target.moving;// this._tempNode ? [this._tempNode] : this._target.moving;\n        this._target.status.movingState = true\n        this._target.status.processing = true;\n        const deltaX = offsetX - x;\n        const deltaY = offsetY - y;\n        if(movingtarget) {\n            if(this._allowMovingTarget) {\n                movingtarget.forEach(t => {\n                    t.anchor[0] += deltaX / this.scale;\n                    t.anchor[1] += deltaY / this.scale;\n                })\n            }\n        } else {\n            this._recalculatePosition(deltaX, deltaY);    \n            this.dispatchEvent(new JFlowEvent('zoompan', {\n                deltaX, deltaY\n            }));\n        }\n        const { instance, link } = this._targetLockOn([offsetX, offsetY]);\n\n        this._processDragOver(instance || link, event);\n        \n        this.scheduleRender(() => {\n            this._target.isLinkDirty = false; \n            this._target.isInstanceDirty = false;\n            this._target.status.processing = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this._render();\n        //     this._target.isLinkDirty = false; \n        //     this._target.isInstanceDirty = false;\n        //     this._target.status.processing = false;\n        // })\n    }\n    /**\n     * 按压结束处理函数\n     * @param {Boolean} isDocument - 是否为 document 触发\n     * @param {Number} event - 原生事件\n     */\n    pressUpHanlder(isDocument, event) {\n        if(this.__processOverAnime) {\n            this.__processOverAnime.cancel();\n        }\n        this._cancelPanInBorder();\n        // this.resetScollBarStatus();\n        const meta = this._target.meta;\n        if(this.mode === JFLOW_MODE.LINKING) {\n            const t = this._target.instance;\n            const payload = this.consumeMessage();\n            // console.log(payload)\n            if(t) {\n                /**\n                 * canvas mousemove 原生事件\n                 *\n                 * @event Node#link\n                 * @type {object}\n                 * @property {Event} event           - 原始事件\n                 * @property {Node} target           - 原始事件\n                 * @property {object} payload        - 传入的消息\n                 * @property {JFlow} jflow           - 当前JFlow对象       - 当前JFlow对象 \n                 */\n                t.bubbleEvent(new JFlowEvent('link', {\n                    event,\n                    target: t,\n                    jflow: this,\n                    payload,\n                    bubbles: true,\n                    link: this._tempLink\n                }))        \n            } else {\n                const { offsetX, offsetY } = event\n                this.dispatchEvent(new JFlowEvent('link', {\n                    event,\n                    jflow: this,\n                    payload,\n                    anchor: this._calculatePointBack([offsetX, offsetY]),\n                    link: this._tempLink\n                }));\n            }\n            this._clearTarget();\n            if(!this._preventClearTemp) {\n                if(this._tempNode) {\n                    this._tempNode.destroy();\n                    this._tempNode = null;\n                }\n                if(this._tempLink) {\n                    this._tempLink.destroy();\n                    this._tempLink = null;\n                }\n            }\n            this._preventClearTemp = false\n            this.mode = JFLOW_MODE.DEFAULT;\n            this._render();\n            return;\n        }\n        \n        if(this._target.moving) {\n            let checkresult = false;\n            if(this._layout.static) {\n                checkresult = this.staticCheck(this._getMovingTarget());\n            }\n            if(!checkresult && this._target.link) {\n                \n                const {\n                    point, belongs\n                } = this._target.cache;\n                const link = this._target.link;\n                const instance = this._getMovingTarget();\n                /**\n                 * 拖动到线上事件\n                 *\n                 * @event BaseLink#drop\n                 * @type {object}\n                 * @property {Event} event           - 原始事件 \n                 * @property {Object} instance     - 拖动的对象 \n                 * @property {BaseLink} link         - 目标连线 \n                 * @property {JFlow} jflow           - 当前JFlow对象 \n                 * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n                 */\n                link.dispatchEvent(new JFlowEvent('drop', {\n                    event,\n                    instance,\n                    link,\n                    jflow: this,\n                    belongs,\n                }));\n                this._target.link = null;\n                this._target.instance = null;\n            }\n            if(this._target.moving) {\n                if(this._target.instance) {\n                    /**\n                     * 拖动后放置到 Instance 上的事件，由被拖动到的对象触发\n                     *\n                     * @event Node#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Node} instance         - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     * @property {Instance} target       - 拖动到的对象\n                     * @property {boolean} bubbles       - 冒泡\n                     */\n                    //  console.log('pressEnd', this._target.instance)\n                    this._target.instance.bubbleEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                        target: this._target.instance,\n                        bubbles: true\n                    }));\n                } else {\n                    /**\n                     * 拖动后放置到主图上的事件\n                     *\n                     * @event JFlow#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Instance} instance       - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     */\n                    this.dispatchEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                    }))\n                }\n            }\n            this._target.moving = null;\n            this.removeTempDraggingInstance()\n            // this._target.isMovingDirty = false;\n            this._render();\n        }\n        this._clearTarget();\n    }\n     /**\n     * 菜单弹出处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    clickHanlder(offsetX, offsetY, event) {\n        const {\n            link,\n            instance,\n            meta\n        } = this._targetLockOn([offsetX, offsetY], 'click');\n        if(Math.abs(meta.initialX - meta.x) < 1\n            && Math.abs(meta.initialY - meta.y) < 1) { \n                if(event.target !== this.canvas){\n                    this._clearTarget();\n                    Object.assign(this._target.meta, {\n                        initialX: undefined,\n                        initialY: undefined, \n                    });\n                    return;\n                }\n                const { topLayerPoint } = this._target.cache\n                const t = this._resolveLockOnTarget(link, instance);\n                if(t) {\n                    const target = t;\n                    /**\n                     * 点击事件（冒泡）\n                     *\n                     * @event Instance#contextclick\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Instance} target       - 右键对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象\n                     * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n                     * @property {Boolean} bubbles       - 冒泡\n                     */\n                    target.bubbleEvent(new JFlowEvent('click', {\n                        event,\n                        jflow: this,\n                        target,\n                        topLayerPoint,\n                        bubbles: true\n                    }));\n                } else {\n                    /**\n                     * 点击事件\n                     *\n                     * @event JFlow#contextclick\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {JFlow} jflow           - 当前JFlow对象\n                     * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n                     */\n                    this.dispatchEvent(new JFlowEvent('click', {\n                        event,\n                        jflow: this,\n                        topLayerPoint,\n                    }));\n                }\n                this._clearTarget();\n                Object.assign(this._target.meta, {\n                    initialX: undefined,\n                    initialY: undefined, \n                });\n            }\n    }\n    /**\n     * 菜单弹出处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    contextMenuHanlder(offsetX, offsetY, event) {\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY], 'contextclick');\n        const { topLayerPoint } = this._target.cache\n        const t = this._resolveLockOnTarget(link, instance);\n        if(t) {\n            const target = t;\n            /**\n             * 右键事件（冒泡）\n             *\n             * @event Instance#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Instance} target       - 右键对象 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             * @property {Boolean} bubbles       - 冒泡\n             */\n            target.bubbleEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                target,\n                topLayerPoint,\n                bubbles: true\n            }));\n        } else {\n            /**\n             * 右键事件\n             *\n             * @event JFlow#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             */\n            this.dispatchEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                topLayerPoint,\n            }));\n        }\n    }\n\n    dblclickHandler(offsetX, offsetY, event) {\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY], 'dblclick');\n        const { topLayerPoint } = this._target.cache\n        const t = this._resolveLockOnTarget(link, instance);\n        if(t) {\n            const target = t;\n            /**\n             * 右键事件\n             *\n             * @event Instance#dblclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Instance} target       - 右键对象 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             * @property {Boolean} bubbles       - 冒泡\n             */\n            target.bubbleEvent(new JFlowEvent('dblclick', {\n                event,\n                jflow: this,\n                target,\n                topLayerPoint,\n                bubbles: true\n            }));\n        } else {\n            this.dispatchEvent(new JFlowEvent('dblclick', {\n                event,\n                jflow: this,\n                topLayerPoint,\n            }));\n        }\n    }\n\n    /*_onZoom(event) {\n        event.preventDefault();\n        let { offsetX, offsetY, deltaX, deltaY } = event\n        if(event.ctrlKey) { \n            deltaY = -deltaY;\n            this.zoomHandler(offsetX, offsetY, deltaX, deltaY);\n        } else {\n            this.panHandler(-deltaX, -deltaY);\n        }\n    }\n\n    _onPressStart(event) { \n        const { offsetX, offsetY, deltaY, button } = event\n        if(button !== 0) return;\n        this.pressStartHandler(offsetX, offsetY);\n    }\n\n    _onPressMove(event) {\n        const { offsetX, offsetY } = event\n        this.pressMoveHandler(offsetX, offsetY);\n    }\n\n    _onPressUp(event, isDocument) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { button } = event\n        if(button !== 0) return;\n        this.pressUpHanlder(isDocument)\n    }\n\n    _onPressUpDocument(event) {\n        this._onPressUp(event, true);\n    }\n\n    _onContextMenu(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { offsetX, offsetY } = event;\n        this.contextMenuHanlder(offsetX, offsetY);\n    }*/\n    _resolveLockOnTarget(link, instance) {\n        return link?.ON_TOP ? link : (instance || link);\n    }\n\n    _clearTarget(){\n        Object.assign(this._target.meta, {\n            x: undefined,\n            y: undefined,\n            // initialX: undefined,\n            // initialY: undefined, \n        })\n        Object.assign(this._target.status, {\n            dragging: false,\n            processing: false,\n            movingState: false,\n        });\n        Object.assign(this._target, {\n            instance: null,\n            link: null,\n            moving: null,\n        });\n    }\n\n    _recalculatePosition(deltaX, deltaY, scale) {\n        const { x, y, width, height } = this.bounding_box;\n        const { actual_width: cw, actual_height: ch } = this.canvasMeta;\n        if(scale === undefined) {\n            scale = this.scale;\n        }\n        \n\n        if(this.worldMargin) {\n            // console.log(scale)\n            const m = this.worldMargin;\n            const bx1 = (x + width + m)*scale - cw;\n            const bx2 = (x - m)*scale;\n            // console.log(bx1, bx2)\n            const sx = x * scale;\n            const px = this.position.x + deltaX;\n            const cx = px - sx;\n            this.position.offsetX = Math.min(Math.max(-bx1, cx), -bx2);\n            // console.log(this.position.offsetX)\n            // this.position.offsetX = Math.max(Math.min(-bx2, cx), -bx1);\n            this.position.x = this.position.offsetX + sx;\n            // console.log(this.position.x, deltaX)\n            // console.log(this.position.offsetX)\n\n            const by1 = (y + height + m)*scale - ch;\n            const by2 = (y - m)*scale;\n            // console.log(by1, by2)\n            const sy = y * scale;\n            const py = this.position.y + deltaY;\n            const cy = py - sy;\n            this.position.offsetY = Math.min(Math.max(-by1, cy), -by2);\n            // this.position.offsetY = Math.max(Math.min(-by2, cy), -by1);\n            this.position.y = this.position.offsetY + sy;\n        } else {\n            this.position.x += deltaX;\n            this.position.y += deltaY; \n            this.position.offsetX = this.position.x - x * scale;\n            this.position.offsetY = this.position.y - y * scale;\n        }\n        \n    }\n\n    calculateToRealWorld(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [p[0] * scale + position.offsetX, p[1] * scale + position.offsetY]\n    }\n\n    _calculatePointBack(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [(p[0] - position.offsetX)/scale, (p[1] - position.offsetY) / scale];\n    }\n\n    _calculateDistance(l) {\n        const scale = this.scale;\n        return scale * l;\n    }\n\n    _resetTransform() {\n        const { width: c_width, height: c_height } = this.canvasMeta;\n        const position = this.position;\n        const scale = this.scale;\n        const ctx = this.ctx;\n        ctx.setTransform();\n        ctx.clearRect(0, 0, c_width, c_height);\n        ctx.scale(this.dpr, this.dpr);\n        ctx.transform(scale, 0, 0, scale, position.offsetX, position.offsetY);\n    }\n\n    resetTransform(ctx) {\n        const position = this.position;\n        const scale = this.scale;\n        ctx.setTransform();\n        ctx.scale(this.dpr, this.dpr);\n        ctx.transform(scale, 0, 0, scale, position.offsetX, position.offsetY);\n    }\n\n    _getViewBox() {\n        const cacheViewBox = [\n            ...this._calculatePointBack([0,0]),\n            ...this._calculatePointBack([this.canvasMeta.actual_width,this.canvasMeta.actual_height]),\n        ];\n        this._cacheViewBox = cacheViewBox;\n        return cacheViewBox;\n    }\n\n    setNodeToTopLayer(node) {\n        const index = this._stack.findIndex(n => n === node);\n        if(index !== -1) {\n            const [renderNode] = this._stack.splice(index, 1);\n            this._stack.push(renderNode);\n        }\n    }\n\n    getCacheViewBox() {\n        return this._cacheViewBox;\n    }\n\n    \n    _render() {\n        this.scheduleRender();\n    }\n\n     /**\n     * 绘制画布\n     */\n    __render() {\n        if(!this._readyToRender) return;\n        // if(this.hasAnimeAndFrameRendered()) return;\n        this.runAnimeFrame();\n        this._resetTransform();\n        const ctx = this.ctx;\n        this.dispatchEvent(new JFlowEvent('beforeJflowRender', {\n            ctx\n        }));\n        const br = this._getViewBox();\n        this._viewBox = br;\n        // console.log(this._viewBox)\n        if(this.NodeRenderTop) {\n            this._linkStack.render(ctx, (link) => !link.ON_TOP && link.isInViewBox(br));\n            this._stack.render(ctx, (instance) => {\n                const result = doOverlap(br, instance.getBoundingRect());\n                // console.log(instance._layoutNode.type, result)\n                instance._isInViewBox = result;\n                return result;\n            });\n            this._linkStack.render(ctx, (link) => link.ON_TOP && link.isInViewBox(br));\n        } else {\n            this._stack.render(ctx, (instance) => {\n                const result = doOverlap(br, instance.getBoundingRect());\n                // console.log(instance._layoutNode.type, result)\n                instance._isInViewBox = result;\n                return result;\n            });\n            this._linkStack.render(ctx, (link) => link.isInViewBox(br));\n        }\n\n        if(this._tempNode) {\n            ctx.save();\n            this._tempNode.render(ctx)\n            ctx.restore();\n        }\n        if(this._tempLink) {\n            ctx.save();\n            this._tempLink.isInViewBox(br)\n            this._tempLink.render(ctx)\n            ctx.restore();\n        }\n\n        this.dispatchEvent(new JFlowEvent('afterJflowRender', {\n            ctx\n        }));\n        this.renderScrollBar(ctx);\n        // this.setFrameRendered();\n    }\n}\nObject.assign(JFlow.prototype, MessageMixin);\nObject.assign(JFlow.prototype, StackMixin);\nObject.assign(JFlow.prototype, LayoutMixin);\nObject.assign(JFlow.prototype, NodeWeakMapMixin);\nObject.assign(JFlow.prototype, AnimeMixin);\nObject.assign(JFlow.prototype, MiniMapMixin);\nObject.assign(JFlow.prototype, ScheduleMixin);\nObject.assign(JFlow.prototype, ScrollBarMixin);\n\nexport default JFlow;\nexport { JFLOW_MODE } from '../utils/constance';\nexport { default as JFlowEvent } from '../events';\nexport { default as commonEventAdapter } from '../events/commonAdapter';\nexport { default as Instance } from '../instance/instance';\nexport { default as Node } from '../instance/node';\nexport { default as BaseLink } from '../instance/base-link';\nexport { default as Point } from '../instance/shapes/point';\nexport { default as Rectangle } from '../instance/shapes/rectangle';\n// export { default as Group } from '../instance/shapes/rectangle-group';\nexport { default as Capsule } from '../instance/shapes/capsule';\nexport { default as CapsuleVertical } from '../instance/shapes/capsule-vertical';\n// export { default as CapsuleGroup } from '../instance/shapes/capsule-group';\n// export { default as CapsuleVerticalGroup } from '../instance/shapes/capsule-vertical-group';\nexport { default as Diamond } from '../instance/shapes/diamond';\n// export { default as DiamondGroup } from '../instance/shapes/diamond-group';\n// export { default as DiamondVerticalGroup } from '../instance/shapes/diamond-vertical-group';\nexport { default as Rhombus } from '../instance/shapes/rhombus';\n// export { default as RhombusGroup } from '../instance/shapes/rhombus-group';\nexport { default as Text } from '../instance/text';\nexport { default as Icon } from '../instance/image';\nexport { default as ShadowDom } from '../instance/shadowDom';\nexport { default as GroupFactory } from '../instance/groupFactory';\nexport { default as Link } from '../instance/link';\nexport { default as PolyLink } from '../instance/poly-link';\nexport { default as BezierLink } from '../instance/bezier-link';\nexport { default as LinearLayout} from '../layout/linear-layout';\n// export { default as TreeLayout } from '../ler-layouta;yout/tree-layout';\nexport { default as Lowcodelayout } from '../layout/low-code-layout';\nexport { default as ERLayout } from '../layout/er-layout/er-layout';\n// export { default as Orange } from '../instance/nodeWrapper/orange/orange'\n// export { default as TextEditor } from '../instance/text-editor';\nexport { default as TextGroup} from '../instance/text-group';\nexport { TextElement } from '../instance/text-group';","export default {\n    provide(){\n        return {\n            addToStack: this.addToStack,\n            addToLinkStack: this.addToLinkStack,\n            removeFromStack: this.removeFromStack,\n            removeFromLinkStack: this.removeFromLinkStack,\n        }\n    },\n    data() {\n        return {\n            stack: [], // 主要是为了连线\n        }\n    },\n    methods: {\n        addToStack(instance, source) {\n            this._jflowInstance.addToStack(instance);\n            if(source) {\n                instance._jflow.setRenderNodeBySource(source, instance)\n            }\n        },\n        addToLinkStack(link, sourceFrom, sourceTo) {\n            this._jflowInstance.addToLinkStack(link);\n            if(sourceFrom && sourceTo) {\n                link._jflow.addLinkNodeBySource(sourceFrom, sourceTo, link);\n            }\n        },\n        removeFromStack(instance) {\n            this._jflowInstance.removeFromStack(instance);\n        },\n        removeFromLinkStack(link, sourceFrom, sourceTo) {\n            this._jflowInstance.removeFromLinkStack(link);\n            if(sourceFrom && sourceTo) {\n                link._jflow.removeLinkNodeBySource(sourceFrom, sourceTo, link);\n            }\n        },\n        onStackChangeHandler() {\n            this._jflowInstance.recalculate();\n            this._jflowInstance.reflow();\n        }\n    }\n}","import JFlow from '../../core/flow';\nimport StackMixin from './StackMixin';\n/**\n * typs#slot 中的属性 \n * @typedef {Object} j-jflow-Node\n * @property {string}       type   - 布局节点类型\n * @property {Object}       configs  - 源数据\n * @property {LayoutNode}   meta   - 布局节点\n */\n/**\n * JFlow {@link JFlow} 的 vue 封装 \n * @module j-jflow\n * @property {JFlow~JFlowConfigs} configs - 传给 JFlow 的配置\n * @property {Boolean} loading            - 初始渲染状态，支持 sync\n */\nexport default {\n    mixins: [StackMixin],\n    provide(){\n        return {\n            renderJFlow: this.renderJFlow,\n            getJFlow: this.getInstance,\n        }\n    },\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        loading: Boolean,\n        genVueComponentKey: {\n            type: Function,\n        }\n    },\n    data() {\n        return {\n            // nodes: [],\n            // links: [],\n            renderNodes: [],\n            renderLinks: [],\n        }\n    },\n    render: function (createElement) {\n        if(!this.renderNodes.length) {\n            return createElement('div', this.$slots.default);\n        } else {\n            const vnodes = this.renderNodes.map(({ type, source, layoutNode }) => {\n                if(!this.$scopedSlots[type]) {\n                    if(this.$scopedSlots['jflowcommon']){\n                        type = 'jflowcommon';\n                    } else {\n                        return\n                    }\n                }\n                if(layoutNode.__vnode__) {\n                    return layoutNode.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ source, layoutNode });\n                if(this.genVueComponentKey) {\n                    vnode.key = this.genVueComponentKey(source);\n                }\n                \n                layoutNode.__vnode__ = vnode;\n                return vnode;\n            });\n            const vlinks = this.renderLinks.map(meta => {\n                let type = meta.type || 'plainlink'\n                if(!this.$scopedSlots[type]) {\n                    return null;\n                }\n                if(meta.__vnode__) {\n                    return meta.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ configs: meta });\n                if(this.genVueComponentKey) {\n                    const k1 = this.genVueComponentKey(meta.from.source);\n                    const k2 = this.genVueComponentKey(meta.to.source);\n                    const k3 = meta.part;\n                    vnode.key = `${k1}-${k2}-${k3}`\n                }\n                meta.__vnode__ = vnode;\n                return vnode\n            })\n\n            return createElement('div', [...vnodes, ...vlinks]);\n        }\n        \n    },\n    created() {\n        this._jflowInstance = new JFlow(this.configs);\n        this.genNodeLinkMeta();\n        this.loadingNodes();\n    },\n    beforeDestroy() {\n        this._jflowInstance.destroy();\n    },\n    methods: {\n        loadingNodes() {\n            this.$emit('update:loading', true)\n            let i = 0;\n            const tl = () => {\n                const end = i + 100;\n                const linkPart = this.links.slice(i, end);\n                if(linkPart.length) {\n                    // this.renderLinks.splice(this.renderLinks.length,  0, ...linkPart);\n                    this.renderLinks = this.renderLinks.concat(linkPart); // faster\n                    i = end;\n                    requestAnimationFrame(tl);\n                } else {\n                    requestAnimationFrame(this.mountJFlow.bind(this));\n                }\n            }\n            const tn = () => {\n                const end = i + 100;\n                const part = this.nodes.slice(i, end);\n                if(part.length) {\n                    // this.renderNodes.splice(this.renderNodes.length,  0, ...part);\n                    this.renderNodes = this.renderNodes.concat(part);\n                    i = end;\n                    requestAnimationFrame(tn);\n                } else {\n                    i = 0;\n                    requestAnimationFrame(tl)\n                }\n            }\n            requestAnimationFrame(tn)\n        },\n        mountJFlow() {\n            this._jflowInstance.$mount(this.$el);\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            this.$emit('update:loading', false)\n        },\n        genNodeLinkMeta() {\n            /** \n            * @member {j-jflow-Node[]} nodes\n            */\n            this.nodes = this._jflowInstance._layout.flowStack.map(meta => {\n                const { type, layoutNode, source } = meta;\n                const map = this._jflowInstance.source_Layout_Render_NodeMap;\n                let obj;\n                if(map.has(source)) {\n                    obj = map.get(source);\n                } else {\n                    obj = map.set(source);\n                }\n                obj.layoutNode = layoutNode;\n                return meta;\n            });\n            /** \n            * @member {Layout~LinkMeta[]} links\n            */\n            this.links = this._jflowInstance._layout.flowLinkStack.slice();\n        },\n        syncNodeLink() {\n            this.renderNodes = this.nodes.slice();\n            this.renderLinks = this.links.slice();\n        },\n        /**\n         * 绘制之前，vnode渲染之后\n         * @name j-jflow~preCallback\n         * @function\n         */\n        /**\n         * 重排\n         * @param {j-jflow~preCallback} preCallback - JFlow 绘制之前，vnode渲染之后\n         */\n        reflow(preCallback, afterCallback) {\n            this.genNodeLinkMeta();\n            this.syncNodeLink();\n            this.$nextTick(() => {\n                if(preCallback) {\n                    preCallback();\n                }\n                this._jflowInstance.recalculate();\n                this._jflowInstance.scheduleRender(() => {\n                    if(afterCallback) {\n                        afterCallback();\n                    }\n                });\n                \n            })\n        },\n        /**\n         * 获取单签 JFlow 实例\n         * @return {Jflow} - JFlow对象\n         */\n        getInstance() {\n            return this._jflowInstance;\n        },\n        /**\n         * 手动触发绘制\n         */\n        renderJFlow() {\n            if(this.__renderInSchedule__) {\n                return;\n            }\n            this.__renderInSchedule__ = true;\n            this.$nextTick(() => {\n                this._jflowInstance._render();\n                this.__renderInSchedule__ = false;\n            });\n        },\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport diff from 'object-diff';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inject: ['addToStack', 'removeFromStack'],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                // console.log(val, JSON.stringify(val) === JSON.stringify(oldVal), )\n                const diffed = diff(val, oldVal);\n                if(Object.keys(diffed).length === 0){\n                    return;\n                }\n                //\n                // const reflowKeys = Object.keys(diffed).filter(k => {\n                //     const lk = k.toLowerCase();\n                //     return !(lk.endsWith('color') || k.endsWith('style'));\n                // });\n                this._jflowInstance.setConfig(val);\n                // console.log('recalculateUp')\n                // this._jflowInstance.recalculateUp();\n                // console.log(reflowKeys.length, val)\n                // if(reflowKeys.length) {\n                //     this._jflowInstance._belongs.recalculateUp();\n                // }\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            },\n            source(val) {\n                this._jflowInstance._jflow.setRenderNodeBySource(val, this._jflowInstance);\n            }\n        },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            this.bindListeners();\n            this.addToStack(this._jflowInstance, this.source);\n        },\n        // updated() {\n        //     console.log('recalculateUp')\n\n        // },\n        destroyed() {\n            this._jflowInstance.destroy();\n            this.removeFromStack(this._jflowInstance);\n        },\n        methods: {\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\n/**\n * JFlow {@link BaseLink} 的 vue 封装 \n * @module jflow-link\n * @property {BaseLink~Configs} configs - 传给 BseLink 的配置, from, to属性会被替换为jflowid对应的 Instance\n * @property {String} from - source\n * @property {String} to - source\n */\nexport default function (nameNode, isLink) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inject: [ 'addToLinkStack', 'removeFromLinkStack', 'getJFlow' ],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            from: Object,\n            to: Object,\n        },\n        // watch: {\n        //     from() {\n        //         this.resetLink();\n        //     },\n        //     to() {\n        //         this.resetLink();\n        //     },\n        //     configs(val, oldVal) {\n        //         this.setConfig(val);\n        //     },\n        // },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            const jflow = this.getJFlow();\n            const fromInstance = jflow.getRenderNodeBySource(this.from);\n            const toInstance = jflow.getRenderNodeBySource(this.to);\n            this.createInstance(fromInstance, toInstance);\n        },\n        mounted() {\n            this.unwatch = this.$watch(() => [this.from, this.to, this.configs], () => {\n                this.refreshConfig();\n            })\n        },\n        methods: {\n            createInstance(fromInstance, toInstance) {\n                if(fromInstance && toInstance) {\n                    this._jflowInstance = new builder({\n                        ...this.configs,\n                        from: fromInstance,\n                        to: toInstance,\n                    });\n                    this.bindListeners();\n                    this.addToLinkStack(this._jflowInstance, this.from, this.to);   \n                }\n            },\n            refreshConfig() {\n                const jflow = this.getJFlow();\n                const fromInstance = jflow.getRenderNodeBySource(this.from);\n                const toInstance = jflow.getRenderNodeBySource(this.to);\n                if(!this._jflowInstance) {\n                    this.createInstance(fromInstance, toInstance);\n                } else {\n                    this._jflowInstance.setConfig({\n                        ...this.configs,\n                        from: fromInstance,\n                        to: toInstance,\n                    });\n                }\n                \n            },\n            // setConfig(val) {\n            //     const conf = {};\n            //     Object.keys(val).forEach(k => {\n            //         if(k !=='from' && k !== 'to'){\n            //             conf[k] = val[k];\n            //         }\n            //     })\n            //     this._jflowInstance.setConfig(conf);\n            // },\n            // resetLink() {\n            //     const jflow = this.getJFlow();\n            //     const fromInstance = jflow.getRenderNodeBySource(this.from);\n            //     const toInstance = jflow.getRenderNodeBySource(this.to);\n            //     this._jflowInstance.from = fromInstance;\n            //     this._jflowInstance.to = toInstance;\n            // },\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        },\n        destroyed() {\n            this.unwatch();\n            if(this._jflowInstance) {\n                this.removeFromLinkStack(this._jflowInstance, this.from, this.to);\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport StackMixin from './StackMixin';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        mixins: [StackMixin],\n        inject: {\n            addToBelongStack: {\n                from: 'addToStack',\n            },\n            removeFromBelongStack: {\n                from: 'removeFromStack',\n            },\n            renderJFlow: {\n                from: 'renderJFlow',\n            },\n        },\n        render: function (createElement) {\n            return createElement('jflow-group', this.$slots.default);\n        },\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                    return;\n                }\n                this._jflowInstance.setConfig(val);\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            },\n            source(val) {\n                this._jflowInstance._jflow.setRenderNodeBySource(val, this._jflowInstance);\n            }\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            this.addToBelongStack(this._jflowInstance, this.source);\n        },\n        mounted(){\n            this._jflowInstance.recalculate();\n        },\n        updated() {\n            this._jflowInstance.recalculateUp();\n        },\n        destroyed() {\n            this._jflowInstance.destroy();\n            this.removeFromBelongStack(this._jflowInstance);\n        },\n    }\n}","import { TextGroup } from '../../core/flow';\nimport StackMixin from './StackMixin';\n\nexport default {\n    mixins: [StackMixin],\n    inject: {\n        addToBelongStack: {\n            from: 'addToStack',\n        },\n        removeFromBelongStack: {\n            from: 'removeFromStack',\n        },\n        renderJFlow: {\n            from: 'renderJFlow',\n        },\n    },\n    data() {\n        return {\n            nodes: [],\n        }\n    },\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        visible: {\n            type: Boolean,\n            default: true,\n        },\n        source: {\n            type: Object,\n        },\n        genVueComponentKey: {\n            type: Function,\n        }\n    },\n    watch: {\n        configs(val, oldVal) {\n            if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                return;\n            }\n            this._jflowInstance.setConfig(val);\n            // this._jflowInstance._jflow._render();\n        },\n        '$listeners' (val, oldVal) {\n            let news = [];\n            let deletes = [];\n            const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n            const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n            vnew.forEach((v) => {\n                const hnew = v.handler;\n                if(!vold.find((q) => q.handler === hnew)) {\n                    news.push(v);\n                }\n            });\n            vold.forEach((v) => {\n                const hold = v.handler;\n                if(!vnew.find((q) => q.handler === hold)) {\n                    deletes.push(v);\n                }\n            });\n\n            news.forEach((v) => {\n                this._jflowInstance.addEventListener(v.event, v.handler);\n            });\n            deletes.forEach((v) => {\n                this._jflowInstance.removeEventListener(v.event, v.handler);\n            });\n        },\n        visible(val) {\n            this._jflowInstance.visible = val;\n            // this._jflowInstance._belongs.recalculateUp();\n            // this._jflowInstance._jflow._render();\n        },\n        source(val) {\n            this._jflowInstance._jflow.setRenderNodeBySource(val, this._jflowInstance);\n        }\n    },\n    \n    created() {\n        this._jflowInstance = new TextGroup(this.configs);\n        this._jflowInstance.visible = this.visible;\n        Object.keys(this.$listeners).map(event => {\n            const func = this.$listeners[event].bind(this);\n            this._jflowInstance.addEventListener(event, func);\n        })\n        this.addToBelongStack(this._jflowInstance, this.source);\n        this.genTextElementMeta();\n    },\n    mounted(){\n        this._jflowInstance.recalculate();\n    },\n    updated() {\n        this._jflowInstance.recalculateUp();\n    },\n    destroyed() {\n        this._jflowInstance.destroy();\n        this.removeFromBelongStack(this._jflowInstance);\n    },\n    render: function (createElement) {\n        if(!this.nodes.length) { \n            return createElement('jflow-group', this.$slots.default);\n        } else {\n            const vnodes = this.nodes.map((textElement) => {\n                const { type, source } = textElement;\n                if(!this.$scopedSlots[type]) {\n                    if(this.$scopedSlots['jflowcommon']){\n                        type = 'jflowcommon';\n                    } else {\n                        return\n                    }\n                }\n                if(textElement.__vnode__) {\n                    return textElement.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ source, textElement });\n                if(this.genVueComponentKey) {\n                    vnode.key = this.genVueComponentKey(source);\n                }\n                \n                textElement.__vnode__ = vnode;\n                return vnode;\n            });\n            return createElement('div', vnodes);\n        }\n    },\n    methods: {\n        genTextElementMeta() {\n            this.nodes = this._jflowInstance._textElements.filter(elem => elem.type !== 'text');\n        },\n        reflow() {\n            this._jflowInstance.refreshTextElements();\n            this.genTextElementMeta();\n            this.$nextTick(() => {\n                this._jflowInstance.refresh();\n            })\n        },\n    },\n}","// import JFlowComponent from './components/JFlow';\nimport JFlowComponent from './components/JFlow';\nimport JFlowInstance from './components/JFlowInstance';\nimport JFlowLink from './components/JFlowLink';\nimport JFlowGroup from './components/JFlowGroup';\nimport JFlowTextGroup from './components/JFlowTextGroup';\n \nconst JFLOW_NODES = [\n    /**\n     * JFlow {@link Point} 的 vue 封装 \n     * @module j-point\n     * @property {Point~PointConfigs} configs - 传给 Point 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Point',\n    /**\n     * JFlow {@link Rectangle} 的 vue 封装 \n     * @module j-rectangle\n     * @property {Rectangle~RectangleConfigs|GroupTemplate~GroupConfigs} configs - 传给 Rectangle 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rectangle',\n    /**\n     * JFlow {@link Capsule} 的 vue 封装 \n     * @module j-capsule\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Capsule 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Capsule',\n    /**\n     * JFlow {@link Diamond} 的 vue 封装 \n     * @module j-diamond\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Diamond',\n    /**\n     * JFlow {@link Rhombus} 的 vue 封装 \n     * @module j-rhombus\n     * @property {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rhombus',\n    /**\n     * JFlow {@link Text} 的 vue 封装 \n     * @module j-text\n     * @property {Text~TextConfigs} configs - 传给 Text 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Text',\n    /**\n     * JFlow {@link Icon} 的 vue 封装 \n     * @module j-icon\n     * @property {Icon~IconConfigs} configs - 传给 Icon 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Icon',\n\n    'ShadowDom',\n\n    'TextEditor',\n];\n/**\n * @typedef {BezierLink~Configs} j-bezier-link~Configs\n * @property {String} from   - 起始单元 jflowId\n * @property {String} to     - 终止单元 jflowId\n */\nconst JFLOW_LINKS = [\n    'Link',\n    'PolyLink',\n    \n    /**\n     * JFlow {@link BezierLink} 的 vue 封装 \n     * @module j-bezier-link\n     * @property {BezierLink~Configs} configs - 传给 BezierLink 的配置\n     */\n    'BezierLink'\n]\nconst JFLOW_GROUPS = [\n    /**\n     * JFlow {@link CapsuleGroup} 的 vue 封装 \n     * @module j-capsule-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleGroup',\n    /**\n     * JFlow {@link CapsuleVerticalGroup} 的 vue 封装 \n     * @module j-capsule-vertical-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleVerticalGroup',\n    /**\n     * JFlow {@link DiamondGroup} 的 vue 封装 \n     * @module j-diamond-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondGroup',\n    /**\n     * JFlow {@link DiamondVerticalGroup} 的 vue 封装 \n     * @module j-diamond-vertical-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondVerticalGroup',\n    /**\n     * JFlow {@link RhombusGroup} 的 vue 封装 \n     * @module j-rhombus-group\n     * @property {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 传给 RhombusGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'RhombusGroup',\n\n    'PointGroup',\n]\n\nconst components = [\n    {\n        name: 'Jflow',\n        component: JFlowComponent,\n    },\n    {\n        /**\n         * JFlow {@link RectangleGroup} 的 vue 封装 \n         * @module j-group\n         * @property {RectangleGroup~RectangleGroupConfigs} configs - 传给 RectangleGroup 的配置\n         */\n        name: 'Group',\n        component: JFlowGroup('Group'),\n    }, \n    ...JFLOW_GROUPS.map(name => ({\n        name,\n        component: JFlowGroup(name)\n    })),\n    ...JFLOW_NODES.map(name => ({\n        name,\n        component: JFlowInstance(name)\n    })),\n    ...JFLOW_LINKS.map(name => ({\n        name,\n        component: JFlowLink(name)\n    })),\n    {\n        name: 'TextGroup',\n        component: JFlowTextGroup\n    }\n];\nconst componentPrefix = 'j';\ncustomElements.define('jflow-group', class extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({mode: 'open'});\n    }\n});\n/**\n * @module JFlowVuePlugin \n */\nexport default {\n    /**\n     * 安装 JFlowVuePlugin\n     * @function\n     * @param {Vue} Vue - Vue\n     * @param {Object} options - Vue plugin 配置\n     * @param {string} options.prefix - 组件前缀，默认是 j\n     * @param {Object} options.custom - 自定义组件，形式为 { key: {@link:Instance} }\n     */\n    install: (Vue, options = {}) => {\n        let prefixToUse = componentPrefix;\n        if(options && options.prefix){\n            prefixToUse = options.prefix;\n        };\n        components.forEach(k => {\n            Vue.component(`${prefixToUse}${k.name}`, k.component);\n        });\n\n        if(options.customInstance) {\n            Object.keys(options.customInstance).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowInstance(options.customInstance[name]));\n            })\n        }\n        if(options.customGroups) {\n            Object.keys(options.customGroups).forEach(name => {\n                // console.log(`${prefixToUse}${name}` )\n                Vue.component(`${prefixToUse}${name}`, JFlowGroup(options.customGroups[name]));\n            })\n        }\n        if(options.customLink) {\n            Object.keys(options.customLink).forEach(name => {\n                // console.log(`${prefixToUse}${name}` )\n                Vue.component(`${prefixToUse}${name}`, JFlowLink(options.customLink[name]));\n            })\n        }\n    }\n}\n\n// export { * as JFlowInstance } from './components/JFlowInstance'; \n","const packageJson = require('../package.json');\nimport { default as JFlow } from './core/flow'; \nexport default JFlow;\nexport * from './core/flow';\nexport { default as JFlowVuePlugin } from './vue-plugin/JFlowPlugin.js';\nwindow.$jflow_version = packageJson.version;\n// console.log(`jflow version@${packageJson.version}`)","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.body,attrs:{\"id\":\"app\"}},[_c('div',{class:_vm.$style.sidebar},[_c('div',[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"IfStatement\"},on:{\"dragstart\":_vm.onDragStartRectangle}},[_vm._v(\"IfStatement\")])]),_c('div',[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"variable\"},on:{\"dragstart\":_vm.onDragStartPoint}},[_vm._v(\"Variable\")])]),_c('div',[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"jsblock\"},on:{\"dragstart\":_vm.onDragjsBlock}},[_vm._v(\"jsBlock\")])])]),_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('j-jflow',{ref:\"jflow\",class:_vm.$style.wrapper,attrs:{\"configs\":_vm.configs,\"loading\":_vm.jflowloading,\"genVueComponentKey\":_vm.genVueComponentKey},on:{\"update:loading\":function($event){_vm.jflowloading=$event},\"click\":_vm.onClickNoWhere,\"drop\":_vm.onDrop,\"pressEnd\":_vm.onPressEnd},scopedSlots:_vm._u([{key:\"start\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-start',{attrs:{\"node\":source}})]}},{key:\"end\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-end',{attrs:{\"node\":source}})]}},{key:\"variable\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-variable',{attrs:{\"node\":source},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)},\"change\":function($event){return _vm.onChangeContent($event, source)}}})]}},{key:\"IfStatement\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-ifstatement',{attrs:{\"node\":source},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)}}})]}},{key:\"SwitchStatement\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-switch',{attrs:{\"node\":source},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)}}})]}},{key:\"WhileStatement\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-whilestatement',{attrs:{\"node\":source},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event,source )}}})]}},{key:\"endpoint\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-endpoint',{attrs:{\"node\":source}})]}},{key:\"CallLogic\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-calllogic',{attrs:{\"node\":source},on:{\"toggle-select\":function($event){return _vm.onToggleSelect($event, source)},\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)}}})]}},{key:\"JSblock\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('j-jsblock',{attrs:{\"node\":source},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)},\"demojsblock\":_vm.onclickdemojsblock,\"change\":function($event){return _vm.onContentChange($event, source)}}})]}},{key:\"plainlink\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('instance-link',{attrs:{\"linkConfigs\":configs},on:{\"drop\":function($event){return _vm.onDropToLink($event, configs)}}})]}}])}),(_vm.isHover)?_c('div',{ref:\"hoverblock\",class:_vm.$style.hoverblock,style:((\"transform: translate(\" + _vm.offsetX + \"px, \" + _vm.offsetY + \"px)\"))},[_c('ul',_vm._l((_vm.logics),function(l){return _c('li',{key:l.content,on:{\"click\":function($event){return _vm.onSelectLogic(l)}}},[_vm._v(_vm._s(l.content))])}),0)]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-diamond-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.groupConfig},on:{\"dblclick\":_vm.onDbClick}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n       fontSize: '12px',\n       textColor: '#585c63',\n       content: _vm.node.content,\n       lineHeight: 26,\n       editable: true\n   }},on:{\"change\":_vm.onContentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n     <j-diamond-group \n        :source=\"node\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\"\n        @dblclick=\"onDbClick\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n            editable: true\n        }\"\n        @change=\"onContentChange\"/>\n     </j-diamond-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 10,\n            }\n        }\n    },\n    methods: {\n        onContentChange(event){\n            console.log(event.detail)\n            this.$emit('change', {\n                val: event.detail.val,\n                oldVal: event.detail.oldVal,\n            });\n        },\n        onDbClick(event) {\n            console.log('dblclick')\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./variable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./variable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./variable.vue?vue&type=template&id=01257579&\"\nimport script from \"./variable.vue?vue&type=script&lang=js&\"\nexport * from \"./variable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-rhombus-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.groupConfig},on:{\"mouseenter\":function($event){_vm.touch = true},\"mouseleave\":function($event){_vm.touch = false},\"afterResolveMovingTarget\":_vm.onAfterResolveMovingTarget}},_vm.$listeners),[_c('j-point',{attrs:{\"configs\":{\n        backgroundColor: '#99DBC5',\n        radius: 8,\n        borderColor: '#33B88C',\n        borderWidth: 2,\n        absolutePosition: {\n            top: 10,\n            right: 10,\n        }\n    }},on:{\"click\":function($event){_vm.shrink = !_vm.shrink}}}),_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: '条件分支',\n        lineHeight: 26,\n        absolutePosition: {\n            top: -13,\n        }\n    }}}),_c('j-group',[(_vm.shrink)?_c('j-text',{attrs:{\"configs\":{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: 'ifstatement ' + _vm.node.id,\n            lineHeight: 26,\n            indent: 10,\n        }}}):_c('j-rectangle',{attrs:{\"configs\":{\n                backgroundColor: '#FAAAAA',\n                width: 36,\n                height: 72,\n            }}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-rhombus-group\n        :source=\"node\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\"\n        @mouseenter=\"touch = true\"\n        @mouseleave=\"touch = false\"\n        @afterResolveMovingTarget=\"onAfterResolveMovingTarget\">\n        <j-point :configs=\"{\n            backgroundColor: '#99DBC5',\n            radius: 8,\n            borderColor: '#33B88C',\n            borderWidth: 2,\n            absolutePosition: {\n                top: 10,\n                right: 10,\n            }\n        }\" @click=\"shrink = !shrink\"/>\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: '条件分支',\n            lineHeight: 26,\n            absolutePosition: {\n                top: -13,\n            }\n        }\"/>\n        <j-group>\n            <j-text v-if=\"shrink\" :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: 'ifstatement ' + node.id,\n                lineHeight: 26,\n                indent: 10,\n            }\"/>\n            <j-rectangle v-else :configs=\"{\n                    backgroundColor: '#FAAAAA',\n                    width: 36,\n                    height: 72,\n                }\">\n            </j-rectangle>\n        </j-group>\n    </j-rhombus-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n        layoutNode: Object,\n    },\n    inject: ['renderJFlow'],\n    data() {\n        return {\n            touch: false,\n            shrinkButton: {\n                backgroundColor: '#99DBC5',\n                radius: 20,\n                borderColor: '#33B88C',\n            },\n            shrink: false,\n        }\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                backgroundColor: this.touch ? 'red' : '#fff',\n                shadowColor: '#517cff',\n                shadowBlur: 15,\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 30,\n                marginTop: 30,\n            }\n        }\n    },\n    watch: {\n        shrink(val){\n            console.log(val)\n        },\n        touch(val) {\n            console.log(val)\n        },\n    },\n    updated() {\n        this.renderJFlow();\n    },\n    methods: {\n        onAfterResolveMovingTarget(event) {\n            const jflow = event.detail.jflow;\n            const layoutNode = jflow.getLayoutNodeBySource(this.node);\n            const renderNodes = layoutNode.getNodes(jflow);\n            jflow.setMovingTargets(renderNodes);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ifstatement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ifstatement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ifstatement.vue?vue&type=template&id=2590a5f6&\"\nimport script from \"./ifstatement.vue?vue&type=script&lang=js&\"\nexport * from \"./ifstatement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',{attrs:{\"source\":_vm.node,\"configs\":_vm.configs}},[_c('j-text',{ref:\"start\",attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#000',\n        content: 'Start',\n    }}}),_c('j-point',{attrs:{\"configs\":{\n        backgroundColor: '#99DBC5',\n        radius: 20,\n        borderColor: '#33B88C',\n        borderWidth: 2,\n        shadowBlur: 8,\n        shadowColor: 'rgba(0, 0, 0, 0.1)',\n        shadowOffsetY: 2,\n        shadowOffsetX: 0,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group \n        :source=\"node\" \n        :configs=\"configs\">\n        <j-text ref=\"start\" :configs=\"{\n            fontSize: '12px',\n            textColor: '#000',\n            content: 'Start',\n        }\">\n        </j-text>\n        <j-point :configs=\"{\n            backgroundColor: '#99DBC5',\n            radius: 20,\n            borderColor: '#33B88C',\n            borderWidth: 2,\n            shadowBlur: 8,\n            shadowColor: 'rgba(0, 0, 0, 0.1)',\n            shadowOffsetY: 2,\n            shadowOffsetX: 0,\n        }\"></j-point>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n                borderColor: 'transparent',\n                borderWidth: 0,\n            },\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./start.vue?vue&type=template&id=2c378f90&\"\nimport script from \"./start.vue?vue&type=script&lang=js&\"\nexport * from \"./start.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',{attrs:{\"source\":_vm.node,\"configs\":_vm.configs}},[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#000',\n        content: 'End',\n    }}}),_c('j-rectangle',{attrs:{\"configs\":{\n        backgroundColor: '#FAAAAA',\n        width: 36,\n        height: 36,\n        borderRadius: 8,\n        borderWidth: 2,\n        borderColor: '#F55656',\n        shadowBlur: 8,\n        shadowColor: 'rgba(0, 0, 0, 0.1)',\n        shadowOffsetY: 2,\n        shadowOffsetX: 0,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group\n        :source=\"node\"\n        :configs=\"configs\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#000',\n            content: 'End',\n        }\">\n        </j-text>\n        <j-rectangle :configs=\"{\n            backgroundColor: '#FAAAAA',\n            width: 36,\n            height: 36,\n            borderRadius: 8,\n            borderWidth: 2,\n            borderColor: '#F55656',\n            shadowBlur: 8,\n            shadowColor: 'rgba(0, 0, 0, 0.1)',\n            shadowOffsetY: 2,\n            shadowOffsetX: 0,\n        }\"></j-rectangle>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                }),\n                borderColor: 'transparent',\n                borderWidth: 0,\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./end.vue?vue&type=template&id=4a1a7239&\"\nimport script from \"./end.vue?vue&type=script&lang=js&\"\nexport * from \"./end.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-point',{attrs:{\"source\":_vm.node,\"configs\":{\n        backgroundColor: '#fff',\n        borderColor: '#000',\n        borderWidth: 1,\n        radius: 5,\n        ignoreHit: true,\n    }}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-point \n        :source=\"node\" \n        :configs=\"{\n            backgroundColor: '#fff',\n            borderColor: '#000',\n            borderWidth: 1,\n            radius: 5,\n            ignoreHit: true,\n        }\">\n    </j-point>\n</template>\n\n<script>\nexport default {\n    props: {\n        node: Object,\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./endpoint.vue?vue&type=template&id=1a1a8af8&\"\nimport script from \"./endpoint.vue?vue&type=script&lang=js&\"\nexport * from \"./endpoint.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-capsule-vertical-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.configs},on:{\"afterResolveMovingTarget\":_vm.onAfterResolveMovingTarget}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: _vm.textColor,\n        content: _vm.node.id,\n    }}}),_vm._l((_vm.node.cases),function(switchcase){return [_c('j-switchcase',{key:switchcase.id,attrs:{\"node\":switchcase}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-diamond-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.groupConfig,\"rootLink\":true}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: _vm.node.content,\n        lineHeight: 26,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-diamond-group\n        :source=\"node\" \n        :configs=\"groupConfig\"\n        :rootLink=\"true\"\n        v-on=\"$listeners\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n        }\"/>\n    </j-diamond-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                paddingTop: 2,\n                paddingBottom: 2,\n                padding: 10,\n                borderWidth: 2,\n                borderRadius: 5,\n            }\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switchcase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switchcase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./switchcase.vue?vue&type=template&id=64be1838&\"\nimport script from \"./switchcase.vue?vue&type=script&lang=js&\"\nexport * from \"./switchcase.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <j-capsule-vertical-group \n        :source=\"node\" \n        :configs=\"configs\"\n        v-on=\"$listeners\"\n        @afterResolveMovingTarget=\"onAfterResolveMovingTarget\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor,\n            content: node.id,\n        }\">\n        </j-text>\n        <template v-for=\"switchcase in node.cases\">\n            <j-switchcase :node=\"switchcase\" :key=\"switchcase.id\" />\n        </template>\n    </j-capsule-vertical-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport switchCase from './switchcase.vue';\nexport default {\n    components: {\n        // 'j-variable': variable,\n        'j-switchcase': switchCase,\n    },\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            textColor: '#585c63',\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                paddingTop: 20,\n                paddingBottom: 20\n            }\n        }\n    },\n    methods: {\n        onAfterResolveMovingTarget(event) {\n            const jflow = event.detail.jflow;\n            const layoutNode = jflow.getLayoutNodeBySource(this.node);\n            const renderNodes = layoutNode.getNodes(jflow);\n            jflow.setMovingTargets(renderNodes);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./switch.vue?vue&type=template&id=186573dd&\"\nimport script from \"./switch.vue?vue&type=script&lang=js&\"\nexport * from \"./switch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-rhombus-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.groupConfig},on:{\"afterResolveMovingTarget\":_vm.onAfterResolveMovingTarget}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: _vm.node.content,\n        lineHeight: 26,\n        indent: 10,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-rhombus-group\n        :source=\"node\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\"\n        @afterResolveMovingTarget=\"onAfterResolveMovingTarget\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n            indent: 10,\n        }\"/>\n    </j-rhombus-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 30,\n            }\n        }\n    },\n    methods: {\n        onAfterResolveMovingTarget(event) {\n            const jflow = event.detail.jflow;\n            const layoutNode = jflow.getLayoutNodeBySource(this.node);\n            const renderNodes = layoutNode.getNodes(jflow);\n            jflow.setMovingTargets(renderNodes);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./whilestatement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./whilestatement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./whilestatement.vue?vue&type=template&id=cd922f5c&\"\nimport script from \"./whilestatement.vue?vue&type=script&lang=js&\"\nexport * from \"./whilestatement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.configs}},_vm.$listeners),[_c('j-group',{attrs:{\"configs\":_vm.headerConfigs}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}}),_c('j-text',{attrs:{\"configs\":{\n            fontSize: '16px',\n            textColor: '#585c63',\n            content: '调用逻辑',\n        }}})],1),_c('j-group',{attrs:{\"configs\":_vm.contentConfigs},on:{\"click\":_vm.onClick}},[_c('j-text',{attrs:{\"configs\":{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: _vm.node.content || '请选择接口' ,\n        }}})],1),(_vm.node.params && _vm.node.params.length)?[_c('j-group',{ref:\"paramGroup\",attrs:{\"configs\":_vm.paramsConfigs}},[_c('j-text',{attrs:{\"configs\":{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: '参数',\n            }}}),_vm._l((_vm.node.params),function(param){return _c('j-text',{key:param.content,attrs:{\"configs\":{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: param.content,\n            }}})})],2)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group v-on=\"$listeners\" \n        :source=\"node\" \n        :configs=\"configs\">\n        <j-group :configs=\"headerConfigs\">\n            <j-icon :configs=\"imageConfig\" />\n            <j-text :configs=\"{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: '调用逻辑',\n            }\" />\n        </j-group>\n        <j-group @click=\"onClick\" :configs=\"contentConfigs\">\n            <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || '请选择接口' ,\n            }\" />\n            <!-- <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || 'sss接口' ,\n            }\" />\n            <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || '接口' ,\n            }\" /> -->\n        </j-group>\n        <template v-if=\"node.params && node.params.length\">\n            <j-group ref=\"paramGroup\" :configs=\"paramsConfigs\">\n                <j-text :configs=\"{\n                    fontSize: '16px',\n                    textColor: '#585c63',\n                    content: '参数',\n                }\" />\n                <j-text v-for=\"param in node.params\" \n                    :key=\"param.content\"\n                    :configs=\"{\n                    fontSize: '16px',\n                    textColor: '#585c63',\n                    content: param.content,\n                }\" />\n            </j-group>\n        </template>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport logicIcon from '../assets/logic.svg';\nconst p = new Image();\np.src = logicIcon;\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                    alignment: 'start'\n                }),\n                padding: 10,\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 12,\n            },\n            headerConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0\n                }),\n                borderRadius: 10,\n                borderColor: '#ccc',\n                borderWidth: 0,\n            },\n            contentConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                    justify: 'start',\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                width: 200,\n                height: 36,\n            },\n            paramsConfigs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                    alignment: 'end'\n                }),\n                borderColor: 'transparent',\n                hoverStyle: 'transparent',\n            },\n            imageConfig: {\n                image: p,\n                width: 30,\n                height: 30,\n            }\n        }\n    },\n    watch: {\n        'node.params'(val) {\n            this.$nextTick(() => {\n                if(this.$refs.paramGroup) {\n                    const instance = this.$refs.paramGroup._jflowInstance;\n                    instance.recalculateUp();\n                    instance._jflow._render();  \n                }  \n            })\n        }\n    },\n    methods: {\n        onClick(event) {\n            console.log(event)\n            event.detail.bubbles = false; \n            const { currentTarget } = event;\n            const p = [ -currentTarget.width/2, currentTarget.height/2 ];\n            console.log(p)\n            const gp = currentTarget.calculateToRealWorld(p)\n            // const [ offsetX, offsetY ] = gp;\n            this.$emit('toggle-select', gp);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./callLogic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./callLogic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./callLogic.vue?vue&type=template&id=65fddae9&\"\nimport script from \"./callLogic.vue?vue&type=script&lang=js&\"\nexport * from \"./callLogic.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('jPolyLink',{attrs:{\"configs\":_vm.configs,\"from\":_vm.linkConfigs.from.source,\"to\":_vm.linkConfigs.to.source},on:{\"dragenter\":_vm.onDragEnter,\"dragleave\":_vm.onDragOverEnd,\"drop\":_vm.onDropToLink}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <jPolyLink\n        :configs=\"configs\"\n        :from=\"linkConfigs.from.source\"\n        :to=\"linkConfigs.to.source\"\n        @dragenter=\"onDragEnter\"\n        @dragleave=\"onDragOverEnd\"\n        @drop=\"onDropToLink\">\n    </jPolyLink>\n</template>\n\n<script>\nexport default {\n    inject: ['renderJFlow'],\n    props: {\n        linkConfigs: Object,\n    },\n    data() {\n        return {\n            isDragOver: false,\n        };\n    },\n    computed: {\n        configs() {\n            return {\n                ...this.linkConfigs,\n                // fromDir: undefined,\n                // toDir: undefined,\n                // isSelf: false,\n                radius: 5,\n                approximate: 400,\n                backgroundColor: this.isDragOver ? 'rgba(81, 124, 255, 0.5)' : '#000',\n            };\n        },\n    },\n    methods: {\n        onDropToLink($event) {\n            this.$emit('drop', $event);\n            this.isDragOver = false;\n        },\n        onDragEnter($event) {\n            console.log('dragenter')\n            this.isDragOver = true;\n        },\n        onDragOverEnd() {\n            console.log('onDragOverEnd')\n            this.isDragOver = false;\n        },\n    },\n    updated() {\n        this.renderJFlow();\n    }\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instance-link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instance-link.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./instance-link.vue?vue&type=template&id=41b378d8&\"\nimport script from \"./instance-link.vue?vue&type=script&lang=js&\"\nexport * from \"./instance-link.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.configs},on:{\"click\":_vm.onClick}},_vm.$listeners),[_c('j-group',{attrs:{\"configs\":_vm.headerConfigs}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}}),_c('j-text',{attrs:{\"configs\":{\n            fontSize: '16px',\n            textColor: '#585c63',\n            content: 'JS 代码块',\n        }}})],1),_c('j-shadow-dom',{attrs:{\"configs\":_vm.editorRect}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group \n        :source=\"node\"\n        :configs=\"configs\"\n        @click=\"onClick\"\n        v-on=\"$listeners\">\n        <j-group :configs=\"headerConfigs\">\n            <j-icon :configs=\"imageConfig\" />\n            <j-text :configs=\"{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: 'JS 代码块',\n            }\" />\n        </j-group>\n        <j-shadow-dom :configs=\"editorRect\"></j-shadow-dom>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport logicIcon from '../assets/logic.svg';\nconst p = new Image();\np.src = logicIcon;\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                    alignment: 'start'\n                }),\n                padding: 10,\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 12,\n            },\n            headerConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0\n                }),\n                borderRadius: 10,\n                borderColor: '#ccc',\n                borderWidth: 0,\n            },\n            contentConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                    justify: 'start',\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                width: 200,\n                height: 36,\n            },\n            editorRect: {\n                width: 568,\n                height: 321,\n                createDocument: (container) => {\n                    const div = document.createElement('div');\n                    div.style.height = '100%';\n                    div.style.background = '#0d1117';\n                    div.style.color = \"#c9d1d9\"\n                    div.innerText = this.node.content;\n                    div.setAttribute('contenteditable', true)\n                    div.addEventListener('input', () => {\n                        console.log(div.innerText)\n                        this.$emit('change', div.innerText);\n                    })\n                    container.appendChild(div)\n                }\n            },\n            imageConfig: {\n                image: p,\n                width: 30,\n                height: 30,\n            }\n        }\n    },\n    watch: {\n        'node.params'(val) {\n            this.$nextTick(() => {\n                if(this.$refs.paramGroup) {\n                    const instance = this.$refs.paramGroup._jflowInstance;\n                    instance.recalculateUp();\n                    instance._jflow._render();  \n                }  \n            })\n        }\n    },\n    methods: {\n        onClick(event) {\n            console.log(event);\n            this.$emit('demojsblock')\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsBlock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsBlock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./jsBlock.vue?vue&type=template&id=4fd1d2b8&\"\nimport script from \"./jsBlock.vue?vue&type=script&lang=js&\"\nexport * from \"./jsBlock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\" :class=\"$style.body\">\n      <div :class=\"$style.sidebar\">\n        <div>\n            <div draggable=\"true\" :class=\"$style.part\" type=\"IfStatement\" @dragstart=\"onDragStartRectangle\">IfStatement</div>\n        </div>\n        <div>\n            <div draggable=\"true\" :class=\"$style.part\" type=\"variable\" @dragstart=\"onDragStartPoint\">Variable</div>\n        </div>\n        <div>\n            <div draggable=\"true\" :class=\"$style.part\" type=\"jsblock\" @dragstart=\"onDragjsBlock\">jsBlock</div>\n        </div>\n      </div>\n      <div style=\"position: relative;\">\n        <j-jflow ref=\"jflow\" \n            :class=\"$style.wrapper\" \n            :configs=\"configs\"\n            :loading.sync=\"jflowloading\"\n            :genVueComponentKey=\"genVueComponentKey\"\n            @click=\"onClickNoWhere\"\n            @drop=\"onDrop\"\n            @pressEnd=\"onPressEnd\">\n                <template #start=\"{ source }\">\n                    <j-start :node=\"source\"></j-start>\n                </template>\n                <template #end=\"{ source }\">\n                    <j-end :node=\"source\"></j-end>\n                </template>\n                <template #variable=\"{ source }\">\n                    <j-variable :node=\"source\" \n                    @pressStart=\"onPressStart(source)\" \n                    @outOfFlow=\"onOutOfFlow($event, source)\"\n                    @change=\"onChangeContent($event, source)\"></j-variable>\n                </template>\n                <template #IfStatement=\"{ source }\">\n                    <j-ifstatement \n                        :node=\"source\" \n                        @pressStart=\"onPressStart(source)\" \n                        @outOfFlow=\"onOutOfFlow($event, source)\"></j-ifstatement>\n                </template>\n                <template #SwitchStatement=\"{ source }\" >\n                    <j-switch :node=\"source\" \n                    @pressStart=\"onPressStart(source)\" \n                    @outOfFlow=\"onOutOfFlow($event, source)\"/>\n                </template>\n                <template #WhileStatement=\"{ source }\">\n                    <j-whilestatement :node=\"source\" \n                    @pressStart=\"onPressStart(source)\" \n                    @outOfFlow=\"onOutOfFlow($event,source )\"></j-whilestatement>\n                </template>\n                <template #endpoint=\"{ source }\">\n                    <j-endpoint :node=\"source\"></j-endpoint>\n                </template>\n                <template #CallLogic=\"{ source }\" >\n                    <j-calllogic \n                        :node=\"source\"\n                        @toggle-select=\"onToggleSelect($event, source)\"\n                        @pressStart=\"onPressStart(source)\" \n                        @outOfFlow=\"onOutOfFlow($event, source)\">\n                    </j-calllogic>\n                </template>\n                <template #JSblock=\"{ source }\">\n                    <j-jsblock :node=\"source\"\n                    @pressStart=\"onPressStart(source)\" \n                    @outOfFlow=\"onOutOfFlow($event, source)\"\n                    @demojsblock=\"onclickdemojsblock\"\n                    @change=\"onContentChange($event, source)\">\n                    </j-jsblock>\n                </template>\n                <template #plainlink=\"{ configs }\">\n                    <instance-link\n                        :linkConfigs=\"configs\"\n                        @drop=\"onDropToLink($event, configs)\">\n                    </instance-link>\n                </template>\n        </j-jflow>\n        <div ref=\"hoverblock\" \n            :style=\"`transform: translate(${offsetX}px, ${offsetY}px)`\" \n            :class=\"$style.hoverblock\"\n             v-if=\"isHover\">\n            <ul>\n                <li v-for=\"l in logics\" :key=\"l.content\"\n                    @click=\"onSelectLogic(l)\">{{l.content}}</li>\n            </ul>\n        </div>\n      </div>\n      <!-- <div :class=\"$style.ast\">\n          <pre v-html=\"prettyJson(ast)\"></pre>\n      </div> -->\n  </div>\n</template>\n\n<script>\nimport { prettyPrintJson } from 'pretty-print-json';\nimport { LinearLayout, Lowcodelayout, Rectangle, Point, commonEventAdapter } from '@joskii/jflow';\n// import './logic-components/assignment.vue'; // resolve Circular dependencies with logic-node!!!\n// import logicNode from './logic-components/logic-node';\nimport variable from './components/variable.vue';\nimport ifStatement from './components/ifstatement.vue';\nimport start from './components/start.vue';\nimport end from './components/end.vue';\nimport endPoint from './components/endpoint.vue';\nimport switchComp from './components/switch.vue'; \nimport whileComp from './components/whilestatement.vue';\nimport CallLogicComp from './components/callLogic.vue';\nimport instanceLink from './components/instance-link.vue';\nimport JSBlockComp from './components/jsBlock.vue';\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\nfunction getPath(object, condition) {\n\n    function iter(o, p) {\n        if (typeof o === 'object') {\n            return Object.keys(o).some(function (k) {\n                return iter(o[k], p.concat(k));\n            });\n        }\n        if (condition(p[p.length - 1])) {\n            path = p;\n            return true;\n        }\n    }\n\n    var path = [];\n    iter(object, []);\n    return path.join('.');\n}\nconsole.log(commonEventAdapter)\nlet uniqueId = 0;\nlet uuuuid = 0;\nfunction getuuuuid() {\n    return uuuuid++;\n}\nfunction makeAst(number) {\n    const ast = { type: 'Root', body: [ { type: 'start', id: 'start' }, ], playground: [] }\n    function randomVariable() {\n        const id = getuuuuid();\n        return {\n            type: 'variable',\n            content: `variable-${id}`,\n            id: `variable${id}`,\n        };\n    }\n\n    function randomCallLogic() {\n        const id = getuuuuid();\n        return {\n            type: 'CallLogic',\n            id: `CallLogic-${id}`,\n            content: `CallLogic-${id}`,\n            params: [],\n        }\n    }\n    \n    function randomIFstatement() {\n        const id = getuuuuid();\n        return {\n            type: 'IfStatement',\n            content: `IfStatement-${id}`,\n            id: `IfStatement-${id}`,\n            consequent: [randomVariable()],\n            alternate: [randomVariable()],\n        }\n    }\n    let lastObj = ast.body;\n    function randomStateMachine() {\n        const p = Math.floor(Math.random() * 10);\n        let b;\n        switch (p) {\n            case 0:\n            case 1:\n                b = randomIFstatement();\n                lastObj.push(b);\n                const d = Math.floor(Math.random() * 2);\n                lastObj = (d === 0 ? b.consequent: b.alternate)\n                break;\n            case 2:\n            case 3:\n            case 4:\n            case 5:\n                b = randomCallLogic();\n                lastObj.push(b);\n                break;\n            case 6:\n            case 7:\n            case 8:\n            case 9:\n                b = randomVariable();\n                lastObj.push(b);\n                break;\n        }\n    }\n\n    while(number--){\n        randomStateMachine();\n    }\n    return ast;\n}\nconst astrandom = makeAst(1000)\n// console.log(astrandom)\nexport default {\n    components: {\n        'j-variable': variable,\n        'j-start': start,\n        'j-end': end,\n        'j-endpoint': endPoint,\n        'j-switch': switchComp,\n        'j-ifstatement': ifStatement,\n        'j-whilestatement': whileComp,\n        'j-calllogic': CallLogicComp,\n        'j-jsblock': JSBlockComp,\n        instanceLink,\n    },\n     provide() {\n        return {\n            renderJFlow: this.renderJFlow,\n        }\n     },\n    data() {\n        const ast = {\n            type: 'Root',\n            body: [\n                // {\n                //             type: 'variable',\n                //             content: 'vvvkjhkjhvvvv',\n                //             id: 'logic5',\n                //         },\n                {\n                    type: 'start',\n                   \n                    id: 'start',\n                }, \n                {\n                    type: 'variable',\n                    content: 'vvvkjhkjhvvvv',\n                    id: 'logic5',\n                },\n                // {\n                //     type: 'JSblock',\n                //     id: 'JSblock',\n                //     content: `function(args) {\n                //         console.log(\"hello world!\");\n                //     }`\n                // },\n                {\n                    type: 'IfStatement',\n                    content: 'ggggggg',\n                    id: 'logic6',\n                    consequent: [\n                        {\n                            type: 'variable',\n                            content: 'jkhvvvv',\n                            id: 'logic77',\n                        },\n                    ], \n                    alternate: [\n                        {\n                            type: 'variable',\n                            content: 'yuuo',\n                            id: 'logic88',\n                        },\n                    ]\n                },\n            /* {\n                    type: 'IfStatement',\n                    content: 'aaaa',\n                    id: 'logic1',\n                    consequent: [\n                        {\n                            type: 'variable',\n                            content: 'vvvkjhkjhvvvv',\n                            id: 'logic5',\n                        },\n                    ], \n                    alternate: [\n                        {\n                            type: 'IfStatement',\n                            content: 'ggggggg',\n                            id: 'logic6',\n                            consequent: [\n                                {\n                                    type: 'variable',\n                                    content: 'jkhvvvv',\n                                    id: 'logic77',\n                                },\n                            ], \n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'yuuo',\n                                    id: 'logic88',\n                                },\n                            ]\n                        },\n                        {\n                            type: 'CallLogic',\n                            id: 'CallLogic1',\n                            content: '',\n                            params: [],\n                        }\n                    ]\n                },*/\n                /* {\n                    type: 'SwitchStatement',\n                    id: 'swtch1',\n                    cases: [\n                        {\n                            type: 'SwitchCase',\n                            id: 'switchcase11',\n                            content: 'switchcase11',\n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'yuuo',\n                                    id: 'sc1111122',\n                                },\n                            ]\n                        },\n                        {\n                            type: 'SwitchCase',\n                            id: 'switchcase12',\n                            content: 'switchcase12',\n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'asdfag',\n                                    id: 'sc12344455',\n                                },\n                            ],\n                            consequent: [\n                                {\n                                    type: 'variable',\n                                    content: 'dfhsdfg',\n                                    id: 'sc125444',\n                                },\n                            ],\n                        }\n                    ]\n                },\n                {\n                    type: 'WhileStatement',\n                    id: 'while1',\n                    content: 'while1',\n                    body: [\n                        {\n                            type: 'variable',\n                            content: 'dfhsdfg',\n                            id: 'whiel1body1',\n                        },\n                    ]\n                },*/\n                {\n                    type: 'end',\n                    id: 'end',\n                },\n            ],\n            playground: [],\n        };\n        const layout = new Lowcodelayout({\n            linkLength: 60,\n            ast,\n        });\n        this.ast = ast;\n        const configs = Object.freeze({\n            allowDrop: true,\n            layout,\n            initialZoom: 1,\n            minZoom: .2,\n            setInitialPosition(realboxX, realboxY, realboxW, realboxH, c_x, c_y, c_width, c_height) {\n                return {\n                    x: realboxX + c_width / 2,\n                    y: c_y\n                }\n            }\n        })\n        return {\n            configs,\n            isHover: false,\n            offsetX: 0,\n            offsetY: 0,\n            currentTarget: null,\n            prepareBody: [],\n            jflowloading: false,\n            logics: [{\n                content: 'aaa',\n                params: [{\n                    content: 'p1',\n                }],\n            }, {\n                content: 'vvvv',\n                params: [{\n                    content: 'p1',\n                }, {\n                    content: 'p2',\n                }],\n            }, {\n                content: 'sadasdf',\n                params: [{\n                    content: 'p1',\n                }],\n            },{\n                content: 'ggggg',\n                params: [{\n                    content: 'p1',\n                },{\n                    content: 'p2',\n                },{\n                    content: 'p3',\n                }],\n            }],\n            currentEditingTarget: null,\n        }\n    },\n    computed: {\n        inflowInstances() {\n            return this.ast.body.filter(b => !b.outflow)\n        }\n    },\n    watch: {\n        jflowloading(val) {\n            console.log(Date.now())\n            console.log(val);\n        }\n    },\n    methods: {\n        prettyJson() {\n            return prettyPrintJson.toHtml(this.ast);\n        },\n        onDragStartRectangle() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: {\n                    type: 'IfStatement',\n                    content: `IfStatement-rec${uniqueId ++}`,\n                    id: `IfStatement-rec${uniqueId ++}`,\n                    consequent: [], \n                    alternate: [],\n                    \n                }\n            })\n        },\n        onDragStartPoint() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: {\n                    type: 'variable',\n                    content: 'vvvvvvdasdfasfd',\n                    id: `logic-point${uniqueId ++}`,\n                }\n            })\n        },\n        onDragjsBlock() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: {\n                    type: 'JSblock',\n                    id: `JSblock-${uniqueId ++}`,\n                    content: `function(args) {\n                        console.log(\"hello world!\");\n                    }`\n                },\n            })\n        },\n        onOutOfFlow(e, source) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const layoutNode = jflowInstance.getLayoutNodeBySource(source);\n            layoutNode.remove();\n            this.ast.playground.push(source);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow();\n            jflowInstance.getRenderNodeBySource(source).anchor = e.detail.point;\n            // meta.getJflowInstance().anchor = e.detail.point;    \n        },\n        onDrop(e) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const astblock = e.detail.instance;\n            this.ast.playground.push(astblock);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow(() => {\n                jflowInstance.getRenderNodeBySource(astblock).anchor = e.detail.point;\n            });\n        },\n        onClick(e) {\n            const { currentTarget } = e;\n            const p = [ 0, currentTarget.height/2 ];\n            const gp = currentTarget.calculateToRealWorld(p)\n            const [ offsetX, offsetY ] = gp;\n            this.isHover = !this.isHover;\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n        },\n        onPressStart(source) {\n            this.currentTarget = source;\n        },\n        onPressEnd() {\n            this.currentTarget = null;\n        },\n        onDropToLink(e, linkConfigs) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            let node = e.detail.instance;\n            if(this.currentTarget) {\n                node = this.currentTarget;\n                const layoutNode = jflowInstance.getLayoutNodeBySource(node);\n                layoutNode.remove();\n            }\n            linkConfigs.from.linkSource(node, linkConfigs);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow();\n        },\n        onToggleSelect(event, configs) {\n            const [offsetX, offsetY] = event;\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n            this.isHover = !this.isHover;\n            if(this.isHover) {\n                this.currentEditingTarget = configs\n            } else {\n                this.currentEditingTarget = null;\n            } \n        },\n        onSelectLogic(c) {\n            this.isHover = false\n            console.log(this.currentEditingTarget)\n            this.currentEditingTarget.content = c.content;\n            this.currentEditingTarget.params = c.params;\n        },\n        onClickNoWhere() {\n            this.isHover = false\n            this.currentEditingTarget = null;\n        },\n        onChangeContent($event, configs){\n            configs.content = $event.val;\n        },\n        renderJFlow() {\n            this.$refs.jflow.renderJFlow();\n        },\n        onclickdemojsblock() {\n            this.ast.body.splice(1, 1);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow();\n        },\n        onContentChange(content, configs) {\n            configs.content = content;\n            console.log(content, configs)\n        },\n        genVueComponentKey(source){\n            return source.id;\n        }\n    }\n}\n</script>\n\n<style module>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.wrapper{\n    width: 960px;\n    height: 770px;\n    border: 1px solid #ccc;\n}\n.body{\n    display: flex;\n    flex-direction: horizontal;\n}\n.sidebar{\n    width: 180px;\n    border: 2px solid gold;\n}\n.sidebar > div {\n    padding: 16px;\n    display: flex;\n    justify-content: center;\n}\n\n.sidebar > div > div {\n    cursor: move;\n}\n\n.sidebar > div > .rect {\n    width: 80px;\n    height: 50px;\n    background-color: green;\n    text-align: center;\n    line-height: 50px;\n}\n\n.sidebar > div > .part {\n    width: 80px;\n    height: 50px;\n    border: 2px solid #517cff;\n    border-radius: 8ox;\n    text-align: center;\n    line-height: 50px;\n}\n\n.sidebar > div > .circle {\n    width: 80px;\n    height: 80px;\n    border-radius: 100%;\n    background-color: hotpink;\n    text-align: center;\n    line-height: 80px;\n}\n.ast {\n    flex: 1;\n    border: 2px solid gold;\n}\n.hide{\n    -webkit-user-drag: none;\n    -khtml-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    -ms-user-drag: none;\n    user-drag: none;\n}\n.hoverblock{\n    position: absolute;\n    background: #fff;\n    width: 300px;\n    height: 300px;\n    border: 3px solid gold;\n    left: 0;\n    top: 0;\n    transform: translate(0, 0);\n}\n.hoverblock > ul > li{\n    cursor: pointer;\n}\n.hoverblock > ul > li:hover{\n    background: #eee;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=67a60e26&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport { JFlowVuePlugin } from '@joskii/jflow';\nimport App from './App.vue'\n\nVue.config.productionTip = false;\n// Vue.config.parsePlatformTagName = (name) => {\n//     if(name === 'math') {\n//         return 'nosense'\n//     }\n//     return name\n// }\nVue.use(JFlowVuePlugin);\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","export { default } from  \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logic.17805d7a.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app_3cl75\",\"wrapper\":\"App_wrapper_pE_0j\",\"body\":\"App_body_1uhyl\",\"sidebar\":\"App_sidebar_3dMLz\",\"rect\":\"App_rect_2g-OE\",\"part\":\"App_part_1uPSl\",\"circle\":\"App_circle_2pifB\",\"ast\":\"App_ast_3JyD2\",\"hide\":\"App_hide_1hYJ-\",\"hoverblock\":\"App_hoverblock_rjKeE\"};"],"sourceRoot":""}
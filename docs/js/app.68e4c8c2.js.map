{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/canvas.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/constance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/functions.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stack.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/layoutMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/messageMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/adapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/instance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/groupFactory.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rectangle.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rhombus.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/commonAdapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/base-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/point.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/text.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/image.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/poly-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/bezier-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/linear-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-types/baseNode.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/flow/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/StackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlow.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowInstance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowLink.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowGroup.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/JFlowPlugin.js","webpack:///./src/App.vue?0ab3","webpack:///./src/components/variable.vue?c552","webpack:///src/components/variable.vue","webpack:///./src/components/variable.vue?635d","webpack:///./src/components/variable.vue","webpack:///./src/components/ifstatement.vue?c9f3","webpack:///src/components/ifstatement.vue","webpack:///./src/components/ifstatement.vue?d165","webpack:///./src/components/ifstatement.vue","webpack:///./src/components/start.vue?a019","webpack:///src/components/start.vue","webpack:///./src/components/start.vue?989d","webpack:///./src/components/start.vue","webpack:///./src/components/end.vue?c4a5","webpack:///src/components/end.vue","webpack:///./src/components/end.vue?df4a","webpack:///./src/components/end.vue","webpack:///./src/components/endpoint.vue?8651","webpack:///src/components/endpoint.vue","webpack:///./src/components/endpoint.vue?fad3","webpack:///./src/components/endpoint.vue","webpack:///./src/components/switch.vue?be73","webpack:///./src/components/switchcase.vue?82c7","webpack:///src/components/switchcase.vue","webpack:///./src/components/switchcase.vue?48a4","webpack:///./src/components/switchcase.vue","webpack:///src/components/switch.vue","webpack:///./src/components/switch.vue?8fad","webpack:///./src/components/switch.vue","webpack:///./src/components/whilestatement.vue?1055","webpack:///src/components/whilestatement.vue","webpack:///./src/components/whilestatement.vue?e5d2","webpack:///./src/components/whilestatement.vue","webpack:///./src/components/callLogic.vue?3fbe","webpack:///src/components/callLogic.vue","webpack:///./src/components/callLogic.vue?735a","webpack:///./src/components/callLogic.vue","webpack:///./src/components/instance-link.vue?3546","webpack:///src/components/instance-link.vue","webpack:///./src/components/instance-link.vue?2627","webpack:///./src/components/instance-link.vue","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?fd8d","webpack:///./src/assets/logic.svg","webpack:///./src/App.vue?8544"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","createCanvas","wrapper","canvas","document","createElement","ctx","getContext","getBoundingClientRect","width","height","left","top","style","userSelect","scale","devicePixelRatio","Math","floor","position","append","raw_width","raw_height","caheCanvas","caheCanvasctx","requestCacheCanvas","render","clearRect","save","restore","DIRECTION","RIGHT","BOTTOM","LEFT","TOP","SELF","APPROXIMATE","bounding_box","points","min_x","Infinity","min_y","max_x","max_y","idx","item","max","x","y","sqr","dist2","v","w","distToSegmentSquared","l2","min","minIntersectionBetweenNodes","dmsfrom","dmsto","meta","fromDir","fromP","toDir","toP","distMin","keys","forEach","df","pf","dt","pt","dist","assign","_resolveControlPoint","dir","spanx","spany","bezierPoints","p1","p2","start_dir","end_dir","minSpanX","minSpanY","abs","cp1","cp2","arrowspan","includes","isVerticalEnd","endX","endY","bezierPoint","P","q","u","angle","atan2","distToBezierSegmentSquared","b","Bezier","point","project","getBezierAngle","sx","sy","cp1x","cp1y","cp2x","cp2y","ex","ey","dx","pow","dy","PI","polylinePoints","isSelf","dirSpan","isVerticalStart","yp","xp","pmiddle","unshift","minusVec","absVec","vec","sqrt","scaleVec","makeRadiusFromVector","pbefore","pnext","radius","vec1","vec2","absVec1","absVec2","r1","r2","doOverlap","rec1","rec2","isPolyLineIntersectionRectange","polyline","rect","l0","l1","r0","cp","InstanceStack","_currentHit","condition","movingTarget","this","instance","_isMoving","visible","currentConstraint","ignoreHit","ishit","isHit","_isHit","absolutePosition","getBoundingRect","anchor","Array","StackMixin","instances","links","_stack","_linkStack","initStack","_belongs","link","addToStack","replaceFromStack","target","index","findIndex","addToLinkStack","removeFromStack","removeFromLinkStack","emptyLink","resetChildrenPosition","addInstanceToLink","targetLink","from","to","_constuctor","__proto__","constructor","interateNodeStack","callback","LayoutMixin","_layout","initLayout","configs","layout","recalculateUp","dirty","getBoundingDimension","wold","hold","_getBoundingGroupRect","reflow","wnow","hnow","recalculate","staticCheck","MessageMixin","_message","sendMessage","msg","consumeMessage","readMessage","JFlowEvent","event","detail","originEvent","jflow","bubbles","CustomEvent","getDefaultPlugin","wheel","preventDefault","offsetX","offsetY","deltaX","deltaY","ctrlKey","zoomHandler","panHandler","pointerdown","button","pressStartHandler","pointermove","pressMoveHandler","pointerup","stopPropagation","pressUpHanlder","contextmenu","contextMenuHanlder","EventAdapter","plugin","use","canvasHandlers","documentHandlers","ca","docObj","eventName","handler","handlerWrapperd","e","addEventListener","removeEventListener","ishitKey","Instance","undefined","_layoutNode","borderWidth","borderColor","backgroundColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","_jflow","_target","_getMovingTarget","dispatchEvent","uniqueName","k","customEvent","bubbleEvent","calculateToRealWorld","remove","belongs","EventTarget","Node","_rawConfigs","C","GroupMixin","_setPadding","padding","paddingTop","right","paddingRight","bottom","paddingBottom","paddingLeft","_setMargin","margin","marginTop","marginRight","marginBottom","marginLeft","_getCenter","mx","my","centerX","centerY","_shape","_calculatePointBack","gx","gy","cx","cy","calculateToCoordination","clone","h","ltx","lty","rbx","rby","getIntersectionsInFourDimension","x2","y2","defaultShift","GroupFactory","jflowNodeConstructor","options","shapeShift","definedWidth","minWidth","definedHeight","lock","setConfig","getBoundingRectPoints","bbox","paddingWidth","paddingHeight","_paddingWidth","_paddingHeight","shapeWidth","shapeHeight","globalAlpha","translate","_currentp","checkHit","Rectangle","type","borderRadius","_setBorder","border","color","enable","xt","yt","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","lineWidth","strokeStyle","stroke","fillStyle","fill","clip","x1","y1","vecx","vecy","theta1","theta2","dirx","diry","end","allIntersections","interDir","Capsule","hw","hh","leftCenter","rightCenter","arc","ww","rr","CapsuleVertical","topCenter","bottomCenter","yy","Rhombus","diagonalsV","diagonalsH","center","Diamond","side","_doCache","sinSIDE","sin","cosSIDE","cos","xx","_cachePoints","polygon","odd","DiamondVertical","topmiddle","bottommiddle","xleft","xright","BaseLink","viewbox","Point","radiusExpo2","ratio","createInputElement","input","setAttribute","TEXT_ALIGN","CENTER","Text","content","fontFamily","fontSize","textColor","textAlign","textBaseline","lineHeight","indent","editable","acceptPatten","renderShadowText","_makeEditable","exec","inputElement","DOMwrapper","oldVal","transform","calculateToRealWorldWithScalar","textIndent","_render","outline","blurHandler","val","removeChild","keyUpHandler","keyCode","focus","font","measureText","actualBoundingBoxLeft","actualBoundingBoxRight","fontBoundingBoxAscent","fontBoundingBoxDescent","_textWidth","fillText","Icon","image","onload","requestAnimationFrame","imageBounding","imageWidth","imageHeight","complete","drawImage","Link","controlPoints","defaultStyle","hoverStyle","_isTargeting","start","calculateIntersection","getCenter","startX","startY","_calculateAnchorPoints","len","a","getColor","PIINRATIO","PolyLink","approximate","lineDash","doubleLink","_cacheAngle","br","pEnd","angleEnd","beginAngle","rotate","pLast","pNext","setLineDash","lastP","remainPoints","currentP","BezierLink","bezierCurveTo","hasFlip","parseInt","LinearLayout","direction","gap","alignment","justify","group","stack","filter","absoluteStack","groupWidth","reduceHeight","lastInstanceHeight","maxWidth","allHeight","reduceWidth","lastInstanceWidth","maxHeight","allWidth","withdraw","gapAverage","WIDTH","HEIGHT","_resolveAbsoluteAnchor","config","BaseNode","source","id","isDraggable","getJflowInstance","level","sequence","isLocked","isFree","parent","parentIterateType","_getAstNode","spanX","spanY","nodes","traverse","Root","isroot","body","map","mapFunc","playgrounditerator","playground","reflowPreCalculate","preCallback","node","last","part","makeLink","IfStatement","consequent","alternate","c_spanX","c_spanY","a_spanX","a_spanY","nextSequeence","Endpoint","lastc","lasta","makeAST","linkMeta","SwitchStatement","cases","lastCase","cc","s_spanX","s_spanY","ForEachStatement","WhileStatement","anticlock","SwitchCase","TYPE_MAPPING","other","makeEndpoint","Constructor","LowcodeLayout","linkLength","treeItemDraggable","reOrder","ast","static","flowStack","flowLinkStack","root","layoutMeta","currentTopNodeId","layoutMapping","vertical","horizontal","playgroundLayoutMapping","reflowBodyPreCalculate","reflowPlaygroundPreCalculate","topNode","finded","find","nowAnchor","currentAnchor","verticalMapping","horizontalMapping","columnNumber","column","rowWidth","rows","rowNumber","row","rowHeight","columns","reflowByMapping","values","mapping","ERProperty","isNavigation","ref","association","_selfLink","parentPropertyRef","doubleRef","ERNode","propertyList","navigationPropertyList","idProperty","nodeMap","idRef","isParentRef","parentRef","objectRef","targetProperty","toProperty","isObjectRef","makeER","_traverseProperty","ERLayout","erNodes","entityRelationship","er","idMap","id1","id2","fromMeta","lineMapping","size","computeNodeAnchor","recorded","relativeAnchor","diagramWeight","nx","ny","Group","CapsuleGroup","RhombusGroup","DiamondGroup","DiamondVerticalGroup","CapsuleVerticalGroup","JFlow","eventAdapter","dpr","initialZoom","initialPosition","setInitialPosition","maxZoom","minZoom","offeset","_lastState","dragging","processing","_lastDragState","moving","isInstanceDirty","isLinkDirty","cache","initialX","initialY","status","dragovering","_focus","_dragOverTarget","allowDrop","_tempInstance","dom","c_width","c_height","canvasMeta","actual_width","actual_height","_createEventHandler","scaleRatio","p_width","p_height","contentBox","w_ratio","h_ratio","align","realboxX","realboxY","realboxW","realboxH","_readyToRender","nowx","nowy","destroyListener","destroyPlainEventListener","unload","dragoverHandler","_onDragover","dropHandler","_onDrop","destroy","offsetPoint","topLayerPoint","_getViewBox","linkStack","movingtarget","getNodes","_dragCurrentData","oldIns","_targetLockOn","_processDragOver","Promise","resolve","then","payload","clientX","clientY","_zooming","newScale","amount","deltaScale","currentWidth","currentHeight","deltaWidth","deltaHeight","tX","tY","pX","pY","_panning","_recalculatePosition","cursor","isDocument","_clearTarget","checkresult","console","log","removeTempDraggingInstance","setTransform","_resetTransform","isInViewBox","provide","getInstanceByJFlowId","methods","jflowId","obj","_jflowInstance","onStackChangeHandler","mixins","renderJFlow","addNameToRootStack","props","default","loading","Boolean","renderNodes","renderLinks","vnodes","$scopedSlots","__vnode__","vnode","componentInstance","$children","vlinks","$slots","created","genNodeLinkMeta","loadingNodes","beforeDestroy","$emit","tl","linkPart","concat","mountJFlow","tn","$mount","$el","$listeners","func","syncNodeLink","$nextTick","getInstance","__renderInSchedule__","nameNode","builder","JFlowInstance","inject","String","watch","diffed","diff","news","deletes","vnew","vold","hnew","bindListeners","destroyed","isLink","resetLink","fromInstance","toInstance","$vnode","addToBelongStack","removeFromBelongStack","JSON","stringify","mounted","updated","JFLOW_NODES","JFLOW_LINKS","JFLOW_GROUPS","components","component","JFlowComponent","JFLowGroup","JFlowLink","componentPrefix","customElements","define","attachShadow","HTMLElement","install","Vue","prefixToUse","prefix","custom","_vm","_h","$createElement","_c","_self","class","$style","attrs","sidebar","on","onDragStartRectangle","_v","onDragStartPoint","staticStyle","jflowloading","$event","onClickNoWhere","onDrop","onPressEnd","scopedSlots","_u","fn","onPressStart","onOutOfFlow","onChangeContent","onToggleSelect","onDropToLink","hoverblock","_l","onSelectLogic","_s","_e","staticRenderFns","_g","groupConfig","onContentChange","touch","shrink","switchcase","headerConfigs","imageConfig","contentConfigs","onClick","params","paramsConfigs","param","onDragEnter","onDragOverEnd","getuuuuid","makeAst","number","injectStyles","context","locals","productionTip","JFlowVuePlugin","App"],"mappings":"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","file":"js/app.68e4c8c2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\n/**\n * @typedef {Object} CanvasMeta\n * @property {Element} canvas - canvas 元素\n * @property {number} width - 画布宽度\n * @property {number} height - 画布高度\n * @property {number} raw_width - 画布元素宽度\n * @property {number} raw_height - 画布元素高度\n * @property {number} left - 画布距离左端距离\n * @property {number} top - 画布距离顶端距离\n * @property {Context2d} ctx - Context2d\n * @property {number} scale - 当前的像素设备比\n */\n/**\n * 创建一个 canvas 元素\n * @param  {Element} wrapper - dom元素\n * @return {CanvasMeta}\n */\nexport function createCanvas(wrapper) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const { width, height, left, top } = wrapper.getBoundingClientRect();\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    canvas.style.userSelect = 'none';\n    const scale = window.devicePixelRatio;\n    canvas.width = Math.floor(width * scale);\n    canvas.height = Math.floor(height * scale);\n\n    if(wrapper) {\n        wrapper.style.position = 'relative';\n        wrapper.append(canvas);\n    }\n    return {\n        canvas,\n        width,\n        height,\n        raw_width: canvas.width,\n        raw_height: canvas.height,\n        left,\n        top,\n        ctx,\n        scale,\n    }\n}\n\nconst caheCanvas = document.createElement('canvas');\ncaheCanvas.width = 1;\ncaheCanvas.height = 1;\nconst caheCanvasctx = caheCanvas.getContext('2d');\nconst scale = window.devicePixelRatio;\ncaheCanvasctx.scale(scale, scale);\n\n/**\n * 在离线canvas上绘制元素\n * @param  {render} render - 绘图函数\n */\nexport function requestCacheCanvas(render) {\n    caheCanvasctx.clearRect(0,0,5,5);\n    caheCanvasctx.save();\n    render(caheCanvasctx);\n    caheCanvasctx.restore();\n    caheCanvasctx.clearRect(0,0,5,5);\n}","/**\n * 方向\n * @readonly\n * @enum {number}\n */\nexport const DIRECTION = {\n    /** RIGHT */\n    RIGHT: 0,\n    /** BOTTOM */\n    BOTTOM: 1,\n    /** LEFT */\n    LEFT: 2,\n    /** TOP */\n    TOP: 3,\n    /** SELF */\n    SELF: 100,\n}\n\nexport function nextDirection(direction, clockwise) {\n    const nextDir = (direction + (clockwise ? 1 : -1)) % 4;\n    return nextDir;\n}\n\nexport function oppositeDirection(direction) {\n    return (direction + 2) % 4\n}\n\nexport const APPROXIMATE = 6;","import {\n    Bezier,\n} from 'bezier-js';\nimport { DIRECTION } from './constance';\n\n/**\n * 根据点计算最小外接矩形\n * @param {number[][]} points - 点集合\n * @return {Object} demension 宽高，坐标\n */\nexport function bounding_box(points) {\n    let min_x = Infinity; \n    let min_y = Infinity; \n    let max_x = -Infinity; \n    let max_y = -Infinity; \n    for(let idx in points) {\n        const item = points[idx];\n        if(item[0] < min_x){\n            min_x = item[0]\n        }\n\n        if (item[0] > max_x) {\n            max_x = item[0]\n        } \n\n        if (item[1] < min_y) {\n            min_y = item[1]\n        }\n\n        if (item[1] > max_y) {\n            max_y = item[1]\n        }\n    }\n    return {\n        // points: [(min_x,min_y),(max_x,min_y),(max_x,max_y),(min_x,max_y)],\n        width: Math.max(max_x - min_x, 10),\n        height: Math.max(max_y - min_y, 10),\n        x: min_x,\n        y: min_y,\n    }\n}\n\nfunction sqr(x) {\n    return x * x;\n}\nexport function dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n// p - point\n// v - start point of segment\n// w - end point of segment\nexport function distToSegmentSquared(p, v, w) {\n    const l2 = dist2(v, w);\n    if (l2 === 0) return dist2(p, v);\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return dist2(p, [ v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1]) ]);\n}\n\nexport function minIntersectionBetweenNodes(dmsfrom, dmsto) {\n    const meta = {\n        fromDir: null,\n        fromP: null,\n        toDir: null,\n        toP: null,\n        distMin: Infinity\n    }\n    Object.keys(dmsfrom).forEach(df => {\n        if((+df) === DIRECTION.SELF) {\n            return;\n        }\n        let pf = dmsfrom[df];\n        Object.keys(dmsto).forEach(dt => {\n            if((+dt) === DIRECTION.SELF) {\n                return;\n            }\n            let pt = dmsto[dt];\n            const dist = dist2(pf, pt);\n            if(dist < meta.distMin) {\n                Object.assign(meta, {\n                    distMin: dist,\n                    fromDir: +df,\n                    fromP: pf,\n                    toDir: +dt,\n                    toP: pt,\n                })\n            }\n        })\n    });\n    return meta;\n}\n\n// export function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, anticlock = false) {\n//     const isSameDirection = start_dir === end_dir;\n//     const isVerticalStart = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(start_dir);   \n//     const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n//     const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n//     const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n//     const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n//     if(isSameDirection) {\n//         let span = Math.abs(isVerticalStart ? (endY - p1[1]) : (endX - p1[0]))\n//         span = Math.min(span, 50);\n//         const symb = [DIRECTION.RIGHT, DIRECTION.BOTTOM].includes(end_dir)\n//         span = symb ? span : - span;\n//         const cp1 = isVerticalStart ? [p1[0], p1[1] + span] : [p1[0] + span, p1[1]];\n//         const cp2 = isVerticalEnd ? [endX, endY + span] : [endX + span, endY];\n//         return [ \n//             ...cp1,\n//             ...cp2,\n//             endX, endY ];\n//     }\n//     let spanStart = (anticlock ? -5 : 1) * (isVerticalStart ? (endY - p1[1]) / 2 : (endX - p1[0]) / 2)\n//     let spanEnd = (anticlock ? -4 : 1) * (isVerticalEnd ? (p1[1] - endY) / 2 : (p1[0] - endX) / 2)\n//     let u1 = spanStart / Math.abs(spanStart);\n//     spanStart = u1 * Math.min(Math.abs(spanStart), 50);\n//     let u2 = spanEnd / Math.abs(spanEnd);\n//     spanEnd = u2 * Math.min(Math.abs(spanEnd), 50);\n//     const cp1 = isVerticalStart ? [p1[0], p1[1] + spanStart] : [p1[0] + spanStart, p1[1]];\n//     const cp2 = isVerticalEnd ? [endX, endY + spanEnd] : [endX + spanEnd, endY];\n//     return [ \n//         ...cp1,\n//         ...cp2,\n//         endX, endY ];\n// }\nfunction _resolveControlPoint(p, dir, spanx, spany){\n    if(dir === DIRECTION.TOP){\n        return [p[0], p[1]-spany]\n    }\n    if(dir === DIRECTION.BOTTOM){\n        return [p[0], p[1]+spany]\n    }\n    if(dir === DIRECTION.LEFT){\n        return [p[0]-spanx, p[1]]\n    }\n    if(dir === DIRECTION.RIGHT){\n        return [p[0]+spanx, p[1]]\n    }\n}\n\nexport function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 0, minSpanY = 0) {\n    const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const cp1 = _resolveControlPoint(p1, start_dir, spanx, spany);\n    const cp2 = _resolveControlPoint(p2, end_dir, spanx, spany);\n    const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n    const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n    const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n    const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n    return [ \n        ...cp1,\n        ...cp2,\n        endX, endY];\n}\n\nexport function bezierPoint(t, P) {\n    const q = 1-t;\n    const x = q*q*q*P[0] + 3*q*q*t*P[2] + 3*q*t*t*P[4] + t*t*t*P[6];\n    const y = q*q*q*P[1] + 3*q*q*t*P[3] + 3*q*t*t*P[5] + t*t*t*P[7];\n    const u = q*q*(P[2]-P[0]) + 2*t*q*(P[4]-P[2]) + t*t*(P[6]-P[4]);\n    const v = q*q*(P[3]-P[1]) + 2*t*q*(P[5]-P[3]) + t*t*(P[7]-P[5]);\n    let angle = Math.atan2(v, u);\n    // console.log(angle * 180)\n    // if(angle < 0) {\n    //     angle = Math.PI + angle;\n    // }\n    return [x, y, angle];\n}\n\n// export function bezierPoints(p1, p2, start_vec, end_vec) {\n\n// }\n\nexport function distToBezierSegmentSquared(p, points) {\n    const b = new Bezier(...points);\n\n    const point = b.project({ x: p[0], y: p[1] });\n    const d = dist2(p, [ point.x, point.y ]);\n    return d;\n}\n\nexport function getBezierAngle(t, sx, sy, cp1x, cp1y, cp2x, cp2y, ex, ey) {\n  var dx = Math.pow(1-t, 2)*(cp1x-sx) + 2*t*(1-t)*(cp2x-cp1x) + t * t * (ex - cp2x);\n  var dy = Math.pow(1-t, 2)*(cp1y-sy) + 2*t*(1-t)*(cp2y-cp1y) + t * t * (ey - cp2y);\n  return -Math.atan2(dx, dy) + 0.5*Math.PI;\n}\n\n\nexport function getInstanceHeight(instance) {\n    const rect = instance.getBoundingRect();\n    // let min_y = Infinity;\n    // let max_y = -Infinity;\n    // let min_x = Infinity;\n    // let max_x = -Infinity;\n    // rect.forEach(point => {\n    //     max_y = Math.max(max_y, point[1]);\n    //     min_y = Math.min(min_y, point[1]);\n    //     max_x = Math.max(max_x, point[0]);\n    //     min_x = Math.min(min_x, point[0]);\n    // });\n    return {\n        height: rect[3] - rect[1],\n        width: rect[2] - rect[0],\n    }\n}\n\nexport function polylinePoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 10, minSpanY = 10, isSelf) {\n    const dirSpan = Math.abs(start_dir - end_dir);\n    // const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    // const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const isVerticalStart = (start_dir === DIRECTION.TOP || start_dir === DIRECTION.BOTTOM);\n    let points = [];\n    switch (dirSpan) {\n        case 0:\n            // 都按向右好了\n            if(start_dir === DIRECTION.TOP) {\n                const y = Math.min(p1[1], p2[1]);\n                const yp = y - minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.BOTTOM) {\n                const y = Math.max(p1[1], p2[1]);\n                const yp = y + minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.LEFT) {\n                const x = Math.min(p1[0], p2[0]);\n                const xp = x - minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            if(start_dir === DIRECTION.RIGHT) {\n                const x = Math.max(p1[0], p2[0]);\n                const xp = x + minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            break;\n        case 1:\n        case 3:  \n            if(isSelf) {\n                if(!isVerticalStart) {\n                    points.push([p1[0] + minSpanX, p1[1]]);\n                    points.push([p1[0] + minSpanX, p2[1] + minSpanY]);\n                    points.push([p2[0], p2[1] + minSpanY]);\n                } else {\n                    points.push([p1[0], p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p2[1]]);\n                }\n            } else {\n                const point = isVerticalStart ? [p1[0], p2[1]]: [p2[0], p1[1]]\n                points.push(point);\n            }\n            break;\n        case 2:\n            const pmiddle = [\n                (p1[0] - p2[0])/2 + p2[0],\n                (p1[1] - p2[1])/2 + p2[1]\n            ]; \n            if(isVerticalStart) {\n                points.push([p1[0], pmiddle[1]])\n                points.push([p2[0], pmiddle[1]])\n            } else {\n                points.push([pmiddle[0], p1[1]])\n                points.push([pmiddle[0], p2[1]])\n            }\n            break;\n        default:\n            break;\n    }\n    points.unshift(p1);\n    points.push(p2);\n    return points;\n}\n\nfunction minusVec(p1, p2) {\n    return [p1[0] - p2[0], p1[1] - p2[1]]\n}\n\nfunction absVec(vec) {\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\n\nfunction scaleVec(vec, scale) {\n    return [vec[0] * scale, vec[1] * scale];\n}\n\nexport function makeRadiusFromVector(pbefore, p, pnext, radius) {\n    const vec1 = minusVec(p, pbefore);\n    const vec2 = minusVec(p, pnext);\n    const absVec1 = absVec(vec1);\n    const absVec2 = absVec(vec2);\n    if(!absVec1 || !absVec2) {\n        return {\n            p1: null,\n            p2: null,\n        }\n    }\n    const r1 = scaleVec(vec1, radius/absVec1);\n    const r2 = scaleVec(vec2, radius/absVec2);\n    return {\n        p1: minusVec(p, r1),\n        p2: minusVec(p, r2),\n    }\n}\n// 矩形重叠计算\nexport function doOverlap(rec1, rec2) {\n    if (rec1[0] == rec1[2] || rec1[1] == rec1[3] ||\n        rec2[0] == rec2[2] || rec2[1] == rec2[3]) {\n        // the line cannot have positive overlap\n        return false;\n    }\n\n    return !(rec1[2] <= rec2[0] ||   // left\n                rec1[3] <= rec2[1] ||   // bottom\n                rec1[0] >= rec2[2] ||   // right\n                rec1[1] >= rec2[3]);    // top\n}\n\nexport function isPolyLineIntersectionRectange(polyline, rect) {\n    let p = polyline[0];\n    let l = polyline.length;\n    let i = 1;\n    const [l0, l1, r0, r1] = rect;\n    while (i < l) {\n        const cp = polyline[i];\n        if(p[0] === cp[0]) {\n            // vertical\n            if(p[0] < r0 && p[0] > l0 \n                && !((p[1] > r1 && cp[1] > r1) || (p[1] < l1 && cp[1] < l1))){\n                    return true;\n                } \n        } else {\n            // horizontal\n            if(p[1] < r1 && p[1] > l1\n                && !((p[0] > r0 && cp[0] > r0) || (p[0] < l0 && cp[0] < l0))){\n                    return true;\n                } \n        }\n        p = cp;\n        i++;\n    }\n    return false;\n}","/**\n * 绘图栈\n * @extends Array\n */\nclass InstanceStack extends Array {\n    constructor() {\n        super();\n        this._currentHit = null;\n    }\n    /**\n     * 绘制当前栈\n     * @param {Context2d} ctx - canvas context2d\n     */\n    render(ctx, condition) {\n        let movingTarget;\n        this.forEach(instance => {\n            if(instance._isMoving) {\n                movingTarget = instance;\n                return;\n            }\n            if(instance.visible && (!condition || condition(instance))) {\n                ctx.save();\n                // if(instance.reflow && !instance._reflowed) {\n                //     instance.reflow();\n                //     instance._reflowed = true;\n                // }\n                instance.render(ctx);\n                ctx.restore();\n            }\n        });\n        if(movingTarget) {\n            ctx.save();\n            // if(movingTarget.reflow && !movingTarget._reflowed) {\n            //     movingTarget.reflow();\n            //     movingTarget._reflowed = true;\n            // }\n            movingTarget.render(ctx);\n            ctx.restore();\n        }\n    }\n\n    /**\n     * 碰撞对象过滤条件\n     * @name InstanceStack~InstanceFilter\n     * @function\n     * @param {Instance} instance - 当前对象\n    */\n    /**\n     * 碰撞检测\n     * @param {number[]} point - 碰撞点\n     * @param {InstanceStack~InstanceFilter} condition - 碰撞对象过滤条件\n     * @return {Instance}\n     */\n    checkHit(point, condition, currentConstraint){\n        let i = this.length - 1;\n        while(i >= 0) {\n            const instance = this[i];\n            \n            if(instance.visible && !instance.ignoreHit) {\n                if(condition && condition(instance)) {\n                    i--\n                    continue;\n                }\n                if(currentConstraint && !currentConstraint(instance)) {\n                    i--\n                    continue\n                }\n                const ishit = instance.isHit(point, condition);\n                instance._isHit = !!ishit;\n                if(ishit) {\n                    if(this._currentHit !== instance) {\n                        if(this._currentHit) {\n                            this._currentHit._isHit = false;\n                        }\n                        this._currentHit = instance;\n                    }\n                    if(typeof ishit !== 'boolean') {\n                        return ishit;\n                    }\n                    return instance;\n                }\n                \n            }\n            i--\n        }\n        this._currentHit = null;\n        return null;\n    }\n    /**\n     * 获取当前层栈的最小外接矩形\n     * @return {number[][]} - 外接矩形坐标\n     */\n    getBoundingRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                const rect = instance.getBoundingRect()\n                points.push([rect[0], rect[1]]);\n                points.push([rect[2], rect[3]]);\n            }\n        });\n        return points;\n    }\n\n    /**\n     * 获取当前层栈的锚点矩形\n     * @return {number[][]} - 锚点矩形坐标\n     */\n    getAnchorRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                points.push(instance.anchor);\n            }\n        });\n        return points;\n    }\n}\n\nexport default InstanceStack;\n","import InstanceStack from './stack';\nimport { setUniqueId, getUniqueId } from '../utils/functions';\n/**\n * 对象栈 mixin 用于方便控制节点栈和连线栈\n *\n * @mixin\n */\nconst StackMixin = {\n    /** @property {Node[]}          - 对象数组 */\n    instances: [],\n    /** @property {BaseLink[]}      - 连线数组 */\n    links: [],\n    /** @property {InstanceStack}       - 对象栈 */\n    _stack: null,\n    /** @property {InstanceStack}       - 连线栈 */\n    _linkStack: null,\n    /**\n     * 初始化对象栈\n     * @param {JflowConfigs} configs - 配置\n     */\n    initStack({ data }) {\n        this._stack = new InstanceStack();\n        this._linkStack = new InstanceStack();\n        if(!data) return;\n        this.instances = data.instances;\n        this.links = data.links;\n        this.instances.forEach(i => { \n            this._stack.push(i);\n            i._belongs = this;\n        })\n        this.links.forEach((link) => {\n            this._linkStack.push(link);\n            link._belongs = this;\n        });\n    },\n    /**\n     * 加入节点对象\n     * @param {Node} instance - 节点对象\n     */\n    addToStack(instance) {\n        instance._belongs = this;\n        this._stack.push(instance);\n        // this.recalculate()\n    },\n    /**\n     * 替换对象\n     * @param {Instance} target - 被替换的对象\n     * @param {Instance} instance - 替换对象\n     */\n    replaceFromStack(target, instance) {\n        const index = this._stack.findIndex(i => i === target);\n        this._stack.splice(index, 1, instance);\n        target._belongs = null;\n        instance._belongs = this;\n        // this.recalculate()\n    },\n    /**\n     * 加入连线对象\n     * @param {BaseLink} instance - 连线对象\n     */\n    addToLinkStack(link) {\n        link._belongs = this;\n        this._linkStack.push(link);\n    },\n    /**\n     * 删除节点对象\n     * @param {Node} target - 节点对象\n     */\n    removeFromStack(target) {\n        // this.removeLinkOnInstance(target);\n        const index = this._stack.findIndex(i => i === target);\n        this._stack.splice(index, 1);\n        // this.recalculate()\n    },\n    /**\n     * 删除连线对象\n     * @param {Node} target - 连线对象\n     */\n    removeFromLinkStack(target) {\n        const index = this._linkStack.findIndex(i => i === target);\n        this._linkStack.splice(index, 1);\n    },\n   \n    emptyLink() {\n        this._linkStack = new InstanceStack();\n    },\n    /**\n     * 重置当前栈中对象的位置\n     */\n    resetChildrenPosition() {\n        this._stack.forEach(i => {\n            i.anchor = [0,0]\n        });\n    },\n    /* \n        还是丢给实现方去处理，这个不属于框架自带的通用逻辑\n    removeLinkOnInstance(target) {\n        const fromInstances = [];\n        const toInstances = [];\n        const removelinks = [];\n        let _constuctor;\n        this._linkStack.forEach(l => {\n            if(l.from === target){\n                toInstances.push(l.to);\n                _constuctor = l.__proto__.constructor;\n                removelinks.push(l);\n            }\n            if(l.to === target){\n                fromInstances.push(l.from);\n                _constuctor = l.__proto__.constructor;\n                removelinks.push(l);\n            }  \n        })\n        \n        removelinks.forEach(l => {\n            this.removeFromLinkStack(l);\n        });\n        // 暂且全连接吧\n        fromInstances.forEach(f => {\n            toInstances.forEach(t => {\n                this.addToLinkStack(new _constuctor({\n                    from: f, \n                    to: t\n                }))\n            });\n        });\n        return {\n            fromInstances,\n            toInstances,\n            removelinks,\n        }\n    }, */ \n\n    addInstanceToLink(targetLink, instance) {\n        this.addToStack(instance);\n        const { from, to } = targetLink;\n        const index = this._linkStack.findIndex(l => l === targetLink);\n        const _constuctor = targetLink.__proto__.constructor;\n        const l1 = new _constuctor({\n            from, \n            to: instance,\n        });\n        l1._belongs = this;\n        const l2 = new _constuctor({\n            from: instance, \n            to,\n        });\n        l2._belongs = this;\n\n        this._linkStack.splice(index, 1, l1, l2);\n    },\n    // reLayout() {\n    //     this.reflow();\n    //     this._getBoundingGroupRect();\n    //     if(this._belongs) {\n    //         this._belongs.reLayout();\n    //     }\n    // }\n    // addToTempStack(instance) {\n    //     this._tempStack.push(instance);\n    // },\n\n    // truncateTempStack() {\n    //     let temp;\n    //     if(this._tempStack) {\n    //         temp = this._tempStack.slice();\n    //     }\n    //     this._tempStack = new InstanceStack();\n    //     return temp;\n    // }\n\n    /**\n     * 循环当前栈中节点\n     * @property {stackIteratorCallback} 循环访问栈中每个节点\n     */\n    interateNodeStack(callback) {\n        this._stack.forEach(instance => {\n            callback(instance);\n        })\n    }   \n    /**\n    * 循环访问栈中每个节点\n    * @callback stackIteratorCallback\n    * @param {Node} instance 栈中节点\n    */\n}\n\nexport default StackMixin;","/**\n * Layout mixin 配置\n * @typedef {Object} LayoutMixin~LayoutConfigs\n * @property {Layout} layout             - 布局对象 \n */\n/**\n * 布局 mixin 用于注册和方便控制布局\n *\n * @mixin\n */\nconst LayoutMixin = {\n    /** @property {Layout}      - 布局对象 */\n    _layout: null,\n    // _reflowed: false,\n    /**\n     * 初始化布局\n     * @param {LayoutMixin~LayoutConfigs} configs - 配置\n     */\n    initLayout(configs) {\n        this._layout = configs.layout;\n    },\n    /**\n     * 从当前层出发，向上层递归重排\n     */\n    recalculateUp() {\n        let dirty = true;\n        if(this.getBoundingDimension) {\n            const { width: wold, height: hold } = this.getBoundingDimension();\n            if(this.resetChildrenPosition) {\n                this.resetChildrenPosition();\n            }\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            this.reflow();\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            const { width: wnow, height: hnow } = this.getBoundingDimension();\n            dirty = (wold !== wnow || hold !== hnow)\n        } else {\n            this.reflow();\n        }\n        if(this._belongs && dirty) {\n            this._belongs.recalculateUp();\n        }\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排，并重算当前布局下的最小外接矩形\n     */\n    recalculate() {\n        // this._reflowed = true;\n        this.reflow();\n        if(this._getBoundingGroupRect){\n            this._getBoundingGroupRect();\n        }\n        // 这个地方到底是手动还是自动？自动时机再试试看好了\n        // if(this._belongs) {\n        //     this._belongs.recalculate();\n        // }\n    },\n    /**\n     * 布局静态检查\n     * @param {Instance} instance - 检查单元\n     * @return {Boolean} - 检查结果 \n     */\n    staticCheck(instance) {\n        if(this._layout) {\n            return this._layout.staticCheck(instance, this);\n        }\n        return false;\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排\n     */\n    reflow() {\n        if(this._layout) {\n            this._layout.reflow(this);\n        }\n    },\n}\n\nexport default LayoutMixin;","/**\n * 消息 mixin 用于给Jflow传递消息\n *\n * @mixin\n */\nconst MessageMixin = {\n    _message: null,\n    /**\n     * 发送消息\n     * @param {Object} msg - 消息体\n     */\n    sendMessage(msg) {\n        this._message = msg;\n    },\n    /**\n     * 接收消息\n     * @return {Object} msg - 消息体\n     */\n    consumeMessage() {\n        const msg = this._message;\n        this._message = null;\n        return msg;\n    },\n    readMessage() {\n        return this._message;\n    }\n}\n\nexport default MessageMixin;","/**\n * JFlow 抛出事件\n * @extends CustomEvent\n * @property {Event}  originEvent      - 原始事件\n * @property {Instance} target         - 事件触发对象\n * @property {JFlow} jflow             - JFlow 对象\n * @property {boolean} bubbles         - 冒泡标识\n */\nclass JFlowEvent extends CustomEvent{\n    constructor(event, configs = {}) {\n        const detail = {\n            ...configs,\n            originEvent: configs.event,\n            target: configs.target,\n            jflow: configs.jflow,\n            bubbles: configs.bubbles || false,    \n        }\n        super(event, {\n            detail\n        });\n    }\n}\n\nexport default JFlowEvent;","/**\n * 事件处理函数\n * @name EventAdapter~Handler\n * @function\n * @param {Event} event - 原生事件\n * @param {JFlow} jflow - 当前jflow 对象\n */\n\n/**\n * EventAdapter 对象 plugin 配置\n * @typedef {Object} EventAdapter~pluginDef\n * @property {Object} canvas - canvas 相关的事件\n * @property {EventAdapter~Handler} canvas.eventName - 注册 canvas 上的事件处理\n * @property {Object} document - document 相关的事件\n * @property {EventAdapter~Handler} document.eventName - 注册 document 上的事件处理\n */\n\nfunction getDefaultPlugin() {\n    return {\n        canvas: {\n            wheel: function (event, jflow) {\n                event.preventDefault();\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                if(event.ctrlKey) { \n                    deltaY = -deltaY;\n                    jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n                } else {\n                    jflow.panHandler(-deltaX, -deltaY, event);\n                }\n            },\n            pointerdown: function (event, jflow) {\n                const { offsetX, offsetY, deltaY, button } = event\n                if(button !== 0) return;\n                jflow.pressStartHandler(offsetX, offsetY, event);\n            },\n            pointermove: function (event, jflow) {\n                const { offsetX, offsetY } = event\n                jflow.pressMoveHandler(offsetX, offsetY, event);\n            },\n            pointerup: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { button } = event\n                if(button !== 0) return;\n                jflow.pressUpHanlder(false, event)\n            },\n            contextmenu: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.contextMenuHanlder(offsetX, offsetY, event);\n            },\n        },\n        document: {\n            pointerup: function(event, jflow) {\n                jflow.pressUpHanlder(true, event);\n            }\n        }\n    }\n}\n\n/** \n * EventAdapter 对象\n * EventAdapter 通过 plugin 的形式实现多种交互方式的映射\n * @constructor EventAdapter\n */\nclass EventAdapter {\n    constructor(plugin = {}) {\n        this.plugin = getDefaultPlugin();\n        this.use(plugin);\n        this.canvasHandlers = [];\n        this.documentHandlers = [];\n    }\n    use(plugin = {}) {\n        const { canvas: ca, document: docObj } = plugin;\n        if(ca) {\n            for(let eventName in ca){\n                if (ca.hasOwnProperty(eventName)) {\n                    this.plugin.canvas[eventName] = ca[eventName];\n                }\n            }\n        }\n        if(docObj) {\n            for(let eventName in docObj){\n                if (docObj.hasOwnProperty(eventName)) {\n                    this.plugin.document[eventName] = docObj[eventName];\n                }\n            }\n        }\n    }\n\n    apply(jflow) {\n        const { canvas: ca, document: docObj } = this.plugin;\n        const canvas = jflow.canvas;\n        for(let eventName in ca){\n            const handler = ca[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            canvas.addEventListener(eventName, handlerWrapperd)\n            this.canvasHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n        for(let eventName in docObj){\n            const handler = docObj[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            document.addEventListener(eventName, handlerWrapperd)\n            this.documentHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n    }\n\n    unload(jflow) {\n        const canvas = jflow.canvas;\n        this.canvasHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            canvas.removeEventListener(eventName, handlerWrapperd);\n        });\n        this.documentHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            document.removeEventListener(eventName, handlerWrapperd);\n        })\n    }\n}\n\nexport default EventAdapter;\n","import { setUniqueId, getUniqueId } from '../utils/functions';\nimport { nextDirection } from '../utils/constance';\nconst margin = 5;\nconst ishitKey = Symbol('ishit');\n/**\n * @typedef Instance~Configs\n * @type {object}\n * @property {number} borderWidth      - 边的宽度 默认是 2\n * @property {string} borderColor      - 边框颜色 默认 black\n * @property {string} color            - 填充颜色 默认 white\n * @property {string} shadowColor      - 阴影颜色\n * @property {string} shadowBlur       - 阴影扩散范围\n * @property {string} shadowOffsetX    - 阴影偏移 X\n * @property {string} shadowOffsetX    - 阴影偏移 Y\n */\n\n/** \n * 图中的最小单元\n * @constructor Instance\n * @extends EventTarget\n * @param {Instance~Configs} configs - 最小单元的一些通用属性配置\n */\nclass Instance extends EventTarget{\n    constructor(configs = {}) {\n        super();\n        Object.assign(this, configs);\n        // this.anchor = configs.anchor || [0, 0];\n        // this.belongs = undefined;\n        /** @member {boolean}      - 元素可见 默认 true */\n        this.visible = true;\n        // this._jflow = undefined;\n        this._belongs = undefined;\n        this[ishitKey] = false; \n\n        /** @member {LayoutNode} - 布局节点 */\n        this._layoutNode = undefined;\n        /** @member {number}      - 边的宽度 默认是 0 */\n        this.borderWidth =      configs.borderWidth || 0;\n        /** @member {string}     - 边框颜色 默认 transparent */\n        this.borderColor =      configs.borderColor || 'transparent';\n        /** @member {string}     - 填充颜色 默认 transparent */\n        this.backgroundColor =  configs.backgroundColor || 'transparent';\n        /** @member {string}     - 阴影颜色 空就不显示阴影 */\n        this.shadowColor =      configs.shadowColor;\n        /** @member {string}     - 阴影扩散范围 默认 5 */\n        this.shadowBlur  =      configs.shadowBlur || 5;\n        /** @member {string}     - 阴影偏移 X */\n        this.shadowOffsetX =    configs.shadowOffsetX || 0;\n        /** @member {string}     - 阴影偏移 Y */\n        this.shadowOffsetY =    configs.shadowOffsetY || 0;\n\n    }\n    /**\n     * @member {boolean} - 当前单元选中状态\n     */\n    get _isTargeting() {\n        return this === (this._jflow._target.instance || this._jflow._target.link);\n    }\n    /**\n     * @member {boolean} - 当前单元移动状态\n     */\n    get _isMoving() {\n        return this === this._jflow._getMovingTarget();\n    }\n    /**\n     * @member {boolean}  - 当前单元碰撞检测状态\n     */\n    get _isHit() {\n        return this[ishitKey];\n    }\n    /**\n     * @member {JFlow}  - canvas上 jflow 实体\n     */\n    get _jflow() {\n        return this._belongs.uniqueName === 'jflow' ? this._belongs : this._belongs._jflow;\n    }\n\n    set _isHit(ishit) {\n        if(this[ishitKey] !== ishit) {\n            /**\n             * 鼠标移入事件\n             *\n             * @event Instance#mouseenter\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            /**\n             * 鼠标移出事件\n             *\n             * @event Instance#mouseleave\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            this.dispatchEvent(new CustomEvent(ishit ? 'mouseenter': 'mouseleave' , {\n                detail: {\n                    instance: this,\n                }\n            }));\n        }\n        this[ishitKey] = ishit; // validation could be checked here such as only allowing non numerical values\n    }\n\n    /**\n     * 改变当前配置\n     * @param {Configs} configs - The string containing two comma-separated numbers.\n     */\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n            }\n        })\n    }\n    /**\n     * 绘制单元\n     * @param {Context2d} ctx \n     */\n    render(ctx) {\n        throw 'require render implement'\n    }\n    /**\n     * 判断当前单元是否被命中\n     * @param {number[]} point \n     * @return {Boolean}\n     */\n    isHit(point) {\n        throw 'require isHit implement'\n    }\n    /**\n     * 计算当前的最大外接矩形的\n     * @return {number[]} [leftx, lefty, rightx, righty]\n     */\n    getBoundingRect() {\n        throw 'require getBoundingRect implement'\n    }\n    calculateIntersection() {\n        throw 'require calculateIntersection implement'\n    }\n    /**\n     * 计算当前连线接入点的位置\n     * @return {Object} intersection 交叉点\n     * @return {number} intersection[DIRECTION.TOP] 上\n     * @return {number} intersection[DIRECTION.BOTTOM] 下\n     * @return {number} intersection[DIRECTION.LEFT] 上\n     * @return {number} intersection[DIRECTION.RIGHT] 右\n     */\n    getIntersectionsInFourDimension() {\n        throw 'require getIntersectionsInFourDimension implement'\n    }\n\n\n    /**\n     * 获取当前所在层级的坐标\n     * @return {Number[]} 坐标\n     */\n    getCenter() {\n        return this.anchor;\n    }\n    /**\n     * 获取宽高\n     * @return {Object} demension 宽高\n     * @return {number} demension.width 宽\n     * @return {number} demension.height 高\n     */\n    getBoundingDimension() {\n        const rect = instance.getBoundingRect();\n        let min_y = Infinity;\n        let max_y = -Infinity;\n        let min_x = Infinity;\n        let max_x = -Infinity;\n        rect.forEach(point => {\n            max_y = Math.max(max_y, point[1]);\n            min_y = Math.min(min_y, point[1]);\n            max_x = Math.max(max_x, point[0]);\n            min_x = Math.min(min_x, point[0]);\n        });\n        return {\n            height: max_y - min_y,\n            width: max_x - min_x,\n        }\n    }\n    /**\n     * 冒泡事件\n     * @param {JFlowEvent} customEvent 自定义事件\n     */\n    bubbleEvent(customEvent){\n        this.dispatchEvent(customEvent);\n        if(customEvent.detail.bubbles){\n            if(this._belongs.bubbleEvent) {\n                this._belongs.bubbleEvent(customEvent);\n            } else {\n                this._belongs.dispatchEvent(customEvent); \n            }\n            \n        }\n    }\n    /**\n     * 反算回页面的像素坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(point);\n        } else {\n            return point;\n        }\n    }\n\n    calculateToRealWorldWithScalar(length){\n        return this._jflow.scale * length;\n    }\n\n    /**\n     * 从当前布局中删除虚拟布局节点\n     */\n    removeFromLayoutSource() {\n        if(this._layoutNode) {\n            this._layoutNode.remove();\n        }\n    }\n\n    recalculateUp() {\n        if(this.belongs) {\n            this.belongs.recalculateUp();\n        }\n    }\n}\n\nexport default Instance;","import Instance from './instance';\nimport { nextDirection } from '../utils/constance';\n\n/**\n * 绝对定位 配置， 绝对定位不受布局影响，相对于当前组来定位\n * @typedef {object} Node~AbsolutePosition \n * @property {number} top       - 上距离\n * @property {number} bottom    - 下距离\n * @property {number} right     - 右距离\n * @property {number} left      - 左距离\n */\n/**\n * Node 配置\n * @typedef {Instance~Configs} Node~Configs \n * @property {number[]} anchor - 坐标\n * @property {Node~AbsolutePosition} absolutePosition - 绝对定位位置\n */\n/**\n * 节点基类\n * @constructor Node\n * @extends Instance\n * @param {Node~Configs} configs - 节点配置\n */\nclass Node extends Instance {\n    constructor(configs = {}) {\n        super(configs);\n        this._rawConfigs = configs;\n        // for layout\n        /** @member {number[]} */\n        this.anchor =           configs.anchor || [0, 0];\n        /** @member {Node~AbsolutePosition} */\n        this.absolutePosition = configs.absolutePosition;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n    }\n    /**\n     * 克隆当前节点.\n     * @return {Node} 当前节点的副本\n     */\n    clone() {\n        const C = this.constructor;\n        const t = new C(this._rawConfigs);\n        return t;\n    }\n    // end: from | to\n    // from 逆时针, to 顺时针\n    // checkLinked(interDir, end) {\n    //     if(this._intersections.find(i => i === interDir)) {\n    //         interDir = nextDirection(interDir, end === 'to');\n    //     } else {\n    //         this._intersections.push(interDir)\n    //     }\n    //     return interDir;\n    // }\n\n    /* renderFocus(ctx) {\n        const points = this.getBoundingRect();\n        if(points.length !== 4) return;\n        const margin = this.margin;\n        const [p0, p1, p2, p3] = points;\n        const width = p1[0] - p0[0];\n        const height = p3[1] - p0[1];\n        const w = width * 0.2;\n        const h = height * 0.2;\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(p0[0] - margin, p0[1] - margin + h);\n        ctx.lineTo(p0[0] - margin, p0[1] - margin);\n        ctx.lineTo(p0[0] - margin + w, p0[1] - margin);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(p1[0] + margin - w, p1[1] - margin);\n        ctx.lineTo(p1[0] + margin, p1[1] - margin);\n        ctx.lineTo(p1[0] + margin, p1[1] - margin + h);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(p2[0] + margin, p2[1] + margin - h);\n        ctx.lineTo(p2[0] + margin, p2[1] + margin);\n        ctx.lineTo(p2[0] + margin - w, p2[1] + margin);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(p3[0] - margin + w, p3[1] + margin);\n        ctx.lineTo(p3[0] - margin, p3[1] + margin);\n        ctx.lineTo(p3[0] - margin, p3[1] + margin - h);\n        ctx.stroke();\n        ctx.restore();\n    } */\n}\n\nexport default Node;","import Node from './node';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\nconst GroupMixin = {\n    ...StackMixin,\n    ...LayoutMixin,\n    _setPadding(configs) {\n        this.padding = {\n            top: configs.paddingTop || configs.padding || 0,\n            right: configs.paddingRight || configs.padding || 0,\n            bottom: configs.paddingBottom || configs.padding || 0,\n            left: configs.paddingLeft || configs.padding || 0,\n        };\n    },\n    _setMargin(configs)  {\n        this.margin = {\n            top: configs.marginTop || configs.margin || 0,\n            right: configs.marginRight || configs.margin || 0,\n            bottom: configs.marginBottom || configs.margin || 0,\n            left: configs.marginLeft || configs.margin || 0,\n        };\n    },\n    _getCenter() {\n        const anchor = this.anchor;\n        const padding = this.padding;\n        const margin = this.margin;\n        const mx = (margin.left - margin.right)/2;\n        const my = (margin.top - margin.bottom)/2;\n        const centerX = (padding.left - padding.right)/2 + mx;\n        const centerY = (padding.top - padding.bottom)/2 + my;\n        this._shape.anchor = [anchor[0] + mx, anchor[1] + my];\n        return [anchor[0] + centerX, anchor[1] + centerY];\n    },\n\n    _calculatePointBack(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx - cx, gy - cy]\n        return p\n    },\n    /**\n     * 反算回 canvas 顶层坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToCoordination(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        // const p = [cx + anchor[0] - spanH, cy + anchor[1] - spanV];\n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            return this._belongs.calculateToCoordination(p);\n        } else {\n            return p;\n        }\n    },\n    /**\n     * 反算回页面的像素坐标，重载 {@link Instance#calculateToRealWorld}\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(p);\n        }\n    },\n    clone() {\n        const C = this.constructor;\n        const configs = Object.assign({}, this._rawConfigs, {\n            layout: this._layout && this._layout.clone(),\n        })\n        const t = new C(configs);\n        this.interateNodeStack((instance) => {\n            t.addToStack(instance.clone());\n        })\n        t.recalculate();\n        return t;\n    },\n    getBoundingDimension() {\n        return {\n            width: this.width,\n            height: this.height,\n        }\n    },\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    },\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    }\n}\n\nfunction defaultShift(width, height) {\n    return [width, height];\n}\n\n/**\n * 根据paddingbox宽高来计算shapeshiftbox的宽高\n * @function shapeShift\n * @param {number} width            - paddingBox宽\n * @param {number} height           - paddingBox高\n * @return {number[]}\n */\n\n/**\n * 组工厂函数，用于通过JFlow 绘图节点来创建不同的组\n * @global \n * @function GroupFactory\n * @param {Node} jflowNodeConstructor - 绘图节点构造器\n * @param {object} options            - 配置项\n * @param {shapeShift} options.shapeShift - shift层适配方法\n * @return {Group} - 绘图节点构造器\n */\nfunction GroupFactory(jflowNodeConstructor, options = {}) {\n    const shapeShift = typeof options.shapeShift === 'function' ? options.shapeShift : defaultShift;\n\n    /**\n     * Group 配置\n     * @typedef {Object} GroupTemplate~GroupConfigs\n     * @property {number} width             - 设定宽度\n     * @property {number} minWidth          - 最小宽度\n     * @property {number} height            - 设定高度\n     * @property {number} padding          - 内边距\n     * @property {number} paddingTop          - 内上边距\n     * @property {number} paddingRight         - 内右边距\n     * @property {number} paddingBottom        - 内下边距\n     * @property {number} paddingLeft          - 内左边距\n     * @property {number} margin            - 外边距\n     * @property {number} marginTop          - 外上边距\n     * @property {number} marginRight         - 外右边距\n     * @property {number} marginBottom        - 外下边距\n     * @property {number} marginLeft          - 外左边距\n     * @property {boolean} lock            - 布局锁定状态 默认 true\n     */\n    class t extends Node {\n        /**\n        * @constructs GroupTemplate\n        * @param {GroupTemplate~GroupConfigs} configs - 组配置\n        * @mixes LayoutMixin\n        * @mixes StackMixin \n        */\n        constructor(configs) {\n            super(configs);\n                this.initStack(configs);\n                this.initLayout(configs);\n                /** @member {Node}      - 壳绘图单元 */\n                this._shape = new jflowNodeConstructor(configs);\n                this._shape.anchor = [0, 0];\n                this._shape._belongs = this;\n                this._setPadding(configs);\n                this._setMargin(configs);  \n                /** @member {Number}      - 设定宽度 */\n                this.definedWidth =     configs.width;\n                /** @member {Number}      - 最小宽度 */\n                this.minWidth =         configs.minWidth;\n                /** @member {Number}      - 设定的高度 */\n                this.definedHeight =    configs.height;\n                /** @member {Boolean}      - 组内元素是否锁定， 默认true */\n                this.lock =             configs.lock ?? true ;\n                this._getBoundingGroupRect();\n                this.reflow();\n                this._getBoundingGroupRect();  \n        }\n    }\n    Object.assign(t.prototype, GroupMixin);\n    Object.assign(t.prototype, { \n        setConfig(configs) {\n            this._shape.setConfig(configs);\n            this._setPadding(configs);\n            this._setMargin(configs);  \n        },\n        _getBoundingGroupRect() {\n            const points = this._stack.getBoundingRectPoints();\n            // content box \n            const bbox = bounding_box(points);\n\n             // padding box \n            const padding = this.padding;\n            const minWidth = this.minWidth - padding.left - padding.right;\n            const definedWidth = this.definedWidth - padding.left - padding.right;\n            const w = bbox.width + padding.left + padding.right;\n            const h = bbox.height + padding.top + padding.bottom;\n            const paddingWidth = minWidth ? Math.max(minWidth, w) : definedWidth || w;\n            const paddingHeight = this.definedHeight || h;\n            this._paddingWidth = paddingWidth;\n            this._paddingHeight = paddingHeight;\n\n            // shapeBox\n            const [shapeWidth, shapeHeight] = shapeShift(paddingWidth, paddingHeight)\n            this._shape.width = shapeWidth;\n            this._shape.height = shapeHeight;\n            // marginBox\n            const margin = this.margin;\n            this.width = shapeWidth + margin.left + margin.right;\n            this.height = shapeHeight + margin.top + margin.bottom;\n        },\n        render(ctx) {\n            ctx.save();\n            if(this._isMoving){\n                ctx.globalAlpha = 0.6\n            }\n\n            const [cx, cy] = this._getCenter(); \n            this._shape.render(ctx);\n            ctx.translate(cx, cy);\n            this._stack.render(ctx);\n            this._linkStack.render(ctx);    \n            ctx.translate(-cx, -cy);\n            ctx.restore();\n\n            // ctx.save();\n            // ctx.beginPath();\n            // ctx.arc(cx, cy, 5, 0, Math.PI*2);\n            // ctx.fillStyle = 'rgb(0,0,0)'\n            // ctx.fill();\n            // ctx.restore();\n        },\n        isHit(point, condition) {\n            const p = this._calculatePointBack(point);\n            this._currentp = p; // 暂存，为了后续计算别的位置\n            const target = this._stack.checkHit(p, condition);\n            if(target) return target;\n            return this._shape.isHit(point);\n        },\n        \n    });\n    return t\n}\n\nexport default GroupFactory;\n\n","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * @typedef Rectangle~border\n * @type {object}\n * @property {number} borderColor      - 边框宽度, 默认 0\n * @property {number} borderWidth      - 边框颜色, 默认 transparent\n */\n/**\n * @typedef Rectangle~borders\n * @type {object}\n * @property {Rectangle~border} top      - 上边框\n * @property {Rectangle~border} right      - 右边框\n * @property {Rectangle~border} bottom      - 下边框\n * @property {Rectangle~border} left      - 左边框\n */\n\n/**\n * 矩形单元 配置\n * @typedef {Node~Configs} Rectangle~RectangleConfigs\n * @property {number} width - 宽\n * @property {number} height - 高\n * @property {number} borderRadius - 圆角矩形半径\n * @property {string} borderColor - 边框颜色, 默认 transparent\n * @property {string} borderWidth - 边框宽度, 默认 0\n * @property {Rectangle~borders} border      - 边框设置\n */\n/**\n * 矩形单元\n * @constructor Rectangle\n * @extends Node\n * @param {Rectangle~RectangleConfigs} configs\n */\nclass Rectangle extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rectangle';\n         /** @member {Number}      - 宽 */\n        this.width =            configs.width || 10;\n         /** @member {Number}      - 高 */\n        this.height =           configs.height || 10;\n         /** @member {Number}      - 圆角矩形半径 */\n        this.borderRadius =     configs.borderRadius || 0;\n        this._setBorder(configs);\n    }\n\n    _setBorder(configs){\n        /** @member {Rectangle~borders}      - 边框设置，优先级高于 borderWidth，borderColor */\n        this.border = {\n            top: {\n                color: configs.border?.top?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.top?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.top?.borderWidth,\n            },\n            right: {\n                color: configs.border?.right?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.right?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.right?.borderWidth,\n            },\n            bottom: {\n                color: configs.border?.bottom?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.bottom?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.bottom?.borderWidth,\n            },\n            left: {\n                color: configs.border?.left?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.left?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.left?.borderWidth,\n            }\n        };\n        this.borderColor = configs.borderColor || 'transparent';\n        this.borderWidth = configs.borderWidth || 0;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._setBorder(configs);\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n\n        const {\n            borderRadius: radius, anchor, width, height\n        } = this;\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        const xt = this.anchor[0] + this.width / 2;\n        const yt = this.anchor[1] + this.height / 2;\n        if(this.borderRadius) {\n            ctx.beginPath();\n            ctx.moveTo(x + radius, y);\n            ctx.lineTo(x + width - radius, y);\n            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n            ctx.lineTo(x + width, y + height - radius);\n            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n            ctx.lineTo(x + radius, y + height);\n            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n            ctx.closePath();\n            if(this.borderWidth) {\n                ctx.lineWidth = this.borderWidth;\n                ctx.strokeStyle = this.borderColor;\n                ctx.stroke();\n            }\n        } else {\n            ctx.beginPath();\n            ctx.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n        }\n        ctx.fillStyle = this.backgroundColor;\n        if(this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderRadius) {\n            if(this.border.top.enable) {\n                ctx.save();\n                ctx.beginPath();\n                ctx.moveTo(x, y + radius);\n                ctx.quadraticCurveTo(x, y, x + radius, y);\n                ctx.lineTo(x + width - radius, y);\n                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n                ctx.closePath();\n\n                // ctx.fill();\n                ctx.clip();\n\n                ctx.beginPath();\n                ctx.rect(x, y, this.width, this.border.top.width);\n                ctx.fillStyle = this.border.top.color;\n                ctx.fill();\n                ctx.restore();\n            }\n\n            // if(this.border.right.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x + width, y + radius);\n            //     ctx.lineTo(x + width, y + height - radius);\n            //     ctx.strokeStyle = this.border.right.color;\n            //     ctx.lineWidth = this.border.right.width;\n            //     ctx.stroke();\n            // }\n\n            // if(this.border.bottom.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x + width - radius, y + height);\n            //     ctx.lineTo(x + radius, y + height);\n            //     ctx.strokeStyle = this.border.bottom.color;\n            //     ctx.lineWidth = this.border.bottom.width;\n            //     ctx.stroke();\n            // }\n\n            // if(this.border.left.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x, y + height - radius);\n            //     ctx.lineTo(x, y + radius);\n            //     ctx.strokeStyle = this.border.left.color;\n            //     ctx.lineWidth = this.border.left.width;\n            //     ctx.stroke();\n            // }\n        } else {\n            if(this.border.top.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, y);\n                ctx.lineTo(xt, y);\n                ctx.strokeStyle = this.border.top.color;\n                ctx.lineWidth = this.border.top.width;\n                ctx.stroke();\n            }\n\n            if(this.border.right.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, y);\n                ctx.lineTo(xt, yt);\n                ctx.strokeStyle = this.border.right.color;\n                ctx.lineWidth = this.border.right.width;\n                ctx.stroke();\n            }\n\n            if(this.border.bottom.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, yt);\n                ctx.lineTo(x, yt);\n                ctx.strokeStyle = this.border.bottom.color;\n                ctx.lineWidth = this.border.bottom.width;\n                ctx.stroke();\n            }\n\n            if(this.border.left.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, yt);\n                ctx.lineTo(x, y);\n                ctx.strokeStyle = this.border.left.color;\n                ctx.lineWidth = this.border.left.width;\n                ctx.stroke();\n            }\n        }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        return point[0] > anchor[0] - w\n            && point[0] < anchor[0] + w\n            && point[1] > anchor[1] - h\n            && point[1] < anchor[1] + h;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let x, y;\n        if(theta2 < theta1) {\n            x = x2 + (dirx?w:-w);\n            y = w * (diry?theta2:-theta2) + y2;\n        } else {\n            y = y2 + (diry?h:-h);\n            x = h / (dirx?theta2:-theta2) + x2;\n        }\n        return [x, y];\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let interDir = (theta2 > theta1\n            ? (diry ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (dirx ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(JSON.stringify(this._intersections));\n        //     console.log(interDir)\n        // }\n        // interDir = this.checkLinked(interDir, end);\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(interDir)\n        // }\n\n        // if(!interDir) {\n        //     debugger\n        // }\n        // let endDir = interDir;\n        // if(end === 'to') {\n        //     endDir = oppositeDirection(endDir)\n        // }\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n}\n\nexport default Rectangle;","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * 胶囊单元 配置\n * @typedef {Node~Configs} Capsule~CapsuleConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n */\n/**\n * 胶囊单元\n * @constructor Capsule\n * @extends Node\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass Capsule extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Capsule';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const leftCenter = x - hw + hh;\n        const rightCenter = x + hw - hh;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        ctx.moveTo(leftCenter, top);\n        ctx.lineTo(rightCenter, top);\n        ctx.arc(rightCenter, y, hh, -Math.PI/2, Math.PI/2);\n        ctx.lineTo(leftCenter, bottom);\n        ctx.arc(leftCenter, y, hh, Math.PI/2, Math.PI/2*3);\n\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const ww =  Math.abs(hw - hh);\n        const leftCenter = anchor[0] - hw + hh;\n        const rightCenter = anchor[0] + hw - hh;\n        const rr = hh * hh;\n        return (point[0] > anchor[0] - ww\n            && point[0] < anchor[0] + ww\n            && point[1] > anchor[1] - hh\n            && point[1] < anchor[1] + hh)\n            || ( Math.pow(point[0] - leftCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n            || ( Math.pow(point[0] - rightCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Capsule;","import Capsule from './capsule';\n/**\n * 垂直胶囊单元\n * @constructor CapsuleVertical\n * @extends Capsule\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass CapsuleVertical extends Capsule {\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const left = x - hw;\n        const right = x + hw;\n\n        ctx.moveTo(left, topCenter);\n        ctx.arc(x, topCenter, hw, -Math.PI, 0);\n        ctx.lineTo(right, bottomCenter);\n        ctx.arc(x, bottomCenter, hw, 0, Math.PI);\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point, condition) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy =  Math.abs(hh - hw);\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const rr = hw * hw;\n        return (point[0] > x - hw\n            && point[0] < x + hw\n            && point[1] > y - yy\n            && point[1] < y + yy)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - topCenter, 2) < rr)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - bottomCenter, 2) < rr)\n    }\n}\nexport default CapsuleVertical;","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 菱形单元 配置\n * @typedef {Node~Configs} Rhombus~RhombusConfigs\n * @property {number} diagonalsV  - 内十字高度\n * @property {number} diagonalsH  - 内十字宽度\n */\n/**\n * 菱形单元\n * @constructor Rhombus\n * @param {Rhombus~RhombusConfigs} configs - 配置\n * @extends Node\n */\nclass Rhombus extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rhombus';\n        /** @member {Number}      - 内十字高度 */\n        this.height =           configs.diagonalsV || 10;\n        /** @member {Number}      - 内十字宽度 */\n        this.width =            configs.diagonalsH || 20;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        const w = this.width / 2;\n        const h = this.height / 2;\n        const center = this.anchor;\n        ctx.translate(center[0], center[1])\n        ctx.beginPath();\n        ctx.moveTo(0, -h);\n        ctx.lineTo(w, 0);\n        ctx.lineTo(0, h);\n        ctx.lineTo(-w, 0);\n        ctx.closePath();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        ctx.fillStyle = this.backgroundColor;\n        if(this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        ctx.translate(-center[0], -center[1])\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const v = this.height / 2;\n        const h = this.width / 2;\n        const anchor = this.anchor;\n        const x = Math.abs(point[0] - anchor[0]);\n        const y = Math.abs(point[1] - anchor[1]);\n        return (x / h + y / v) <= 1;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height /2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    }\n}\n\nexport default Rhombus;\n","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\nimport { makeBezierPoints } from '../../utils/functions';\n/**\n * 钻石形单元 配置\n * @typedef {Node~Configs} Diamond~DiamondConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n * @property {number} side   - 两侧三角形的宽\n */\n/**\n * 钻石形单元\n * @constructor Diamond\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Node\n */\n\nclass Diamond extends Node {\n\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Diamond';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n        /** @member {Number}      - 两侧三角形的宽 */\n        this.side =             configs.side || 6;\n        this._doCache();\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._doCache();\n    }\n\n    _doCache() {\n        this.sinSIDE = Math.sin(Math.PI/3) * this.side;\n        this.cosSIDE = Math.cos(Math.PI/3) * this.side;\n    }\n\n    render(ctx) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const xx = hh / 1.732\n        const leftCenter = x - hw + xx;\n        const rightCenter = x + hw - xx;\n        const right = x + hw;\n        const left = x - hw;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        this._cachePoints = [\n            [rightCenter, top],\n            [right, y],\n            [rightCenter, bottom],\n            [leftCenter, bottom],\n            [left, y],\n            [leftCenter, top]\n        ];\n\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const {\n            side, sinSIDE, cosSIDE\n        } = this;\n        ctx.moveTo(x, top);\n        ctx.lineTo(rightCenter - side, top);\n        ctx.quadraticCurveTo(rightCenter, top, rightCenter + cosSIDE, top + sinSIDE);\n        ctx.lineTo(right - cosSIDE, y - sinSIDE);\n        ctx.quadraticCurveTo(right, y, right - cosSIDE, y + sinSIDE);\n        ctx.lineTo(rightCenter + cosSIDE, bottom - sinSIDE);\n        ctx.quadraticCurveTo(rightCenter, bottom, rightCenter - side, bottom);\n\n        ctx.lineTo(leftCenter + side, bottom);\n        ctx.quadraticCurveTo(leftCenter, bottom, leftCenter - cosSIDE, bottom - sinSIDE);\n        ctx.lineTo(left + cosSIDE, y + sinSIDE);\n        ctx.quadraticCurveTo(left, y, left + cosSIDE, y - sinSIDE);\n        ctx.lineTo(leftCenter - cosSIDE, top + sinSIDE);\n        ctx.quadraticCurveTo(leftCenter, top, leftCenter + side, top);\n\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n\n\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const polygon = this._cachePoints;\n        let odd = false;\n        // For each edge (In this case for each point of the polygon and the previous one)\n        for (let i = 0, j = polygon.length - 1; i < polygon.length; i++) {\n            // If a line from the point into infinity crosses this edge\n            if (((polygon[i][1] > point[1]) !== (polygon[j][1] > point[1])) // One point needs to be above, one below our y coordinate\n                // ...and the edge doesn't cross our Y corrdinate before our x coordinate (but between our x coordinate and infinity)\n                && (point[0] < ((polygon[j][0] - polygon[i][0]) * (point[1] - polygon[i][1]) / (polygon[j][1] - polygon[i][1]) + polygon[i][0]))) {\n                // Invert odd\n                odd = !odd;\n            }\n            j = i;\n\n        }\n        return odd;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Diamond;","import Diamond from './diamond';\nconst backsqrt3 = 1/Math.sqrt(3)\n\n/**\n * 垂直钻石形单元\n * @constructor DiamondVertical\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Diamond\n */\nclass DiamondVertical extends Diamond {\n    constructor(configs) {\n        super(configs)\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy = hw / 1.732\n\n        const top = y - hh;\n        const bottom = y + hh;\n        const topmiddle = y - hh + yy;\n        const bottommiddle = y + hh - yy;\n        const xleft = x - hw;\n        const xright = x + hw;\n\n        ctx.moveTo(x, top);\n        ctx.lineTo(xright, topmiddle);\n        ctx.lineTo(xright, bottommiddle);\n        ctx.lineTo(x, bottom);\n        ctx.lineTo(xleft, bottommiddle);\n        ctx.lineTo(xleft, topmiddle);\n        ctx.closePath();\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        ctx.restore();\n        this._cachePoints = [\n            [x, top],\n            [xright, topmiddle],\n            [xright, bottommiddle],\n            [x, bottom],\n            [xleft, bottommiddle],\n            [xleft, topmiddle]\n        ];\n    }\n}\nexport default DiamondVertical;","export default {\n    canvas: {\n        wheel (event, jflow) {\n            event.preventDefault();\n            let { offsetX, offsetY, deltaX, deltaY } = event \n            if(event.ctrlKey) { \n                deltaY = -deltaY;\n            }\n            jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n        },\n    }\n}","import Instance from './instance';\n\n/**\n * @typedef {Instance~Configs} BaseLink~Configs\n * @property {Instance} from   - 起始单元\n * @property {Instance} to     - 终止单元\n * @property {String} fromDir  - 起始方向 \n * @property {String} toDir    - 终止方向 \n * @property {String} key      - 连线唯一键值\n * @property {String} backgroundColor    - 线条颜色 \n */\n/**\n * 连线基类\n * @constructor BaseLink\n * @extends Instance\n * @param {BaseLink~Configs} configs - 配置\n */\nclass BaseLink extends Instance{\n    constructor(configs = {}) {\n        super();\n        /** @member {Instance}      - 起始单元 */\n        this.from     = configs.from;\n        /** @member {Instance}      - 终止单元 */\n        this.to       = configs.to;\n        /** @member {DIRECTION}      - 起始方向 */\n        this.fromDir  = configs.fromDir;\n        /** @member {DIRECTION}      - 终止方向 */\n        this.toDir    = configs.toDir;\n        /** @member {key}            - 连线唯一键值 */\n        this.key      = configs.key;\n        /** @member {number[][]}     - 连线控制点缓存 */\n        this._cachePoints = null;\n        /** @member {string}     - 连线颜色，默认为 #000 */\n        this.backgroundColor = configs.backgroundColor || '#000';\n    }\n\n    /**\n     * 是否出现在当前视窗内\n     * @param {number[]} viewbox\n     */\n    isInViewBox(viewbox){\n        return true;\n    }\n}\n\nexport default BaseLink;","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 圆形单元 配置\n * @typedef {Node~Configs} Point~PointConfigs\n * @property {number} radius  - 半径\n */\n/**\n * 圆形节点\n * @constructor Point\n * @extends Node\n * @param {Point~PointConfigs} configs - 配置\n */\nclass Point extends Node {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Point';\n        /** @member {Number}      - 半径 */\n        this.radius =           configs.radius || 10;\n        this.radiusExpo2 =      this.radius * this.radius;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        ctx.arc(this.anchor[0], this.anchor[1], this.radius, 0, 2 * Math.PI);\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        return Math.pow(point[0] - anchor[0], 2) + Math.pow(point[1] - anchor[1], 2) < this.radiusExpo2\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const r = this.radius;\n        const ltx = anchor[0] - r;\n        const lty = anchor[1] - r;\n        const rbx = anchor[0] + r;\n        const rby = anchor[1] + r;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const dist = Math.sqrt(vecx * vecx + vecy * vecy);\n\n        const ratio = this.radius / dist;\n        return [x2 - ratio * vecx, y2 - ratio * vecy];\n    }\n\n    getIntersectionsInFourDimension() {\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        return {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n        // console.log(Math.abs(vecx) > Math.abs(vecy), vecx, r)\n        // if() {\n        //     return {\n        //         p: [x2 + (vecx<0?r:-r), y2],\n        //         dir: vecx<0 ? DIRECTION.RIGHT : DIRECTION.LEFT,\n        //     }\n        // } else {\n        //     return {\n        //         p: [x2, y2+(vecy<0?r:-r)],\n        //         dir: vecy<0 ? DIRECTION.BOTTOM : DIRECTION.TOP,\n        //     }\n        // }\n        let interDir = (Math.abs(vecy) > Math.abs(vecx)\n            ? (vecy < 0 ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (vecx < 0 ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // interDir = this.checkLinked(interDir, end);\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n\n    getBoundingDimension() {\n        return {\n            width: this.radius * 2,\n            height: this.radius * 2,\n        }\n    }\n\n}\n\nexport default Point;","import Rectangle from './shapes/rectangle';\nimport { DIRECTION } from '../utils/constance';\nimport { requestCacheCanvas } from '../utils/canvas';\nimport JFlowEvent from '../events';\nfunction createInputElement() {\n    const input = document.createElement('input');\n    input.setAttribute('style',`\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        background-image:none;\n        background-color:transparent;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;`);\n    return input;\n}\n/**\n * 文字对齐方式\n * @readonly\n * @enum {string}\n */\nconst TEXT_ALIGN = {\n    CENTER: 'center',\n    LEFT: 'left',\n    RIGHT: 'right',\n};\n/**\n * 文字单元 配置\n * @typedef {Rectangle~RectangleConfigs} Text~TextConfigs\n * @property {String} fontFamily    - 字体\n * @property {Number} fontSize      - 字号\n * @property {String} content       - 内容\n * @property {String} textColor     - 字体颜色\n * @property {TEXT_ALIGN} textAlign     - 文字对齐方式\n * @property {String} backgroundColor     - 背景颜色\n * @property {number} lineHeight    - 行高\n * @property {number} indent        - 缩进\n * @property {Boolean} editable      - 是否可编辑\n * @property {number} minWidth      - 最小宽度\n */\n/**\n * 文字对象\n * @description 可以绘制文字\n * @constructor Text\n * @extends Rectangle\n * @param {Text~TextConfigs} configs - 配置\n */\nclass Text extends Rectangle {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Text';\n        /** @member {String}      - 内容 */\n        this.content =          configs.content || '';\n        /** @member {String}      - 字体 */\n        this.fontFamily =       configs.fontFamily || '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {String}      - 字号 */\n        this.fontSize =         configs.fontSize || '28px';\n        /** @member {String}      - 字体颜色 */\n        this.textColor =        configs.textColor || 'white';\n        /** @member {String}      - 文字对齐方式 */\n        this.textAlign =        configs.textAlign || TEXT_ALIGN.CENTER;\n        /** @member {String}      - 文字基线方式 */\n        this.textBaseline =     configs.textBaseline || 'middle';\n        /** @member {Number}      - 行高 */\n        this.lineHeight =       configs.lineHeight ;\n        /** @member {Number}      - 缩进 */\n        this.indent =           configs.indent || 0;\n        this.backgroundColor =  configs.backgroundColor;\n        /** @member {Boolean}      - 是否可编辑 */\n        this.editable =         configs.editable;\n        this.acceptPatten =     configs.acceptPatten;\n        /** @member {number}      - 最小宽度 */\n        this.minWidth =         configs.minWidth || 0;\n        // this.editStatus = {\n        //     editting: false,\n        // }\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n        });\n        this._makeEditable();\n    }\n\n    /**\n     * 编辑态\n     */\n    _makeEditable() {\n        if(this.editable) {\n            this.addEventListener('click', (event) => {\n                let x;\n                const hw = this.width / 2;\n                if(this.textAlign === TEXT_ALIGN.LEFT){\n                    x = this.anchor[0] - hw + this.indent / 2;\n                } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n                    x = this.anchor[0] + hw;\n                } else {\n                    x = this.anchor[0] + this.indent / 2;\n                }\n                const p = [ x, -this.height/2 ];\n                const fontSize = +/(\\d+)/.exec(this.fontSize)[1];\n                const [offsetX, offsetY] = this.calculateToRealWorld(p);\n                let inputElement = createInputElement();\n                const wrapper = this._jflow.DOMwrapper;\n                const oldVal = this.content;\n                inputElement.style.transform =`translate(${offsetX}px, ${offsetY}px)`;\n                inputElement.style.width = this.calculateToRealWorldWithScalar(this.width) + 'px';\n                inputElement.style.height = this.calculateToRealWorldWithScalar(this.height) + 'px';\n                inputElement.style.fontFamily = this.fontFamily;\n                wrapper.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.lineHeight = `${this.lineHeight * this._jflow.scale}px`;\n                inputElement.style.textIndent = `${this.indent * this._jflow.scale}px`;\n                inputElement.value = this.content;\n                inputElement.style.color = this.textColor;\n                inputElement.addEventListener(\"focus\",  () => {\n                    this.content = '';\n                    this._jflow._render();\n                    inputElement.style.outline = \"none\";\n                });\n                let blurHandler = () => {\n                    if(this.acceptPatten){\n\n                    } else {\n                        const val = inputElement.value;\n                        /**\n                         * 文字改变事件\n                         * @event Text#change\n                         * @type {object}\n                         * @property {Text} target           - 当前文字对象\n                         * @property {String} oldVal         - 原始文字\n                         * @property {String} val            - 当前文字\n                         */\n                        this.dispatchEvent(new JFlowEvent('change', {\n                            target: this,\n                            oldVal,\n                            val,\n                        }))\n                        this.content = oldVal;\n                        this._jflow._render();\n                        this._jflow.removeEventListener('zoompan', blurHandler)\n                        inputElement.removeEventListener('blur', blurHandler)\n                        wrapper.removeChild(inputElement);\n                        inputElement = null;\n                        blurHandler = null;\n                    }\n                };\n                this._jflow.addEventListener('zoompan', blurHandler);\n                inputElement.addEventListener('blur', blurHandler);\n                const keyUpHandler = (e) => {\n                    if (e.key === 'Enter' || e.keyCode === 13) {\n                        e.preventDefault();\n                        inputElement.removeEventListener('keypress', keyUpHandler)\n                        blurHandler();\n                    }\n                };\n                inputElement.addEventListener('keypress', keyUpHandler)\n                wrapper.append(inputElement);\n                inputElement.focus();\n            })\n        }\n    }\n\n    renderShadowText(ctx) {\n        ctx.beginPath();\n        ctx.font = `${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.textColor;\n        const {\n            actualBoundingBoxLeft,\n            actualBoundingBoxRight,\n            fontBoundingBoxAscent,\n            fontBoundingBoxDescent\n        } = ctx.measureText(this.content);\n        this._textWidth = this.indent + Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight);\n\n        this.width = Math.max(this.minWidth, this._textWidth);\n        const height = Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent);\n        if(this.lineHeight) {\n            this.height = this.lineHeight;\n        } else {\n            this.height = height;\n        }\n\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n        });\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        // this.renderShadowText(ctx);\n\n\n        // const {\n        //     borderRadius: radius, anchor, width, height\n        // } = this;\n        // if(this.backgroundColor || this.borderColor){\n        //     ctx.save();\n        //     ctx.beginPath();\n        //     if(this.borderRadius) {\n        //         const x = this.anchor[0] - this.width / 2;\n        //         const y = this.anchor[1] - this.height / 2;\n        //         ctx.moveTo(x + radius, y);\n        //         ctx.lineTo(x + width - radius, y);\n        //         ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n        //         ctx.lineTo(x + width, y + height - radius);\n        //         ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n        //         ctx.lineTo(x + radius, y + height);\n        //         ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n        //         ctx.lineTo(x, y + radius);\n        //         ctx.quadraticCurveTo(x, y, x + radius, y);\n        //         ctx.closePath();\n        //     } else {\n        //         ctx.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n        //     }\n        //     if (this.backgroundColor){\n        //         ctx.fillStyle = this.backgroundColor;\n        //         ctx.fill();\n        //     }\n        //     if(this.borderColor) {\n        //         ctx.strokeStyle = this.borderColor;\n        //         ctx.stroke();\n        //     }\n        //     ctx.restore();\n        // }\n\n        ctx.beginPath();\n        ctx.font = `${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.textColor;\n        if(this.textAlign === TEXT_ALIGN.LEFT){\n            const hw = this.width / 2;\n            ctx.fillText(this.content, this.anchor[0] - hw + this.indent / 2, this.anchor[1]);\n        } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n            const hw = this.width / 2;\n            ctx.fillText(this.content, this.anchor[0] + hw, this.anchor[1]);\n        } else {\n            ctx.fillText(this.content, this.anchor[0] + this.indent / 2, this.anchor[1]);\n        }\n        // ctx.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n        // ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n        ctx.fill();\n        ctx.restore();\n    }\n}\n\nexport default Text;","import Rectangle from './shapes/rectangle';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\n\n/**\n * @typedef {Object} Icon~ImageBounding\n * @property {number} width   - 图片宽度\n * @property {number} height   - 图片高度 \n */\n/**\n * 图片单元 配置\n * @typedef {Rectangle~RectangleConfigs} Icon~IconConfigs\n * @property {number} image   - 图片地址\n * @property {number} imageWidth   - 图片宽度\n * @property {number} imageHeight   - 图片高度\n */\n\n/**\n * 图片单元\n * @description 图片单元可以绘制图片，图片加载后会自动重新绘制\n * @constructor Icon\n * @extends Rectangle\n * @param {Icon~IconConfigs} configs - 配置\n */\nclass Icon extends Rectangle {\n    constructor(configs) {\n        super(configs)\n        /** @member {CanvasImageSource}      - 图片 */\n        this.image = configs.image;\n        this.image.onload = () => {\n            requestAnimationFrame(() => {\n                this._jflow._render();\n            })\n        }\n        /** @member {Icon~ImageBounding}      - 图片维度 */\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width,\n            height: configs.imageHeight ||  configs.height,\n        }\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        if(configs.image && !configs.image.complete) {\n            this.image.onload = () => {\n                requestAnimationFrame(() => {\n                    this._jflow._render();\n                })\n            }\n        }\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width || this.imageBounding.width,\n            height: configs.imageHeight ||  configs.height || this.imageBounding.height,\n        }\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        Rectangle.prototype.render.call(this, ctx);\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        if(this.image.complete) {\n            ctx.drawImage(this.image, x, y, this.imageBounding.width, this.imageBounding.height);\n        }\n        ctx.restore();\n    }\n}\nexport default Icon;","import BaseLink from './base-link';\nimport { distToSegmentSquared } from '../utils/functions';\nimport { APPROXIMATE } from '../utils/constance';\nclass Link extends BaseLink {\n    constructor(configs) {\n        super(configs);\n        this.from   = configs.from; // Instance\n        this.to     = configs.to;   // Instance\n        this.controlPoints = [0, 1, -10, 1, -10, 5];\n        this._cachePoints = null;\n        this.defaultStyle = 'black';\n        this.hoverStyle = 'cornflowerblue';\n    }\n\n    getColor() {\n        if(this._isTargeting) {\n            return this.hoverStyle;\n        }\n        return this.defaultStyle;\n    }\n\n    _calculateAnchorPoints() {\n        const start = this.from.calculateIntersection(this.to.getCenter());\n        const end = this.to.calculateIntersection(this.from.getCenter());\n        this._cachePoints = [start, end];\n        return {\n            startX: start[0], \n            startY: start[1],\n            endX  : end[0],\n            endY  : end[1],\n        }\n    }\n\n    render(ctx) {\n        const { startX, startY, endX, endY } = this._calculateAnchorPoints();\n        const controlPoints = this.controlPoints;\n        var dx = endX - startX;\n        var dy = endY - startY;\n        var len = Math.sqrt(dx * dx + dy * dy);\n        var sin = dy / len;\n        var cos = dx / len;\n        var a = [];\n        a.push(0, 0);\n        for (var i = 0; i < controlPoints.length; i += 2) {\n            var x = controlPoints[i];\n            var y = controlPoints[i + 1];\n            a.push(x < 0 ? len + x : x, y);\n        }\n        a.push(len, 0);\n        for (var i = controlPoints.length; i > 0; i -= 2) {\n            var x = controlPoints[i - 2];\n            var y = controlPoints[i - 1];\n            a.push(x < 0 ? len + x : x, -y);\n        }\n        a.push(0, 0);\n        ctx.fillStyle = ctx.strokeStyle = this.getColor();\n        ctx.beginPath();\n        for (var i = 0; i < a.length; i += 2) {\n            var x = a[i] * cos - a[i + 1] * sin + startX;\n            var y = a[i] * sin + a[i + 1] * cos + startY;\n            if (i === 0) ctx.moveTo(x, y);\n            else ctx.lineTo(x, y);\n        }\n        ctx.fill();\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const [ start, end ] = this._cachePoints;\n        const dist = distToSegmentSquared(point, start, end)\n        return dist < APPROXIMATE;\n    }\n\n    getBoundingRect() {\n        const { startX, startY, endX, endY } = this._calculateAnchorPoints(); \n        return [[startX, startY], [endX, endY]]\n    }\n}\n\nexport default Link;","import BaseLink from './base-link';\nimport { \n    polylinePoints, \n    distToSegmentSquared, \n    makeRadiusFromVector, \n    minIntersectionBetweenNodes,\n    isPolyLineIntersectionRectange\n} from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\n// import { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} PolyLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} radius        - 拐角弧度\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {String} isSelf        - 是否为自连接\n */\n/**\n * 方形折线\n * @constructor PolyLink\n * @extends BaseLink\n * @param {PolyLink~Configs} configs - 配置\n */\nclass PolyLink extends BaseLink {\n     /**\n     * 创建方形折线\n     * @param {PolyLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}   - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}   - 拐角弧度 */\n        this.radius        = configs.radius || 0;\n        /** @member {Number}   - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 10;\n        /** @member {Number}   - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 10;\n        /** @member {Number}    - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Number}    - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {Number}    - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}    - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {Number}    - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Number}    - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n    }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf){\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                DIRECTION.BOTTOM, \n                this.minSpanX, \n                this.minSpanY,\n                true);\n\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, DIRECTION.BOTTOM]\n            // const points = polylinePoints(\n            //     dmsfrom[this.fromDir],\n            //     dmsto[this.toDir],\n            //     this.fromDir,\n            //     this.toDir, this.minSpanX , this.minSpanY);\n            // this._cachePoints = points\n            // this._cacheAngle = [this.fromDir, this.toDir]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = polylinePoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir,\n                this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [meta.fromDir, meta.toDir]\n        }\n    }\n    \n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return isPolyLineIntersectionRectange(this._cachePoints, br);\n    }\n\n    render(ctx) {\n        // this._calculateAnchorPoints();\n        const radius = this.radius;\n        const points = this._cachePoints;\n        const p = points[0];\n        const pEnd = points[points.length - 1];\n        const angleEnd = ((this._cacheAngle[1] + 2) % 4) * 90 * PIINRATIO;\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(p[0], p[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-p[0], -p[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(p[0], p[1]);\n        points.slice(1, points.length - 1).forEach((p, idx) => {\n            if(this.radius) {\n                const pLast = points[idx];\n                const pNext = points[idx+2];\n                const { p1, p2 } = makeRadiusFromVector(pLast, p, pNext, radius);\n                if(p1 && p2){\n                    ctx.lineTo(p1[0], p1[1]);\n                    ctx.quadraticCurveTo(p[0], p[1], p2[0], p2[1]);\n                } else {\n                    ctx.lineTo(p[0], p[1]);\n                }  \n            } else {\n                ctx.lineTo(p[0], p[1]);\n            }\n        });\n        ctx.lineTo(pEnd[0], pEnd[1]);\n\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        ctx.beginPath();\n        ctx.translate(pEnd[0], pEnd[1]);\n        ctx.rotate(angleEnd);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-5, -4);\n        ctx.lineTo(-5, 4);\n        ctx.lineTo(0, 0);\n        ctx.fill();\n        ctx.rotate(-angleEnd);\n        ctx.translate(-pEnd[0], -pEnd[1]);\n\n    }\n\n    isHit(point) {\n        const points = this._cachePoints;\n        let lastP = points[0];\n        const remainPoints = points.slice(1)\n        do {\n            const currentP = remainPoints.shift();\n            if(currentP) {\n                const dist = distToSegmentSquared(point, lastP, currentP);\n                if(dist < this.approximate){\n                    return true;\n                }\n            }\n            lastP = currentP;\n        } while(lastP)\n\n        return false\n    }\n}\n\nexport default PolyLink;","import BaseLink from './base-link';\nimport { bezierPoints, distToBezierSegmentSquared, getBezierAngle, minIntersectionBetweenNodes } from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\nimport { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} BezierLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {Number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {Boolean} isSelf        - 是否为自连接\n */\n/**\n * 贝塞尔曲线\n * @constructor BezierLink\n * @extends BaseLink\n * @param {BezierLink~Configs} configs - 配置\n */\nclass BezierLink extends BaseLink {\n     /**\n     * 创建贝塞尔曲线.\n     * @param {BezierLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}      - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}      - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 0;\n        /** @member {Number}      - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 0;\n        /** @member {Number[]}      - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Boolean}      - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {String}      - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}      - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {String}      - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Boolean}      - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n    }\n    \n    // getColor() {\n    //     if(this._isTargeting) {\n    //         return this.hoverStyle;\n    //     }\n    //     return this.defaultStyle;\n    // }\n    \n    // _calculateAnchorPoints() {\n    //     let start;\n    //     let end;\n    //     if(this.fromDir !== undefined) {\n    //         start = {\n    //             dir: this.fromDir,\n    //             p: this.from.getIntersectionsInFourDimension()[this.fromDir],\n    //         }\n    //     } else {\n    //         start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     }\n    //     if(this.toDir !== undefined) {\n    //         end = {\n    //             dir: this.toDir,\n    //             p: this.to.getIntersectionsInFourDimension()[this.toDir],\n    //         }\n    //     } else {\n    //         end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     }\n        \n        \n    //     // const start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     // const end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     const p1 = start.p;\n    //     const p2 = end.p;\n    //     const points = bezierPoints(p1, p2, start.dir, end.dir, this.anticlock);\n\n    //     this._cachePoints = [...p1, ...points]\n    // }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                DIRECTION.BOTTOM, \n                this.minSpanX, \n                this.minSpanY);\n\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, DIRECTION.BOTTOM]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = bezierPoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir);\n\n            this._cachePoints = [...meta.fromP, ...points];\n            this._cacheAngle = [meta.fromDir, meta.toDir];\n        }\n    }\n\n    render(ctx) {\n        this._calculateAnchorPoints();\n        const points = this._cachePoints;\n        const angle = getBezierAngle.apply(null, [1, ...points])\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-points[0], -points[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(points[0], points[1])\n        ctx.bezierCurveTo(...points.slice(2));\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n        ctx.beginPath();\n        ctx.translate(points[6], points[7]);\n        ctx.rotate(angle);\n        ctx.moveTo(5, 0);\n        ctx.lineTo(0, -4);\n        ctx.lineTo(0, 4);\n        ctx.lineTo(5, 0);\n        ctx.fill();\n        ctx.rotate(-angle);\n        ctx.translate(-points[6], -points[7]);\n        if(this.content) {\n            ctx.beginPath();\n            const hasFlip = points[0] > points[6];\n            let [x, y, angle] = bezierPoint(0.5, points);\n            ctx.translate(x, y);\n            ctx.rotate(angle);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            ctx.textAlign = 'center';\n            ctx.fillText(this.content, 0, -(parseInt(this.fontSize) || 12)/4);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.rotate(-angle);\n            ctx.translate(-x, -y);\n        }\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const points = this._cachePoints;\n        const dist = distToBezierSegmentSquared(point, points)\n        return dist < this.approximate;\n    }\n}\n\nexport default BezierLink;","/**\n * 线性布局配置\n * @typedef {Object} LinearLayout~Configs\n * @property {string} direction     - 排列方向 默认 vertical\n * @property {number} gap           - 边距, 默认是 5\n * @property {string} alignment     - 垂直排列方向对齐方式 默认 center\n * @property {string} justify       - 排列方向对齐方式 默认 center\n */\n/**\n    线性布局\n\n    排列方向\n    direction:\n        + vertical 从上至下排布\n        + horizontal 从左至右排布\n    \n    不重叠，中线对齐\n    只针对当前的 group\n\n    对齐方式\n    alignment: \n        + start 主轴左侧对齐\n        + center 主轴对齐\n        + end   主轴右侧对齐\n    justify: \n        + start 开始时对齐\n        + center 居中对齐\n        + end   末尾对齐\n        + space-between 平均分配空间对齐\n\n * @constructor LinearLayout\n * @implements {Layout}\n * @param {LinearLayout~Configs} configs - 配置\n */\n\nclass LinearLayout {\n    constructor(configs = {}) {\n        /** @member {string}  - 排列方向 默认 vertical */\n        this.direction =     configs.direction || 'vertical';\n        /** @member {number}  - 边距, 默认是 5 */\n        this.gap =           configs.gap ?? 5;\n        /** @member {string}  - 垂直排列方向对齐方式 默认 center */\n        this.alignment =     configs.alignment || 'center';\n        /** @member {string}  - 排列方向对齐方式 默认 center */\n        this.justify =       configs.justify || 'center';\n        // this.widthSetByParent =  configs.width === '100%'\n        this._rawConfigs = configs;\n    }\n\n\n    reflow(group) {\n        const stack = group._stack.filter(instance => instance.visible && !instance.absolutePosition);\n        const absoluteStack = group._stack.filter(instance => instance.visible && instance.absolutePosition)\n        const groupWidth = group.width - group.padding.left - group.padding.right;\n        // console.log(groupWidth, group.height, group)\n        if(this.direction === 'vertical') {\n            let reduceHeight = 0;\n            let lastInstanceHeight = 0;\n            let maxWidth = 0;\n            let allHeight = 0;\n            stack.forEach((instance, idx) =>  {\n                const { width, height } = instance.getBoundingDimension();\n                // console.log(height, instance.type);\n                const gap = (idx > 0 ? this.gap : 0);\n                maxWidth = Math.max(width, maxWidth);\n                allHeight += (height + gap);\n                reduceHeight += (height/2 + gap + lastInstanceHeight)\n                lastInstanceHeight = height / 2;\n                instance.anchor = [0, reduceHeight];\n            });\n            maxWidth = Math.max(groupWidth, maxWidth);\n            \n            allHeight = allHeight/2;\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = -(maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                    // console.log(maxWidth, width, instance.anchor[0])\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = (maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n            if(this.alignment === 'center') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n        } \n        if(this.direction === 'horizontal') {\n            let reduceWidth = 0;\n            let lastInstanceWidth = 0;\n            let maxHeight = 0;\n            let allWidth = 0;\n            let allPureWidth = 0;\n            \n            stack.forEach((instance, idx) =>  {\n                const { width, height } = instance.getBoundingDimension();\n                const gap = (idx > 0 ? this.gap : 0);\n                maxHeight = Math.max(height, maxHeight);\n                allWidth += (width+gap);\n                allPureWidth += width;\n                reduceWidth += (width/2 + gap + lastInstanceWidth)\n                lastInstanceWidth = width / 2;\n                instance.anchor = [reduceWidth, 0]\n            });\n            if(this.justify === 'start') {\n                const withdraw = groupWidth/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                });  \n            }\n            if(this.justify === 'end') {\n                const withdraw = groupWidth/2 - allWidth;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += withdraw;\n                });  \n            }\n            if(this.justify === 'center') { \n                const withdraw = allWidth / 2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                })                \n            }\n            if(this.justify === 'space-between' && stack.length > 1) {\n                const width = Math.max(groupWidth, allWidth);\n                const gapAverage = (width - allWidth) / (stack.length - 1);\n                const withdraw = width/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += ((gapAverage * idx) - withdraw);\n                });  \n            }\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = -(maxHeight - height) / 2;\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = (maxHeight - height) / 2;\n                })\n            }\n        }\n\n        if(absoluteStack.length) {\n            group._getBoundingGroupRect();\n            const WIDTH = group.width /2;\n            const HEIGHT = group.height /2;\n            absoluteStack.forEach(instance => {\n                instance.anchor = this._resolveAbsoluteAnchor(instance.absolutePosition, instance, WIDTH, HEIGHT);\n            })\n        }\n    }\n\n    _resolveAbsoluteAnchor(config, instance, w, h){\n        const { top, right, bottom, left } = config;\n        const { width, height } = instance.getBoundingDimension();\n        const hw = width / 2;\n        const hh = height / 2;\n        let y = 0;\n        let x = 0;\n        if(typeof top === 'number') {\n            y = top + hh - h;\n        }\n        if(typeof right === 'number') {\n            x = w - right - hw;\n        }\n        if(typeof bottom === 'number') {\n            y = h - bottom - hh;\n        }\n        if(typeof left === 'number') {\n            x = left + hw - w;\n        }\n        return [x, y]\n    }\n\n    clone() {\n        return new LinearLayout(this._rawConfigs);\n    }\n}\n\nexport default LinearLayout;","\n// import EventEmitter from '../../utils/EventEmitter';\nimport { DIRECTION } from '../../utils/constance';\nclass BaseNode {\n    constructor(source) {\n        this.source = source;\n        this.id = source.id;\n        this.type = source.type;\n        this.isDraggable = true;\n        this.getJflowInstance = undefined;\n        this.level = undefined;\n        this.sequence = undefined;\n        this.isLocked = false;\n        this.isFree = false;\n        this.parent = undefined;\n        this.idx = undefined;\n        this.parentIterateType = undefined;\n        source._getAstNode = () => this;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        this.level = level;\n        this.sequence = sequence;\n        this.spanX = 1;\n        this.spanY = 1;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            level, sequence,\n        }\n    }\n\n    makeLink(callback) {\n        return this;\n    }\n\n    makeEndpoint() { }\n\n    traverse(callback) {\n        callback(this);\n    }\n\n    getNodes() {\n        const nodes = [];\n        this.traverse(n => {\n            if(n.getJflowInstance)\n                nodes.push(n.getJflowInstance());\n        })\n        return nodes;\n    }\n\n    linkSource(source) {\n        this.parent.source[this.parentIterateType].splice(this.idx + 1, 0, source);\n    }\n\n    remove() {\n        this.parent.source[this.parentIterateType].splice(this.idx, 1);\n    }\n}\n\nclass Root extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.isroot = true;\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        const playgrounditerator = mapFunc('playground').bind(this)\n        this.playground = (source.playground || []).map((s, idx) => {\n            const n = playgrounditerator(s, idx);\n            n.isFree = true;\n            return n;\n        });\n    }\n\n    reflowBodyPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, sequence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    reflowPlaygroundPreCalculate(preCallback, callback) {\n        this.playground.forEach(node => {\n            preCallback(node)\n            node.reflowPreCalculate(0, 0, callback)\n        })\n    }\n\n\n    makeLink(callback) {\n        let last;\n        this.body.forEach(b => {\n            if(!last) {\n                last = b;\n                return;\n            }\n            callback({\n                from: last.id,\n                to: b.id,\n                part: 'body',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                meta: {\n                    from: last,\n                    to: b\n                }\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n\n        this.playground.forEach(n => {\n            n.makeLink(callback);\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n\n        this.playground.forEach(n => {\n            n.traverse(callback);\n        })\n    }\n}\n\nclass IfStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.isLocked = true;\n    }\n    \n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        let c_spanX = 1;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        this.consequent.forEach((c, idx) => {   \n            const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n            c_spanX = Math.max(c_spanX, sx);\n            c_spanY += sy;\n            level += sy;\n        });\n        const nextSequeence = sequence + c_spanX;\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n        level = this.level + spanY - 1;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        this.consequent.forEach(c => {\n            callback({\n                from: lastc.id,\n                to: c.id,\n                part: 'consequent',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                meta: {\n                    from: lastc,\n                    to: c\n                }\n            });\n\n            c = c.makeLink(callback)\n            lastc = c;\n        })\n\n        callback({\n            from: lastc.id,\n            to: this.Endpoint.id,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n            meta: {\n                from: lastc,\n                to: this.Endpoint\n            }\n        });\n\n        let lasta = this;\n        this.alternate.forEach(a => {\n            callback({\n                from: lasta.id,\n                to: a.id,\n                fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                part: 'alternate',\n                meta: {\n                    from: lasta,\n                    to: a\n                }\n            })\n            a = a.makeLink(callback)\n            lasta = a;\n        });\n        callback({\n            from: lasta.id,\n            to: this.Endpoint.id,\n            fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            toDir: DIRECTION.RIGHT,\n            part: 'alternate',\n            meta: {\n                from: lasta,\n                to: this.Endpoint\n            }\n        });\n\n        return this.Endpoint;\n    }\n\n    makeEndpoint() {\n        this.Endpoint = makeAST({\n            type: 'endpoint',\n            id: `${this.id}-endpoint`,\n        });\n        this.Endpoint.parent = this.parent;\n        this.Endpoint.idx = this.idx;\n        this.Endpoint.parentIterateType = this.parentIterateType;     \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n        callback(this.Endpoint);\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.cases = (source.cases || []).map(mapFunc('case').bind(this))\n        if(this.cases.length) {\n            this.cases[this.cases.length - 1].lastCase = true;\n        }\n        this.isLocked = true;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n\n        let c_spanX = 1;\n        let c_spanY = 0;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            level = this.level;\n            consequent.forEach(cc => {\n                const { spanX: sx, spanY: sy } = cc.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        \n        let s_spanX = c_spanX;\n        let s_spanY = 0;\n        this.cases.forEach((c, idx) => {\n            const nextSequeence = sequence + s_spanX;\n            let a_spanX = 0;\n            let a_spanY = 0;\n            level = this.level;\n            c.alternate.forEach(ca => {\n                const { spanX: sx, spanY: sy } = ca.reflowPreCalculate(level + 1, nextSequeence, callback);\n                a_spanX = Math.max(a_spanX, sx);\n                a_spanY += sy;\n                level += sy;\n            });\n            s_spanX += a_spanX;\n            s_spanY = Math.max(s_spanY, a_spanY);\n        });\n       \n        \n        spanX = Math.max(1, s_spanX);\n        spanY = Math.max(c_spanY, s_spanY);\n        level = this.level + spanY;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        spanY += 1 // 要算上自己\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            consequent.forEach((c, idx) => {\n                callback({\n                    from: lastc.id,\n                    to: c.id,\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'consequent',\n                    meta: {\n                        from: lastc,\n                        to: c\n                    }\n                });\n                lastc = c.makeLink(callback)\n            });\n        }\n        callback({\n            from: lastc.id,\n            to: this.Endpoint.id,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'alternate',\n            meta: {\n                from: lastc,\n                to: this.Endpoint\n            }\n        });\n\n        this.cases.forEach((c, idx) => {\n            let lasta = c;\n            c.alternate.forEach(a => {\n                callback({\n                    from: lasta.id,\n                    to: a.id,\n                    fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'alternate',\n                    meta: {\n                        from: lasta,\n                        to: a\n                    }\n                });\n                lasta = a.makeLink(callback)\n            })\n            \n            callback({\n                from: lasta.id,\n                to: this.Endpoint.id,\n                fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.RIGHT,\n                part: 'alternate',\n                minSpanX: 32 * (idx + 1),\n                meta: {\n                    from: lasta,\n                    to: this.Endpoint\n                }\n            });\n        });\n\n        return this.Endpoint;\n    }\n\n    makeEndpoint() {\n        this.Endpoint = makeAST({\n            type: 'endpoint',\n            id: `${this.id}-endpoint`,\n        });\n        this.Endpoint.parent = this.parent;\n        this.Endpoint.parentIterateType = this.parentIterateType;     \n        this.Endpoint.idx = this.idx;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.cases.forEach(n => {\n            n.traverse(callback);\n        });\n        callback(this.Endpoint);\n    }\n}\n\nclass ForEachStatement extends BaseNode {\n    \n}\n\nclass WhileStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        this.isLocked = true\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        const nextSequeence = sequence + 1;\n        // level--;\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, nextSequeence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX + 1;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let last = this;\n        // const lastIdx = this.body.length - 1;\n        this.body.forEach((b, idx) => {\n            callback({\n                from: last.id,\n                to: b.id,\n                part: 'body',\n                fromDir: last === this ? DIRECTION.RIGHT: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                meta: {\n                    from: last,\n                    to: b\n                }\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n        callback({\n            from: last.id,\n            to: this.id,\n            part: 'body',\n            fromDir: last === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            anticlock: last === this,\n            toDir: DIRECTION.BOTTOM,\n            isSelf: true,\n            minSpanX: 20,\n            minSpanY: 20,\n            meta: {\n                from: last,\n                to: this\n            }\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchCase extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.lastCase = false;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        \n        let c_spanX = 0;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        if(this.lastCase) {\n            this.consequent.forEach((c, idx) => {\n                const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        const nextSequeence = sequence + Math.max(c_spanX, 1);\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n \nconst TYPE_MAPPING = {\n    IfStatement,\n    SwitchStatement,\n    SwitchCase,\n    ForEachStatement,\n    WhileStatement,\n    Root,\n    other: BaseNode,\n}\n\nfunction mapFunc(type)  {\n    return function(n, idx) {\n        const p = makeAST(n);\n        p.parent = this;\n        p.idx = idx;\n        p.parentIterateType = type;\n        p.makeEndpoint();\n        return p;\n    }\n}\nfunction makeAST(source) {\n    const type = source.type;\n    const Constructor = TYPE_MAPPING[type] || TYPE_MAPPING.other;\n    const node = new Constructor(source);\n    return node;\n}\nexport { \n    makeAST,\n}\n\n","import JFlowEvent from '../events'; \nimport { DIRECTION } from '../utils/constance';\nimport { makeAST } from './low-code-types/baseNode';\n\nfunction sqr(x) {\n    return x * x;\n}\nfunction dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n/**\n * @typedef {Object} LowcodeLayout~Configs\n * @property {number} linkLength - 最小连线长度\n * @property {number} gap       - 列间隙\n * @property {boolean} treeItemDraggable - 树上的是否可以拖动\n * @property {Object} ast       - 语法树\n */\n\n/**\n    lowcode layout\n\n    type: \n        + IfStatement,\n        + SwitchStatement,\n        + SwitchCase,\n        + ForEachStatement,\n        + WhileStatement,\n        + Root,\n        + other,\n    \n    * @implements {Layout}\n    * @param {LowcodeLayout~Configs} - 配置\n    \n */\nclass LowcodeLayout {\n    constructor(configs) {\n        /** @member {number}      - 最小连线长度 */\n        this.linkLength = configs.linkLength || 18;\n        /** @member {number}      - 列间隙 */\n        this.gap = configs.gap || 30;\n        /** @member {boolean}      - 树上的是否可以拖动 */\n        this.treeItemDraggable = configs.treeItemDraggable ?? true;\n        this.reOrder(configs.ast);\n        /** @member {boolean}      - true 需要检查元素拖动 */\n        this.static = true;\n    }\n    /**\n     * 从 ast 计算布局\n     * @param {AstNode} ast - ASL 树\n     */\n    reOrder(ast) {\n        this.ast = ast;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n\n        this.root = makeAST(this.ast)// new AstNode(this.ast, this.flowStack, true);\n        this.root.traverse((node) => {\n            if(node.parentIterateType !== 'playground') {\n                node.isDraggable = this.treeItemDraggable\n            }\n            this.flowStack.push({\n                type: node.type,\n                configs: node.source,\n                layoutMeta: node,\n            });\n        });\n\n        const layoutMapping = {\n            vertical: {},\n            horizontal: {},\n        };\n        const playgroundLayoutMapping = {}\n        this.root.reflowBodyPreCalculate(0, 0, (level, sequence, node) => {\n            if(!node.isroot) {\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            }\n        });\n\n        let currentTopNodeId;\n        this.root.reflowPlaygroundPreCalculate(\n            (topNode) => {\n                currentTopNodeId = topNode.id;\n                playgroundLayoutMapping[topNode.id] = {\n                    vertical: {},\n                    horizontal: {},\n                    node: topNode,\n                }\n            },\n            (level, sequence, node) => {\n                const layoutMapping = playgroundLayoutMapping[currentTopNodeId];\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            })\n\n        this.layoutMapping = layoutMapping;\n        this.playgroundLayoutMapping = playgroundLayoutMapping;\n        this.root.makeLink((configs) => {\n            this.flowLinkStack.push(configs)\n        })\n    }\n\n    staticCheck(instance, jflow) {\n\n        if(instance._layoutNode && instance._layoutNode.isFree) {\n            return false;\n        }\n        const finded = jflow._linkStack.find(l => l.from === instance || l.to === instance);\n        if(!finded) {\n            return false;\n        }\n        const nowAnchor = instance.anchor.slice();\n        jflow.reflow();\n        if(jflow._linkStack.length < 2) return;\n        const currentAnchor = instance.anchor;\n        const d = dist2(nowAnchor, currentAnchor);\n        if(d > 1000) {\n            instance.dispatchEvent(new JFlowEvent('outOfFlow', {\n                anchor: nowAnchor,\n                instance,\n                jflow,\n                point: nowAnchor,\n            }))\n            return true;\n        }\n        return false;\n    }\n\n    reflowByMapping(layoutMapping, x = 0, y = 0) {\n        const linkLength = this.linkLength;\n        const gap = this.gap;\n        const {\n            vertical: verticalMapping,\n            horizontal: horizontalMapping,\n        } = layoutMapping;\n\n        let reduceWidth = x;\n        Object.keys(horizontalMapping).forEach((columnNumber, idx) => {\n            const column = horizontalMapping[columnNumber];\n            let rowWidth = 0;\n            const rows = Object.keys(column)\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = ast.getJflowInstance();\n                const { width } = instance.getBoundingDimension();\n                rowWidth = Math.max(width, rowWidth);\n            });\n            reduceWidth += idx === 0 ? 0: rowWidth/2\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = ast.getJflowInstance();\n                instance.anchor[0] = reduceWidth;\n            });\n            reduceWidth += (rowWidth/2 + gap) ;\n        });\n\n        let reduceHeight = y;\n        // console.log(verticalMapping)\n        Object.keys(verticalMapping).forEach((rowNumber, idx) => {\n            const row = verticalMapping[rowNumber];\n            let rowHeight = 0;\n            const columns = Object.keys(row)\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = ast.getJflowInstance();\n                const { height, width } = instance.getBoundingDimension();\n                rowHeight = Math.max(height, rowHeight);\n            });\n            reduceHeight += idx === 0 ? 0 : rowHeight/2;\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = ast.getJflowInstance();\n                instance.anchor[1] = reduceHeight;\n            });\n            reduceHeight += (rowHeight/2 + linkLength) ;\n        });\n        \n    }\n\n    findLayoutNode(configs) {\n        const finded = this.flowStack.find(node => node.configs === configs);\n        if(finded) {\n            return finded.layoutMeta;\n        }\n        return null;\n    }\n\n    reflow(jflow){\n        this.reflowByMapping(this.layoutMapping);\n        Object.values(this.playgroundLayoutMapping).forEach(mapping => {\n            const node = mapping.node.getJflowInstance();\n            this.reflowByMapping(mapping, node.anchor[0], node.anchor[1]);\n        })\n    }\n}\n\nexport default LowcodeLayout;","import { DIRECTION } from '../../utils/constance';\nfunction getRelationShip(p1, p2) {\n    if(p1.type === 'Array' && p2.type !== 'Array') {\n        return '多对一'\n    }\n    if(p2.type === 'Array' && p1.type !== 'Array') {\n        return '一对多'\n    }\n    if(p1.type === 'Array' && p2.type === 'Array') {\n        return '多对多'\n    }\n    if(p1.type !== 'Array' && p2.type !== 'Array') {\n        return '一对一'\n    }\n}\n/**\n    ER property Node\n    * @implements {LayoutNode}\n */\nclass ERProperty {\n    constructor(source, node, isNavigation) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERProperty';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        this.node = node;\n        this.ref = source.ref;\n        this.type = source.type;\n        this.association = source.association;\n        /** @member {String}      - 唯一标识 */\n        this.id = isNavigation ? `${node.id}-${source.name}-navigation` : `${node.id}-${source.name}`\n        this._selfLink = false;\n        this.parentPropertyRef = undefined;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        this.doubleRef = undefined;\n    }\n}\n/**\n ER Node\n * @implements {LayoutNode}\n * @param {Object} source\n */\nclass ERNode { \n    constructor(source) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERNode';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        /** @member {String}      - 唯一标识 */\n        this.id = source.name;\n        /** @member {Boolean}      - true, 可拖动 */\n        this.isDraggable = true;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        // this.adjacencyList = []\n        this.propertyList = source.propertyList.map(p => new ERProperty(p, this));\n        this.navigationPropertyList = source.navigationPropertyList.map(p => new ERProperty(p, this, true))\n        this.idProperty = this.propertyList.find(p => p.source.name === 'id');\n        // this.VertexNameProperty = this.propertyList.find(p => p.source.type === 'VertexName');\n    }\n\n    _traverseProperty(nodeMap) {\n        this.propertyList.forEach(property => {\n            const idRef = property.source.idRef; // 决定链接的对象\n            const isParentRef = property.source.isParentRef; // 决定连接的性质\n            if(idRef && property.source.type !== 'Array' && nodeMap[idRef]) {\n                const parentRef = nodeMap[idRef];\n                if (property.source.isParentRef) {\n                    this.parentRef = parentRef;\n                }\n                if (parentRef === this) {\n                    property._selfLink = true;\n                }\n                property.parentPropertyRef = parentRef.idProperty;\n            }\n        });\n        this.navigationPropertyList.forEach(property => {\n            const objectRef = property.source.objectRef;\n            if(objectRef && nodeMap[objectRef]) {\n                const node = nodeMap[objectRef];\n                const targetProperty = node.navigationPropertyList.find(n => n.source.objectRef === this.id)\n                if (node === this) {\n                    property._selfLink = true;\n                }\n                property.doubleRef = targetProperty;\n            }\n        })\n        \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.propertyList.forEach(property => {\n            if(property.ref instanceof ERNode) {\n                callback(property);\n            }\n        })\n    }\n\n    makeLink(callback) {\n        this.propertyList.forEach(property => {\n            if(property.parentPropertyRef instanceof ERProperty) {\n                const toProperty = property.parentPropertyRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.LEFT,\n                        content: property.association,\n                        minSpanX: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                }\n            }\n        });\n\n        \n        this.navigationPropertyList.forEach(property => {\n            if(property.doubleRef instanceof ERProperty) {\n                const toProperty = property.doubleRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.TOP,\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        minSpanX: 80,\n                        minSpanY: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                            isObjectRef: true,\n                        }\n                    });\n                }\n            }\n        })\n    }\n}\n\nfunction makeER(source) {\n    const nodeMap = {};\n    const nodes = source.map(s => {\n        const node = new ERNode(s);\n        nodeMap[s.name] = node\n        return node;\n    });\n    nodes.forEach(node => {\n        node._traverseProperty(nodeMap);\n    });\n    return nodes;\n}\nexport { \n    makeER,\n}","\nimport { makeER } from './er-node';\n/**\n * ER source\n * @typedef {Object} ERLayout~sourceConfigs\n * @property {string} type - node\n * @property {string} id - 唯一标识\n * @property {Object[]} properties - 描述\n */\n/**\n * ER布局数据源配置\n * @typedef {Object} ERLayout~Configs\n * @property {ERLayout~sourceConfigs[]} entityRelationship - 关系\n */\n/**\n    ER layout\n\n    Entity Relationship Structure\n    tree = [\n        {\n            type: 'node',\n            id: 'uniqueID',\n            properties: [\n                {\n                    name: 'xxxx',\n                    ref: someUniqueId,\n                    description: 'xxxxxx',\n                },\n                ...\n            ]\n        },\n        ...\n    ]\n    \n    * @implements {Layout}\n */\n\nclass ERLayout {\n    constructor(configs) {\n        /** @member {boolean}      - false 不需要布局变化检查 */\n        this.static = false;\n        /** @member {Layout~NodeMeta[]}      - 布局节点单元数组 */\n        this.flowStack = [];\n        /** @member {Layout~LinkMeta[]}      - 布局连线单元数组 */\n        this.flowLinkStack = [];\n        /** @member {LayoutNode[]}      - 布局节点数组 */\n        this.erNodes = [];\n        this.reOrder(configs.entityRelationship);\n    }\n    /**\n     * 从 tree 计算布局\n     * @param {AstNode} tree - ER 树\n     */\n    reOrder(er) {\n        this.er = er;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n        const nodes = makeER(this.er);\n        const idMap = [];\n        nodes.forEach(node => {\n            node.traverse((n) => {\n                this.flowStack.push({\n                    type: n.type,\n                    configs: n.source,\n                    layoutMeta: n,\n                })\n            });\n            node.makeLink(configs => {\n                const {\n                    from: property,\n                    to: toProperty,\n                    meta,\n                } = configs;\n                if(meta.isObjectRef) {\n                    const id1 = `${property}-${toProperty}`;\n                    const id2 = `${toProperty}-${property}`;\n                    \n                    const fromMeta = meta.from;\n                    if(idMap.includes(id1) || idMap.includes(id2)) {\n                        return;\n                    }\n                    if(!fromMeta.source.isParentRef) {  \n                        idMap.push(id1);\n                        idMap.push(id2);\n                        this.flowLinkStack.push(configs)\n                    }\n                } else {\n                    this.flowLinkStack.push(configs)\n                }\n               \n            })\n        });\n        this.erNodes = nodes;\n    }\n\n    staticCheck(instance, jflow) {\n        return false;\n    }\n\n    reflow(jflow){\n        const links = this.flowLinkStack;\n        const nodes = this.erNodes;\n        let x = 0;\n        const lineMapping = {};\n        const size = 1000;\n        function computeNodeAnchor(node, recorded = []) {\n            let relativeAnchor = [0, 0];\n            \n            \n            if (node.parentRef) {\n                if(recorded.includes(node.parentRef)) {\n                    // debugger;\n                    return [\n                        relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                        relativeAnchor[1]\n                    ];\n                }\n                recorded.push(node.parentRef);\n                \n                relativeAnchor = computeNodeAnchor(node.parentRef, recorded);\n                return [\n                    relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                    relativeAnchor[1] + 600,\n                ];\n            } else {\n                return relativeAnchor;\n            }\n        }\n        this.erNodes.forEach(node => {\n            const instance = node.getJflowInstance();\n            const [nx, ny] = computeNodeAnchor(node);\n            if(!lineMapping[ny]) {\n                lineMapping[ny] = [];\n            }\n            lineMapping[ny].push(node);\n            instance.anchor = [nx + lineMapping[ny].length * 500, ny];\n            x+=300\n        });\n        // debugger\n        // // Kahn’s Algorithm\n        // // Calcuate the incoming degree of each vertex\n        // const vertices = nodes.slice();\n        // debugger\n        // const inDegree = {};\n        // vertices.forEach(v => {\n        //     v.adjacencyList.forEach(p => {\n        //         const name = p.name;\n        //         inDegree[name] = inDegree[name] + 1 || 1;\n        //     })\n            \n        // })\n        // console.log(inDegree)\n        // debugger\n\n        // // Create a queue which stores the vertex without dependencies\n        // const queue = vertices.filter((v) => !inDegree[v.name]);\n        // console.log(queue)\n        // debugger\n        // const topNums = {};\n        // let index = 0;\n        // while (queue.length) {\n        //     const v = queue.shift();\n        //     topNums[v.name] = index++;\n        //     v.adjacencyList.forEach(neighbor => {\n        //         const name = neighbor.name;\n        //         inDegree[name]--;\n        //         if (inDegree[name] === 0) {\n        //             queue.push(neighbor);\n        //         }\n        //     });\n        // }\n        // if (index !== vertices.length) {\n        //     console.log(\"Detect a cycle\");\n        // }\n        // console.log(topNums);\n    }\n}\n\nexport default ERLayout;","import { createCanvas } from '../utils/canvas';\nimport { bounding_box, doOverlap } from '../utils/functions';\nimport StackMixin from '../instance/stackMixin';\nimport InstanceStack from '../instance/stack';\nimport LayoutMixin from '../instance/layoutMixin';\nimport MessageMixin from '../instance/messageMixin';\nimport { setUniqueId, getUniqueId } from '../utils/functions';\nimport JFlowEvent from '../events';\n\nimport EventAdapter from '../events/adapter';\n\nimport GroupFactory from '../instance/groupFactory';\nimport Rectangle from '../instance/shapes/rectangle';\nimport Capsule from '../instance/shapes/capsule';\nimport CapsuleVertical from '../instance/shapes/capsule-vertical';\nimport Rhombus from '../instance/shapes/rhombus';\nimport Diamond from '../instance/shapes/diamond';\nimport DiamondVertical from '../instance/shapes/diamond-vertical';\n/**\n * @funtion setInitialPosition\n * @param {Number} RealboxX - 内容映射到canvas上的 X\n * @param {Number} RealboxY - 内容映射到canvas上的 Y \n * @param {Number} RealboxW - 内容映射到canvas上的宽度\n * @param {Number} RealboxH - 内容映射到canvas上的高度 \n * @param {Number} CanvasWidth  - 视窗宽度\n * @param {Number} CanvasHeight  - 视窗高度\n * @return {Object} - 初始位置 { x, y }\n */\n\n/** \n * @class Group\n * @classdesc 矩形组单元 由 {@link GroupFactory} 通过 {@link Rectangle} 生成\n * @groupfrom Rectangle\n * @augments GroupTemplate\n * @augments Rectangle\n * @param {(Rectangle~RectangleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const Group = GroupFactory(Rectangle);\n/** \n * @class CapsuleGroup\n * @classdesc 胶囊组单元 由 {@link GroupFactory} 通过 {@link Capsule} 生成\n * @groupfrom Capsule\n * @augments GroupTemplate\n * @augments Capsule\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleGroup = GroupFactory(Capsule);\n/** \n * @class RhombusGroup\n * @classdesc 菱形组单元 由 {@link GroupFactory} 通过 {@link Rhombus} 生成\n * @augments GroupTemplate\n * @augments Rhombus\n * @groupfrom Rhombus\n * @param {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const RhombusGroup = GroupFactory(Rhombus);\n/** \n * @class DiamondGroup\n * @classdesc 钻石形组单元 由 {@link GroupFactory} 通过 {@link Diamond} 生成\n * @groupfrom Diamond\n * @augments GroupTemplate\n * @augments Diamond\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondGroup = GroupFactory(Diamond, {\n    shapeShift(width, height) {\n        return [width + height * 0.28865, height]\n    }\n});\n/** \n * @class DiamondVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link DiamondVertical} 生成\n * @groupfrom DiamondVertical\n * @augments GroupTemplate\n * @augments DiamondVertical\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondVerticalGroup = GroupFactory(DiamondVertical, {\n    shapeShift(width, height) {\n        return [width, height + width * 0.5773]\n    }\n});\n/** \n * @class CapsuleVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link CapsuleVertical} 生成\n * @groupfrom CapsuleVertical\n * @augments GroupTemplate\n * @augments CapsuleVertical\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleVerticalGroup = GroupFactory(CapsuleVertical);\n/**\n * @typedef JFlow~JFlowConfigs\n * @type {object}\n * @property {Boolean} allowDrop      - 是否允许 dragdrop\n * @property {Number} maxZoom         - 最大缩放\n * @property {Number} minZoom         - 最小缩放\n * @property {number} initialZoom     - 初始缩放比\n * @property {EventAdapter~pluginDef} eventAdapter\n */\n\n/**\n * @typedef {JFlow~JFlowConfigs | LayoutMixin~LayoutConfigs} JFlow~JFlowLayoutConfigs\n */\n/** \n * JFlow 对象\n * JFlow 是 canvas 上面封装的一个顶层对象，具有处理事件和绘制的功能\n * @constructor JFlow\n * @param {JFlow~JFlowLayoutConfigs} configs - 配置项\n * @mixes LayoutMixin\n * @mixes StackMixin\n * @mixes MessageMixin\n */\nclass JFlow extends EventTarget{\n    constructor(configs) {\n        super();\n        this.uniqueName = 'jflow';\n        /**\n         * @member {EventAdapter} eventAdapter    - eventAdapter 对象\n         **/\n        this.eventAdapter = new EventAdapter(configs.eventAdapter);\n        this.initStack(configs);\n        this.initLayout(configs);\n        /** @member {Context2d}     - Context2d 对象 */\n        this.ctx = null;\n        /** @member {Element}       - canvas 元素 */\n        this.canvas = null;\n        /** @member {number}       - 设备DPR */\n        this.dpr = 1;\n        /** @member {number}       - 内边距 */\n        this.padding = 20;\n        this.position = null;\n        /** @member {number}     - 缩放 */\n\t\tthis.scale = null;\n        /** @member {number}     - 初始缩放 */\n        this.initialZoom = configs.initialZoom;\n        /** @member {setInitialPosition} = 初始位置计算 */\n        this.initialPosition = configs.setInitialPosition;\n        /** @member {number}     - 最大缩放 */\n        this.maxZoom = configs.maxZoom || 3;\n        /** @member {number}     - 最小缩放 */\n        this.minZoom = configs.minZoom || .5;\n\t\t// this.initScale = 1;\n\t\t// this.initPosition = null\n\t\tthis.offeset = null;\n        this._lastState = {\n            x: null,\n            y: null,\n            dragging: false,\n            processing: false\n        };\n        this._lastDragState = {\n            target: null,\n            targetLink: null,\n            processing: false,\n        }\n\n        this._target = {\n            instance: null,\n            link: null,\n            moving: null,\n            isInstanceDirty: false, \n            isLinkDirty: false, \n            // isMovingDirty: false, \n            cache: {\n                stack: null,\n                belongs: null,\n                point: null,\n            },\n            meta: {\n                x: undefined,\n                y: undefined,\n                initialX: undefined,\n                initialY: undefined, \n            },\n            status: {\n                dragovering: false,\n                dragging: false,\n                processing: false,\n            }\n        }\n\n        this._focus = {\n            instance: null,\n        }\n\n        this._dragOverTarget = null;\n        // this.lock = configs.lock;\n\n        // this._belongs = \n        this.allowDrop = configs.allowDrop;\n        this._tempInstance = null;\n    }\n    /**\n     * 设置当前拖动的 JFlow 对象\n     * @param {Instance} instance - JFlow 对象\n     */\n    setTempDraggingInstance(instance) {\n        instance._belongs = this;\n        this._tempInstance = instance;\n        Object.assign(this._target, {\n            moving: [this._tempInstance],\n            dragging: true,\n        })\n    }\n\n    /**\n     * 取消当前拖动的 JFlow 对象\n     * @return {number[]} point - JFlow 坐标\n     */\n    removeTempDraggingInstance() {\n        if(this._tempInstance) {\n            // this.removeFromStack(this._tempInstance);\n            const anchor = this._tempInstance.anchor;\n            this._tempInstance = null;\n            return anchor;\n        }\n    }\n    /**\n     * 在 Document 元素上初始化实例\n     * @param {Element} dom \n     */\n    $mount(dom) {\n        const { \n            canvas, \n            ctx, \n            scale: dpr, \n            width: c_width, \n            height: c_height, \n            raw_width,\n            raw_height,\n            left, top \n        } = createCanvas(dom);\n        this.reflow();\n        this.ctx = ctx;\n        this.DOMwrapper = dom;\n        this.canvas = canvas;\n        this.canvasMeta = {\n            width: raw_width,\n            height: raw_height,\n            actual_width: c_width,\n            actual_height: c_height\n        }\n        this.dpr = dpr;\n        this._createEventHandler();\n        this._getBoundingGroupRect();\n\n        const padding = this.padding;\n        const { width: p_width, height: p_height, x, y } = this.bounding_box;\n        const contentBox = {\n            x: padding,\n            y: padding,\n            width: c_width - padding * 2,\n            height: c_height - padding * 2,\n        }\n        const position = { x: 0, y: 0, offsetX: 0, offsetY: 0 };\n        const w_ratio = contentBox.width / p_width;\n        const h_ratio = contentBox.height / p_height;\n        const align = w_ratio <= h_ratio ? 'x' : 'y';\n        let scaleRatio;\n        if(this.initialZoom) {\n            scaleRatio = this.initialZoom;\n        } else {\n            scaleRatio = Math.min(w_ratio, h_ratio);\n        }\n       \n        this.scale = scaleRatio;\n        if(scaleRatio > this.maxZoom) {\n            this.maxZoom = scaleRatio;\n        }\n        if(scaleRatio < this.minZoom) {\n            this.minZoom = scaleRatio;\n        }\n        const realboxX = x * scaleRatio;\n        const realboxY = y * scaleRatio;\n        const realboxW = contentBox.width;\n        const realboxH = contentBox.height;\n        if(this.initialPosition) {\n            const { x, y } = this.initialPosition(realboxX, realboxY, realboxW, realboxH, contentBox.x, contentBox.y, c_width, c_height);\n            position.x = x;\n            position.y = y;\n        } else {\n            position.x = align === 'x' ? contentBox.x : (realboxW - p_width * scaleRatio) / 2 + padding\n            position.y = align === 'y' ? contentBox.y : (realboxH - p_height * scaleRatio) / 2 + padding\n        }\n        \n        position.offsetX = position.x - realboxX;\n        position.offsetY = position.y - realboxY;\n        this.position = position;\n        this._readyToRender = true;\n        this._render();\n    }\n    \n    _getBoundingGroupRect() {\n        const points = this._stack.getBoundingRectPoints();\n        if(this.bounding_box) {\n            this.bounding_box = bounding_box(points);\n            const {\n                x: nowx,\n                y: nowy,\n            } = this.bounding_box;\n            const scale = this.scale;\n            this.position.x = this.position.offsetX + nowx * scale;\n            this.position.y = this.position.offsetY + nowy * scale;\n        } else {\n            this.bounding_box = bounding_box(points);\n        }\n    }\n\n    _createEventHandler() { \n        const canvas = this.canvas;\n        let destroyListener;\n        this.eventAdapter.apply(this);\n        const destroyPlainEventListener = () => {\n            this.eventAdapter.unload(this);\n        }\n        destroyListener = destroyPlainEventListener;\n\n        if(this.allowDrop) {\n            const dragoverHandler = this._onDragover.bind(this);\n            const dropHandler = this._onDrop.bind(this);\n            canvas.addEventListener('dragover', dragoverHandler);\n            canvas.addEventListener('drop', dropHandler);\n            destroyListener = () => {\n                destroyPlainEventListener();\n                canvas.removeEventListener('dragover', dragoverHandler);\n                canvas.removeEventListener('drop', dropHandler);\n            }\n        } \n        this.destroy = destroyListener;\n    }\n\n    _targetLockOn(offsetPoint, event) {\n        let point = this._calculatePointBack(offsetPoint);\n        const topLayerPoint = point;\n        this._currentp = point;\n        let stack = this._stack;\n        const br = this._getViewBox();\n        const target = stack.checkHit(\n            point, \n            // 应用于所有\n            (instance) => {\n                return (this._target.status.dragging \n                    && (instance === this._getMovingTarget()))\n            },\n            // 仅对于本层过滤\n            (instance) => {\n                return doOverlap(br, instance.getBoundingRect())\n            });\n        let linkStack = this._linkStack;\n        let belongs = this;\n        /*\n        if(target) {\n            linkStack = target._belongs._linkStack;\n            point = target._belongs._currentp;\n            stack = target._belongs._stack;\n            belongs = target._belongs\n        }*/\n        // 暂时设定只有顶层有连线\n        let targetLink;\n        if(!target || target._belongs === this) {\n            targetLink = linkStack.checkHit(point, (link) => {\n                if(!this._target.status.dragging) {\n                    return false;\n                }\n                const movingtarget = this._getMovingTarget();\n                return link.from === movingtarget || link.to === movingtarget;\n            });\n        }\n\n        Object.assign(this._target, {\n            instance: target,\n            link: targetLink, \n            isInstanceDirty: target === this._target.instance,\n            isLinkDirty: targetLink === this._target.link,\n        });\n        Object.assign(this._target.cache, {\n            stack,\n            belongs,\n            point,\n            topLayerPoint,\n        })\n        Object.assign(this._target.meta, {\n            x: offsetPoint[0],\n            y: offsetPoint[1],\n        });\n\n        if(event === 'pressStart' && !this._target.status.dragging && !this._target.status.dragovering) {\n            let movingtarget = target;\n            while (movingtarget && movingtarget._belongs.lock && movingtarget !== this) {\n                movingtarget = movingtarget._belongs;\n            }\n            // if(movingtarget === this) {\n            //     movingtarget = undefined;\n            // }\n            if(movingtarget) {\n                if(movingtarget._layoutNode) {\n                    if(movingtarget._layoutNode.isLocked) {\n                        movingtarget = movingtarget._layoutNode.getNodes()\n                    } else if(!movingtarget._layoutNode.isDraggable) {\n                        movingtarget = undefined;\n                    } else {\n                        movingtarget = [movingtarget];\n                    }\n                } else {\n                    movingtarget = [movingtarget];\n                }\n            } \n            Object.assign(this._target, {\n                moving: movingtarget,\n                // isMovingDirty: movingtarget[0] === this._target.moving[0],\n            })\n        }\n        return this._target;\n    }\n\n    _getMovingTarget() {\n        return this._target.moving && this._target.moving[0];\n    }\n\n    _processDragOver(instance, event) {\n        if(this._dragOverTarget !== instance) {\n            const target = this.readMessage()?.instance;\n            this._dragCurrentData = target;\n            if(this._dragOverTarget) {\n                const oldIns = this._dragOverTarget;\n                /**\n                * dragleave 退出事件\n                * @event Instance#dragleave\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragleave的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                oldIns.dispatchEvent(new JFlowEvent('dragleave', {\n                    event,\n                    instance: oldIns,\n                    target\n                }));\n            }\n            if(instance) {\n                /**\n                * dragenter 进入事件\n                * @event Instance#dragenter\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragenter的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                instance.dispatchEvent(new JFlowEvent('dragenter', {\n                    event,\n                    instance,\n                    target,\n                }));\n            }\n            this._dragOverTarget = instance;\n        } else if(this._dragOverTarget){\n            /**\n            * dragover 进入事件\n            * @event Instance#dragover\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - dragover的对象 \n            * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n            */\n            this._dragOverTarget.dispatchEvent(new JFlowEvent('dragover', {\n                event,\n                instance,\n                target: this._dragCurrentData,\n            }));\n        }\n    }\n\n    _onDragover(event) {\n        // console.log(event);\n        event.preventDefault();\n        event.stopPropagation();\n        if(this._lastDragState.processing) return;\n        this._lastDragState.processing = true;\n        const { offsetX, offsetY } = event\n        Object.assign(this._target.status, {\n            dragovering: true,\n        })\n        this._targetLockOn([offsetX, offsetY])\n        const instance = this._target.instance || this._target.link;\n        this._processDragOver(instance, event);\n        if(this._target.isLinkDirty || this._target.isInstanceDirty) {\n            Promise.resolve().then(() => {\n                this._render();    \n                this._target.isLinkDirty = false; \n                this._target.isInstanceDirty = false;\n                this._lastDragState.processing = false;\n            })\n        } else {\n            this._lastDragState.processing = false;\n        } \n    }\n\n    _onDrop(event) {\n        const { offsetX, offsetY, clientX, clientY } = event\n        const payload = this.consumeMessage();\n        const instance = payload.instance;\n        if(this._dragOverTarget) {\n            const oldIns = this._dragOverTarget;\n            oldIns.dispatchEvent(new JFlowEvent('dragoverend', {\n                event,\n                instance: oldIns,\n            }));\n            this._dragOverTarget = null;\n        }\n        const {\n            link,\n            instance: target,\n        } = this._target;\n        const {\n            point, belongs\n        } = this._target.cache;\n        if(link) {   \n            /**\n             * 丢在线上事件\n             *\n             * @event BaseLink#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {BaseLink} link         - 目标连线 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            instance.anchor = point;\n            link.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                link,\n                jflow: this,\n                belongs,\n                point\n            }))\n        } else if(target) {\n            /**\n             * 丢在节点上事件\n             *\n             * @event Node#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Node} target           - 目标节点\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            target.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point\n            }));\n        } else {\n            /**\n            * 丢在主图上事件\n            *\n            * @event JFlow#drop\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - 拖动的对象 \n            * @property {JFlow} jflow           - 当前JFlow对象 \n            * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n            */\n            this.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point,\n            }))\n        }\n        \n        requestAnimationFrame(() => {\n            this._target.instance = null;\n            this._target.link = null;\n            Object.assign(this._target.status, {\n               dragovering: false,\n            })\n        })\n    }\n    \n    /**\n     * 缩放操作处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    zoomHandler(offsetX, offsetY, deltaX, deltaY, event) {\n        if(this._zooming) return;\n        this._zooming = true;\n        const { width: p_width, height: p_height, x, y } = this.bounding_box;\n        let newScale = this.scale;\n        const amount = deltaY > 0 ? 1.1 : 1 / 1.1;\n        newScale *= amount;\n\n        if (this.maxZoom && newScale > this.maxZoom){\n            // could just return but then won't stop exactly at maxZoom\n            newScale = this.maxZoom;\n        }\n\n        if(this.minZoom && newScale < this.minZoom) {\n            newScale = this.minZoom;\n        }\n\n        var deltaScale    = newScale - this.scale;\n        var currentWidth  = p_width * this.scale;\n        var currentHeight = p_height * this.scale;\n        var deltaWidth    = p_width * deltaScale;\n        var deltaHeight   = p_height * deltaScale;\n\n        var tX = offsetX - this.position.x;\n        var tY = offsetY - this.position.y;\n        var pX = -tX / currentWidth;\n        var pY = -tY / currentHeight;\n\n        this.scale = newScale;\n        this.position.x += pX * deltaWidth;\n        this.position.y += pY * deltaHeight;\n        this.position.offsetX = this.position.x - x * newScale;\n        this.position.offsetY = this.position.y - y * newScale;\n        this.dispatchEvent(new JFlowEvent('zoompan'));\n        requestAnimationFrame(() => {\n            this._render();\n            this._zooming = false;\n        })\n    }\n    /**\n     * 平移画布操作处理函数\n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    panHandler(deltaX, deltaY, event) {\n        if(this._panning) return;\n        this._panning = true;\n        this._recalculatePosition(deltaX, deltaY);\n        /**\n         * 缩放平移事件\n         *\n         * @event JFlow#zoompan\n        */\n        this.dispatchEvent(new JFlowEvent('zoompan'));\n        requestAnimationFrame(() => {\n            this._render();\n            this._panning = false;\n        })\n    }\n    /**\n     * 开始按压处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressStartHandler(offsetX, offsetY, event) {\n        this._targetLockOn([offsetX, offsetY], 'pressStart');\n        Object.assign(this._target.meta, {\n            initialX: offsetX,\n            initialY: offsetY,\n        })\n        Object.assign(this._target.status, {\n            dragging: true,\n            processing: false,\n        });\n        if(this._target.moving) {\n            const moving = this._getMovingTarget();\n            /**\n             * 开始拖动组的事件（特指lock的顶层组）\n             *\n             * @event Node#pressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             */\n            moving.dispatchEvent(new JFlowEvent('pressStart', {\n                event,\n                instance: moving,\n                jflow: this,\n            }))\n        }\n\n        if(this._target.instance) {\n            /**\n             * 开始拖动对象事件（就是目标对象的拖动事件，事件支持冒泡）\n             *\n             * @event Node#instancePressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance     - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Boolean} bubbles       - 冒泡\n             */\n            const t = this._target.instance;\n            t.bubbleEvent(new JFlowEvent('instancePressStart', {\n                event,\n                target: t,\n                jflow: this,\n                bubbles: true,\n            }))\n        }\n    }\n    /**\n     * 按压中处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressMoveHandler(offsetX, offsetY, event) {\n        const {\n            dragging, processing\n        } = this._target.status;\n        const { x, y } = this._target.meta;\n        this.canvas.style.cursor = 'default';\n        if(!dragging && !processing) {\n            const {\n                link,\n                instance\n            } = this._targetLockOn([offsetX, offsetY]);\n            if(instance) {\n                /**\n                * instance mousemove 原生事件，仅在无拖拽时触发\n                *\n                * @event Node#instancemousemove\n                * @type {object}\n                * @property {Event} event           - 原始事件\n                * @property {Node} instance           - 原始事件\n                * @property {JFlow} jflow           - 当前JFlow对象 \n                */\n                instance.dispatchEvent(new JFlowEvent('instancemousemove', {\n                    event,\n                    instance,\n                    jflow: this,\n                }))\n            }\n        }\n        /**\n         * canvas mousemove 原生事件\n         *\n         * @event JFlow#canvasmousemove\n         * @type {object}\n         * @property {Event} event           - 原始事件\n         * @property {JFlow} jflow           - 当前JFlow对象 \n         */\n        this.dispatchEvent(new JFlowEvent('canvasmousemove', {\n            event,\n            jflow: this,\n        }))\n        \n        if(!dragging) return;\n        this.canvas.style.cursor = 'grabbing';\n        if(processing) return;\n        \n        const movingtarget = this._target.moving;// this._tempInstance ? [this._tempInstance] : this._target.moving;\n\n        this._target.status.processing = true;\n        const deltaX = offsetX - x;\n        const deltaY = offsetY - y;\n\n        if(movingtarget) {\n            movingtarget.forEach(t => {\n                t.anchor[0] += deltaX / this.scale;\n                t.anchor[1] += deltaY / this.scale;\n            })\n        } else {\n            this._recalculatePosition(deltaX, deltaY);    \n            this.dispatchEvent(new JFlowEvent('zoompan'));\n        }\n        const { instance, link } = this._targetLockOn([offsetX, offsetY]);\n        this._processDragOver(instance || link, event);\n            \n        requestAnimationFrame(() => {\n            this._render();\n            this._target.isLinkDirty = false; \n            this._target.isInstanceDirty = false;\n            this._target.status.processing = false;\n        })\n    }\n    /**\n     * 按压结束处理函数\n     * @param {Boolean} isDocument - 是否为 document 触发\n     * @param {Number} event - 原生事件\n     */\n    pressUpHanlder(isDocument, event) {\n        const meta = this._target.meta;\n        if(meta.initialX === meta.x\n            && meta.initialY === meta.y) {\n                if(event.target !== this.canvas){\n                    this._clearTarget();\n                    return;\n                }\n                if(this._target.instance && !isDocument) {\n                    const t = this._target.instance;\n                    /**\n                    * 点击事件（冒泡）\n                    *\n                    * @event Node#click\n                    * @type {object}\n                    * @property {Event} event          - 原始事件 \n                    * @property {Instance} target      - 点击的对象 \n                    * @property {JFlow} jflow          - 当前JFlow对象 \n                    * @property {Boolean} bubbles      - 冒泡\n                    */\n                    t.bubbleEvent(new JFlowEvent('click', {\n                        event,\n                        target: t,\n                        jflow: this,\n                        bubbles: true,\n                    }))\n                    this._clearTarget();\n                    this._render();\n                    return;\n                } else {\n                    /**\n                    * 点击事件\n                    *\n                    * @event JFlow#click\n                    * @type {object}\n                    * @property {Event} event          - 原始事件 \n                    * @property {JFlow} jflow          - 当前JFlow对象 \n                    */\n                    this.dispatchEvent(new JFlowEvent('click', {\n                        event,\n                        jflow: this,\n                    }));\n                    this._clearTarget();\n                    this._render();\n                    return\n                }\n            \n        } else if(this._target.moving) {\n            let checkresult = false;\n            if(this._layout.static) {\n                checkresult = this.staticCheck(this._getMovingTarget());\n            }\n\n            if(!checkresult && this._target.link) {\n                const {\n                    point, belongs\n                } = this._target.cache;\n                const link = this._target.link;\n                const instance = this._getMovingTarget();\n                /**\n                 * 拖动到线上事件\n                 *\n                 * @event BaseLink#drop\n                 * @type {object}\n                 * @property {Event} event           - 原始事件 \n                 * @property {Object} instance     - 拖动的对象 \n                 * @property {BaseLink} link         - 目标连线 \n                 * @property {JFlow} jflow           - 当前JFlow对象 \n                 * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n                 */\n                link.dispatchEvent(new JFlowEvent('drop', {\n                    event,\n                    instance,\n                    link,\n                    jflow: this,\n                    belongs,\n                }));\n                this._target.link = null;\n                this._target.instance = null;\n            }\n            if(this._target.moving) {\n                if(this._target.instance) {\n                    /**\n                     * 拖动后放置到 Instance 上的事件，由被拖动到的对象触发\n                     *\n                     * @event Node#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Node} instance         - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     * @property {Instance} target       - 拖动到的对象\n                     * @property {boolean} bubbles       - 冒泡\n                     */\n                     console.log('pressEnd', this._target.instance)\n                    this._target.instance.bubbleEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                        target: this._target.instance,\n                        bubbles: true\n                    }));\n                } else {\n                    /**\n                     * 拖动后放置到主图上的事件\n                     *\n                     * @event JFlow#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Instance} instance       - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     */\n                    this.dispatchEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                    }))\n                }\n            }\n            this._target.moving = null;\n            this.removeTempDraggingInstance()\n            // this._target.isMovingDirty = false;\n            this._render();\n        }\n        this._clearTarget();\n    }\n    /**\n     * 菜单弹出处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    contextMenuHanlder(offsetX, offsetY, event) {\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY]);\n        const { topLayerPoint } = this._target.cache\n        if(instance || link) {\n            const target = (instance || link);\n            /**\n             * 右键事件（冒泡）\n             *\n             * @event Instance#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Instance} target       - 右键对象 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             * @property {Boolean} bubbles       - 冒泡\n             */\n            target.bubbleEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                target,\n                topLayerPoint,\n                bubbles: true\n            }));\n        } else {\n            /**\n             * 右键事件\n             *\n             * @event JFlow#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             */\n            this.dispatchEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                topLayerPoint,\n            }));\n        }\n    }\n\n    /*_onZoom(event) {\n        event.preventDefault();\n        let { offsetX, offsetY, deltaX, deltaY } = event\n        if(event.ctrlKey) { \n            deltaY = -deltaY;\n            this.zoomHandler(offsetX, offsetY, deltaX, deltaY);\n        } else {\n            this.panHandler(-deltaX, -deltaY);\n        }\n    }\n\n    _onPressStart(event) { \n        const { offsetX, offsetY, deltaY, button } = event\n        if(button !== 0) return;\n        this.pressStartHandler(offsetX, offsetY);\n    }\n\n    _onPressMove(event) {\n        const { offsetX, offsetY } = event\n        this.pressMoveHandler(offsetX, offsetY);\n    }\n\n    _onPressUp(event, isDocument) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { button } = event\n        if(button !== 0) return;\n        this.pressUpHanlder(isDocument)\n    }\n\n    _onPressUpDocument(event) {\n        this._onPressUp(event, true);\n    }\n\n    _onContextMenu(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { offsetX, offsetY } = event;\n        this.contextMenuHanlder(offsetX, offsetY);\n    }*/\n\n    _clearTarget(){\n        Object.assign(this._target.meta, {\n            x: undefined,\n            y: undefined,\n            initialX: undefined,\n            initialY: undefined, \n        })\n        Object.assign(this._target.status, {\n            dragging: false,\n            processing: false,\n        });\n        Object.assign(this._target, {\n            instance: null,\n            link: null,\n            moving: null,\n        });\n    }\n\n    _recalculatePosition(deltaX, deltaY, scale) {\n        const { x, y } = this.bounding_box;\n        if(scale === undefined) {\n            scale = this.scale;\n        }\n        this.position.x += deltaX;\n\t\tthis.position.y += deltaY;\n        this.position.offsetX = this.position.x - x * scale;\n        this.position.offsetY = this.position.y - y * scale;\n    }\n\n    calculateToRealWorld(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [p[0] * scale + position.offsetX, p[1] * scale + position.offsetY]\n    }\n\n    _calculatePointBack(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [(p[0] - position.offsetX)/scale, (p[1] - position.offsetY) / scale];\n    }\n\n    _calculateDistance(l) {\n        const scale = this.scale;\n        return scale * l;\n    }\n\n    _resetTransform() {\n        const { width: c_width, height: c_height } = this.canvasMeta;\n        const position = this.position;\n        const scale = this.scale;\n        const ctx = this.ctx;\n        ctx.setTransform();\n        ctx.clearRect(0, 0, c_width, c_height);\n        ctx.scale(this.dpr, this.dpr);\n        ctx.transform(scale, 0, 0, scale, position.offsetX, position.offsetY);\n    }\n\n    _getViewBox() {\n        return [\n            ...this._calculatePointBack([0,0]),\n            ...this._calculatePointBack([this.canvasMeta.width,this.canvasMeta.height]),\n        ];\n    }\n     /**\n     * 绘制画布\n     */\n    _render() {\n        if(!this._readyToRender) return;\n        this._resetTransform();\n        const ctx = this.ctx;\n        const br = this._getViewBox();\n        this._stack.render(ctx, (instance) => doOverlap(br, instance.getBoundingRect()));\n        this._linkStack.render(ctx, (link) => link.isInViewBox(br));\n        if(this._tempInstance) {\n            ctx.save();\n            this._tempInstance.render(ctx)\n            ctx.restore();\n        }\n    }\n}\nObject.assign(JFlow.prototype, MessageMixin);\nObject.assign(JFlow.prototype, StackMixin);\nObject.assign(JFlow.prototype, LayoutMixin);\n\nexport default JFlow;\nexport { default as JFlowEvent } from '../events';\nexport { default as commonEventAdapter } from '../events/commonAdapter';\nexport { default as Instance } from '../instance/instance';\nexport { default as Node } from '../instance/node';\nexport { default as BaseLink } from '../instance/base-link';\nexport { default as Point } from '../instance/shapes/point';\nexport { default as Rectangle } from '../instance/shapes/rectangle';\n// export { default as Group } from '../instance/shapes/rectangle-group';\nexport { default as Capsule } from '../instance/shapes/capsule';\n// export { default as CapsuleGroup } from '../instance/shapes/capsule-group';\n// export { default as CapsuleVerticalGroup } from '../instance/shapes/capsule-vertical-group';\nexport { default as Diamond } from '../instance/shapes/diamond';\n// export { default as DiamondGroup } from '../instance/shapes/diamond-group';\n// export { default as DiamondVerticalGroup } from '../instance/shapes/diamond-vertical-group';\nexport { default as Rhombus } from '../instance/shapes/rhombus';\n// export { default as RhombusGroup } from '../instance/shapes/rhombus-group';\nexport { default as Text } from '../instance/text';\nexport { default as Icon } from '../instance/image';\nexport { default as GroupFactory } from '../instance/groupFactory';\nexport { default as Link } from '../instance/link';\nexport { default as PolyLink } from '../instance/poly-link';\nexport { default as BezierLink } from '../instance/bezier-link';\nexport { default as LinearLayout} from '../layout/linear-layout';\n// export { default as TreeLayout } from '../ler-layouta;yout/tree-layout';\nexport { default as Lowcodelayout } from '../layout/low-code-layout';\nexport { default as ERLayout } from '../layout/er-layout/er-layout';\n\n","export default {\n    provide(){\n        return {\n            addToStack: this.addToStack,\n            addToLinkStack: this.addToLinkStack,\n            removeFromStack: this.removeFromStack,\n            removeFromLinkStack: this.removeFromLinkStack,\n            getInstanceByJFlowId: this.getInstanceByJFlowId,\n        }\n    },\n    data() {\n        return {\n            stack: [], // 主要是为了连线\n        }\n    },\n    methods: {\n        getInstanceByJFlowId(jflowId) {\n            const obj = this.stack.find(i => i.jflowId === jflowId);\n            if(obj) {\n                return obj.instance;\n            }\n            return null;\n        },\n        addToStack(instance, jflowId) {\n            this._jflowInstance.addToStack(instance);\n            if(!jflowId) return;\n            this.stack.push({\n                jflowId,\n                instance,\n            });\n            // this.$nextTick(this.onStackChangeHandler)\n        },\n        addToLinkStack(link) {\n            this._jflowInstance.addToLinkStack(link);\n            // this.$nextTick(this.onStackChangeHandler)\n        },\n        removeFromStack(instance) {\n            this._jflowInstance.removeFromStack(instance);\n            // this.$nextTick(this.onStackChangeHandler)\n        },\n        removeFromLinkStack(link) {\n            this._jflowInstance.removeFromLinkStack(link);\n            // this.$nextTick(this.onStackChangeHandler)\n        },\n        onStackChangeHandler() {\n            this._jflowInstance.recalculate();\n            this._jflowInstance.reflow();\n            // this.$nextTick(this.renderJFlow)\n        }\n    }\n}","import JFlow from '../../core/flow';\nimport StackMixin from './StackMixin';\n/**\n * typs#slot 中的属性 \n * @typedef {Object} j-jflow-Node\n * @property {string}       type   - 布局节点类型\n * @property {Object}       configs  - 源数据\n * @property {LayoutNode}   meta   - 布局节点\n */\n/**\n * JFlow {@link JFlow} 的 vue 封装 \n * @module j-jflow\n * @property {JFlow~JFlowConfigs} configs - 传给 JFlow 的配置\n * @property {Boolean} loading            - 初始渲染状态，支持 sync\n */\nexport default {\n    mixins: [StackMixin],\n    provide(){\n        return {\n            renderJFlow: this.renderJFlow,\n            addNameToRootStack: this.addNameToRootStack\n        }\n    },\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        loading: Boolean,\n    },\n    data() {\n        return {\n            // nodes: [],\n            // links: [],\n            renderNodes: [],\n            renderLinks: [],\n        }\n    },\n    render: function (createElement) {\n        if(!this.renderNodes.length) {\n            return createElement('div', this.$slots.default);\n        } else {\n            const vnodes = this.renderNodes.map(({ type, configs, meta }) => {\n                if(!this.$scopedSlots[type]) {\n                    if(this.$scopedSlots['jflowcommon']){\n                        type = 'jflowcommon';\n                    } else {\n                        return\n                    }\n                }\n                if(meta.__vnode__) {\n                    return meta.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ configs, meta });\n                meta.getJflowInstance = function() {\n                    // 只支持一个元素\n                    let instance = vnode.componentInstance;\n                    while(instance && !instance._jflowInstance)  {\n                        instance = instance.$children[0];\n                    }\n                    // TODO 优化下这里的逻辑\n                    instance._jflowInstance._layoutNode = meta;\n                    return instance._jflowInstance;\n                }\n                vnode.key = configs.id;\n                meta.__vnode__ = vnode;\n                return vnode;\n            });\n            const vlinks = this.renderLinks.map(meta => {\n                let type = meta.type || 'plainlink'\n                if(!this.$scopedSlots[type]) {\n                    return null;\n                }\n                if(meta.__vnode__) {\n                    return meta.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ configs: meta });\n                vnode.key = `${meta.from}-${meta.to}-${meta.part}`\n                meta.__vnode__ = vnode;\n                return vnode\n            })\n\n            return createElement('div', [...vnodes, ...vlinks]);\n        }\n        \n    },\n    created() {\n        this._jflowInstance = new JFlow(this.configs);\n        this.genNodeLinkMeta();\n        this.loadingNodes();\n    },\n    beforeDestroy() {\n        this._jflowInstance.destroy();\n    },\n    methods: {\n        loadingNodes() {\n            this.$emit('update:loading', true)\n            let i = 0;\n            const tl = () => {\n                const end = i + 100;\n                const linkPart = this.links.slice(i, end);\n                if(linkPart.length) {\n                    // this.renderLinks.splice(this.renderLinks.length,  0, ...linkPart);\n                    this.renderLinks = this.renderLinks.concat(linkPart); // faster\n                    i = end;\n                    requestAnimationFrame(tl);\n                } else {\n                    requestAnimationFrame(this.mountJFlow.bind(this));\n                }\n            }\n            const tn = () => {\n                const end = i + 100;\n                const part = this.nodes.slice(i, end);\n                if(part.length) {\n                    // this.renderNodes.splice(this.renderNodes.length,  0, ...part);\n                    this.renderNodes = this.renderNodes.concat(part);\n                    i = end;\n                    requestAnimationFrame(tn);\n                } else {\n                    i = 0;\n                    requestAnimationFrame(tl)\n                }\n            }\n            requestAnimationFrame(tn)\n        },\n        mountJFlow() {\n            this._jflowInstance.$mount(this.$el);\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            this.$emit('update:loading', false)\n        },\n        genNodeLinkMeta() {\n            /** \n            * @member {j-jflow-Node[]} nodes\n            */\n            this.nodes = this._jflowInstance._layout.flowStack.map(meta => {\n                return {\n                    type: meta.type,\n                    configs: meta.configs,\n                    meta: meta.layoutMeta,\n                }\n            });\n            /** \n            * @member {Layout~LinkMeta[]} links\n            */\n            this.links = this._jflowInstance._layout.flowLinkStack.slice();\n        },\n        syncNodeLink() {\n            this.renderNodes = this.nodes.slice();\n            this.renderLinks = this.links.slice();\n        },\n        /**\n         * 绘制之前，vnode渲染之后\n         * @name j-jflow~preCallback\n         * @function\n         */\n        /**\n         * 重排\n         * @param {j-jflow~preCallback} preCallback - JFlow 绘制之前，vnode渲染之后\n         */\n        reflow(preCallback) {\n            this.genNodeLinkMeta();\n            this.syncNodeLink();\n            this.$nextTick(() => {\n                if(preCallback) {\n                    preCallback();\n                }\n                this._jflowInstance.recalculate();\n                this._jflowInstance._render();\n            })\n        },\n        /**\n         * 获取单签 JFlow 实例\n         * @return {Jflow} - JFlow对象\n         */\n        getInstance() {\n            return this._jflowInstance;\n        },\n        /**\n         * 手动触发绘制\n         */\n        renderJFlow() {\n            if(this.__renderInSchedule__) {\n                return;\n            }\n            this.__renderInSchedule__ = true;\n            this.$nextTick(() => {\n                this._jflowInstance._render();\n                this.__renderInSchedule__ = false;\n            });\n        },\n        addNameToRootStack(instance, jflowId) {\n             this.stack.push({\n                jflowId,\n                instance,\n            });\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport diff from 'object-diff';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inject: ['addToStack', 'removeFromStack','addNameToRootStack'],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            jflowId: {\n                type: String,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                // console.log(val, JSON.stringify(val) === JSON.stringify(oldVal), )\n                const diffed = diff(val, oldVal);\n                if(Object.keys(diffed).length === 0){\n                    return;\n                }\n                //\n                // const reflowKeys = Object.keys(diffed).filter(k => {\n                //     const lk = k.toLowerCase();\n                //     return !(lk.endsWith('color') || k.endsWith('style'));\n                // });\n                this._jflowInstance.setConfig(val);\n                // console.log('recalculateUp')\n                // this._jflowInstance.recalculateUp();\n                // console.log(reflowKeys.length, val)\n                // if(reflowKeys.length) {\n                //     this._jflowInstance._belongs.recalculateUp();\n                // }\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            }\n        },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            this.bindListeners();\n            this.addToStack(this._jflowInstance, this.jflowId);\n        },\n        // updated() {\n        //     console.log('recalculateUp')\n\n        // },\n        destroyed() {\n            this.removeFromStack(this._jflowInstance);\n        },\n        methods: {\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\n/**\n * JFlow {@link BaseLink} 的 vue 封装 \n * @module jflow-link\n * @property {BaseLink~Configs} configs - 传给 BseLink 的配置, from, to属性会被替换为jflowid对应的 Instance\n * @property {String} from - jflowId\n * @property {String} to - jflowId\n */\nexport default function (nameNode, isLink) {\n    return {\n        inject: [ 'addToLinkStack', 'removeFromLinkStack', 'getInstanceByJFlowId' ],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            from: String,\n            to: String,\n        },\n        watch: {\n            from(){\n                this.resetLink();\n            },\n            to() {\n                this.resetLink();\n            },\n            configs(val, oldVal) {\n                if(val.backgroundColor !== oldVal.backgroundColor) {\n                    this._jflowInstance.backgroundColor = val.backgroundColor;\n                }\n            },\n        },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            const fromInstance = this.getInstanceByJFlowId(this.from);\n            const toInstance = this.getInstanceByJFlowId(this.to);\n            const key = this.$vnode.key;\n            if(fromInstance && toInstance) {\n                this._jflowInstance =  new JFlowInstance[nameNode]({\n                    ...this.configs,\n                    key,\n                    from: fromInstance,\n                    to: toInstance,\n                });\n                this.bindListeners();\n                this.addToLinkStack(this._jflowInstance);\n               \n            }\n        },\n        methods: {\n            resetLink() {\n                const fromInstance = this.getInstanceByJFlowId(this.from);\n                const toInstance = this.getInstanceByJFlowId(this.to);\n                this._jflowInstance.from = fromInstance;\n                this._jflowInstance.to = toInstance;\n            },\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        },\n        destroyed() {\n            if(this._jflowInstance) {\n                this.removeFromLinkStack(this._jflowInstance);\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport StackMixin from './StackMixin';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        mixins: [StackMixin],\n        inject: {\n            addToBelongStack: {\n                from: 'addToStack',\n            },\n            removeFromBelongStack: {\n                from: 'removeFromStack',\n            },\n            renderJFlow: {\n                from: 'renderJFlow',\n            },\n            addNameToRootStack: {\n                from: 'addNameToRootStack',\n            }\n        },\n        render: function (createElement) {\n            return createElement('jflow-group', this.$slots.default);\n        },\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            jflowId: {\n                type: String,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                    return;\n                }\n                this._jflowInstance.setConfig(val);\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            },\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            // console.log(this.name, this.)\n            this.addToBelongStack(this._jflowInstance, this.jflowId);\n            this.addNameToRootStack(this._jflowInstance, this.jflowId);\n        },\n        mounted(){\n            this._jflowInstance.recalculate();\n        },\n        updated() {\n            this._jflowInstance.recalculateUp();\n        },\n        destroyed() {\n            this.removeFromBelongStack(this._jflowInstance);\n        },\n    }\n}","// import JFlowComponent from './components/JFlow';\nimport JFlowComponent from './components/JFlow';\nimport JFlowInstance from './components/JFlowInstance';\nimport JFlowLink from './components/JFlowLink';\nimport JFLowGroup from './components/JFlowGroup';\n \nconst JFLOW_NODES = [\n    /**\n     * JFlow {@link Point} 的 vue 封装 \n     * @module j-point\n     * @property {Point~PointConfigs} configs - 传给 Point 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Point',\n    /**\n     * JFlow {@link Rectangle} 的 vue 封装 \n     * @module j-rectangle\n     * @property {Rectangle~RectangleConfigs} configs - 传给 Rectangle 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rectangle',\n    /**\n     * JFlow {@link Capsule} 的 vue 封装 \n     * @module j-capsule\n     * @property {Capsule~CapsuleConfigs} configs - 传给 Capsule 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Capsule',\n    /**\n     * JFlow {@link Diamond} 的 vue 封装 \n     * @module j-diamond\n     * @property {Diamond~DiamondConfigs} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Diamond',\n    /**\n     * JFlow {@link Rhombus} 的 vue 封装 \n     * @module j-rhombus\n     * @property {Rhombus~RhombusConfigs} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rhombus',\n    /**\n     * JFlow {@link Text} 的 vue 封装 \n     * @module j-text\n     * @property {Text~TextConfigs} configs - 传给 Text 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Text',\n    /**\n     * JFlow {@link Icon} 的 vue 封装 \n     * @module j-icon\n     * @property {Icon~IconConfigs} configs - 传给 Icon 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Icon',\n];\n/**\n * @typedef {BezierLink~Configs} j-bezier-link~Configs\n * @property {String} from   - 起始单元 jflowId\n * @property {String} to     - 终止单元 jflowId\n */\nconst JFLOW_LINKS = [\n    'Link',\n    'PolyLink',\n    \n    /**\n     * JFlow {@link BezierLink} 的 vue 封装 \n     * @module j-bezier-link\n     * @property {BezierLink~Configs} configs - 传给 BezierLink 的配置\n     */\n    'BezierLink'\n]\nconst JFLOW_GROUPS = [\n    /**\n     * JFlow {@link CapsuleGroup} 的 vue 封装 \n     * @module j-capsule-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleGroup',\n    /**\n     * JFlow {@link CapsuleVerticalGroup} 的 vue 封装 \n     * @module j-capsule-vertical-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleVerticalGroup',\n    /**\n     * JFlow {@link DiamondGroup} 的 vue 封装 \n     * @module j-diamond-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondGroup',\n    /**\n     * JFlow {@link DiamondVerticalGroup} 的 vue 封装 \n     * @module j-diamond-vertical-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondVerticalGroup',\n    /**\n     * JFlow {@link RhombusGroup} 的 vue 封装 \n     * @module j-rhombus-group\n     * @property {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 传给 RhombusGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'RhombusGroup',\n]\n\nconst components = [\n    {\n        name: 'Jflow',\n        component: JFlowComponent,\n    },\n    {\n        /**\n         * JFlow {@link RectangleGroup} 的 vue 封装 \n         * @module j-group\n         * @property {RectangleGroup~RectangleGroupConfigs} configs - 传给 RectangleGroup 的配置\n         */\n        name: 'Group',\n        component: JFLowGroup('Group'),\n    }, \n    ...JFLOW_GROUPS.map(name => ({\n        name,\n        component: JFLowGroup(name)\n    })),\n    ...JFLOW_NODES.map(name => ({\n        name,\n        component: JFlowInstance(name)\n    })),\n    ...JFLOW_LINKS.map(name => ({\n        name,\n        component: JFlowLink(name)\n    })),\n];\nconst componentPrefix = 'j';\ncustomElements.define('jflow-group', class extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({mode: 'open'});\n    }\n});\n/**\n * @module JFlowVuePlugin \n */\nexport default {\n    /**\n     * 安装 JFlowVuePlugin\n     * @function\n     * @param {Vue} Vue - Vue\n     * @param {Object} options - Vue plugin 配置\n     * @param {string} options.prefix - 组件前缀，默认是 j\n     * @param {Object} options.custom - 自定义组件，形式为 { key: {@link:Instance} }\n     */\n    install: (Vue, options = {}) => {\n        let prefixToUse = componentPrefix;\n        if(options && options.prefix){\n            prefixToUse = options.prefix;\n        };\n        components.forEach(k => {\n            Vue.component(`${prefixToUse}${k.name}`, k.component);\n        });\n\n        if(options.custom) {\n            Object.keys(options.custom).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowInstance(options.custom[name]));\n            })\n        }\n        \n    }\n}\n\n// export { * as JFlowInstance } from './components/JFlowInstance'; \n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.body,attrs:{\"id\":\"app\"}},[_c('div',{class:_vm.$style.sidebar},[_c('div',[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"IfStatement\"},on:{\"dragstart\":_vm.onDragStartRectangle}},[_vm._v(\"IfStatement\")])]),_c('div',[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"variable\"},on:{\"dragstart\":_vm.onDragStartPoint}},[_vm._v(\"Variable\")])])]),_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('j-jflow',{ref:\"jflow\",class:_vm.$style.wrapper,attrs:{\"configs\":_vm.configs,\"loading\":_vm.jflowloading},on:{\"update:loading\":function($event){_vm.jflowloading=$event},\"click\":_vm.onClickNoWhere,\"drop\":_vm.onDrop,\"pressEnd\":_vm.onPressEnd},scopedSlots:_vm._u([{key:\"start\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('j-start',{attrs:{\"node\":configs}})]}},{key:\"end\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('j-end',{attrs:{\"node\":configs}})]}},{key:\"variable\",fn:function(ref){\nvar configs = ref.configs;\nvar meta = ref.meta;\nreturn [_c('j-variable',{attrs:{\"node\":configs},on:{\"pressStart\":function($event){return _vm.onPressStart(configs)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, meta)},\"change\":function($event){return _vm.onChangeContent($event, configs)}}})]}},{key:\"IfStatement\",fn:function(ref){\nvar configs = ref.configs;\nvar meta = ref.meta;\nreturn [_c('j-ifstatement',{attrs:{\"node\":configs},on:{\"pressStart\":function($event){return _vm.onPressStart(configs)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, meta)}}})]}},{key:\"SwitchStatement\",fn:function(ref){\nvar configs = ref.configs;\nvar meta = ref.meta;\nreturn [_c('j-switch',{attrs:{\"node\":configs},on:{\"pressStart\":function($event){return _vm.onPressStart(configs)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, meta)}}})]}},{key:\"WhileStatement\",fn:function(ref){\nvar configs = ref.configs;\nvar meta = ref.meta;\nreturn [_c('j-whilestatement',{attrs:{\"node\":configs},on:{\"pressStart\":function($event){return _vm.onPressStart(configs)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, meta)}}})]}},{key:\"endpoint\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('j-endpoint',{attrs:{\"node\":configs}})]}},{key:\"CallLogic\",fn:function(ref){\nvar configs = ref.configs;\nvar meta = ref.meta;\nreturn [_c('j-calllogic',{attrs:{\"node\":configs},on:{\"toggle-select\":function($event){return _vm.onToggleSelect($event, configs)},\"pressStart\":function($event){return _vm.onPressStart(configs)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, meta)}}})]}},{key:\"plainlink\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('instance-link',{attrs:{\"linkConfigs\":configs},on:{\"drop\":function($event){return _vm.onDropToLink($event, configs)}}})]}}])}),(_vm.isHover)?_c('div',{ref:\"hoverblock\",class:_vm.$style.hoverblock,style:((\"transform: translate(\" + _vm.offsetX + \"px, \" + _vm.offsetY + \"px)\"))},[_c('ul',_vm._l((_vm.logics),function(l){return _c('li',{key:l.content,on:{\"click\":function($event){return _vm.onSelectLogic(l)}}},[_vm._v(_vm._s(l.content))])}),0)]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-diamond-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.groupConfig}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n       fontSize: '12px',\n       textColor: '#585c63',\n       content: _vm.node.content,\n       lineHeight: 26,\n       editable: true\n   }},on:{\"change\":_vm.onContentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n     <j-diamond-group \n        :jflowId=\"node.id\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n            editable: true\n        }\"\n        @change=\"onContentChange\"/>\n     </j-diamond-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 10,\n            }\n        }\n    },\n    methods: {\n        onContentChange(event){\n            console.log(event.detail)\n            this.$emit('change', {\n                val: event.detail.val,\n                oldVal: event.detail.oldVal,\n            });\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./variable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./variable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./variable.vue?vue&type=template&id=ef936cb0&\"\nimport script from \"./variable.vue?vue&type=script&lang=js&\"\nexport * from \"./variable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-rhombus-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.groupConfig},on:{\"mouseenter\":function($event){_vm.touch = true},\"mouseleave\":function($event){_vm.touch = false}}},_vm.$listeners),[_c('j-point',{attrs:{\"configs\":{\n        backgroundColor: '#99DBC5',\n        radius: 8,\n        borderColor: '#33B88C',\n        borderWidth: 2,\n        absolutePosition: {\n            top: 10,\n            right: 10,\n        }\n    }},on:{\"click\":function($event){_vm.shrink = !_vm.shrink}}}),_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: '条件分支',\n        lineHeight: 26,\n        absolutePosition: {\n            top: -13,\n        }\n    }}}),_c('j-group',[(_vm.shrink)?_c('j-text',{attrs:{\"configs\":{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: 'ifstatement ' + _vm.node.id,\n            lineHeight: 26,\n            indent: 10,\n        }}}):_c('j-rectangle',{attrs:{\"configs\":{\n                backgroundColor: '#FAAAAA',\n                width: 36,\n                height: 72,\n            }}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-rhombus-group\n        :jflowId=\"node.id\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\"\n        @mouseenter=\"touch = true\"\n        @mouseleave=\"touch = false\">\n        <j-point :configs=\"{\n            backgroundColor: '#99DBC5',\n            radius: 8,\n            borderColor: '#33B88C',\n            borderWidth: 2,\n            absolutePosition: {\n                top: 10,\n                right: 10,\n            }\n        }\" @click=\"shrink = !shrink\"/>\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: '条件分支',\n            lineHeight: 26,\n            absolutePosition: {\n                top: -13,\n            }\n        }\"/>\n        <j-group>\n            <j-text v-if=\"shrink\" :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: 'ifstatement ' + node.id,\n                lineHeight: 26,\n                indent: 10,\n            }\"/>\n            <j-rectangle v-else :configs=\"{\n                    backgroundColor: '#FAAAAA',\n                    width: 36,\n                    height: 72,\n                }\">\n            </j-rectangle>\n        </j-group>\n    </j-rhombus-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    inject: ['renderJFlow'],\n    data() {\n        return {\n            touch: false,\n            shrinkButton: {\n                backgroundColor: '#99DBC5',\n                radius: 20,\n                borderColor: '#33B88C',\n            },\n            shrink: false,\n        }\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                backgroundColor: this.touch ? 'red' : '#fff',\n                shadowColor: '#517cff',\n                shadowBlur: 15,\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 30,\n                marginTop: 30,\n            }\n        }\n    },\n    watch: {\n        shrink(val){\n            console.log(val)\n        },\n        touch(val) {\n            console.log(val)\n        },\n    },\n    updated() {\n        this.renderJFlow();\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ifstatement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ifstatement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ifstatement.vue?vue&type=template&id=21754cf3&\"\nimport script from \"./ifstatement.vue?vue&type=script&lang=js&\"\nexport * from \"./ifstatement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',{attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.configs}},[_c('j-text',{ref:\"start\",attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#000',\n        content: 'Start',\n    }}}),_c('j-point',{attrs:{\"configs\":{\n        backgroundColor: '#99DBC5',\n        radius: 20,\n        borderColor: '#33B88C',\n        borderWidth: 2,\n        shadowBlur: 8,\n        shadowColor: 'rgba(0, 0, 0, 0.1)',\n        shadowOffsetY: 2,\n        shadowOffsetX: 0,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group \n        :jflowId=\"node.id\" \n        :configs=\"configs\">\n        <j-text ref=\"start\" :configs=\"{\n            fontSize: '12px',\n            textColor: '#000',\n            content: 'Start',\n        }\">\n        </j-text>\n        <j-point :configs=\"{\n            backgroundColor: '#99DBC5',\n            radius: 20,\n            borderColor: '#33B88C',\n            borderWidth: 2,\n            shadowBlur: 8,\n            shadowColor: 'rgba(0, 0, 0, 0.1)',\n            shadowOffsetY: 2,\n            shadowOffsetX: 0,\n        }\"></j-point>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n                borderColor: 'transparent',\n                borderWidth: 0,\n            },\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./start.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./start.vue?vue&type=template&id=705727a3&\"\nimport script from \"./start.vue?vue&type=script&lang=js&\"\nexport * from \"./start.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',{attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.configs}},[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#000',\n        content: 'End',\n    }}}),_c('j-rectangle',{attrs:{\"configs\":{\n        backgroundColor: '#FAAAAA',\n        width: 36,\n        height: 36,\n        borderRadius: 8,\n        borderWidth: 2,\n        borderColor: '#F55656',\n        shadowBlur: 8,\n        shadowColor: 'rgba(0, 0, 0, 0.1)',\n        shadowOffsetY: 2,\n        shadowOffsetX: 0,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group :jflowId=\"node.id\" :configs=\"configs\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#000',\n            content: 'End',\n        }\">\n        </j-text>\n        <j-rectangle :configs=\"{\n            backgroundColor: '#FAAAAA',\n            width: 36,\n            height: 36,\n            borderRadius: 8,\n            borderWidth: 2,\n            borderColor: '#F55656',\n            shadowBlur: 8,\n            shadowColor: 'rgba(0, 0, 0, 0.1)',\n            shadowOffsetY: 2,\n            shadowOffsetX: 0,\n        }\"></j-rectangle>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                }),\n                borderColor: 'transparent',\n                borderWidth: 0,\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./end.vue?vue&type=template&id=d2d62c68&\"\nimport script from \"./end.vue?vue&type=script&lang=js&\"\nexport * from \"./end.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-point',{attrs:{\"jflowId\":_vm.node.id,\"configs\":{\n        backgroundColor: '#fff',\n        borderColor: '#000',\n        borderWidth: 1,\n        radius: 5,\n        ignoreHit: true,\n    }}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-point \n        :jflowId=\"node.id\" \n        :configs=\"{\n            backgroundColor: '#fff',\n            borderColor: '#000',\n            borderWidth: 1,\n            radius: 5,\n            ignoreHit: true,\n        }\">\n    </j-point>\n</template>\n\n<script>\nexport default {\n    props: {\n        node: Object,\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./endpoint.vue?vue&type=template&id=46429645&\"\nimport script from \"./endpoint.vue?vue&type=script&lang=js&\"\nexport * from \"./endpoint.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-capsule-vertical-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.configs}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: _vm.textColor,\n        content: _vm.node.id,\n    }}}),_vm._l((_vm.node.cases),function(switchcase){return [_c('j-switchcase',{key:switchcase.id,attrs:{\"node\":switchcase}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-diamond-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.groupConfig,\"rootLink\":true}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: _vm.node.content,\n        lineHeight: 26,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-diamond-group\n        :jflowId=\"node.id\" \n        :configs=\"groupConfig\"\n        :rootLink=\"true\"\n        v-on=\"$listeners\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n        }\"/>\n    </j-diamond-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                paddingTop: 2,\n                paddingBottom: 2,\n                padding: 10,\n                borderWidth: 2,\n                borderRadius: 5,\n            }\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switchcase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switchcase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./switchcase.vue?vue&type=template&id=376765b1&\"\nimport script from \"./switchcase.vue?vue&type=script&lang=js&\"\nexport * from \"./switchcase.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <j-capsule-vertical-group \n        :jflowId=\"node.id\" \n        :configs=\"configs\"\n        v-on=\"$listeners\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor,\n            content: node.id,\n        }\">\n        </j-text>\n        <template v-for=\"switchcase in node.cases\">\n            <j-switchcase :node=\"switchcase\" :key=\"switchcase.id\" />\n        </template>\n    </j-capsule-vertical-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport switchCase from './switchcase.vue';\nexport default {\n    components: {\n        // 'j-variable': variable,\n        'j-switchcase': switchCase,\n    },\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            textColor: '#585c63',\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                paddingTop: 20,\n                paddingBottom: 20\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./switch.vue?vue&type=template&id=07722864&\"\nimport script from \"./switch.vue?vue&type=script&lang=js&\"\nexport * from \"./switch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-rhombus-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.groupConfig}},_vm.$listeners),[_c('j-text',{attrs:{\"configs\":{\n        fontSize: '12px',\n        textColor: '#585c63',\n        content: _vm.node.content,\n        lineHeight: 26,\n        indent: 10,\n    }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-rhombus-group\n        :jflowId=\"node.id\" \n        :configs=\"groupConfig\"\n        v-on=\"$listeners\">\n        <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: node.content,\n            lineHeight: 26,\n            indent: 10,\n        }\"/>\n    </j-rhombus-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nexport default {\n    props: {\n        node: Object,\n    },\n    computed: {\n        groupConfig() {\n            return  {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                padding: 30,\n            }\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./whilestatement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./whilestatement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./whilestatement.vue?vue&type=template&id=450acdd9&\"\nimport script from \"./whilestatement.vue?vue&type=script&lang=js&\"\nexport * from \"./whilestatement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-group',_vm._g({attrs:{\"jflowId\":_vm.node.id,\"configs\":_vm.configs}},_vm.$listeners),[_c('j-group',{attrs:{\"configs\":_vm.headerConfigs}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}}),_c('j-text',{attrs:{\"configs\":{\n            fontSize: '16px',\n            textColor: '#585c63',\n            content: '调用逻辑',\n        }}})],1),_c('j-group',{attrs:{\"configs\":_vm.contentConfigs},on:{\"click\":_vm.onClick}},[_c('j-text',{attrs:{\"configs\":{\n            fontSize: '12px',\n            textColor: '#585c63',\n            content: _vm.node.content || '请选择接口' ,\n        }}})],1),(_vm.node.params && _vm.node.params.length)?[_c('j-group',{ref:\"paramGroup\",attrs:{\"configs\":_vm.paramsConfigs}},[_c('j-text',{attrs:{\"configs\":{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: '参数',\n            }}}),_vm._l((_vm.node.params),function(param){return _c('j-text',{key:param.content,attrs:{\"configs\":{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: param.content,\n            }}})})],2)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-group v-on=\"$listeners\" :jflowId=\"node.id\" :configs=\"configs\">\n        <j-group :configs=\"headerConfigs\">\n            <j-icon :configs=\"imageConfig\" />\n            <j-text :configs=\"{\n                fontSize: '16px',\n                textColor: '#585c63',\n                content: '调用逻辑',\n            }\" />\n        </j-group>\n        <j-group @click=\"onClick\" :configs=\"contentConfigs\">\n            <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || '请选择接口' ,\n            }\" />\n            <!-- <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || 'sss接口' ,\n            }\" />\n            <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#585c63',\n                content: node.content || '接口' ,\n            }\" /> -->\n        </j-group>\n        <template v-if=\"node.params && node.params.length\">\n            <j-group ref=\"paramGroup\" :configs=\"paramsConfigs\">\n                <j-text :configs=\"{\n                    fontSize: '16px',\n                    textColor: '#585c63',\n                    content: '参数',\n                }\" />\n                <j-text v-for=\"param in node.params\" \n                    :key=\"param.content\"\n                    :configs=\"{\n                    fontSize: '16px',\n                    textColor: '#585c63',\n                    content: param.content,\n                }\" />\n            </j-group>\n        </template>\n    </j-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport logicIcon from '../assets/logic.svg';\nconst p = new Image();\np.src = logicIcon;\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                    alignment: 'start'\n                }),\n                padding: 10,\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 12,\n            },\n            headerConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0\n                }),\n                borderRadius: 10,\n                borderColor: '#ccc',\n                borderWidth: 0,\n            },\n            contentConfigs: {\n                layout: new LinearLayout({\n                    direction: 'horizontal',\n                    gap: 0,\n                    justify: 'start',\n                }),\n                borderColor: '#517cff',\n                borderWidth: 2,\n                borderRadius: 5,\n                width: 200,\n                height: 36,\n            },\n            paramsConfigs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 0,\n                    alignment: 'end'\n                }),\n                borderColor: 'transparent',\n                hoverStyle: 'transparent',\n            },\n            imageConfig: {\n                image: p,\n                width: 30,\n                height: 30,\n            }\n        }\n    },\n    watch: {\n        'node.params'(val) {\n            this.$nextTick(() => {\n                if(this.$refs.paramGroup) {\n                    const instance = this.$refs.paramGroup._jflowInstance;\n                    instance.recalculateUp();\n                    instance._jflow._render();  \n                }  \n            })\n        }\n    },\n    methods: {\n        onClick(event) {\n            console.log(event)\n            event.detail.bubbles = false; \n            const { currentTarget } = event;\n            const p = [ -currentTarget.width/2, currentTarget.height/2 ];\n            console.log(p)\n            const gp = currentTarget.calculateToRealWorld(p)\n            // const [ offsetX, offsetY ] = gp;\n            this.$emit('toggle-select', gp);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./callLogic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./callLogic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./callLogic.vue?vue&type=template&id=19201d96&\"\nimport script from \"./callLogic.vue?vue&type=script&lang=js&\"\nexport * from \"./callLogic.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('jPolyLink',{attrs:{\"configs\":_vm.configs,\"from\":_vm.configs.from,\"to\":_vm.configs.to},on:{\"dragenter\":_vm.onDragEnter,\"dragleave\":_vm.onDragOverEnd,\"drop\":_vm.onDropToLink}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <jPolyLink\n        :configs=\"configs\"\n        :from=\"configs.from\"\n        :to=\"configs.to\"\n        @dragenter=\"onDragEnter\"\n        @dragleave=\"onDragOverEnd\"\n        @drop=\"onDropToLink\">\n    </jPolyLink>\n</template>\n\n<script>\nexport default {\n    inject: ['renderJFlow'],\n    props: {\n        linkConfigs: Object,\n    },\n    data() {\n        return {\n            isDragOver: false,\n        };\n    },\n    computed: {\n        configs() {\n            return {\n                ...this.linkConfigs,\n                // fromDir: undefined,\n                // toDir: undefined,\n                // isSelf: false,\n                radius: 5,\n                approximate: 400,\n                backgroundColor: this.isDragOver ? 'rgba(81, 124, 255, 0.5)' : '#000',\n            };\n        },\n    },\n    methods: {\n        onDropToLink($event) {\n            this.$emit('drop', $event);\n        },\n        onDragEnter($event) {\n            this.isDragOver = true;\n        },\n        onDragOverEnd() {\n            this.isDragOver = false;\n        },\n    },\n    updated() {\n        this.renderJFlow();\n    }\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instance-link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./instance-link.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./instance-link.vue?vue&type=template&id=6e29a9d6&\"\nimport script from \"./instance-link.vue?vue&type=script&lang=js&\"\nexport * from \"./instance-link.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\" :class=\"$style.body\">\n      <div :class=\"$style.sidebar\">\n        <div>\n            <div draggable=\"true\" :class=\"$style.part\" type=\"IfStatement\" @dragstart=\"onDragStartRectangle\">IfStatement</div>\n        </div>\n        <div>\n            <div draggable=\"true\" :class=\"$style.part\" type=\"variable\" @dragstart=\"onDragStartPoint\">Variable</div>\n        </div>\n      </div>\n      <div style=\"position: relative;\">\n        <j-jflow ref=\"jflow\" \n            :class=\"$style.wrapper\" \n            :configs=\"configs\"\n            :loading.sync=\"jflowloading\"\n            @click=\"onClickNoWhere\"\n            @drop=\"onDrop\"\n            @pressEnd=\"onPressEnd\">\n                <template #start=\"{ configs }\">\n                    <j-start :node=\"configs\"></j-start>\n                </template>\n                <template #end=\"{ configs }\">\n                    <j-end :node=\"configs\"></j-end>\n                </template>\n                <template #variable=\"{ configs, meta }\">\n                    <j-variable :node=\"configs\" \n                    @pressStart=\"onPressStart(configs)\" \n                    @outOfFlow=\"onOutOfFlow($event, meta)\"\n                    @change=\"onChangeContent($event, configs)\"></j-variable>\n                </template>\n                <template #IfStatement=\"{ configs, meta }\">\n                    <j-ifstatement :node=\"configs\" \n                    @pressStart=\"onPressStart(configs)\" \n                    @outOfFlow=\"onOutOfFlow($event, meta)\"></j-ifstatement>\n                </template>\n                <template #SwitchStatement=\"{ configs, meta }\" >\n                    <j-switch :node=\"configs\" \n                    @pressStart=\"onPressStart(configs)\" \n                    @outOfFlow=\"onOutOfFlow($event, meta)\"/>\n                </template>\n                <template #WhileStatement=\"{ configs, meta }\">\n                    <j-whilestatement :node=\"configs\" \n                    @pressStart=\"onPressStart(configs)\" \n                    @outOfFlow=\"onOutOfFlow($event, meta)\"></j-whilestatement>\n                </template>\n                <template #endpoint=\"{ configs }\">\n                    <j-endpoint :node=\"configs\"></j-endpoint>\n                </template>\n                <template #CallLogic=\"{ configs, meta }\" >\n                    <j-calllogic \n                        :node=\"configs\"\n                        @toggle-select=\"onToggleSelect($event, configs)\"\n                        @pressStart=\"onPressStart(configs)\" \n                        @outOfFlow=\"onOutOfFlow($event, meta)\">\n                    </j-calllogic>\n                </template>\n                <template #plainlink=\"{ configs }\">\n                    <instance-link\n                        :linkConfigs=\"configs\"\n                        @drop=\"onDropToLink($event, configs)\">\n                    </instance-link>\n                </template>\n        </j-jflow>\n        <div ref=\"hoverblock\" \n            :style=\"`transform: translate(${offsetX}px, ${offsetY}px)`\" \n            :class=\"$style.hoverblock\"\n             v-if=\"isHover\">\n            <ul>\n                <li v-for=\"l in logics\" :key=\"l.content\"\n                    @click=\"onSelectLogic(l)\">{{l.content}}</li>\n            </ul>\n        </div>\n      </div>\n      <!-- <div :class=\"$style.ast\">\n          <pre v-html=\"prettyJson(ast)\"></pre>\n      </div> -->\n  </div>\n</template>\n\n<script>\nimport { prettyPrintJson } from 'pretty-print-json';\nimport { LinearLayout, Lowcodelayout, Rectangle, Point, commonEventAdapter } from '@joskii/jflow';\n// import './logic-components/assignment.vue'; // resolve Circular dependencies with logic-node!!!\n// import logicNode from './logic-components/logic-node';\nimport variable from './components/variable.vue';\nimport ifStatement from './components/ifstatement.vue';\nimport start from './components/start.vue';\nimport end from './components/end.vue';\nimport endPoint from './components/endpoint.vue';\nimport switchComp from './components/switch.vue'; \nimport whileComp from './components/whilestatement.vue';\nimport CallLogicComp from './components/callLogic.vue';\nimport instanceLink from './components/instance-link.vue';\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\nfunction getPath(object, condition) {\n\n    function iter(o, p) {\n        if (typeof o === 'object') {\n            return Object.keys(o).some(function (k) {\n                return iter(o[k], p.concat(k));\n            });\n        }\n        if (condition(p[p.length - 1])) {\n            path = p;\n            return true;\n        }\n    }\n\n    var path = [];\n    iter(object, []);\n    return path.join('.');\n}\nconsole.log(commonEventAdapter)\nlet uniqueId = 0;\nlet uuuuid = 0;\nfunction getuuuuid() {\n    return uuuuid++;\n}\nfunction makeAst(number) {\n    const ast = { type: 'Root', body: [ { type: 'start', id: 'start' }, ], playground: [] }\n    function randomVariable() {\n        const id = getuuuuid();\n        return {\n            type: 'variable',\n            content: `variable-${id}`,\n            id: `variable${id}`,\n        };\n    }\n\n    function randomCallLogic() {\n        const id = getuuuuid();\n        return {\n            type: 'CallLogic',\n            id: `CallLogic-${id}`,\n            content: `CallLogic-${id}`,\n            params: [],\n        }\n    }\n    \n    function randomIFstatement() {\n        const id = getuuuuid();\n        return {\n            type: 'IfStatement',\n            content: `IfStatement-${id}`,\n            id: `IfStatement-${id}`,\n            consequent: [randomVariable()],\n            alternate: [randomVariable()],\n        }\n    }\n    let lastObj = ast.body;\n    function randomStateMachine() {\n        const p = Math.floor(Math.random() * 10);\n        let b;\n        switch (p) {\n            case 0:\n            case 1:\n                b = randomIFstatement();\n                lastObj.push(b);\n                const d = Math.floor(Math.random() * 2);\n                lastObj = (d === 0 ? b.consequent: b.alternate)\n                break;\n            case 2:\n            case 3:\n            case 4:\n            case 5:\n                b = randomCallLogic();\n                lastObj.push(b);\n                break;\n            case 6:\n            case 7:\n            case 8:\n            case 9:\n                b = randomVariable();\n                lastObj.push(b);\n                break;\n        }\n    }\n\n    while(number--){\n        randomStateMachine();\n    }\n    return ast;\n}\nconst astrandom = makeAst(1000)\n// console.log(astrandom)\nexport default {\n    components: {\n        'j-variable': variable,\n        'j-start': start,\n        'j-end': end,\n        'j-endpoint': endPoint,\n        'j-switch': switchComp,\n        'j-ifstatement': ifStatement,\n        'j-whilestatement': whileComp,\n        'j-calllogic': CallLogicComp,\n        instanceLink,\n    },\n     provide() {\n        return {\n            renderJFlow: this.renderJFlow,\n        }\n     },\n    data() {\n        const ast = {\n            type: 'Root',\n            body: [\n                // {\n                //             type: 'variable',\n                //             content: 'vvvkjhkjhvvvv',\n                //             id: 'logic5',\n                //         },\n                {\n                    type: 'start',\n                   \n                    id: 'start',\n                }, \n               {\n                    type: 'IfStatement',\n                    content: 'aaaa',\n                    id: 'logic1',\n                    consequent: [\n                        {\n                            type: 'variable',\n                            content: 'vvvkjhkjhvvvv',\n                            id: 'logic5',\n                        },\n                    ], \n                    alternate: [\n                        {\n                            type: 'IfStatement',\n                            content: 'ggggggg',\n                            id: 'logic6',\n                            consequent: [\n                                {\n                                    type: 'variable',\n                                    content: 'jkhvvvv',\n                                    id: 'logic77',\n                                },\n                            ], \n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'yuuo',\n                                    id: 'logic88',\n                                },\n                            ]\n                        },\n                        {\n                            type: 'CallLogic',\n                            id: 'CallLogic1',\n                            content: '',\n                            params: [],\n                        }\n                    ]\n                },\n                {\n                    type: 'SwitchStatement',\n                    id: 'swtch1',\n                    cases: [\n                        {\n                            type: 'SwitchCase',\n                            id: 'switchcase11',\n                            content: 'switchcase11',\n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'yuuo',\n                                    id: 'sc1111122',\n                                },\n                            ]\n                        },\n                        {\n                            type: 'SwitchCase',\n                            id: 'switchcase12',\n                            content: 'switchcase12',\n                            alternate: [\n                                {\n                                    type: 'variable',\n                                    content: 'asdfag',\n                                    id: 'sc12344455',\n                                },\n                            ],\n                            consequent: [\n                                {\n                                    type: 'variable',\n                                    content: 'dfhsdfg',\n                                    id: 'sc125444',\n                                },\n                            ],\n                        }\n                    ]\n                },\n                {\n                    type: 'WhileStatement',\n                    id: 'while1',\n                    content: 'while1',\n                    body: [\n                        // {\n                        //     type: 'variable',\n                        //     content: 'dfhsdfg',\n                        //     id: 'whiel1body1',\n                        // },\n                    ]\n                },\n                {\n                    type: 'end',\n                    id: 'end',\n                },\n            ],\n            playground: [],\n        };\n        const layout = new Lowcodelayout({\n            linkLength: 60,\n            ast,\n        });\n        this.ast = ast;\n        const configs = Object.freeze({\n            allowDrop: true,\n            layout,\n            initialZoom: 1,\n            minZoom: .2,\n            setInitialPosition(realboxX, realboxY, realboxW, realboxH, c_x, c_y, c_width, c_height) {\n                return {\n                    x: realboxX + c_width / 2,\n                    y: c_y\n                }\n            }\n        })\n        return {\n            configs,\n            isHover: false,\n            offsetX: 0,\n            offsetY: 0,\n            currentTarget: null,\n            prepareBody: [],\n            jflowloading: false,\n            logics: [{\n                content: 'aaa',\n                params: [{\n                    content: 'p1',\n                }],\n            }, {\n                content: 'vvvv',\n                params: [{\n                    content: 'p1',\n                }, {\n                    content: 'p2',\n                }],\n            }, {\n                content: 'sadasdf',\n                params: [{\n                    content: 'p1',\n                }],\n            },{\n                content: 'ggggg',\n                params: [{\n                    content: 'p1',\n                },{\n                    content: 'p2',\n                },{\n                    content: 'p3',\n                }],\n            }],\n            currentEditingTarget: null,\n        }\n    },\n    computed: {\n        inflowInstances() {\n            return this.ast.body.filter(b => !b.outflow)\n        }\n    },\n    watch: {\n        jflowloading(val) {\n            console.log(Date.now())\n            console.log(val);\n        }\n    },\n    methods: {\n        prettyJson() {\n            return prettyPrintJson.toHtml(this.ast);\n        },\n        onDragStartRectangle() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: {\n                    type: 'IfStatement',\n                    content: `IfStatement-rec${uniqueId ++}`,\n                    id: `IfStatement-rec${uniqueId ++}`,\n                    consequent: [], \n                    alternate: [],\n                    \n                }\n            })\n        },\n        onDragStartPoint() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: {\n                    type: 'variable',\n                    content: 'vvvvvvdasdfasfd',\n                    id: `logic-point${uniqueId ++}`,\n                }\n            })\n        },\n        onOutOfFlow(e, meta) {\n            const type = meta.parentIterateType;\n            const idx = meta.idx;\n            const [astnode] = meta.parent.source[type].splice(idx, 1);\n            this.ast.playground.push(astnode);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow();\n            meta.getJflowInstance().anchor = e.detail.point;    \n        },\n        onDrop(e) {\n            const astblock = e.detail.instance;\n            this.ast.playground.push(astblock);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow(() => {\n                const meta = this.configs.layout.findLayoutNode(astblock);\n                if(meta) {\n                     meta.getJflowInstance().anchor = e.detail.point;\n                }\n            });\n        },\n        onClick(e) {\n            const { currentTarget } = e;\n            const p = [ 0, currentTarget.height/2 ];\n            const gp = currentTarget.calculateToRealWorld(p)\n            const [ offsetX, offsetY ] = gp;\n            this.isHover = !this.isHover;\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n        },\n        onPressStart(configs) {\n            this.currentTarget = configs;\n        },\n        onPressEnd() {\n            this.currentTarget = null;\n        },\n        onDropToLink(e, linkConfigs) {\n            console.log(e, linkConfigs);\n            let node = e.detail.instance;\n            if(this.currentTarget) {\n                node.removeFromLayoutSource();\n                node = this.currentTarget;\n            }\n\n            linkConfigs.meta.from.linkSource(node, linkConfigs);\n            this.configs.layout.reOrder(this.ast);\n            this.$refs.jflow.reflow();\n        },\n        onToggleSelect(event, configs) {\n            const [offsetX, offsetY] = event;\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n            this.isHover = !this.isHover;\n            if(this.isHover) {\n                this.currentEditingTarget = configs\n            } else {\n                this.currentEditingTarget = null;\n            } \n        },\n        onSelectLogic(c) {\n            this.isHover = false\n            console.log(this.currentEditingTarget)\n            this.currentEditingTarget.content = c.content;\n            this.currentEditingTarget.params = c.params;\n        },\n        onClickNoWhere() {\n            this.isHover = false\n            this.currentEditingTarget = null;\n        },\n        onChangeContent($event, configs){\n            configs.content = $event.val;\n        },\n        renderJFlow() {\n            this.$refs.jflow.renderJFlow();\n        },\n    }\n}\n</script>\n\n<style module>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.wrapper{\n    width: 800px;\n    height: 600px;\n    border: 1px solid #ccc;\n}\n.body{\n    display: flex;\n    flex-direction: horizontal;\n}\n.sidebar{\n    width: 180px;\n    border: 2px solid gold;\n}\n.sidebar > div {\n    padding: 16px;\n    display: flex;\n    justify-content: center;\n}\n\n.sidebar > div > div {\n    cursor: move;\n}\n\n.sidebar > div > .rect {\n    width: 80px;\n    height: 50px;\n    background-color: green;\n    text-align: center;\n    line-height: 50px;\n}\n\n.sidebar > div > .part {\n    width: 80px;\n    height: 50px;\n    border: 2px solid #517cff;\n    border-radius: 8ox;\n    text-align: center;\n    line-height: 50px;\n}\n\n.sidebar > div > .circle {\n    width: 80px;\n    height: 80px;\n    border-radius: 100%;\n    background-color: hotpink;\n    text-align: center;\n    line-height: 80px;\n}\n.ast {\n    flex: 1;\n    border: 2px solid gold;\n}\n.hide{\n    -webkit-user-drag: none;\n    -khtml-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    -ms-user-drag: none;\n    user-drag: none;\n}\n.hoverblock{\n    position: absolute;\n    background: #fff;\n    width: 300px;\n    height: 300px;\n    border: 3px solid gold;\n    left: 0;\n    top: 0;\n    transform: translate(0, 0);\n}\n.hoverblock > ul > li{\n    cursor: pointer;\n}\n.hoverblock > ul > li:hover{\n    background: #eee;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=19ddc873&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport { JFlowVuePlugin } from '@joskii/jflow';\nimport App from './App.vue'\n\nVue.config.productionTip = false;\n// Vue.config.parsePlatformTagName = (name) => {\n//     if(name === 'math') {\n//         return 'nosense'\n//     }\n//     return name\n// }\nVue.use(JFlowVuePlugin);\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","export { default } from  \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logic.17805d7a.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app_3cl75\",\"wrapper\":\"App_wrapper_pE_0j\",\"body\":\"App_body_1uhyl\",\"sidebar\":\"App_sidebar_3dMLz\",\"rect\":\"App_rect_2g-OE\",\"part\":\"App_part_1uPSl\",\"circle\":\"App_circle_2pifB\",\"ast\":\"App_ast_3JyD2\",\"hide\":\"App_hide_1hYJ-\",\"hoverblock\":\"App_hoverblock_rjKeE\"};"],"sourceRoot":""}
{"version":3,"sources":["core/instance/shapes/capsule-vertical-group.js"],"names":["CapsuleVerticalGroup","configs","initGroup","ctx","renderGroup","save","_isMoving","globalAlpha","beginPath","anchor","x","y","hw","width","hh","height","topCenter","bottomCenter","left","right","moveTo","arc","Math","PI","lineTo","closePath","fillStyle","backgroundColor","fill","borderWidth","lineWidth","strokeStyle","borderColor","stroke","restore","point","condition","result","isHitGroup","yy","abs","rr","pow","Capsule","Object","assign","prototype","GroupMixin"],"mappings":"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","sourcesContent":["import Capsule from './capsule';\nimport GroupMixin from '../groupMixin';\n/**\n * 胶囊组单元\n * @description 组单元包含绘图栈，能够包裹内部单元，具有独立的坐标系，目前为中心对齐的坐标系\n * @constructor CapsuleVerticalGroup\n * @extends Capsule\n * @param {CapsuleGroup~CapsuleGroupConfigs} configs - 配置\n * @mixes GroupMixin\n */\nclass CapsuleVerticalGroup extends Capsule {\n    constructor(configs) {\n        super(configs)\n        this.initGroup(configs);\n    }\n\n    render(ctx) {\n        this.renderGroup(ctx, () => {\n            ctx.save();\n            if(this._isMoving){\n                ctx.globalAlpha = 0.6\n            }\n            ctx.beginPath();\n            const [x, y] = this.anchor;\n            const hw = this.width/2;\n            const hh = this.height/2;\n            const topCenter = y - hh + hw;\n            const bottomCenter = y + hh - hw;\n            const left = x - hw;\n            const right = x + hw;\n\n            ctx.moveTo(left, topCenter);\n            ctx.arc(x, topCenter, hw, -Math.PI, 0);\n            ctx.lineTo(right, bottomCenter);\n            ctx.arc(x, bottomCenter, hw, 0, Math.PI);\n            ctx.closePath();\n\n            ctx.fillStyle = this.backgroundColor;\n            ctx.fill();\n            if(this.borderWidth) {\n                ctx.lineWidth = this.borderWidth;\n                ctx.strokeStyle = this.borderColor;\n                ctx.stroke();\n            }\n            // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n            // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n            ctx.restore();\n        })\n    }\n\n    isHit(point, condition) {\n        const result = this.isHitGroup(point, condition);\n        if(result) {\n            return result;\n        }\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy =  Math.abs(hh - hw);\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const rr = hw * hw;\n        return (point[0] > x - hw\n            && point[0] < x + hw\n            && point[1] > y - yy\n            && point[1] < y + yy)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - topCenter, 2) < rr)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - bottomCenter, 2) < rr)\n    }\n}\nObject.assign(CapsuleVerticalGroup.prototype, GroupMixin);\nexport default CapsuleVerticalGroup;"],"file":"capsule-vertical-group.js"}
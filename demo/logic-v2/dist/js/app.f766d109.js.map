{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/poppups/menu-wrapper.vue?9d8f","webpack:///./src/poppups/op-menu.vue?b4be","webpack:///./src/poppups/add-menu.vue?1065","webpack:///./src/assets/datasearch.png","webpack:///./src/poppups/menu-wrapper.vue?222d","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/canvas.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/constance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/utils/functions.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/instance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/ghostNode.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/nodeWeakMap.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stack.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/stackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/layoutMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/messageMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/anime/animeMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/miniMap/minimap-mixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/flow/schedule.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/adapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/groupFactory.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/point.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rectangle.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/capsule-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/rhombus.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shapes/diamond-vertical.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/events/commonAdapter.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/base-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/text.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/image.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/shadowDom.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/poly-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/instance/bezier-link.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/linear-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-types/baseNode.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/low-code-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-node.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/layout/er-layout/er-layout.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/core/flow/index.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/StackMixin.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlow.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowInstance.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowLink.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/components/JFlowGroup.js","webpack:////Users/wangtao/Documents/My Workspace/JFlow/src/vue-plugin/JFlowPlugin.js","webpack:///./src/custom/utils.js","webpack:///./src/custom/logic-node.js","webpack:///./src/custom/logic-link.js","webpack:///./src/custom/switchcase-link.js","webpack:///./src/App.vue?3477","webpack:///./layout/utils.js","webpack:///./layout/base-node.js","webpack:///./layout/logic-layout.js","webpack:///./src/logic-node.vue?dea9","webpack:///./src/configs.js","webpack:///src/logic-node.vue","webpack:///./src/logic-node.vue?0113","webpack:///./src/logic-node.vue","webpack:///./src/start-node.vue?cfad","webpack:///src/start-node.vue","webpack:///./src/start-node.vue?e113","webpack:///./src/start-node.vue","webpack:///./src/endpoint-node.vue?5491","webpack:///src/endpoint-node.vue","webpack:///./src/endpoint-node.vue?b3f0","webpack:///./src/endpoint-node.vue","webpack:///./src/end-node.vue?f65b","webpack:///src/end-node.vue","webpack:///./src/end-node.vue?3223","webpack:///./src/end-node.vue","webpack:///./src/link-component/logic-link.vue?fc9f","webpack:///src/link-component/logic-link.vue","webpack:///./src/link-component/logic-link.vue?ee62","webpack:///./src/link-component/logic-link.vue","webpack:///./src/link-component/switch-link.vue?e71c","webpack:///./src/data/data.js","webpack:///src/link-component/switch-link.vue","webpack:///./src/link-component/switch-link.vue?864d","webpack:///./src/link-component/switch-link.vue","webpack:///./src/poppups/menu-wrapper.vue?018a","webpack:///src/poppups/menu-wrapper.vue","webpack:///./src/poppups/menu-wrapper.vue?7b46","webpack:///./src/poppups/menu-wrapper.vue","webpack:///./src/poppups/add-menu.vue?7da0","webpack:///src/poppups/add-menu.vue","webpack:///./src/poppups/add-menu.vue?4cf9","webpack:///./src/poppups/add-menu.vue","webpack:///./src/poppups/op-menu.vue?2ba8","webpack:///src/poppups/op-menu.vue","webpack:///./src/poppups/op-menu.vue?8557","webpack:///./src/poppups/op-menu.vue","webpack:///./src/poppups/content-hover.vue?9630","webpack:///src/poppups/content-hover.vue","webpack:///./src/poppups/content-hover.vue?0039","webpack:///./src/poppups/content-hover.vue","webpack:///./src/poppups/poppup.js","webpack:///./src/model/modal.vue?63c3","webpack:///src/model/modal.vue","webpack:///./src/model/modal.vue?0ae9","webpack:///./src/model/modal.vue","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/assets/While.png","webpack:///./src/App.vue?fd8d","webpack:///./src/poppups/content-hover.vue?3c4b","webpack:///./src/model/modal.vue?2371","webpack:///./src/assets/if.png","webpack:///./src/poppups/menu-wrapper.vue?ca98","webpack:///./src/model/modal.vue?bc73","webpack:///./src/assets/end.png","webpack:///./src/App.vue?8544","webpack:///./src/assets/SwitchCase.png","webpack:///./src/assets/callLogic.png","webpack:///./src/assets/Switch.png","webpack:///./src/assets/ForEach.png","webpack:///./src/assets/Assignment.png","webpack:///./src/poppups/add-menu.vue?2019","webpack:///./src/assets/callInterface.png","webpack:///./src/poppups/op-menu.vue?e926","webpack:///./src/poppups/content-hover.vue?74e3","webpack:///./src/assets/start.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","createCanvas","wrapper","canvas","document","createElement","ctx","getContext","getBoundingClientRect","width","height","left","top","style","userSelect","scale","devicePixelRatio","Math","floor","position","overflow","append","raw_width","raw_height","resizeCanvas","caheCanvas","caheCanvasctx","requestCacheCanvas","render","clearRect","save","restore","DIRECTION","RIGHT","BOTTOM","LEFT","TOP","SELF","APPROXIMATE","JFLOW_MODE","DEFAULT","LINKING","bounding_box","points","x","y","min_x","Infinity","min_y","max_x","max_y","idx","item","max","sqr","dist2","v","w","distToSegmentSquared","l2","min","minIntersectionBetweenNodes","dmsfrom","dmsto","meta","fromDir","fromP","toDir","toP","distMin","keys","forEach","df","pf","dt","pt","dist","assign","_resolveControlPoint","dir","spanx","spany","bezierPoints","p1","p2","start_dir","end_dir","minSpanX","minSpanY","abs","cp1","cp2","arrowspan","includes","isVerticalEnd","endX","endY","bezierPoint","P","q","u","angle","atan2","distToBezierSegmentSquared","b","Bezier","point","project","getBezierAngle","sx","sy","cp1x","cp1y","cp2x","cp2y","ex","ey","dx","pow","dy","PI","polylinePoints","isSelf","dirSpan","isVerticalStart","yp","xp","pmiddle","unshift","minusVec","absVec","vec","sqrt","scaleVec","makeRadiusFromVector","pbefore","pnext","radius","vec1","vec2","absVec1","absVec2","r1","r2","doOverlap","rec1","rec2","isPolyLineIntersectionRectange","polyline","rect","l0","l1","r0","cp","ishitKey","isInViewBox","Instance","configs","visible","_belongs","undefined","borderWidth","borderColor","backgroundColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","opacity","this","_jflow","_target","instance","link","_getMovingTarget","ishit","dispatchEvent","CustomEvent","detail","jflow","uniqueName","val","oldval","onEnterViewbox","onLeaveViewbox","k","anchor","getBoundingRect","customEvent","currentTarget","bubbles","bubbleEvent","calculateToRealWorld","belongs","recalculateUp","EventTarget","Node","_rawConfigs","absolutePosition","C","constructor","GhostNode","x2","y2","getMapObject","layoutNode","jflowNode","NodeWeakMap","_map","WeakMap","source","obj","set","has","delete","clear","NodeWeakMapMixin","initNodeWeakMap","source_Layout_Render_NodeMap","getRenderNodeBySource","mapping","getLayoutNodeBySource","_getMap","map","setLayoutNodeBySource","setRenderNodeBySource","InstanceStack","_currentHit","condition","movingTarget","_isMoving","currentConstraint","ignoreHit","isHit","_isHit","Array","StackMixin","instances","links","_stack","_linkStack","initStack","addToStack","replaceFromStack","target","index","findIndex","addToLinkStack","removeFromStack","removeFromLinkStack","emptyLink","resetChildrenPosition","addInstanceToLink","targetLink","from","to","_constuctor","__proto__","interateNodeStack","callback","LayoutMixin","_layout","initLayout","layout","dirty","getBoundingDimension","wold","hold","_getBoundingGroupRect","reflow","wnow","hnow","recalculate","staticCheck","MessageMixin","_message","sendMessage","msg","consumeMessage","readMessage","initAnime","anime_queue","__animeClock__","requestJFlowAnime","frameCallBack","console","log","enqueueAnime","_runAnime","animeMeta","start","cancel","_cancelAnime","_render","runAnime","scheduleRender","runAnimeFrame","timestamp","Date","now","elapsed","captureMap","padding","p_width","p_height","miniMap","addEventListener","_renderMap","pressDown","event","offsetX","offsetY","deltaX","deltaY","_onMoveMap","cacheMinimapCtx","pad2","pad","m_x","m_y","cachectx","setTransform","transform","br","NodeRenderTop","_cacheMapImageData","getImageData","putImageData","_getViewBox","beginPath","clip","fillStyle","fillRect","a","_recalculatePosition","initSchedule","__clock__","requestAnimationFrame","isFirstTime","__render","JFlowEvent","originEvent","getDefaultPlugin","wheel","preventDefault","ctrlKey","zoomHandler","panHandler","pointerdown","button","pressStartHandler","pointermove","pressMoveHandler","pointerup","stopPropagation","pressUpHanlder","contextmenu","contextMenuHanlder","dblclick","dblclickHandler","click","clickHanlder","EventAdapter","plugin","use","canvasHandlers","documentHandlers","ca","docObj","eventName","handler","handlerWrapperd","e","removeEventListener","GroupMixin","_setPadding","paddingTop","right","paddingRight","bottom","paddingBottom","paddingLeft","_setMargin","margin","marginTop","marginRight","marginBottom","marginLeft","_getCenter","mx","my","centerX","centerY","_shape","setAnchorX","setAnchorY","setAnchor","_calculatePointBack","gx","gy","cx","cy","calculateToCoordination","clone","h","ltx","lty","rbx","rby","getIntersectionsInFourDimension","calculateIntersection","x1","y1","vecx","vecy","theta1","theta2","dirx","diry","destroy","defaultShift","GroupFactory","jflowNodeConstructor","options","shapeShift","definedWidth","minWidth","definedHeight","lock","display","shapeWidth","shapeHeight","setConfig","getBoundingRectPoints","bbox","paddingWidth","paddingHeight","_paddingWidth","_paddingHeight","globalAlpha","translate","_currentp","checkHit","Point","type","arc","fill","lineWidth","strokeStyle","stroke","ratio","end","allIntersections","interDir","Rectangle","borderRadius","_setBorder","border","color","enable","xt","yt","moveTo","lineTo","quadraticCurveTo","closePath","Capsule","hw","hh","leftCenter","rightCenter","ww","rr","CapsuleVertical","topCenter","bottomCenter","yy","Rhombus","diagonalsV","diagonalsH","center","Diamond","side","_doCache","sinSIDE","sin","cosSIDE","cos","xx","_cachePoints","polygon","odd","DiamondVertical","topmiddle","bottommiddle","xleft","xright","BaseLink","viewbox","createInputElement","input","setAttribute","TEXT_ALIGN","CENTER","Text","content","fontFamily","fontSize","textColor","textAlign","textBaseline","lineHeight","indent","editable","maxWidth","ellipsis","placeholder","emptyWhenInput","editting","disabled","renderShadowText","_makeEditable","exec","inputElement","DOMwrapper","oldVal","calculateToRealWorldWithScalar","textIndent","outline","blurHandler","removeChild","keyUpHandler","keyCode","changed","focus","preventScroll","font","t_h","parseInt","measureText","actualBoundingBoxLeft","actualBoundingBoxRight","fontBoundingBoxAscent","fontBoundingBoxDescent","_textWidth","ellipsisContent","substring","fillText","Icon","image","onload","imageBounding","imageWidth","imageHeight","complete","drawImage","ShadowDom","domFactory","createDocument","_dom","container","pos","getRealWorldPosition","appendChild","Link","lineDash","approximate","p0","getCenter","_cacheAngle","_calculateAnchorPoints","region","Path2D","rx","ry","rw","rh","setLineDash","rotate","PIINRATIO","PolyLink","doubleLink","noArrow","pEnd","angleEnd","beginAngle","pLast","pNext","lastP","remainPoints","currentP","BezierLink","bezierCurveTo","hasFlip","LinearLayout","direction","gap","alignment","justify","group","stack","filter","absoluteStack","groupWidth","reduceHeight","lastInstanceHeight","allHeight","childAll","concat","reduceWidth","lastInstanceWidth","maxHeight","allWidth","withdraw","gapAverage","WIDTH","HEIGHT","_resolveAbsoluteAnchor","config","BaseNode","id","level","sequence","isFree","parent","parentIterateType","hasEndPoint","spanX","spanY","nodes","traverse","renderNode","Root","isroot","body","mapFunc","playgrounditerator","playground","reflowPreCalculate","preCallback","node","last","part","makeLink","IfStatement","consequent","alternate","isLocked","c_spanX","c_spanY","a_spanX","a_spanY","nextSequeence","Endpoint","lastc","lasta","linkMeta","SwitchStatement","cases","lastCase","cc","s_spanX","s_spanY","ForEachStatement","WhileStatement","anticlock","SwitchCase","TYPE_MAPPING","other","makeAST","__endpoint__","Constructor","LowcodeLayout","linkLength","treeItemDraggable","reOrder","ast","static","flowStack","flowLinkStack","root","isDraggable","currentTopNodeId","layoutMapping","vertical","horizontal","playgroundLayoutMapping","reflowBodyPreCalculate","reflowPlaygroundPreCalculate","topNode","_layoutNode","finded","find","nowAnchor","currentAnchor","verticalMapping","horizontalMapping","columnNumber","column","rowWidth","rows","rowNumber","row","rowHeight","columns","layoutMeta","reflowByMapping","values","ERProperty","isNavigation","ref","association","_selfLink","parentPropertyRef","getJflowInstance","doubleRef","ERNode","propertyList","navigationPropertyList","idProperty","nodeMap","idRef","isParentRef","parentRef","objectRef","targetProperty","toProperty","isObjectRef","makeER","_traverseProperty","ERLayout","erNodes","entityRelationship","er","idMap","id1","id2","fromMeta","lineMapping","size","computeNodeAnchor","recorded","relativeAnchor","diagramWeight","nx","ny","Group","CapsuleGroup","RhombusGroup","DiamondGroup","DiamondVerticalGroup","CapsuleVerticalGroup","PointGroup","ceil","JFlow","eventAdapter","dpr","initialZoom","initialPosition","setInitialPosition","maxZoom","minZoom","worldMargin","offeset","_lastState","dragging","processing","_lastDragState","moving","isInstanceDirty","isLinkDirty","cache","initialX","initialY","status","dragovering","_focus","_dragOverTarget","allowDrop","_tempNode","_tempLink","targets","dom","c_width","c_height","canvasMeta","actual_width","actual_height","_createEventHandler","scaleRatio","p_x","p_y","contentBox","w_ratio","h_ratio","align","realboxX","realboxY","realboxW","realboxH","_readyToRender","linkGen","offset","nowx","nowy","destroyListener","destroyPlainEventListener","unload","dragoverHandler","_onDragover","dropHandler","_onDrop","offsetPoint","topLayerPoint","linkStack","movingtarget","setMovingTargets","_dragCurrentData","oldIns","_targetLockOn","_processDragOver","Promise","resolve","then","payload","clientX","clientY","_zooming","cw","ch","newScale","amount","deltaScale","currentWidth","currentHeight","deltaWidth","deltaHeight","tX","tY","pX","pY","_panning","cursor","isDocument","_clearTarget","checkresult","removeTempDraggingInstance","bx1","bx2","px","by1","by2","py","cacheViewBox","_cacheViewBox","_resetTransform","_viewBox","_isInViewBox","AnimeMixin","MiniMapMixin","ScheduleMixin","provide","methods","_jflowInstance","onStackChangeHandler","mixins","renderJFlow","getJFlow","getInstance","props","default","loading","Boolean","genVueComponentKey","Function","renderNodes","renderLinks","vnodes","$scopedSlots","__vnode__","vnode","vlinks","k1","k2","k3","$slots","created","genNodeLinkMeta","loadingNodes","beforeDestroy","$emit","tl","linkPart","mountJFlow","tn","$mount","$el","$listeners","func","syncNodeLink","afterCallback","$nextTick","__renderInSchedule__","nameNode","builder","JFlowInstance","inject","watch","diffed","diff","news","deletes","vnew","vold","hnew","bindListeners","destroyed","isLink","fromInstance","toInstance","mounted","unwatch","$watch","refreshConfig","addToBelongStack","removeFromBelongStack","JSON","stringify","updated","JFLOW_NODES","JFLOW_LINKS","JFLOW_GROUPS","components","component","JFlowComponent","JFlowGroup","JFlowLink","componentPrefix","customElements","define","attachShadow","HTMLElement","install","Vue","prefixToUse","prefix","customInstance","customGroups","customLink","STARTLOOP","ENDLOOP","DIRECTION_ANGLE","gapX","gapY","bendPoint","fromCenter","segmentDistances","segs","reducedDist","getInteratableSegment","samepoint","LogicLink","iterateEndY","minGapY","showAdd","showDragover","tailPoint","tailRadius","arrowSegment","animePoint","anime","getIntersectionsSeprate","_cacheInteractableSegment","_cacheSegment","ItSegment","reducedArrowSegment","segid","segLenth","animeGap","animeOffset","atEnd","SwitchCaseLink","_vm","_h","$createElement","_c","_self","class","$style","sidebar","_l","concept","attrs","on","$event","onDragStart","onDragEnd","_v","_s","refInFor","literalRef","staticStyle","jflowloading","onClickCanvas","onDrop","onPressEnd","scopedSlots","_u","fn","onPressStart","onOutOfFlow","startAllAnimate","onDropToLink","minimap","poppups","selectionMeta","modal","modalMeta","domProps","layoutConstance","rowGap","onChange","columnGap","columnWidth","staticRenderFns","initLayoutConstance","localStorage","getItem","setLayoutConstance","setItem","getLayoutConstance","setSourceInitialAnchor","jflowInstance","isSwitch","getSourceAnchor","case0","getType","toNode","verticalFlow","list","lastNode","reducedStartSpan","reducedEndSpan","rootNode","Logic","layoutnode","rootLayoutNode","preCases","defaultCase","isDefault","lastInCase","currentCase","maxSpanX","lastFromDEFAULTCase","noConsquentFlag","roundCorner","endRow","syend","sxend","getNodes","IFstatement","minSpanColumn","spanConsquent","csx","csy","asx","asy","spanAlternate","LogicLayout","layoutAnchor","ax","ay","sourceLayoutNode","_g","onClickWrapper","onContextClick","setPointerCursor","onDblclick","onAfterResolveMovingTarget","onMouseEnter","onMouseLeave","iconGroup","imageConfig","textGroup","makeImage","icon","Image","src","ConceptIconMap","AssignmentIcon","ForEachIcon","SwitchIcon","WhileIcon","callInterfaceIcon","callLogicIcon","datasearchIcon","SwitchCaseIcon","ifIcon","ConceptIconURLMap","ConceptColorMap","ConceptSubColorMap","computed","selectionActive","isFocused","shadow","active","linkConfigs","onClick","onDragEnter","onDragOver","onDragOverEnd","isDragOver","uuid","getUid","genNode","directives","rawName","expression","_t","translateStyle","injectStyles","context","locals","title","addConceptNode","getList","subcolor","removeNode","getComponent","addMenu","opMenu","contentHover","functional","targetComponent","listeners","header","onClose","box","onChangeContent","_e","startNode","endNode","logicNode","EndPointNode","SwitchLink","poppupComp","modalComp","reOrderAndReflow","focusOn","closePopper","animate","setFocus","isOnFocus","cwidth","cheight","sourceData","conceptList","dataTransfer","productionTip","JFlowVuePlugin","LogicNodeGroup","App"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,oE,qBCCAW,EAAOD,QAAU,CAAC,KAAO,qBAAqB,MAAQ,sBAAsB,KAAO,qBAAqB,KAAO,uB,qBCA/GC,EAAOD,QAAU,CAAC,KAAO,sBAAsB,MAAQ,uBAAuB,KAAO,sBAAsB,KAAO,wB,qBCDlHC,EAAOD,QAAU,0gE,oCCAjB,W,wgDCkBO,SAAS+B,EAAaC,GACzB,IAAMC,EAASC,SAASC,cAAc,UAChCC,EAAMH,EAAOI,WAAW,MAC9B,EAAqCL,EAAQM,wBAArCC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAAQC,EAAvB,EAAuBA,KAAMC,EAA7B,EAA6BA,IAC7BT,EAAOU,MAAMJ,MAAQA,EAAQ,KAC7BN,EAAOU,MAAMH,OAASA,EAAS,KAC/BP,EAAOU,MAAMC,WAAa,OAC1B,IAAMC,EAAQjB,OAAOkB,iBASrB,OARAb,EAAOM,MAAQQ,KAAKC,MAAMT,EAAQM,GAClCZ,EAAOO,OAASO,KAAKC,MAAMR,EAASK,GAEjCb,IACCA,EAAQW,MAAMM,SAAW,WACzBjB,EAAQW,MAAMO,SAAW,SACzBlB,EAAQmB,OAAOlB,IAEZ,CACHA,SACAM,QACAC,SACAY,UAAWnB,EAAOM,MAClBc,WAAYpB,EAAOO,OACnBC,OACAC,MACAN,MACAS,SAID,SAASS,EAAarB,EAAQD,GACjC,MAAqCA,EAAQM,wBAArCC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAAf,EAAuBC,KAAvB,EAA6BC,IAC7BT,EAAOU,MAAMJ,MAAQA,EAAQ,KAC7BN,EAAOU,MAAMH,OAASA,EAAS,KAC/B,IAAMK,EAAQjB,OAAOkB,iBAGrB,OAFAb,EAAOM,MAAQQ,KAAKC,MAAMT,EAAQM,GAClCZ,EAAOO,OAASO,KAAKC,MAAMR,EAASK,GAC7B,CACHN,QACAC,SACAY,UAAWnB,EAAOM,MAClBc,WAAYpB,EAAOO,QAI3B,IAAMe,EAAarB,SAASC,cAAc,UAC1CoB,EAAWhB,MAAQ,EACnBgB,EAAWf,OAAS,EACpB,IAAMgB,EAAgBD,EAAWlB,WAAW,MACtCQ,EAAQjB,OAAOkB,iBAOd,SAASW,EAAmBC,GAC/BF,EAAcG,UAAU,EAAE,EAAE,EAAE,GAC9BH,EAAcI,OACdF,EAAOF,GACPA,EAAcK,UACdL,EAAcG,UAAU,EAAE,EAAE,EAAE,GAXlCH,EAAcX,MAAMA,EAAOA,G,wEC9DdiB,EAAY,CAErBC,MAAO,EAEPC,OAAQ,EAERC,KAAM,EAENC,IAAK,EAELC,KAAM,KAYH,IAAMC,EAAc,EAEdC,EAAa,CACtBC,QAAS,UACTC,QAAS,WCrBN,SAASC,EAAaC,GACzB,GAAqB,IAAlBA,EAAO/F,OACN,MAAO,CACH6D,MAAO,EACPC,OAAQ,EACRkC,EAAG,EACHC,EAAG,GAGX,IAAIC,EAAQC,IACRC,EAAQD,IACRE,GAASF,IACTG,GAASH,IACb,IAAI,IAAII,KAAOR,EAAQ,CACnB,IAAMS,EAAOT,EAAOQ,GACjBC,EAAK,GAAKN,IACTA,EAAQM,EAAK,IAGbA,EAAK,GAAKH,IACVA,EAAQG,EAAK,IAGbA,EAAK,GAAKJ,IACVA,EAAQI,EAAK,IAGbA,EAAK,GAAKF,IACVA,EAAQE,EAAK,IAGrB,MAAO,CAEH3C,MAAOQ,KAAKoC,IAAIJ,EAAQH,EAAO,IAC/BpC,OAAQO,KAAKoC,IAAIH,EAAQF,EAAO,IAChCJ,EAAGE,EACHD,EAAGG,GAIX,SAASM,EAAIV,GACT,OAAOA,EAAIA,EAER,SAASW,EAAMC,EAAGC,GACrB,OAAOH,EAAIE,EAAE,GAAKC,EAAE,IAAMH,EAAIE,EAAE,GAAKC,EAAE,IAMpC,SAASC,EAAqB9D,EAAG4D,EAAGC,GACvC,IAAME,EAAKJ,EAAMC,EAAGC,GACpB,GAAW,IAAPE,EAAU,OAAOJ,EAAM3D,EAAG4D,GAC9B,IAAItE,IAAMU,EAAE,GAAK4D,EAAE,KAAOC,EAAE,GAAKD,EAAE,KAAO5D,EAAE,GAAK4D,EAAE,KAAOC,EAAE,GAAKD,EAAE,KAAOG,EAE1E,OADAzE,EAAI+B,KAAKoC,IAAI,EAAGpC,KAAK2C,IAAI,EAAG1E,IACrBqE,EAAM3D,EAAG,CAAE4D,EAAE,GAAKtE,GAAKuE,EAAE,GAAKD,EAAE,IAAKA,EAAE,GAAKtE,GAAKuE,EAAE,GAAKD,EAAE,MAG9D,SAASK,EAA4BC,EAASC,GACjD,IAAMC,EAAO,CACTC,QAAS,KACTC,MAAO,KACPC,MAAO,KACPC,IAAK,KACLC,QAAStB,KAwBb,OAtBAlG,OAAOyH,KAAKR,GAASS,SAAQ,SAAAC,GACzB,IAAKA,IAAQxC,EAAUK,KAAvB,CAGA,IAAIoC,EAAKX,EAAQU,GACjB3H,OAAOyH,KAAKP,GAAOQ,SAAQ,SAAAG,GACvB,IAAKA,IAAQ1C,EAAUK,KAAvB,CAGA,IAAIsC,EAAKZ,EAAMW,GACTE,EAAOrB,EAAMkB,EAAIE,GACpBC,EAAOZ,EAAKK,SACXxH,OAAOgI,OAAOb,EAAM,CAChBK,QAASO,EACTX,SAAUO,EACVN,MAAOO,EACPN,OAAQO,EACRN,IAAKO,YAKdX,EAmCX,SAASc,EAAqBlF,EAAGmF,EAAKC,EAAOC,GACzC,OAAGF,IAAQ/C,EAAUI,IACV,CAACxC,EAAE,GAAIA,EAAE,GAAGqF,GAEpBF,IAAQ/C,EAAUE,OACV,CAACtC,EAAE,GAAIA,EAAE,GAAGqF,GAEpBF,IAAQ/C,EAAUG,KACV,CAACvC,EAAE,GAAGoF,EAAOpF,EAAE,IAEvBmF,IAAQ/C,EAAUC,MACV,CAACrC,EAAE,GAAGoF,EAAOpF,EAAE,SAD1B,EAKG,SAASsF,EAAaC,EAAIC,GAAoF,IAAhFC,EAAgF,uDAApErD,EAAUI,IAAKkD,EAAqD,uDAA3CtD,EAAUI,IAAKmD,EAA4B,uDAAjB,EAAGC,EAAc,uDAAH,EACxGR,EAAQ/D,KAAKoC,IAAIpC,KAAKwE,KAAKN,EAAG,GAAKC,EAAG,IAAI,GAAIG,GAC9CN,EAAQhE,KAAKoC,IAAIpC,KAAKwE,KAAKN,EAAG,GAAKC,EAAG,IAAI,GAAII,GAC9CE,EAAMZ,EAAqBK,EAAIE,EAAWL,EAAOC,GACjDU,EAAMb,EAAqBM,EAAIE,EAASN,EAAOC,GAC/CW,EAAY,CAAC5D,EAAUI,IAAKJ,EAAUG,MAAM0D,SAASP,IAAY,EAAI,EACrEQ,EAAgB,CAAC9D,EAAUI,IAAKJ,EAAUE,QAAQ2D,SAASP,GAC3DS,EAAOD,EAAgBV,EAAG,GAAKA,EAAG,GAAKQ,EACvCI,EAAOF,EAAgBV,EAAG,GAAKQ,EAAYR,EAAG,GACpD,+BACOM,GADP,eAEOC,GAFP,CAGII,EAAMC,IAGP,SAASC,EAAY/G,EAAGgH,GAC3B,IAAMC,EAAI,EAAEjH,EACN0D,EAAIuD,EAAEA,EAAEA,EAAED,EAAE,GAAK,EAAEC,EAAEA,EAAEjH,EAAEgH,EAAE,GAAK,EAAEC,EAAEjH,EAAEA,EAAEgH,EAAE,GAAKhH,EAAEA,EAAEA,EAAEgH,EAAE,GACvDrD,EAAIsD,EAAEA,EAAEA,EAAED,EAAE,GAAK,EAAEC,EAAEA,EAAEjH,EAAEgH,EAAE,GAAK,EAAEC,EAAEjH,EAAEA,EAAEgH,EAAE,GAAKhH,EAAEA,EAAEA,EAAEgH,EAAE,GACvDE,EAAID,EAAEA,GAAGD,EAAE,GAAGA,EAAE,IAAM,EAAEhH,EAAEiH,GAAGD,EAAE,GAAGA,EAAE,IAAMhH,EAAEA,GAAGgH,EAAE,GAAGA,EAAE,IACtD1C,EAAI2C,EAAEA,GAAGD,EAAE,GAAGA,EAAE,IAAM,EAAEhH,EAAEiH,GAAGD,EAAE,GAAGA,EAAE,IAAMhH,EAAEA,GAAGgH,EAAE,GAAGA,EAAE,IACxDG,EAAQpF,KAAKqF,MAAM9C,EAAG4C,GAK1B,MAAO,CAACxD,EAAGC,EAAGwD,GAOX,SAASE,EAA2B3G,EAAG+C,GAC1C,IAAM6D,EAAI,eAAIC,YAAP,eAAiB9D,IAElB+D,EAAQF,EAAEG,QAAQ,CAAE/D,EAAGhD,EAAE,GAAIiD,EAAGjD,EAAE,KAClCrB,EAAIgF,EAAM3D,EAAG,CAAE8G,EAAM9D,EAAG8D,EAAM7D,IACpC,OAAOtE,EAGJ,SAASqI,EAAe1H,EAAG2H,EAAIC,EAAIC,EAAMC,EAAMC,EAAMC,EAAMC,EAAIC,GACpE,IAAIC,EAAKpG,KAAKqG,IAAI,EAAEpI,EAAG,IAAI6H,EAAKF,GAAM,EAAE3H,GAAG,EAAEA,IAAI+H,EAAKF,GAAQ7H,EAAIA,GAAKiI,EAAKF,GACxEM,EAAKtG,KAAKqG,IAAI,EAAEpI,EAAG,IAAI8H,EAAKF,GAAM,EAAE5H,GAAG,EAAEA,IAAIgI,EAAKF,GAAQ9H,EAAIA,GAAKkI,EAAKF,GAC5E,OAAQjG,KAAKqF,MAAMe,EAAIE,GAAM,GAAItG,KAAKuG,GAsBjC,SAASC,EAAetC,EAAIC,GAA8F,IAA1FC,EAA0F,uDAA9ErD,EAAUI,IAAKkD,EAA+D,uDAArDtD,EAAUI,IAAKmD,EAAsC,uDAA3B,GAAIC,EAAuB,uDAAZ,GAAIkC,EAAQ,uCACvHC,EAAU1G,KAAKwE,IAAIJ,EAAYC,GAG/BsC,EAAmBvC,IAAcrD,EAAUI,KAAOiD,IAAcrD,EAAUE,OAC5ES,EAAS,GACb,OAAQgF,GACJ,KAAK,EAED,GAAGtC,IAAcrD,EAAUI,IAAK,CAC5B,IAAMS,EAAI5B,KAAK2C,IAAIuB,EAAG,GAAIC,EAAG,IACvByC,EAAKhF,EAAI2C,EACf7C,EAAOzF,KAAK,CAACiI,EAAG,GAAI0C,IACpBlF,EAAOzF,KAAK,CAACkI,EAAG,GAAIyC,IAExB,GAAGxC,IAAcrD,EAAUE,OAAQ,CAC/B,IAAMW,EAAI5B,KAAKoC,IAAI8B,EAAG,GAAIC,EAAG,IACvByC,EAAKhF,EAAI2C,EACf7C,EAAOzF,KAAK,CAACiI,EAAG,GAAI0C,IACpBlF,EAAOzF,KAAK,CAACkI,EAAG,GAAIyC,IAExB,GAAGxC,IAAcrD,EAAUG,KAAM,CAC7B,IAAMS,EAAI3B,KAAK2C,IAAIuB,EAAG,GAAIC,EAAG,IACvB0C,EAAKlF,EAAI2C,EACf5C,EAAOzF,KAAK,CAAC4K,EAAI3C,EAAG,KACpBxC,EAAOzF,KAAK,CAAC4K,EAAI1C,EAAG,KAExB,GAAGC,IAAcrD,EAAUC,MAAO,CAC9B,IAAMW,EAAI3B,KAAKoC,IAAI8B,EAAG,GAAIC,EAAG,IACvB0C,EAAKlF,EAAI2C,EACf5C,EAAOzF,KAAK,CAAC4K,EAAI3C,EAAG,KACpBxC,EAAOzF,KAAK,CAAC4K,EAAI1C,EAAG,KAExB,MACJ,KAAK,EACL,KAAK,EACD,GAAGsC,EACKE,GAKAjF,EAAOzF,KAAK,CAACiI,EAAG,GAAIA,EAAG,GAAKK,IAC5B7C,EAAOzF,KAAK,CAACkI,EAAG,GAAKG,EAAUJ,EAAG,GAAKK,IACvC7C,EAAOzF,KAAK,CAACkI,EAAG,GAAKG,EAAUH,EAAG,OANlCzC,EAAOzF,KAAK,CAACiI,EAAG,GAAKI,EAAUJ,EAAG,KAClCxC,EAAOzF,KAAK,CAACiI,EAAG,GAAKI,EAAUH,EAAG,GAAKI,IACvC7C,EAAOzF,KAAK,CAACkI,EAAG,GAAIA,EAAG,GAAKI,SAM7B,CACH,IAAMkB,EAAQkB,EAAkB,CAACzC,EAAG,GAAIC,EAAG,IAAK,CAACA,EAAG,GAAID,EAAG,IAC3DxC,EAAOzF,KAAKwJ,GAEhB,MACJ,KAAK,EACD,IAAMqB,EAAU,EACX5C,EAAG,GAAKC,EAAG,IAAI,EAAIA,EAAG,IACtBD,EAAG,GAAKC,EAAG,IAAI,EAAIA,EAAG,IAExBwC,GACCjF,EAAOzF,KAAK,CAACiI,EAAG,GAAI4C,EAAQ,KAC5BpF,EAAOzF,KAAK,CAACkI,EAAG,GAAI2C,EAAQ,OAE5BpF,EAAOzF,KAAK,CAAC6K,EAAQ,GAAI5C,EAAG,KAC5BxC,EAAOzF,KAAK,CAAC6K,EAAQ,GAAI3C,EAAG,MAEhC,MACJ,QACI,MAIR,OAFAzC,EAAOqF,QAAQ7C,GACfxC,EAAOzF,KAAKkI,GACLzC,EAGX,SAASsF,EAAS9C,EAAIC,GAClB,MAAO,CAACD,EAAG,GAAKC,EAAG,GAAID,EAAG,GAAKC,EAAG,IAGtC,SAAS8C,EAAOC,GACZ,OAAOlH,KAAKmH,KAAKD,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAGpD,SAASE,EAASF,EAAKpH,GACnB,MAAO,CAACoH,EAAI,GAAKpH,EAAOoH,EAAI,GAAKpH,GAG9B,SAASuH,EAAqBC,EAAS3I,EAAG4I,EAAOC,GACpD,IAAMC,EAAOT,EAASrI,EAAG2I,GACnBI,EAAOV,EAASrI,EAAG4I,GACnBI,EAAUV,EAAOQ,GACjBG,EAAUX,EAAOS,GACvB,IAAIC,IAAYC,EACZ,MAAO,CACH1D,GAAI,KACJC,GAAI,MAGZ,IAAM0D,EAAKT,EAASK,EAAMD,EAAOG,GAC3BG,EAAKV,EAASM,EAAMF,EAAOI,GACjC,MAAO,CACH1D,GAAI8C,EAASrI,EAAGkJ,GAChB1D,GAAI6C,EAASrI,EAAGmJ,IAIjB,SAASC,EAAUC,EAAMC,GAC5B,OAAID,EAAK,IAAMA,EAAK,IAAMA,EAAK,IAAMA,EAAK,IACtCC,EAAK,IAAMA,EAAK,IAAMA,EAAK,IAAMA,EAAK,MAKjCD,EAAK,IAAMC,EAAK,IACbD,EAAK,IAAMC,EAAK,IAChBD,EAAK,IAAMC,EAAK,IAChBD,EAAK,IAAMC,EAAK,IAGzB,SAASC,EAA+BC,EAAUC,GACrD,IAAIzJ,EAAIwJ,EAAS,GACbhL,EAAIgL,EAASxM,OACbF,EAAI,EACR,iBAAyB2M,EAAzB,GAAOC,EAAP,KAAWC,EAAX,KAAeC,EAAf,KAAmBV,EAAnB,KACA,MAAOpM,EAAI0B,EAAG,CACV,IAAMqL,EAAKL,EAAS1M,GACpB,GAAGkD,EAAE,KAAO6J,EAAG,IAEX,GAAG7J,EAAE,GAAK4J,GAAM5J,EAAE,GAAK0J,KACb1J,EAAE,GAAKkJ,GAAMW,EAAG,GAAKX,GAAQlJ,EAAE,GAAK2J,GAAME,EAAG,GAAKF,GACpD,OAAO,OAIf,GAAG3J,EAAE,GAAKkJ,GAAMlJ,EAAE,GAAK2J,KACb3J,EAAE,GAAK4J,GAAMC,EAAG,GAAKD,GAAQ5J,EAAE,GAAK0J,GAAMG,EAAG,GAAKH,GACpD,OAAO,EAGnB1J,EAAI6J,EACJ/M,IAEJ,OAAO,E,4BC9VLgN,G,oBAAW3K,OAAO,UAClB4K,EAAc5K,OAAO,eAmBrB6K,E,wDACF,aAA0B,MAAdC,EAAc,uDAAJ,GAAI,8BACtB,eACAhN,OAAOgI,OAAPhI,OAAA,OAAAA,CAAA,GAAoBgN,GAIpB,EAAKC,SAAU,EAEf,EAAKC,cAAWC,EAChB,EAAKN,IAAY,EAGjB,EAAKO,YAAmBJ,EAAQI,aAAe,EAE/C,EAAKC,YAAmBL,EAAQK,aAAe,cAE/C,EAAKC,gBAAmBN,EAAQM,iBAAmB,cAEnD,EAAKC,YAAmBP,EAAQO,YAEhC,EAAKC,WAAmBR,EAAQQ,YAAc,EAE9C,EAAKC,cAAmBT,EAAQS,eAAiB,EAEjD,EAAKC,cAAmBV,EAAQU,eAAiB,EAEjD,EAAKC,QAAmBX,EAAQW,SAAW,EA1BrB,E,iDAgC1B,WACI,OAAOC,QAAUA,KAAKC,OAAOC,QAAQC,UAAYH,KAAKC,OAAOC,QAAQE,Q,qBAKzE,WACI,OAAOJ,OAASA,KAAKC,OAAOI,qB,kBAKhC,WACI,OAAOL,KAAKf,I,IAShB,SAAWqB,GACJN,KAAKf,KAAcqB,GAelBN,KAAKO,cAAc,IAAIC,YAAYF,EAAQ,aAAc,aAAe,CACpEG,OAAQ,CACJN,SAAUH,KACVU,MAAOV,KAAKC,WAIxBD,KAAKf,GAAYqB,I,kBA3BrB,WACI,MAAoC,UAA7BN,KAAKV,SAASqB,WAAyBX,KAAKV,SAAWU,KAAKV,SAASW,S,uBA6BhF,WACI,OAAOD,KAAKd,K,wBAGhB,SAAiB0B,GACb,IAAMC,EAASb,KAAKd,GACjB0B,IAAQC,IACJD,EACCZ,KAAKc,iBAELd,KAAKe,kBAGbf,KAAKd,GAAe0B,I,4BAMxB,c,4BAOA,c,uBAQA,SAAUxB,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,S,oBAQ9B,SAAOnL,GACH,KAAM,6B,mBAOV,SAAMoG,GACF,KAAM,4B,6BAMV,WACI,KAAM,sC,mCAEV,WACI,KAAM,4C,6CAUV,WACI,KAAM,sD,uBAQV,WACI,OAAO+D,KAAKiB,S,kCAQhB,WACI,IAAMrC,EAAOuB,SAASe,kBAClB3I,EAAQD,IACRG,GAASH,IACTD,EAAQC,IACRE,GAASF,IAOb,OANAsG,EAAK9E,SAAQ,SAAAmC,GACTxD,EAAQjC,KAAKoC,IAAIH,EAAOwD,EAAM,IAC9B1D,EAAQ/B,KAAK2C,IAAIZ,EAAO0D,EAAM,IAC9BzD,EAAQhC,KAAKoC,IAAIJ,EAAOyD,EAAM,IAC9B5D,EAAQ7B,KAAK2C,IAAId,EAAO4D,EAAM,OAE3B,CACHhG,OAAQwC,EAAQF,EAChBvC,MAAOwC,EAAQH,K,yBAOvB,SAAY8I,GACRA,EAAYV,OAAOW,cAAgBpB,KACnCA,KAAKO,cAAcY,GAChBA,EAAYV,OAAOY,UACfrB,KAAKV,SAASgC,YACbtB,KAAKV,SAASgC,YAAYH,GAE1BnB,KAAKV,SAASiB,cAAcY,M,kCAUxC,SAAqBlF,GACjB,OAAG+D,KAAKV,UAAYU,KAAKV,SAASiC,qBACvBvB,KAAKV,SAASiC,qBAAqBtF,GAEnCA,I,4CAIf,SAA+B9J,GAC3B,OAAO6N,KAAKC,OAAO3J,MAAQnE,I,2BAY/B,WACO6N,KAAKwB,SACJxB,KAAKwB,QAAQC,kB,qBAIrB,WACIzB,KAAKV,cAAWC,M,kBA/ODmC,cAoPRvC,ICpPTwC,E,wDACF,aAA0B,MAAdvC,EAAc,uDAAJ,GAAI,8BACtB,cAAMA,GACN,EAAKwC,YAAcxC,EAGnB,EAAK6B,OAAmB7B,EAAQ6B,QAAU,CAAC,EAAG,GAE9C,EAAKY,iBAAmBzC,EAAQyC,iBAPV,E,gDAU1B,SAAUzC,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,GAClB,EAAKY,YAAYZ,GAAK5B,EAAQ4B,S,wBAI1C,SAAW7I,GACP6H,KAAKiB,OAAO,GAAK9I,I,wBAErB,SAAWC,GACP4H,KAAKiB,OAAO,GAAK7I,I,uBAErB,SAAUD,EAAGC,GACT4H,KAAKiB,OAAO,GAAK9I,EACjB6H,KAAKiB,OAAO,GAAK7I,I,mBAMrB,WACI,IAAM0J,EAAI9B,KAAK+B,YACTtN,EAAI,IAAIqN,EAAE9B,KAAK4B,aAErB,OADAnN,EAAE4K,QAAUW,KAAKX,QACV5K,M,GArCI0K,GAyCJwC,IC7DTK,E,wDACF,WAAY5C,GAAS,0CACXA,G,6CAGV,SAAOvJ,M,mBAEP,SAAMoG,GACF,OAAO,I,mCAEX,SAAsBA,GAClB,OAAO+D,KAAKiB,S,6CAGhB,WAAkC,MAC9B,iBAAiBjB,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACA,6BACK3K,EAAUC,MAAS,CAACyK,EAAIC,IAD7B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAIC,IAF7B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,IAH7B,iBAIK3K,EAAUI,IAAS,CAACsK,EAAIC,IAJ7B,M,GAhBgBP,GAyBTK,I,8BC5Bf,SAASG,IACL,MAAO,CACHC,gBAAY7C,EACZ8C,eAAW9C,G,IAGb+C,E,WACF,aAAc,uBACVtC,KAAKuC,KAAO,IAAIC,Q,0CAGpB,SAAIC,GACA,OAAOzC,KAAKuC,KAAKnO,IAAIqO,K,iBAGzB,SAAIA,GACA,IAAMC,EAAMP,IAEZ,OADAnC,KAAKuC,KAAKI,IAAIF,EAAQC,GACfA,I,iBAGX,SAAID,GACA,OAAOzC,KAAKuC,KAAKK,IAAIH,K,oBAGzB,SAAOA,GACHzC,KAAKuC,KAAKM,OAAOJ,K,mBAGrB,WACIzC,KAAKuC,KAAKO,Y,KAILC,EAAmB,CAC5BC,gBAD4B,WAExBhD,KAAKiD,6BAA+B,IAAIX,GAE5CY,sBAJ4B,SAINT,GAClB,IAAMU,EAAUnD,KAAKiD,6BAA6B7O,IAAIqO,GACtD,GAAGU,EACC,OAAOA,EAAQd,WAIvBe,sBAX4B,SAWNX,GAClB,IAAMU,EAAUnD,KAAKiD,6BAA6B7O,IAAIqO,GACtD,GAAGU,EACC,OAAOA,EAAQf,YAIvBiB,QAlB4B,SAkBpBZ,GACJ,IACIC,EADEY,EAAMtD,KAAKiD,6BAOjB,OAJIP,EADDY,EAAIV,IAAIH,GACDa,EAAIlP,IAAIqO,GAERa,EAAIX,IAAIF,GAEXC,GAEXa,sBA5B4B,SA4BNd,EAAQL,GAC1B,IAAIM,EAAM1C,KAAKqD,QAAQZ,GACvBC,EAAIN,WAAaA,GAErBoB,sBAhC4B,SAgCNf,EAAQtC,GAC1B,IAAIuC,EAAM1C,KAAKqD,QAAQZ,GACvBC,EAAIL,UAAYlC,IChElBsD,G,4EACF,aAAc,oCACV,eACA,EAAKC,YAAc,KAFT,E,6CAQd,SAAO7N,EAAK8N,GACR,IAAIC,EACJ5D,KAAKlG,SAAQ,SAAAqG,GACNA,EAAS0D,UACRD,EAAezD,GAGhBA,EAASd,SAAasE,IAAaA,EAAUxD,KAC5CtK,EAAIwB,OAKJ8I,EAAShJ,OAAOtB,GAChBA,EAAIyB,cAGTsM,IACC/N,EAAIwB,OAKJuM,EAAazM,OAAOtB,GACpBA,EAAIyB,a,sBAgBZ,SAAS2E,EAAO0H,EAAWG,GACvB,IAAI7R,EAAI+N,KAAK7N,OAAS,EACtB,MAAMF,GAAK,EAAG,CACV,IAAMkO,EAAWH,KAAK/N,GAEtB,GAAGkO,EAASd,UAAYc,EAAS4D,UAAW,CACxC,GAAGJ,GAAaA,EAAUxD,GAAW,CACjClO,IACA,SAEJ,GAAG6R,IAAsBA,EAAkB3D,GAAW,CAClDlO,IACA,SAEJ,IAAMqO,EAAQH,EAAS6D,MAAM/H,EAAO0H,GAEpC,GADAxD,EAAS8D,SAAW3D,EACjBA,EAOC,OANGN,KAAK0D,cAAgBvD,IACjBH,KAAK0D,cACJ1D,KAAK0D,YAAYO,QAAS,GAE9BjE,KAAK0D,YAAcvD,GAEH,mBAAVG,EACCA,EAEJH,EAIflO,IAGJ,OADA+N,KAAK0D,YAAc,KACZ,O,mCAMX,WACI,IAAMxL,EAAS,GAQf,OAPA8H,KAAKlG,SAAQ,SAAAqG,GACT,GAAGA,EAASd,UAAYc,EAAS0B,iBAAkB,CAC/C,IAAMjD,EAAOuB,EAASe,kBACtBhJ,EAAOzF,KAAK,CAACmM,EAAK,GAAIA,EAAK,KAC3B1G,EAAOzF,KAAK,CAACmM,EAAK,GAAIA,EAAK,SAG5B1G,I,iCAOX,WACI,IAAMA,EAAS,GAMf,OALA8H,KAAKlG,SAAQ,SAAAqG,GACNA,EAASd,UAAYc,EAAS0B,kBAC7B3J,EAAOzF,KAAK0N,EAASc,WAGtB/I,M,kBA/GagM,SAmHbT,KChHTU,GAAa,CAEfC,UAAW,GAEXC,MAAO,GAEPC,OAAQ,KAERC,WAAY,KAKZC,UAbe,YAaK,WAAR7S,EAAQ,EAARA,KACRqO,KAAKsE,OAAS,IAAIb,GAClBzD,KAAKuE,WAAa,IAAId,GAClB9R,IACJqO,KAAKoE,UAAYzS,EAAKyS,UACtBpE,KAAKqE,MAAQ1S,EAAK0S,MAClBrE,KAAKoE,UAAUtK,SAAQ,SAAA7H,GACnB,EAAKqS,OAAO7R,KAAKR,GACjBA,EAAEqN,SAAW,KAEjBU,KAAKqE,MAAMvK,SAAQ,SAACsG,GAChB,EAAKmE,WAAW9R,KAAK2N,GACrBA,EAAKd,SAAW,OAOxBmF,WAhCe,SAgCJtE,GACPA,EAASb,SAAWU,KACpBA,KAAKsE,OAAO7R,KAAK0N,IAQrBuE,iBA1Ce,SA0CEC,EAAQxE,GACrB,IAAMyE,EAAQ5E,KAAKsE,OAAOO,WAAU,SAAA5S,GAAC,OAAIA,IAAM0S,KAC/C3E,KAAKsE,OAAOjR,OAAOuR,EAAO,EAAGzE,GAC7BwE,EAAOrF,SAAW,KAClBa,EAASb,SAAWU,MAOxB8E,eArDe,SAqDA1E,GACXA,EAAKd,SAAWU,KAChBA,KAAKuE,WAAW9R,KAAK2N,IAMzB2E,gBA7De,SA6DCJ,GAEZ,IAAMC,EAAQ5E,KAAKsE,OAAOO,WAAU,SAAA5S,GAAC,OAAIA,IAAM0S,KAC/C3E,KAAKsE,OAAOjR,OAAOuR,EAAO,IAO9BI,oBAvEe,SAuEKL,GAChB,IAAMC,EAAQ5E,KAAKuE,WAAWM,WAAU,SAAA5S,GAAC,OAAIA,IAAM0S,KACnD3E,KAAKuE,WAAWlR,OAAOuR,EAAO,IAGlCK,UA5Ee,WA6EXjF,KAAKuE,WAAa,IAAId,IAK1ByB,sBAlFe,WAmFXlF,KAAKsE,OAAOxK,SAAQ,SAAA7H,GAChBA,EAAEgP,OAAS,CAAC,EAAE,OAItBkE,kBAxFe,SAwFGC,EAAYjF,GAC1BH,KAAKyE,WAAWtE,GAChB,IAAQkF,EAAaD,EAAbC,KAAMC,EAAOF,EAAPE,GACRV,EAAQ5E,KAAKuE,WAAWM,WAAU,SAAAlR,GAAC,OAAIA,IAAMyR,KAC7CG,EAAcH,EAAWI,UAAUzD,YACnCjD,EAAK,IAAIyG,EAAY,CACvBF,OACAC,GAAInF,IAERrB,EAAGQ,SAAWU,KACd,IAAM9G,EAAK,IAAIqM,EAAY,CACvBF,KAAMlF,EACNmF,OAEJpM,EAAGoG,SAAWU,KAEdA,KAAKuE,WAAWlR,OAAOuR,EAAO,EAAG9F,EAAI5F,IAOzCuM,kBA/Ge,SA+GGC,GACd1F,KAAKsE,OAAOxK,SAAQ,SAAAqG,GAChBuF,EAASvF,QAUNgE,MCxHTwB,GAAc,CAEhBC,QAAS,KAKTC,WAPgB,SAOLzG,GACPY,KAAK4F,QAAUxG,EAAQ0G,QAK3BrE,cAbgB,WAcZ,IAAIsE,GAAQ,EACZ,GAAG/F,KAAKgG,qBAAsB,CAC1B,MAAsChG,KAAKgG,uBAA5BC,EAAf,EAAQjQ,MAAqBkQ,EAA7B,EAAqBjQ,OAClB+J,KAAKkF,uBACJlF,KAAKkF,wBAENlF,KAAKmG,uBACJnG,KAAKmG,wBAETnG,KAAKoG,SACFpG,KAAKmG,uBACJnG,KAAKmG,wBAET,MAAsCnG,KAAKgG,uBAA5BK,EAAf,EAAQrQ,MAAqBsQ,EAA7B,EAAqBrQ,OACrB8P,EAASE,IAASI,GAAQH,IAASI,OAEnCtG,KAAKoG,SAENpG,KAAKV,UAAYyG,GAChB/F,KAAKV,SAASmC,iBAMtB8E,YAvCgB,WAwCZvG,KAAKoG,SACFpG,KAAKmG,uBACJnG,KAAKmG,yBAQbK,YAlDgB,SAkDJrG,GACR,QAAGH,KAAK4F,SACG5F,KAAK4F,QAAQY,YAAYrG,EAAUH,OAOlDoG,OA3DgB,WA4DTpG,KAAK4F,SACJ5F,KAAK4F,QAAQQ,OAAOpG,QAKjB2F,MCvETc,GAAe,CACjBC,SAAU,KAKVC,YANiB,SAMLC,GACR5G,KAAK0G,SAAWE,GAMpBC,eAbiB,WAcb,IAAMD,EAAM5G,KAAK0G,SAEjB,OADA1G,KAAK0G,SAAW,KACTE,GAEXE,YAlBiB,WAmBb,OAAO9G,KAAK0G,WAILD,MC3BA,IACXM,UADW,WAEP/G,KAAKgH,YAAc,GACnBhH,KAAKiH,oBAAiB1H,GAqB1B2H,kBAxBW,SAwBOC,GACdC,QAAQC,IAAI,qBACZ,IAAM9N,EAAOyG,KAAKsH,aAAaH,GAE/B,OADAnH,KAAKuH,YACEhO,GAGX+N,aA/BW,SA+BE5B,GAAU,WACb8B,EAAY,CACdC,WAAOlI,EACPmG,WACAgC,OAAQ,WACJ,EAAKC,aAAaH,GAClB,EAAKI,YAIb,OADA5H,KAAKgH,YAAYvU,KAAK+U,GACfA,GAGXG,aA5CW,SA4CEpO,GACT,IAAMb,EAAMsH,KAAKgH,YAAYnC,WAAU,SAAAjR,GAAC,OAAIA,IAAM2F,MACjDb,GAAOsH,KAAKgH,YAAY3T,OAAOqF,EAAK,IAIzCmP,SAlDW,WAmDP7H,KAAKuH,aAGTA,UAtDW,WAsDC,WACJvH,KAAKgH,YAAY7U,QACjB6N,KAAK8H,gBAAe,SAACrT,GACd,EAAKwS,iBAAoBxS,GACxB,EAAK8S,YAET,EAAKN,eAAkBxS,MAMnCsT,cAlEW,WAmEP/H,KAAKgH,YAAYlN,SAAQ,SAAAP,GACrB,IAAMyO,EAAYC,KAAKC,MACnB3O,EAAKkO,QACLlO,EAAKkO,MAAQO,GAEjB,IAAMG,EAAUH,EAAYzO,EAAKkO,MACjClO,EAAKmM,SAASyC,QCzEX,IAEXC,WAFW,SAEA3S,GAAsB,WAAb4S,EAAa,uDAAH,EAE1BrI,KAAKmG,wBACL,MAKInG,KAAK/H,aAJEqQ,EADX,EACItS,MACQuS,EAFZ,EAEItS,OAIAuS,GANJ,EAGIrQ,EAHJ,EAIIC,EAEU4H,KAAKwI,SACnB,IAAIA,EAAS,CACTxI,KAAKwI,QAAUhT,EAAaC,GAC5B,MAIIuK,KAAKwI,QAHLxS,EADJ,EACIA,MAAOC,EADX,EACWA,OACPY,EAFJ,EAEIA,UACAC,EAHJ,EAGIA,WAEJkJ,KAAKyI,iBAAiB,WAAW,WAC7B,EAAKC,YAAc,EAAKA,gBAE5B,IAAIC,GAAY,EAChB3I,KAAKwI,QAAQ9S,OAAO+S,iBAAiB,eAAe,SAACG,GACjD,IAAMC,EAAqCD,EAArCC,QAASC,EAA4BF,EAA5BE,QAA4BF,EAAnBG,OAAmBH,EAAXI,OAChCL,GAAY,EACZ,EAAKM,YAAc,EAAKA,WAAWJ,EAASC,MAEhD9I,KAAKwI,QAAQ9S,OAAO+S,iBAAiB,eAAe,SAACG,GACjD,IAAMC,EAAqCD,EAArCC,QAASC,EAA4BF,EAA5BE,QAA4BF,EAAnBG,OAAmBH,EAAXI,OAC7BL,GACC,EAAKM,YAAc,EAAKA,WAAWJ,EAASC,IAE7CA,EAAU,GAAKD,EAAU,GAAKA,EAAU7S,EAAM,GAAK8S,EAAU7S,EAAO,KACnE0S,GAAY,MAGpB3I,KAAKwI,QAAQ9S,OAAO+S,iBAAiB,aAAa,WAC9CE,GAAY,KAGhB,IAAM3R,EAAarB,SAASC,cAAc,UAC1CoB,EAAWhB,MAAQa,EACnBG,EAAWf,OAASa,EACpBkJ,KAAKkJ,gBAAkBlS,EAAWlB,WAAW,MAEjD,MASIkK,KAAKwI,QARLxS,EADJ,EACIA,MACAC,EAFJ,EAEIA,OACAY,EAHJ,EAGIA,UACAC,EAJJ,EAIIA,WAGAR,GAPJ,EAKIJ,KALJ,EAMIC,IANJ,EAOIG,OACAT,EARJ,EAQIA,IAEEsT,EAAiB,EAAVd,EACPe,EAAMf,EACNhK,GAAMrI,EAAQmT,GAAQb,EACtBhK,GAAMrI,EAASkT,GAAQZ,EACvBlU,EAAImC,KAAK2C,IAAIkF,EAAIC,GACnB+K,EAAM,EACNC,EAAM,EACPjL,EAAKC,GACJgL,GAAOrT,EAASsS,EAAWlU,EAAI+U,GAAO,EACtCC,EAAMD,IAENC,GAAOrT,EAAQsS,EAAUjU,EAAI+U,GAAO,EACpCE,EAAMF,GAEV,IAAMG,EAAWvJ,KAAKkJ,gBACtBK,EAASC,eACTD,EAASnS,UAAU,EAAG,EAAGP,EAAWC,GACpCyS,EAASjT,MAAMA,EAAOA,GACtBiT,EAASE,UAAUpV,EAAG,EAAG,EAAGA,EAAGgV,EAAKC,GAKpC,IAAMI,EAAK,CAAC,EAAE,EAAE,EAAE,GACf1J,KAAK2J,eACJ3J,KAAKuE,WAAWpN,OAAOoS,GAAU,SAACnJ,GAAiC,OAAtBA,EAAKlB,YAAYwK,IAAY,KAE1E1J,KAAKsE,OAAOnN,OAAOoS,KAEnBvJ,KAAKsE,OAAOnN,OAAOoS,GACnBvJ,KAAKuE,WAAWpN,OAAOoS,GAAU,SAACnJ,GAAiC,OAAtBA,EAAKlB,YAAYwK,IAAY,MAE9E,IAAME,EAAqBL,EAASM,aAAa,EAAG,EAAEhT,EAAWC,GACjEkJ,KAAK0I,WAAa,WACd7S,EAAIwB,OACJxB,EAAI2T,eACJ3T,EAAIuB,UAAU,EAAG,EAAGP,EAAWC,GAE/BjB,EAAIS,MAAMA,EAAOA,GACjBT,EAAIiU,aAAaF,EAAoB,EAAG,GACxC/T,EAAI4T,UAAUpV,EAAG,EAAG,EAAGA,EAAGgV,EAAKC,GAC/B,MAAqB,EAAKS,cAA1B,sBAAO5R,EAAP,KAAUC,EAAV,KAAa3D,EAAb,KAAgBX,EAAhB,KACA+B,EAAImU,YACJnU,EAAI+I,KAAKzG,EAAGC,EAAI3D,EAAE0D,EAAGrE,EAAEsE,GACvBvC,EAAI2T,eACJ3T,EAAI+I,KAAK,EAAG,EAAG/H,EAAWC,GAC1BjB,EAAIoU,KAAK,WAETpU,EAAIqU,UAAY,kBAChBrU,EAAIsU,SAAS,EAAG,EAAGtT,EAAWC,GAC9BjB,EAAIyB,WAGR0I,KAAK0I,aAEL1I,KAAKiJ,WAAa,SAACJ,EAASC,GACxB,MAAqB,EAAKiB,cAA1B,sBAAO5R,EAAP,KAAUC,EAAV,KAAa3D,EAAb,KAAgBX,EAAhB,KAEMsW,GAAK3V,EAAE0D,GAAG,EAAIA,EACd4D,GAAKjI,EAAEsE,GAAG,EAAIA,EAEdjD,EAAI,CAACiV,EAAI/V,EAAIgV,EAAKtN,EAAI1H,EAAIiV,GAChC,EAAKe,sBAAsBlV,EAAE,GAAK0T,GAAUxU,EAAI,EAAKiC,OAAQnB,EAAE,GAAK2T,GAAUzU,EAAI,EAAKiC,OACvF,EAAKsR,UACL,EAAKc,gBCzHF,IACX4B,aADW,WAEPtK,KAAKuK,eAAYhL,GAErBuI,eAJW,SAIIpC,GAAU,WACrB8E,uBAAsB,SAACxC,GACnB,IAAMyC,EAAc,EAAKF,YAAcvC,EACpCyC,GACC,EAAKC,WAENhF,GACCA,EAASsC,GAEb,EAAKuC,UAAYvC,O,aCLvB2C,G,wDACF,WAAY/B,GAAqB,IAAdxJ,EAAc,uDAAJ,GAAI,uBAC7B,IAAMqB,EAAS,mCACRrB,GADK,IAERwL,YAAaxL,EAAQwJ,MACrBjE,OAAQvF,EAAQuF,OAChBjE,MAAOtB,EAAQsB,MACfW,QAASjC,EAAQiC,UAAW,IANH,mBAQvBuH,EAAO,CACTnI,W,yCAVaD,cAeVmK,MCNf,SAASE,KACL,MAAO,CACHnV,OAAQ,CACJoV,MAAO,SAAUlC,EAAOlI,GACpBkI,EAAMmC,iBACN,IAAMlC,EAAqCD,EAArCC,QAASC,EAA4BF,EAA5BE,QAASC,EAAmBH,EAAnBG,OAAQC,EAAWJ,EAAXI,OAC7BJ,EAAMoC,SACLhC,GAAUA,EACVtI,EAAMuK,YAAYpC,EAASC,EAASC,EAAQC,EAAQJ,IAEpDlI,EAAMwK,YAAYnC,GAASC,EAAQJ,IAG3CuC,YAAa,SAAUvC,EAAOlI,GAC1B,IAAQmI,EAAqCD,EAArCC,QAASC,EAA4BF,EAA5BE,QAAiBsC,GAAWxC,EAAnBI,OAAmBJ,EAAXwC,QACpB,IAAXA,GACH1K,EAAM2K,kBAAkBxC,EAASC,EAASF,IAE9C0C,YAAa,SAAU1C,EAAOlI,GAC1B,IAAQmI,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjBpI,EAAM6K,iBAAiB1C,EAASC,EAASF,IAE7C4C,UAAW,SAAU5C,EAAOlI,GACxBkI,EAAMmC,iBACNnC,EAAM6C,kBACN,IAAQL,EAAWxC,EAAXwC,OACM,IAAXA,GACH1K,EAAMgL,gBAAe,EAAO9C,IAEhC+C,YAAa,SAAU/C,EAAOlI,GAC1BkI,EAAMmC,iBACNnC,EAAM6C,kBACN,IAAQ5C,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjBpI,EAAMkL,mBAAmB/C,EAASC,EAASF,IAE/CiD,SAAU,SAAUjD,EAAOlI,GACvBkI,EAAMmC,iBACNnC,EAAM6C,kBACN,IAAQ5C,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjBpI,EAAMoL,gBAAgBjD,EAASC,EAASF,IAE5CmD,MAAO,SAASnD,EAAOlI,GACnBkI,EAAMmC,iBACNnC,EAAM6C,kBACN,IAAQ5C,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjBpI,EAAMsL,aAAanD,EAASC,EAASF,KAG7CjT,SAAU,CACN6V,UAAW,SAAS5C,EAAOlI,GACvBA,EAAMgL,gBAAe,EAAM9C,M,IAWrCqD,G,WACF,aAAyB,IAAbC,EAAa,uDAAJ,GAAI,uBACrBlM,KAAKkM,OAASrB,KACd7K,KAAKmM,IAAID,GACTlM,KAAKoM,eAAiB,GACtBpM,KAAKqM,iBAAmB,G,0CAE5B,WAAiB,IAAbH,EAAa,uDAAJ,GACOI,EAAyBJ,EAAjCxW,OAAsB6W,EAAWL,EAArBvW,SACpB,GAAG2W,EACC,IAAI,IAAIE,KAAaF,EACbA,EAAGha,eAAeka,KAClBxM,KAAKkM,OAAOxW,OAAO8W,GAAaF,EAAGE,IAI/C,GAAGD,EACC,IAAI,IAAIC,KAAaD,EACbA,EAAOja,eAAeka,KACtBxM,KAAKkM,OAAOvW,SAAS6W,GAAaD,EAAOC,M,mBAMzD,SAAM9L,GAAO,WACT,EAAyCV,KAAKkM,OAA9BI,EAAhB,EAAQ5W,OAAsB6W,EAA9B,EAAoB5W,SACdD,EAASgL,EAAMhL,OAFZ,WAGD8W,GACJ,IAAMC,EAAUH,EAAGE,GACnB,SAASE,EAAiBC,GACtBF,EAAQE,EAAGjM,GAEfhL,EAAO+S,iBAAiB+D,EAAWE,GACnC,EAAKN,eAAe3Z,KAAK,CACrB+Z,YACAE,qBARR,IAAI,IAAIF,KAAaF,EAAG,EAAhBE,GAHC,eAcDA,GACJ,IAAMC,EAAUF,EAAOC,GACvB,SAASE,EAAiBC,GACtBF,EAAQE,EAAGjM,GAEf/K,SAAS8S,iBAAiB+D,EAAWE,GACrC,EAAKL,iBAAiB5Z,KAAK,CACvB+Z,YACAE,qBARR,IAAI,IAAIF,KAAaD,EAAO,EAApBC,K,oBAaZ,SAAO9L,GACH,IAAMhL,EAASgL,EAAMhL,OACrBsK,KAAKoM,eAAetS,SAAQ,YAAoC,IAAjC0S,EAAiC,EAAjCA,UAAWE,EAAsB,EAAtBA,gBACtChX,EAAOkX,oBAAoBJ,EAAWE,MAE1C1M,KAAKqM,iBAAiBvS,SAAQ,YAAoC,IAAjC0S,EAAiC,EAAjCA,UAAWE,EAAsB,EAAtBA,gBACxC/W,SAASiX,oBAAoBJ,EAAWE,U,KAKrCT,MCxITY,GAAa,mDACZ1I,IACAwB,IAFS,IAGZmH,YAHY,SAGA1N,GACRY,KAAKqI,QAAU,CACXlS,IAAKiJ,EAAQ2N,YAAc3N,EAAQiJ,SAAW,EAC9C2E,MAAO5N,EAAQ6N,cAAgB7N,EAAQiJ,SAAW,EAClD6E,OAAQ9N,EAAQ+N,eAAiB/N,EAAQiJ,SAAW,EACpDnS,KAAMkJ,EAAQgO,aAAehO,EAAQiJ,SAAW,IAGxDgF,WAXY,SAWDjO,GACPY,KAAKsN,OAAS,CACVnX,IAAKiJ,EAAQmO,WAAanO,EAAQkO,QAAU,EAC5CN,MAAO5N,EAAQoO,aAAepO,EAAQkO,QAAU,EAChDJ,OAAQ9N,EAAQqO,cAAgBrO,EAAQkO,QAAU,EAClDpX,KAAMkJ,EAAQsO,YAActO,EAAQkO,QAAU,IAGtDK,WAnBY,WAoBR,IAAM1M,EAASjB,KAAKiB,OACdoH,EAAUrI,KAAKqI,QACfiF,EAAStN,KAAKsN,OACdM,GAAMN,EAAOpX,KAAOoX,EAAON,OAAO,EAClCa,GAAMP,EAAOnX,IAAMmX,EAAOJ,QAAQ,EAClCY,GAAWzF,EAAQnS,KAAOmS,EAAQ2E,OAAO,EAAIY,EAC7CG,GAAW1F,EAAQlS,IAAMkS,EAAQ6E,QAAQ,EAAIW,EAEnD,OADA7N,KAAKgO,OAAO/M,OAAS,CAACA,EAAO,GAAK2M,EAAI3M,EAAO,GAAK4M,GAC3C,CAAC5M,EAAO,GAAK6M,EAAS7M,EAAO,GAAK8M,IAE7CE,WA9BY,SA8BD9V,GACP6H,KAAKiB,OAAO,GAAK9I,EACjB6H,KAAK2N,cAETO,WAlCY,SAkCD9V,GACP4H,KAAKiB,OAAO,GAAK7I,EACjB4H,KAAK2N,cAETQ,UAtCY,SAsCFhW,EAAGC,GACT4H,KAAKiB,OAAO,GAAK9I,EACjB6H,KAAKiB,OAAO,GAAK7I,EACjB4H,KAAK2N,cAETS,oBA3CY,SA2CQnS,GAChB,qBAAiBA,EAAjB,GAAOoS,EAAP,KAAWC,EAAX,KACA,EAAiBtO,KAAK2N,aAAtB,sBAAOY,EAAP,KAAWC,EAAX,KACMrZ,EAAI,CAACkZ,EAAKE,EAAID,EAAKE,GACzB,OAAOrZ,GAOXsZ,wBAtDY,SAsDYxS,GACpB,qBAAiBA,EAAjB,GAAOoS,EAAP,KAAWC,EAAX,KACA,EAAiBtO,KAAK2N,aAAtB,sBAAOY,EAAP,KAAWC,EAAX,KAEMrZ,EAAI,CAACkZ,EAAKE,EAAID,EAAKE,GACzB,OAAGxO,KAAKV,UAAYU,KAAKV,SAASmP,wBACvBzO,KAAKV,SAASmP,wBAAwBtZ,GAEtCA,GAQfoM,qBAtEY,SAsEStF,GACjB,qBAAiBA,EAAjB,GAAOoS,EAAP,KAAWC,EAAX,KACA,EAAiBtO,KAAK2N,aAAtB,sBAAOY,EAAP,KAAWC,EAAX,KACMrZ,EAAI,CAACkZ,EAAKE,EAAID,EAAKE,GACzB,GAAGxO,KAAKV,UAAYU,KAAKV,SAASiC,qBAC9B,OAAOvB,KAAKV,SAASiC,qBAAqBpM,IAGlDuZ,MA9EY,WA+ER,IAAM5M,EAAI9B,KAAK+B,YACT3C,EAAUhN,OAAOgI,OAAO,GAAI4F,KAAK4B,YAAa,CAChDkE,OAAQ9F,KAAK4F,SAAW5F,KAAK4F,QAAQ8I,UAEnCja,EAAI,IAAIqN,EAAE1C,GAMhB,OALAY,KAAKyF,mBAAkB,SAACtF,GACpB1L,EAAEgQ,WAAWtE,EAASuO,YAE1Bja,EAAE8R,cACF9R,EAAE4K,QAAUW,KAAKX,QACV5K,GAEXuR,qBA3FY,WA4FR,MAAO,CACHhQ,MAAOgK,KAAKhK,MACZC,OAAQ+J,KAAK/J,SAGrBiL,gBAjGY,WAkGR,IAAMD,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAO,EAChB2Y,EAAM3N,EAAO,GAAKjI,EAClB6V,EAAM5N,EAAO,GAAK0N,EAClBG,EAAM7N,EAAO,GAAKjI,EAClB+V,EAAM9N,EAAO,GAAK0N,EACxB,MAAO,CACHC,EAAKC,EACLC,EAAKC,IAGbC,gCA9GY,WA8GsB,MAC1BrU,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EACtB,6BACKsB,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IAD/B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAF/B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHhC,iBAIKpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJhC,iBAKKpX,EAAUK,KAAS,CAACqK,EAAK,KAAFjJ,EAASkJ,EAAK,KAAFyM,IALxC,GAQJM,sBA/HY,SA+HUhT,GAClB,IAUI9D,EAAGC,EAVP,iBAAiB6D,EAAjB,GAAOiT,EAAP,KAAWC,EAAX,KACA,iBAAiBnP,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EAChBmZ,EAAOnN,EAAKiN,EACZG,EAAOnN,EAAKiN,EACZG,EAASX,EAAE3V,EACXuW,EAAS/Y,KAAKwE,IAAIqU,EAAKD,GACvBI,EAAON,EAAKjN,EACZwN,EAAON,EAAKjN,EASlB,OAPGqN,EAASD,GACRnX,EAAI8J,GAAMuN,EAAKxW,GAAGA,GAClBZ,EAAIY,GAAKyW,EAAKF,GAAQA,GAAUrN,IAEhC9J,EAAI8J,GAAMuN,EAAKd,GAAGA,GAClBxW,EAAIwW,GAAKa,EAAKD,GAAQA,GAAUtN,GAE7B,CAAC9J,EAAGC,IAEf0I,eApJY,WAqJRd,KAAKyF,mBAAkB,SAACtF,GACpBA,EAASW,qBAGjBC,eAzJY,WA0JRf,KAAKyF,mBAAkB,SAACtF,GACpBA,EAASY,qBAGjB2O,QA9JY,WA+JR1P,KAAKgO,OAAO0B,UACZ1P,KAAKyF,mBAAkB,SAACtF,GACpBA,EAASuP,gBAKrB,SAASC,GAAa3Z,EAAOC,GACzB,MAAO,CAACD,EAAOC,GAoBnB,SAAS2Z,GAAaC,GAAoC,IAAdC,EAAc,uDAAJ,GAC5CC,EAA2C,oBAAvBD,EAAQC,WAA4BD,EAAQC,WAAaJ,GAoB7Elb,EArBgD,wDA4BlD,WAAY2K,GAAS,sCACjB,cAAMA,GACF,EAAKoF,UAAUpF,GACf,EAAKyG,WAAWzG,GAEhB,EAAK4O,OAAS,IAAI6B,EAAqBzQ,GACvC,EAAK4O,OAAO/M,OAAS,CAAC,EAAG,GACzB,EAAK+M,OAAO1O,SAAZ,kBACA,EAAKwN,YAAY1N,GACjB,EAAKiO,WAAWjO,GAEhB,EAAK4Q,aAAmB5Q,EAAQpJ,MAEhC,EAAKia,SAAmB7Q,EAAQ6Q,SAEhC,EAAKC,cAAmB9Q,EAAQnJ,OAEhC,EAAKka,KAAL,UAAwB/Q,EAAQ+Q,YAAhC,SACA,EAAKC,QAAmBhR,EAAQgR,SAAW,UAC3C,EAAKjK,wBACL,EAAKC,SACL,EAAKD,wBArBQ,EA5B6B,0BAqBtCxE,GA6GhB,OA9EAvP,OAAOgI,OAAO3F,EAAEpC,UAAWwa,IAC3Bza,OAAOgI,OAAO3F,EAAEpC,UAAW,CACvB+T,OADuB,WAEnByG,GAAWzG,OAAO7T,KAAKyN,MACvB,IAAMsN,EAAStN,KAAKsN,OACpB,EAAkCyC,EAC1B/P,KAAKhK,MAAQsX,EAAOpX,KAAOoX,EAAON,MAClChN,KAAK/J,OAASqX,EAAOnX,IAAMmX,EAAOJ,OAAQlN,KAAKgO,QAFvD,sBAAOqC,EAAP,KAAmBC,EAAnB,KAGAtQ,KAAKgO,OAAOhY,MAAQqa,EACpBrQ,KAAKgO,OAAO/X,OAASqa,GAEzBC,UAVuB,SAUbnR,GACNY,KAAKgO,OAAOuC,UAAUnR,GACtBY,KAAK8M,YAAY1N,GACjBY,KAAKqN,WAAWjO,GACb,YAAaA,IACZY,KAAKD,QAAUX,EAAQW,SAGxBX,EAAQ0G,QAAU9F,KAAK4F,UAAYxG,EAAQ0G,SAC1C9F,KAAK4F,QAAUxG,EAAQ0G,SAG/BK,sBAtBuB,WAuBnB,IAAMjO,EAAS8H,KAAKsE,OAAOkM,wBAErBC,EAAOxY,EAAaC,GAGpBmQ,EAAUrI,KAAKqI,QACf4H,EAAWjQ,KAAKiQ,SAAW5H,EAAQnS,KAAOmS,EAAQ2E,MAClDgD,EAAehQ,KAAKgQ,aAAe3H,EAAQnS,KAAOmS,EAAQ2E,MAC1DhU,EAAIyX,EAAKza,MAAQqS,EAAQnS,KAAOmS,EAAQ2E,MACxC2B,EAAI8B,EAAKxa,OAASoS,EAAQlS,IAAMkS,EAAQ6E,OACxCwD,EAAeT,EAAWzZ,KAAKoC,IAAIqX,EAAUjX,GAAKgX,GAAgBhX,EAClE2X,EAAgB3Q,KAAKkQ,eAAiBvB,EAC5C3O,KAAK4Q,cAAgBF,EACrB1Q,KAAK6Q,eAAiBF,EAGtB,MAAkCZ,EAAWW,EAAcC,EAAe3Q,KAAKgO,QAA/E,sBAAOqC,EAAP,KAAmBC,EAAnB,KACAtQ,KAAKgO,OAAOhY,MAAQqa,EACpBrQ,KAAKgO,OAAO/X,OAASqa,EAErB,IAAMhD,EAAStN,KAAKsN,OACpBtN,KAAKhK,MAAQqa,EAAa/C,EAAOpX,KAAOoX,EAAON,MAC/ChN,KAAK/J,OAASqa,EAAchD,EAAOnX,IAAMmX,EAAOJ,QAGpD/V,OAhDuB,SAgDhBtB,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAGtB,MAAiB9Q,KAAK2N,aAAtB,sBAAOY,EAAP,KAAWC,EAAX,KACAxO,KAAKgO,OAAO7W,OAAOtB,GACnBA,EAAIkb,UAAUxC,EAAIC,GAClBxO,KAAKsE,OAAOnN,OAAOtB,GACnBmK,KAAKuE,WAAWpN,OAAOtB,GACvBA,EAAIkb,WAAWxC,GAAKC,GACpB3Y,EAAIyB,WASR0M,MArEuB,SAqEjB/H,EAAO0H,GACT,IAAMxO,EAAI6K,KAAKoO,oBAAoBnS,GACnC+D,KAAKgR,UAAY7b,EACjB,IAAMwP,EAAS3E,KAAKsE,OAAO2M,SAAS9b,EAAGwO,GACvC,OAAGgB,GACI3E,KAAKgO,OAAOhK,MAAM/H,MAG1BxH,EAGImb,UCxTTsB,I,kEACF,WAAY9R,GAAS,oCACjB,cAAMA,GACN,EAAK+R,KAAmB,QAExB,EAAKnT,OAAmBoB,EAAQpB,QAAU,GAJzB,E,6CAOrB,SAAOnI,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBjb,EAAImU,YACJnU,EAAIub,IAAIpR,KAAKiB,OAAO,GAAIjB,KAAKiB,OAAO,GAAIjB,KAAKhC,OAAQ,EAAG,EAAIxH,KAAKuG,IACjElH,EAAIqU,UAAYlK,KAAKN,gBACrB7J,EAAIwb,OACDrR,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UAKR3b,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAMgF,EAASjB,KAAKiB,OACpB,OAAOzK,KAAKqG,IAAIZ,EAAM,GAAKgF,EAAO,GAAI,GAAKzK,KAAKqG,IAAIZ,EAAM,GAAKgF,EAAO,GAAI,GAAKjB,KAAKhC,OAASgC,KAAKhC,S,6BAGtG,WACI,IAAMiD,EAASjB,KAAKiB,OACd5M,EAAI2L,KAAKhC,OACT4Q,EAAM3N,EAAO,GAAK5M,EAClBwa,EAAM5N,EAAO,GAAK5M,EAClBya,EAAM7N,EAAO,GAAK5M,EAClB0a,EAAM9N,EAAO,GAAK5M,EACxB,MAAO,CACHua,EAAKC,EACLC,EAAKC,K,mCAIb,SAAsB9S,GAClB,qBAAiBA,EAAjB,GAAOiT,EAAP,KAAWC,EAAX,KACA,iBAAiBnP,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACMkN,EAAOnN,EAAKiN,EACZG,EAAOnN,EAAKiN,EACZhV,EAAO3D,KAAKmH,KAAKyR,EAAOA,EAAOC,EAAOA,GAEtCoC,EAAQzR,KAAKhC,OAAS7D,EAC5B,MAAO,CAAC8H,EAAKwP,EAAQrC,EAAMlN,EAAKuP,EAAQpC,K,6CAG5C,WAAkC,MAC9B,iBAAiBrP,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACM7N,EAAI2L,KAAKhC,OACf,6BACKzG,EAAUC,MAAS,CAACyK,EAAK5N,EAAG6N,IADjC,iBAEK3K,EAAUG,KAAS,CAACuK,EAAK5N,EAAG6N,IAFjC,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAG7N,IAHhC,iBAIKkD,EAAUI,IAAS,CAACsK,EAAIC,EAAG7N,IAJhC,I,kDAQJ,SAAqC4H,EAAOyV,GAAK,MAC7C,iBAAiBzV,EAAjB,GAAOiT,EAAP,KAAWC,EAAX,KACA,iBAAiBnP,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACM7N,EAAI2L,KAAKhC,OACToR,EAAOnN,EAAKiN,EACZG,EAAOnN,EAAKiN,EACZwC,GAAgB,sBACjBpa,EAAUC,MAAS,CAACyK,EAAK5N,EAAG6N,IADX,iBAEjB3K,EAAUG,KAAS,CAACuK,EAAK5N,EAAG6N,IAFX,iBAGjB3K,EAAUE,OAAS,CAACwK,EAAIC,EAAG7N,IAHV,iBAIjBkD,EAAUI,IAAS,CAACsK,EAAIC,EAAG7N,IAJV,GAkBlBud,EAAYpb,KAAKwE,IAAIqU,GAAQ7Y,KAAKwE,IAAIoU,GACnCC,EAAO,EAAI9X,EAAUE,OAASF,EAAUI,IACxCyX,EAAO,EAAI7X,EAAUC,MAAQD,EAAUG,KAG9C,MAAO,CACHvC,EAAGwc,EAAiBC,GACpBtX,IAAKsX,K,kCAIb,WACI,MAAO,CACH5b,MAAqB,EAAdgK,KAAKhC,OACZ/H,OAAsB,EAAd+J,KAAKhC,Y,GA1GL2D,IAgHLuP,MC5FTW,G,wDACF,aAA0B,MAAdzS,EAAc,uDAAJ,GAAI,8BACtB,cAAMA,GACN,EAAK+R,KAAmB,YAExB,EAAKnb,MAAmBoJ,EAAQpJ,OAAS,GAEzC,EAAKC,OAAmBmJ,EAAQnJ,QAAU,GAE1C,EAAK6b,aAAmB1S,EAAQ0S,cAAgB,EAChD,EAAKC,WAAW3S,GATM,E,iDAY1B,SAAWA,GAAQ,oDAEfY,KAAKgS,OAAS,CACV7b,IAAK,CACD8b,OAAO,UAAA7S,EAAQ4S,cAAR,mBAAgB7b,WAAhB,eAAqBsJ,cAAeL,EAAQK,aAAe,cAClEzJ,OAAO,UAAAoJ,EAAQ4S,cAAR,mBAAgB7b,WAAhB,eAAqBqJ,cAAeJ,EAAQI,aAAe,EAClE0S,OAAM,UAAE9S,EAAQ4S,cAAV,iBAAE,EAAgB7b,WAAlB,aAAE,EAAqBqJ,aAEjCwN,MAAO,CACHiF,OAAO,UAAA7S,EAAQ4S,cAAR,mBAAgBhF,aAAhB,eAAuBvN,cAAeL,EAAQK,aAAe,cACpEzJ,OAAO,UAAAoJ,EAAQ4S,cAAR,mBAAgBhF,aAAhB,eAAuBxN,cAAeJ,EAAQI,aAAe,EACpE0S,OAAM,UAAE9S,EAAQ4S,cAAV,iBAAE,EAAgBhF,aAAlB,aAAE,EAAuBxN,aAEnC0N,OAAQ,CACJ+E,OAAO,UAAA7S,EAAQ4S,cAAR,mBAAgB9E,cAAhB,eAAwBzN,cAAeL,EAAQK,aAAe,cACrEzJ,OAAO,UAAAoJ,EAAQ4S,cAAR,mBAAgB9E,cAAhB,eAAwB1N,cAAeJ,EAAQI,aAAe,EACrE0S,OAAM,UAAE9S,EAAQ4S,cAAV,iBAAE,EAAgB9E,cAAlB,aAAE,EAAwB1N,aAEpCtJ,KAAM,CACF+b,OAAO,UAAA7S,EAAQ4S,cAAR,mBAAgB9b,YAAhB,eAAsBuJ,cAAeL,EAAQK,aAAe,cACnEzJ,OAAO,UAAAoJ,EAAQ4S,cAAR,mBAAgB9b,YAAhB,eAAsBsJ,cAAeJ,EAAQI,aAAe,EACnE0S,OAAM,UAAE9S,EAAQ4S,cAAV,iBAAE,EAAgB9b,YAAlB,aAAE,EAAsBsJ,cAGtCQ,KAAKP,YAAcL,EAAQK,aAAe,cAC1CO,KAAKR,YAAcJ,EAAQI,aAAe,I,uBAG9C,SAAUJ,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,GAClB,EAAKY,YAAYZ,GAAK5B,EAAQ4B,OAGtChB,KAAK+R,WAAW3S,K,oBAGpB,SAAOvJ,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAGtB,IACkB9S,EACdgC,KADA8R,aAA8B9b,GAC9BgK,KADsBiB,OACtBjB,KAD8BhK,OAAOC,EACrC+J,KADqC/J,OAEnCkC,EAAI6H,KAAKiB,OAAO,GAAKjB,KAAKhK,MAAQ,EAClCoC,EAAI4H,KAAKiB,OAAO,GAAKjB,KAAK/J,OAAS,EACnCkc,EAAKnS,KAAKiB,OAAO,GAAKjB,KAAKhK,MAAQ,EACnCoc,EAAKpS,KAAKiB,OAAO,GAAKjB,KAAK/J,OAAS,EACvC+J,KAAK8R,cACJjc,EAAImU,YACJnU,EAAIwc,OAAOla,EAAI6F,EAAQ5F,GACvBvC,EAAIyc,OAAOna,EAAInC,EAAQgI,EAAQ5F,GAC/BvC,EAAI0c,iBAAiBpa,EAAInC,EAAOoC,EAAGD,EAAInC,EAAOoC,EAAI4F,GAClDnI,EAAIyc,OAAOna,EAAInC,EAAOoC,EAAInC,EAAS+H,GACnCnI,EAAI0c,iBAAiBpa,EAAInC,EAAOoC,EAAInC,EAAQkC,EAAInC,EAAQgI,EAAQ5F,EAAInC,GACpEJ,EAAIyc,OAAOna,EAAI6F,EAAQ5F,EAAInC,GAC3BJ,EAAI0c,iBAAiBpa,EAAGC,EAAInC,EAAQkC,EAAGC,EAAInC,EAAS+H,GACpDnI,EAAIyc,OAAOna,EAAGC,EAAI4F,GAClBnI,EAAI0c,iBAAiBpa,EAAGC,EAAGD,EAAI6F,EAAQ5F,GACvCvC,EAAI2c,YACDxS,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,YAGR3b,EAAImU,YACJnU,EAAI+I,KAAKoB,KAAKiB,OAAO,GAAKjB,KAAKhK,MAAQ,EAAGgK,KAAKiB,OAAO,GAAKjB,KAAK/J,OAAS,EAAG+J,KAAKhK,MAAOgK,KAAK/J,SAEjGJ,EAAIqU,UAAYlK,KAAKN,gBAClBM,KAAKL,cACJ9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACDrR,KAAK8R,aACD9R,KAAKgS,OAAO7b,IAAI+b,SACfrc,EAAIwB,OACJxB,EAAImU,YACJnU,EAAIwc,OAAOla,EAAGC,EAAI4F,GAClBnI,EAAI0c,iBAAiBpa,EAAGC,EAAGD,EAAI6F,EAAQ5F,GACvCvC,EAAIyc,OAAOna,EAAInC,EAAQgI,EAAQ5F,GAC/BvC,EAAI0c,iBAAiBpa,EAAInC,EAAOoC,EAAGD,EAAInC,EAAOoC,EAAI4F,GAClDnI,EAAI2c,YAGJ3c,EAAIoU,OAEJpU,EAAImU,YACJnU,EAAI+I,KAAKzG,EAAGC,EAAG4H,KAAKhK,MAAOgK,KAAKgS,OAAO7b,IAAIH,OAC3CH,EAAIqU,UAAYlK,KAAKgS,OAAO7b,IAAI8b,MAChCpc,EAAIwb,OACJxb,EAAIyB,YA8BL0I,KAAKgS,OAAO7b,IAAIH,QACfH,EAAImU,YACJnU,EAAIwc,OAAOla,EAAGC,GACdvC,EAAIyc,OAAOH,EAAI/Z,GACfvC,EAAI0b,YAAcvR,KAAKgS,OAAO7b,IAAI8b,MAClCpc,EAAIyb,UAAYtR,KAAKgS,OAAO7b,IAAIH,MAChCH,EAAI2b,UAGLxR,KAAKgS,OAAOhF,MAAMhX,QACjBH,EAAImU,YACJnU,EAAIwc,OAAOF,EAAI/Z,GACfvC,EAAIyc,OAAOH,EAAIC,GACfvc,EAAI0b,YAAcvR,KAAKgS,OAAOhF,MAAMiF,MACpCpc,EAAIyb,UAAYtR,KAAKgS,OAAOhF,MAAMhX,MAClCH,EAAI2b,UAGLxR,KAAKgS,OAAO9E,OAAOlX,QAClBH,EAAImU,YACJnU,EAAIwc,OAAOF,EAAIC,GACfvc,EAAIyc,OAAOna,EAAGia,GACdvc,EAAI0b,YAAcvR,KAAKgS,OAAO9E,OAAO+E,MACrCpc,EAAIyb,UAAYtR,KAAKgS,OAAO9E,OAAOlX,MACnCH,EAAI2b,UAGLxR,KAAKgS,OAAO9b,KAAKF,QAChBH,EAAImU,YACJnU,EAAIwc,OAAOla,EAAGia,GACdvc,EAAIyc,OAAOna,EAAGC,GACdvC,EAAI0b,YAAcvR,KAAKgS,OAAO9b,KAAK+b,MACnCpc,EAAIyb,UAAYtR,KAAKgS,OAAO9b,KAAKF,MACjCH,EAAI2b,WAGZ3b,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAMgF,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAO,EACtB,OAAOgG,EAAM,GAAKgF,EAAO,GAAKjI,GACvBiD,EAAM,GAAKgF,EAAO,GAAKjI,GACvBiD,EAAM,GAAKgF,EAAO,GAAK0N,GACvB1S,EAAM,GAAKgF,EAAO,GAAK0N,I,6BAGlC,WACI,IAAM1N,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAO,EAChB2Y,EAAM3N,EAAO,GAAKjI,EAClB6V,EAAM5N,EAAO,GAAK0N,EAClBG,EAAM7N,EAAO,GAAKjI,EAClB+V,EAAM9N,EAAO,GAAK0N,EACxB,MAAO,CACHC,EAAKC,EACLC,EAAKC,K,kCAIb,WACI,MAAO,CACH9Y,OAAQ+J,KAAK/J,OACbD,MAAOgK,KAAKhK,S,mCAIpB,SAAsBiG,GAClB,IAUI9D,EAAGC,EAVP,iBAAiB6D,EAAjB,GAAOiT,EAAP,KAAWC,EAAX,KACA,iBAAiBnP,KAAKiB,OAAtB,GAAOgB,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EAChBmZ,EAAOnN,EAAKiN,EACZG,EAAOnN,EAAKiN,EACZG,EAASX,EAAE3V,EACXuW,EAAS/Y,KAAKwE,IAAIqU,EAAKD,GACvBI,EAAON,EAAKjN,EACZwN,EAAON,EAAKjN,EASlB,OAPGqN,EAASD,GACRnX,EAAI8J,GAAMuN,EAAKxW,GAAGA,GAClBZ,EAAIY,GAAKyW,EAAKF,GAAQA,GAAUrN,IAEhC9J,EAAI8J,GAAMuN,EAAKd,GAAGA,GAClBxW,EAAIwW,GAAKa,EAAKD,GAAQA,GAAUtN,GAE7B,CAAC9J,EAAGC,K,6CAGf,WAAkC,MAC1BuC,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EACtB,6BACKsB,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IAD/B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAF/B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHhC,iBAIKpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJhC,I,kDAQJ,SAAqC1S,EAAOyV,GAAK,MAC7C,iBAAiBzV,EAAjB,GAAOiT,EAAP,KAAWC,EAAX,KACIxU,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EAChB0b,GAAgB,sBACjBpa,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IADT,iBAEjB3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAFT,iBAGjB3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHV,iBAIjBpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJV,GAMhBS,EAAOnN,EAAKiN,EACZG,EAAOnN,EAAKiN,EACZG,EAASX,EAAE3V,EACXuW,EAAS/Y,KAAKwE,IAAIqU,EAAKD,GACvBI,EAAON,EAAKjN,EACZwN,EAAON,EAAKjN,EACd0P,EAAYrC,EAASD,EAClBG,EAAOlY,EAAUE,OAASF,EAAUI,IACpC6X,EAAOjY,EAAUC,MAAQD,EAAUG,KAkB1C,MAAO,CACHvC,EAAGwc,EAAiBC,GACpBtX,IAAKsX,O,GArSOjQ,GA0STkQ,MC7TTY,G,wDACF,aAA0B,MAAdrT,EAAc,uDAAJ,GAAI,8BACtB,cAAMA,GACN,EAAK+R,KAAmB,UAExB,EAAKnb,MAAmBoJ,EAAQpJ,OAAS,GAEzC,EAAKC,OAAmBmJ,EAAQnJ,QAAU,GANpB,E,6CAS1B,SAAOJ,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBjb,EAAImU,YACJ,qBAAehK,KAAKiB,OAApB,GAAO9I,EAAP,KAAUC,EAAV,KACMsa,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjB2c,EAAaza,EAAIua,EAAKC,EACtBE,EAAc1a,EAAIua,EAAKC,EACvBxc,EAAMiC,EAAIua,EACVzF,EAAS9U,EAAIua,EAEnB9c,EAAIwc,OAAOO,EAAYzc,GACvBN,EAAIyc,OAAOO,EAAa1c,GACxBN,EAAIub,IAAIyB,EAAaza,EAAGua,GAAKnc,KAAKuG,GAAG,EAAGvG,KAAKuG,GAAG,GAChDlH,EAAIyc,OAAOM,EAAY1F,GACvBrX,EAAIub,IAAIwB,EAAYxa,EAAGua,EAAInc,KAAKuG,GAAG,EAAGvG,KAAKuG,GAAG,EAAE,GAEhDlH,EAAIqU,UAAYlK,KAAKN,gBACjBM,KAAKL,cACL9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACDrR,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UAKR3b,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAMgF,EAASjB,KAAKiB,OACdyR,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjB6c,EAAMtc,KAAKwE,IAAI0X,EAAKC,GACpBC,EAAa3R,EAAO,GAAKyR,EAAKC,EAC9BE,EAAc5R,EAAO,GAAKyR,EAAKC,EAC/BI,EAAKJ,EAAKA,EAChB,OAAQ1W,EAAM,GAAKgF,EAAO,GAAK6R,GACxB7W,EAAM,GAAKgF,EAAO,GAAK6R,GACvB7W,EAAM,GAAKgF,EAAO,GAAK0R,GACvB1W,EAAM,GAAKgF,EAAO,GAAK0R,GACrBnc,KAAKqG,IAAIZ,EAAM,GAAK2W,EAAY,GAAKpc,KAAKqG,IAAIZ,EAAM,GAAKgF,EAAO,GAAI,GAAK8R,GACzEvc,KAAKqG,IAAIZ,EAAM,GAAK4W,EAAa,GAAKrc,KAAKqG,IAAIZ,EAAM,GAAKgF,EAAO,GAAI,GAAK8R,I,6BAGvF,WACI,IAAM9R,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAO,EAChB2Y,EAAM3N,EAAO,GAAKjI,EAClB6V,EAAM5N,EAAO,GAAK0N,EAClBG,EAAM7N,EAAO,GAAKjI,EAClB+V,EAAM9N,EAAO,GAAK0N,EACxB,MAAO,CACHC,EAAKC,EACLC,EAAKC,K,kCAIb,WACI,MAAO,CACH9Y,OAAQ+J,KAAK/J,OACbD,MAAOgK,KAAKhK,S,6CAIpB,WAAkC,MAC1B2E,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EACtB,6BACKsB,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IAD/B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAF/B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHhC,iBAIKpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJhC,M,GA/FchN,GAwGP8Q,MC/GTO,G,wKACF,SAAOnd,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBjb,EAAImU,YACJ,qBAAehK,KAAKiB,OAApB,GAAO9I,EAAP,KAAUC,EAAV,KACMsa,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjBgd,EAAY7a,EAAIua,EAAKD,EACrBQ,EAAe9a,EAAIua,EAAKD,EACxBxc,EAAOiC,EAAIua,EACX1F,EAAQ7U,EAAIua,EAElB7c,EAAIwc,OAAOnc,EAAM+c,GACjBpd,EAAIub,IAAIjZ,EAAG8a,EAAWP,GAAKlc,KAAKuG,GAAI,GACpClH,EAAIyc,OAAOtF,EAAOkG,GAClBrd,EAAIub,IAAIjZ,EAAG+a,EAAcR,EAAI,EAAGlc,KAAKuG,IACrClH,EAAI2c,YAEJ3c,EAAIqU,UAAYlK,KAAKN,gBACjBM,KAAKL,cACL9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACDrR,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UAKR3b,EAAIyB,Y,mBAGR,SAAM2E,EAAO0H,GACT,qBAAe3D,KAAKiB,OAApB,GAAO9I,EAAP,KAAUC,EAAV,KACMsa,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjBkd,EAAM3c,KAAKwE,IAAI2X,EAAKD,GACpBO,EAAY7a,EAAIua,EAAKD,EACrBQ,EAAe9a,EAAIua,EAAKD,EACxBK,EAAKL,EAAKA,EAChB,OAAQzW,EAAM,GAAK9D,EAAIua,GAChBzW,EAAM,GAAK9D,EAAIua,GACfzW,EAAM,GAAK7D,EAAI+a,GACflX,EAAM,GAAK7D,EAAI+a,GACb3c,KAAKqG,IAAIZ,EAAM,GAAK9D,EAAG,GAAK3B,KAAKqG,IAAIZ,EAAM,GAAKgX,EAAW,GAAKF,GAChEvc,KAAKqG,IAAIZ,EAAM,GAAK9D,EAAG,GAAK3B,KAAKqG,IAAIZ,EAAM,GAAKiX,EAAc,GAAKH,M,GArDtDN,IAwDfO,MCjDTI,G,wDACF,aAA0B,MAAdhU,EAAc,uDAAJ,GAAI,8BACtB,cAAMA,GACN,EAAK+R,KAAmB,UAExB,EAAKlb,OAAmBmJ,EAAQiU,YAAc,GAE9C,EAAKrd,MAAmBoJ,EAAQkU,YAAc,GANxB,E,6CAS1B,SAAOzd,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtB,IAAM9X,EAAIgH,KAAKhK,MAAQ,EACjB2Y,EAAI3O,KAAK/J,OAAS,EAClBsd,EAASvT,KAAKiB,OACpBpL,EAAIkb,UAAUwC,EAAO,GAAIA,EAAO,IAChC1d,EAAImU,YACJnU,EAAIwc,OAAO,GAAI1D,GACf9Y,EAAIyc,OAAOtZ,EAAG,GACdnD,EAAIyc,OAAO,EAAG3D,GACd9Y,EAAIyc,QAAQtZ,EAAG,GACfnD,EAAI2c,YACDxS,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UAGR3b,EAAIqU,UAAYlK,KAAKN,gBAClBM,KAAKL,cACJ9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACJxb,EAAIkb,WAAWwC,EAAO,IAAKA,EAAO,IAClC1d,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAMlD,EAAIiH,KAAK/J,OAAS,EAClB0Y,EAAI3O,KAAKhK,MAAQ,EACjBiL,EAASjB,KAAKiB,OACd9I,EAAI3B,KAAKwE,IAAIiB,EAAM,GAAKgF,EAAO,IAC/B7I,EAAI5B,KAAKwE,IAAIiB,EAAM,GAAKgF,EAAO,IACrC,OAAQ9I,EAAIwW,EAAIvW,EAAIW,GAAM,I,6BAG9B,WACI,IAAMkI,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAQ,EACjB2Y,EAAM3N,EAAO,GAAKjI,EAClB6V,EAAM5N,EAAO,GAAK0N,EAClBG,EAAM7N,EAAO,GAAKjI,EAClB+V,EAAM9N,EAAO,GAAK0N,EACxB,MAAO,CACHC,EAAKC,EACLC,EAAKC,K,kCAIb,WACI,MAAO,CACH9Y,OAAQ+J,KAAK/J,OACbD,MAAOgK,KAAKhK,S,6CAIpB,WAAkC,MAC1B2E,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EAEtB,6BACKsB,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IAD/B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAF/B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHhC,iBAIKpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJhC,iBAKKpX,EAAUK,KAAS,CAACqK,EAAK,KAAFjJ,EAASkJ,EAAK,KAAFyM,IALxC,M,GAnFchN,GA6FPyR,MC1FTI,G,wDAEF,aAA0B,MAAdpU,EAAc,uDAAJ,GAAI,8BACtB,cAAMA,GACN,EAAK+R,KAAmB,UAExB,EAAKnb,MAAmBoJ,EAAQpJ,OAAS,GAEzC,EAAKC,OAAmBmJ,EAAQnJ,QAAU,GAE1C,EAAKwd,KAAmBrU,EAAQqU,MAAQ,EACxC,EAAKC,WATiB,E,gDAY1B,SAAUtU,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,GAClB,EAAKY,YAAYZ,GAAK5B,EAAQ4B,OAGtChB,KAAK0T,a,sBAGT,WACI1T,KAAK2T,QAAUnd,KAAKod,IAAIpd,KAAKuG,GAAG,GAAKiD,KAAKyT,KAC1CzT,KAAK6T,QAAUrd,KAAKsd,IAAItd,KAAKuG,GAAG,GAAKiD,KAAKyT,O,oBAG9C,SAAO5d,GACH,qBAAemK,KAAKiB,OAApB,GAAO9I,EAAP,KAAUC,EAAV,KACMsa,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjB8d,EAAKpB,EAAK,MACVC,EAAaza,EAAIua,EAAKqB,EACtBlB,EAAc1a,EAAIua,EAAKqB,EACvB/G,EAAQ7U,EAAIua,EACZxc,EAAOiC,EAAIua,EACXvc,EAAMiC,EAAIua,EACVzF,EAAS9U,EAAIua,EAEnB3S,KAAKgU,aAAe,CAChB,CAACnB,EAAa1c,GACd,CAAC6W,EAAO5U,GACR,CAACya,EAAa3F,GACd,CAAC0F,EAAY1F,GACb,CAAChX,EAAMkC,GACP,CAACwa,EAAYzc,IAGjBN,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBjb,EAAImU,YACJ,IACIyJ,EACAzT,KADAyT,KAAME,EACN3T,KADM2T,QAASE,EACf7T,KADe6T,QAEnBhe,EAAIwc,OAAOla,EAAGhC,GACdN,EAAIyc,OAAOO,EAAcY,EAAMtd,GAC/BN,EAAI0c,iBAAiBM,EAAa1c,EAAK0c,EAAcgB,EAAS1d,EAAMwd,GACpE9d,EAAIyc,OAAOtF,EAAQ6G,EAASzb,EAAIub,GAChC9d,EAAI0c,iBAAiBvF,EAAO5U,EAAG4U,EAAQ6G,EAASzb,EAAIub,GACpD9d,EAAIyc,OAAOO,EAAcgB,EAAS3G,EAASyG,GAC3C9d,EAAI0c,iBAAiBM,EAAa3F,EAAQ2F,EAAcY,EAAMvG,GAE9DrX,EAAIyc,OAAOM,EAAaa,EAAMvG,GAC9BrX,EAAI0c,iBAAiBK,EAAY1F,EAAQ0F,EAAaiB,EAAS3G,EAASyG,GACxE9d,EAAIyc,OAAOpc,EAAO2d,EAASzb,EAAIub,GAC/B9d,EAAI0c,iBAAiBrc,EAAMkC,EAAGlC,EAAO2d,EAASzb,EAAIub,GAClD9d,EAAIyc,OAAOM,EAAaiB,EAAS1d,EAAMwd,GACvC9d,EAAI0c,iBAAiBK,EAAYzc,EAAKyc,EAAaa,EAAMtd,GAEzDN,EAAI2c,YAEJ3c,EAAIqU,UAAYlK,KAAKN,gBACjBM,KAAKL,cACL9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACDrR,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UASR3b,EAAIyB,Y,mBAKR,SAAM2E,GACF,IAAI+D,KAAKgU,aAAc,OAAO,EAI9B,IAHA,IAAMC,EAAUjU,KAAKgU,aACjBE,GAAM,EAEDjiB,EAAI,EAAGkB,EAAI8gB,EAAQ9hB,OAAS,EAAGF,EAAIgiB,EAAQ9hB,OAAQF,IAElDgiB,EAAQhiB,GAAG,GAAKgK,EAAM,KAASgY,EAAQ9gB,GAAG,GAAK8I,EAAM,IAEnDA,EAAM,IAAOgY,EAAQ9gB,GAAG,GAAK8gB,EAAQhiB,GAAG,KAAOgK,EAAM,GAAKgY,EAAQhiB,GAAG,KAAOgiB,EAAQ9gB,GAAG,GAAK8gB,EAAQhiB,GAAG,IAAMgiB,EAAQhiB,GAAG,KAE5HiiB,GAAOA,GAEX/gB,EAAIlB,EAGR,OAAOiiB,I,6BAGX,WACI,IAAMjT,EAASjB,KAAKiB,OACdjI,EAAIgH,KAAKhK,MAAO,EAChB2Y,EAAI3O,KAAK/J,OAAO,EAChB2Y,EAAM3N,EAAO,GAAKjI,EAClB6V,EAAM5N,EAAO,GAAK0N,EAClBG,EAAM7N,EAAO,GAAKjI,EAClB+V,EAAM9N,EAAO,GAAK0N,EACxB,MAAO,CACHC,EAAKC,EACLC,EAAKC,K,kCAIb,WACI,MAAO,CACH9Y,OAAQ+J,KAAK/J,OACbD,MAAOgK,KAAKhK,S,6CAIpB,WAAkC,MAC1B2E,EAAKqF,KAAKiB,OACXjB,KAAKV,UAAYU,KAAKV,SAASmP,0BAC9B9T,EAAKqF,KAAKV,SAASmP,wBAAwB9T,IAG/C,MAAiBA,EAAjB,sBAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAM,EACf2Y,EAAI3O,KAAK/J,OAAO,EACtB,6BACKsB,EAAUC,MAAS,CAACyK,EAAGjJ,EAAGkJ,IAD/B,iBAEK3K,EAAUG,KAAS,CAACuK,EAAGjJ,EAAGkJ,IAF/B,iBAGK3K,EAAUE,OAAS,CAACwK,EAAIC,EAAGyM,IAHhC,iBAIKpX,EAAUI,IAAS,CAACsK,EAAIC,EAAGyM,IAJhC,M,GArJchN,GA8JP6R,MCtKTW,IARc3d,KAAKmH,KAAK,G,wDAS1B,WAAYyB,GAAS,0CACXA,G,6CAGV,SAAOvJ,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBjb,EAAImU,YACJ,qBAAehK,KAAKiB,OAApB,GAAO9I,EAAP,KAAUC,EAAV,KACMsa,EAAK1S,KAAKhK,MAAM,EAChB2c,EAAK3S,KAAK/J,OAAO,EACjBkd,EAAKT,EAAK,MAEVvc,EAAMiC,EAAIua,EACVzF,EAAS9U,EAAIua,EACbyB,EAAYhc,EAAIua,EAAKQ,EACrBkB,EAAejc,EAAIua,EAAKQ,EACxBmB,EAAQnc,EAAIua,EACZ6B,EAASpc,EAAIua,EAEnB7c,EAAIwc,OAAOla,EAAGhC,GACdN,EAAIyc,OAAOiC,EAAQH,GACnBve,EAAIyc,OAAOiC,EAAQF,GACnBxe,EAAIyc,OAAOna,EAAG+U,GACdrX,EAAIyc,OAAOgC,EAAOD,GAClBxe,EAAIyc,OAAOgC,EAAOF,GAClBve,EAAI2c,YACJ3c,EAAIqU,UAAYlK,KAAKN,gBACjBM,KAAKL,cACL9J,EAAI8J,YAAcK,KAAKL,YACvB9J,EAAI+J,WAAaI,KAAKJ,WACtB/J,EAAIgK,cAAgBG,KAAKH,cACzBhK,EAAIiK,cAAgBE,KAAKF,eAE7BjK,EAAIwb,OACDrR,KAAKR,cACJ3J,EAAIyb,UAAYtR,KAAKR,YACrB3J,EAAI0b,YAAcvR,KAAKP,YACvB5J,EAAI2b,UAGR3b,EAAIyB,UACJ0I,KAAKgU,aAAe,CAChB,CAAC7b,EAAGhC,GACJ,CAACoe,EAAQH,GACT,CAACG,EAAQF,GACT,CAAClc,EAAG+U,GACJ,CAACoH,EAAOD,GACR,CAACC,EAAOF,Q,GAnDUZ,KAuDfW,MChEA,IACXze,OAAQ,CACJoV,MADI,SACGlC,EAAOlI,GACVkI,EAAMmC,iBACN,IAAMlC,EAAqCD,EAArCC,QAASC,EAA4BF,EAA5BE,QAASC,EAAmBH,EAAnBG,OAAQC,EAAWJ,EAAXI,OAC7BJ,EAAMoC,UACLhC,GAAUA,GAEdtI,EAAMuK,YAAYpC,EAASC,EAASC,EAAQC,EAAQJ,MCS1D4L,G,wDACF,aAA0B,MAAdpV,EAAc,uDAAJ,GAAI,8BACtB,eAEA,EAAKiG,KAAWjG,EAAQiG,KAExB,EAAKC,GAAWlG,EAAQkG,GAExB,EAAK9L,QAAW4F,EAAQ5F,QAExB,EAAKE,MAAW0F,EAAQ1F,MAExB,EAAKsa,aAAe,KAEpB,EAAKtU,gBAAkBN,EAAQM,iBAAmB,OAElD,EAAKzC,SAAkBmC,EAAQnC,OAfT,E,kDAsB1B,SAAYwX,GACR,OAAO,M,GAxBQtV,GA8BRqV,M,UC3Cf,SAASE,KACL,IAAMC,EAAQhf,SAASC,cAAc,SAWrC,OAVA+e,EAAMC,aAAa,QAAnB,+PAUOD,EAOX,IAAME,GAAa,CACfC,OAAQ,SACRpd,KAAM,OACNF,MAAO,SAyBLud,G,wDACF,WAAY3V,GAAS,oCACjB,cAAMA,GACN,EAAK+R,KAAmB,OAExB,EAAK6D,QAAmB5V,EAAQ4V,SAAW,GAE3C,EAAKC,WAAmB7V,EAAQ6V,YAAc,6NAE9C,EAAKC,SAAmB9V,EAAQ8V,UAAY,OAE5C,EAAKC,UAAmB/V,EAAQ+V,WAAa,QAE7C,EAAKC,UAAmBhW,EAAQgW,WAAaP,GAAWC,OAExD,EAAKO,aAAmBjW,EAAQiW,cAAgB,SAEhD,EAAKC,WAAmBlW,EAAQkW,WAEhC,EAAKC,OAAmBnW,EAAQmW,QAAU,EAC1C,EAAK7V,gBAAmBN,EAAQM,gBAEhC,EAAK8V,SAAmBpW,EAAQoW,SAGhC,EAAKvF,SAAmB7Q,EAAQ6Q,UAAY,EAC5C,EAAKwF,SAAmBrW,EAAQqW,SAChC,EAAKC,SAAmBtW,EAAQsW,SAEhC,EAAKC,YAAuBvW,EAAQuW,aAAe,GACnD,EAAKC,eAAuBxW,EAAQwW,iBAAkB,EACtD,EAAKC,UAAY,EACjB,EAAKC,SAAkB1W,EAAQ0W,SAC/B5e,GAAmB,SAACrB,GAChB,EAAKkgB,iBAAiBlgB,MAE1B,EAAKmgB,gBAnCY,E,oDAyCrB,WAAgB,WACThW,KAAKwV,UACJxV,KAAKyI,iBAAiB,SAAS,SAACG,GAC5B,IAAG,EAAKkN,SAAR,CAGA,IAAI3d,EACEua,EAAK,EAAK1c,MAAQ,EAEpBmC,EADD,EAAKid,YAAcP,GAAWnd,KACzB,EAAKuJ,OAAO,GAAKyR,EAAK,EAAK6C,OAAS,EAClC,EAAKH,YAAcP,GAAWrd,MAChC,EAAKyJ,OAAO,GAAKyR,EAEjB,EAAKzR,OAAO,GAAK,EAAKsU,OAAS,EAEvC,IAAMpgB,EAAI,CAAEgD,GAAI,EAAKlC,OAAO,GACtBif,GAAY,QAAQe,KAAK,EAAKf,UAAU,GAC9C,EAA2B,EAAK3T,qBAAqBpM,GAArD,sBAAO0T,EAAP,KAAgBC,EAAhB,KACIoN,EAAexB,KACbjf,EAAU,EAAKwK,OAAOkW,WACxBC,EAAS,EAAKpB,QAClBkB,EAAa9f,MAAMqT,UAAnB,oBAA2CZ,EAA3C,eAAyDC,EAAzD,OACAoN,EAAa9f,MAAMJ,MAAQ,EAAKqgB,+BAA+B,EAAKrgB,MAAQ,GAAK,KACjFkgB,EAAa9f,MAAMH,OAAS,EAAKogB,+BAA+B,EAAKpgB,QAAU,KAC/EigB,EAAa9f,MAAM6e,WAAa,EAAKA,WACrCxf,EAAQW,MAAM8e,SAAd,UAA4BA,EAAW,EAAKjV,OAAO3J,MAAnD,MACA4f,EAAa9f,MAAM8e,SAAnB,UAAiCA,EAAW,EAAKjV,OAAO3J,MAAxD,MACA4f,EAAa9f,MAAMkf,WAAnB,UAAmC,EAAKA,WAAa,EAAKrV,OAAO3J,MAAjE,MACA4f,EAAa9f,MAAMkgB,WAAnB,UAAmC,EAAKf,OAAS,EAAKtV,OAAO3J,MAA7D,MACA4f,EAAa1hB,MAAQ,EAAKohB,eAAiB,GAAK,EAAKZ,QACrDkB,EAAa9f,MAAM6b,MAAQ,EAAKkD,UAChCe,EAAatB,aAAa,cAAe,EAAKe,aAE9CO,EAAazN,iBAAiB,SAAU,SAACkE,GAErC,EAAKqI,QAAU,GACf,EAAKa,UAAW,EAChB,EAAK5V,OAAO2H,UACZsO,EAAa9f,MAAMmgB,QAAU,UAEjC,IAAIC,EAAc,WACd,EAAKX,UAAW,EAChB,EAAKtV,cAAc,IAAIoK,GAAW,OAAQ,CACtChG,OAAQ,KAEZ,IAAM/D,EAAMsV,EAAa1hB,MASzB,EAAK+L,cAAc,IAAIoK,GAAW,SAAU,CACxChG,OAAQ,EACRyR,SACAxV,SAEJ,EAAKoU,QAAUoB,EACf,EAAKnW,OAAO2H,UACZ,EAAK3H,OAAO2M,oBAAoB,UAAW4J,GAC3CN,EAAatJ,oBAAoB,OAAQ4J,GACzC/gB,EAAQghB,YAAYP,GACpBA,EAAe,KACfM,EAAc,KACd,EAAKN,aAAe,MAExB,EAAKjW,OAAOwI,iBAAiB,UAAW+N,GACxCN,EAAazN,iBAAiB,OAAQ+N,GACtC,IAAME,EAAe,SAAfA,EAAgB/J,GACJ,UAAVA,EAAE7X,KAAiC,KAAd6X,EAAEgK,UACvBhK,EAAE5B,iBACFmL,EAAatJ,oBAAoB,WAAY8J,GAC7CF,MAGRN,EAAazN,iBAAiB,WAAYiO,GAC1CR,EAAazN,iBAAiB,SAAS,SAACkE,GACpC,IAAIiK,GAAU,EACd,EAAKrW,cAAc,IAAIoK,GAAW,QAAS,CACvChG,OAAQ,EACRyR,SACAxV,IAAK+L,EAAEhI,OAAOnQ,MACdiY,QAJuC,SAI/B7L,GACJwV,EAASxV,EACTsV,EAAa1hB,MAAQoM,EACrBgW,GAAU,MAGdA,IACAR,EAASzJ,EAAEhI,OAAOnQ,UAG1BiB,EAAQmB,OAAOsf,GACfA,EAAaW,MAAM,CACfC,eAAe,IAEnB,EAAKZ,aAAeA,Q,8BAKhC,SAAiBrgB,GACbA,EAAImU,YACJnU,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YACpCpf,EAAIuf,UAAYpV,KAAKoV,UACrBvf,EAAIwf,aAAerV,KAAKqV,aACxBxf,EAAIqU,UAAYlK,KAAKmV,UACrB,IAAM6B,EAAMC,SAASjX,KAAKkV,UAC1B,EAKIrf,EAAIqhB,YAAYlX,KAAKgV,SAJrBmC,EADJ,EACIA,sBACAC,EAFJ,EAEIA,uBACAC,EAHJ,EAGIA,sBACAC,EAJJ,EAIIA,uBAGJ,GADAtX,KAAKuX,WAAavX,KAAKuV,OAAS/e,KAAKwE,IAAImc,GAAyB3gB,KAAKwE,IAAIoc,GACxEpX,KAAKyV,UAAYzV,KAAK0V,SAAU,CAC/B,GAAG1V,KAAKuX,WAAavX,KAAKyV,SAAU,CAChC,IAAMhE,EAAOzR,KAAKyV,SAAWzV,KAAKuX,WAC5B5jB,EAAI6C,KAAKC,MAAMuJ,KAAKgV,QAAQ7iB,OAASsf,EAAQ,GACnDzR,KAAKwX,gBAAkBxX,KAAKgV,QAAQyC,UAAU,EAAG9jB,GAAK,WAEtDqM,KAAKwX,gBAAkBxX,KAAKgV,QAEhChV,KAAKhK,MAAQgK,KAAKyV,cAElBzV,KAAKhK,MAAQQ,KAAKoC,IAAIoH,KAAKiQ,SAAUjQ,KAAKuX,YAG9C,IAAMthB,EAAUO,KAAKwE,IAAIqc,GAAyB7gB,KAAKwE,IAAIsc,IAA4BN,EACpFhX,KAAKsV,WACJtV,KAAK/J,OAAS+J,KAAKsV,WAEnBtV,KAAK/J,OAASA,I,uBAKtB,SAAUmJ,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KAInC,EAAKA,GAAK5B,EAAQ4B,GAClB,EAAKY,YAAYZ,GAAK5B,EAAQ4B,OAGtC9J,GAAmB,SAACrB,GAChB,EAAKkgB,iBAAiBlgB,Q,oBAI9B,SAAOA,GAKH,GAJAA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,KAEnB9Q,KAAK6V,SAAR,CAGAhgB,EAAImU,YAEJnU,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YACpCpf,EAAIuf,UAAYpV,KAAKoV,UACrBvf,EAAIwf,aAAerV,KAAKqV,aACxBxf,EAAIqU,UAAYlK,KAAKmV,UACrB,IAAIH,EAAUhV,KAAKgV,QAInB,GAHGhV,KAAKwX,kBACJxC,EAAUhV,KAAKwX,iBAEhBxX,KAAKoV,YAAcP,GAAWnd,KAAK,CAClC,IAAMgb,EAAK1S,KAAKhK,MAAQ,EACxBH,EAAI6hB,SAAS1C,EAAShV,KAAKiB,OAAO,GAAKyR,EAAK1S,KAAKuV,OAAS,EAAGvV,KAAKiB,OAAO,SACtE,GAAGjB,KAAKoV,YAAcP,GAAWrd,MAAO,CAC3C,IAAMkb,EAAK1S,KAAKhK,MAAQ,EACxBH,EAAI6hB,SAAS1C,EAAShV,KAAKiB,OAAO,GAAKyR,EAAI1S,KAAKiB,OAAO,SAEvDpL,EAAI6hB,SAAS1C,EAAShV,KAAKiB,OAAO,GAAKjB,KAAKuV,OAAS,EAAGvV,KAAKiB,OAAO,IAExEpL,EAAIwb,OACJxb,EAAIyB,e,GAhOOua,IAoOJkD,MC7PT4C,G,wDACF,WAAYvY,GAAS,oCACjB,cAAMA,GAEN,EAAKwY,MAAQxY,EAAQwY,MACrB,EAAKA,MAAMC,OAAS,WAChB,EAAK5X,OAAO2H,WAMhB,EAAKkQ,cAAgB,CACjB9hB,MAAOoJ,EAAQ2Y,YAAc3Y,EAAQpJ,MACrCC,OAAQmJ,EAAQ4Y,aAAgB5Y,EAAQnJ,QAb3B,E,gDAiBrB,SAAUmJ,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,QACPzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,GAClB,EAAKY,YAAYZ,GAAK5B,EAAQ4B,OAGnC5B,EAAQwY,QAAUxY,EAAQwY,MAAMK,WAC/BjY,KAAK4X,MAAMC,OAAS,WAChB,EAAK5X,OAAO2H,YAMpB5H,KAAK8X,cAAgB,CACjB9hB,MAAOoJ,EAAQ2Y,YAAc3Y,EAAQpJ,OAASgK,KAAK8X,cAAc9hB,MACjEC,OAAQmJ,EAAQ4Y,aAAgB5Y,EAAQnJ,QAAU+J,KAAK8X,cAAc7hB,U,oBAI7E,SAAOJ,GACHA,EAAIwB,OACD2I,KAAK6D,YACJhO,EAAIib,YAAc,IAEtBe,GAAUxf,UAAU8E,OAAO5E,KAAKyN,KAAMnK,GACtC,IAAMsC,EAAI6H,KAAKiB,OAAO,GAAKjB,KAAKhK,MAAQ,EAClCoC,EAAI4H,KAAKiB,OAAO,GAAKjB,KAAK/J,OAAS,EACtC+J,KAAKD,QAAU,IACdlK,EAAIib,YAAc9Q,KAAKD,SAExBC,KAAK4X,MAAMK,UACVpiB,EAAIqiB,UAAUlY,KAAK4X,MAAOzf,EAAGC,EAAG4H,KAAK8X,cAAc9hB,MAAOgK,KAAK8X,cAAc7hB,QAEjFJ,EAAIyB,c,GArDOua,IAwDJ8F,M,0BClETQ,I,kEACF,WAAY/Y,GAAS,oCACjB,cAAMA,GACN,EAAKgZ,WAAahZ,EAAQiZ,eAC1B,EAAKC,KAAO,KAHK,E,2DAMrB,WACI,IAAMvc,EAAIiE,KAAKkB,kBACf,OAAOlB,KAAKuB,qBAAqBxF,EAAExG,MAAM,EAAG,M,oBAGhD,SAAOM,GAAK,WACR,IAAImK,KAAKsY,MAAQtY,KAAKoY,WAClB5N,uBAAsB,WAClB,IAAI,EAAK8N,KAAM,CACX,IAAMC,EAAY5iB,SAASC,cAAc,OACnC4iB,EAAM,EAAKC,uBACXniB,EAAQ,EAAK2J,OAAO3J,MAC1BiiB,EAAU3D,aAAa,QAAvB,wFAEa,EAAK5e,MAFlB,gDAGc,EAAKC,OAHnB,qLAO2BuiB,EAAI,GAP/B,eAOwCA,EAAI,GAP5C,qBAO2DliB,EAP3D,OAQA,EAAKgiB,KAAOC,EACZ,EAAKtY,OAAOkW,WAAWuC,YAAYH,GACnC,EAAKH,WAAWG,WAGrB,CACH,IAAMC,EAAMxY,KAAKyY,uBACXniB,EAAQ0J,KAAKC,OAAO3J,MAC1B0J,KAAKsY,KAAKliB,MAAMqT,UAAhB,oBAAyC+O,EAAI,GAA7C,eAAsDA,EAAI,GAA1D,qBAAyEliB,EAAzE,KAEJ,sEAAaT,K,4BAGjB,WACOmK,KAAKsY,OACJtY,KAAKsY,KAAKliB,MAAMga,QAAU,W,4BAIlC,WACOpQ,KAAKsY,OACJtY,KAAKsY,KAAKliB,MAAMga,QAAU,U,qBAIlC,WAEOpQ,KAAKsY,MACJtY,KAAKC,OAAOkW,WAAWM,YAAYzW,KAAKsY,MAE5C,4E,GAzDgBzG,KA4DTsG,MC1DTQ,G,wDACF,WAAYvZ,GAAS,oCACjB,cAAMA,GACN,EAAK6V,WAAgB7V,EAAQ6V,WAAa,6NAC1C,EAAKC,SAAgB9V,EAAQ8V,UAAY,OACzC,EAAKF,QAAgB5V,EAAQ4V,SAAW,GACxC,EAAK4D,SAAgBxZ,EAAQwZ,SAC7B,EAAKC,YAAezZ,EAAQyZ,aAAehhB,EAN1B,E,6DASrB,WACI,IAAMihB,EAAK9Y,KAAKqF,KAAK4J,sBAAsBjP,KAAKsF,GAAGyT,aAC7Cre,EAAKsF,KAAKsF,GAAG2J,sBAAsBjP,KAAKqF,KAAK0T,aACnD/Y,KAAKgU,aAAe,CAAC8E,EAAIpe,GACzB,IAAMkC,EAAKlC,EAAG,GAAKoe,EAAG,GAChBhc,EAAKpC,EAAG,GAAKoe,EAAG,GAChBld,EAAQpF,KAAKqF,MAAMiB,EAAIF,GAC7BoD,KAAKgZ,YAAcpd,I,yBAGvB,SAAY8N,GAER,OADA1J,KAAKiZ,0BACE,I,oBAGX,SAAOpjB,GACH,qBAAmBmK,KAAKgU,aAAxB,GAAQ8E,EAAR,KAAYpe,EAAZ,KACMkB,EAAQoE,KAAKgZ,YACbpc,EAAKlC,EAAG,GAAKoe,EAAG,GAChBhc,EAAKpC,EAAG,GAAKoe,EAAG,GAGtB,GAFAjjB,EAAIqU,UAAYrU,EAAI0b,YAAcvR,KAAKN,gBACvC7J,EAAImU,YACDhK,KAAKgV,QAAQ,CAEZnf,EAAIuf,UAAY,SAChBvf,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YACpCpf,EAAIwf,aAAe,SACnB,MAKIxf,EAAIqhB,YAAYlX,KAAKgV,SAJrBmC,EADJ,EACIA,sBACAC,EAFJ,EAEIA,uBACAC,EAHJ,EAGIA,sBACAC,EAJJ,EAIIA,uBAEEnf,EAAIyE,EAAI,EAAIkc,EAAG,GACf1gB,EAAI0E,EAAI,EAAIgc,EAAG,GACrBjjB,EAAI6hB,SAAS1X,KAAKgV,QAAS7c,EAAGC,GAC9B,IAAMpC,EAAQQ,KAAKwE,IAAImc,GAAyB3gB,KAAKwE,IAAIoc,GAA0B,GAC7EnhB,EAAgF,KAAtEO,KAAKwE,IAAIqc,GAAyB7gB,KAAKwE,IAAIsc,IAC3DzhB,EAAImU,YACJ,IAAIkP,EAAS,IAAIC,OACjBD,EAAOta,KAAKzG,EAAInC,EAAM,EAAIoC,EAAInC,EAAO,EAAGD,EAAOC,GAC/C,IAAMmjB,EAAK5iB,KAAK2C,IAAIuB,EAAG,GAAIoe,EAAG,IAAM,GAC9BO,EAAK7iB,KAAK2C,IAAIuB,EAAG,GAAIoe,EAAG,IAAM,GAC9BQ,EAAK9iB,KAAKwE,IAAI4B,GAAM,GACpB2c,EAAK/iB,KAAKwE,IAAI8B,GAAM,GAC1Boc,EAAOta,KAAKwa,EAAKC,EAAIC,EAAIC,GACzB1jB,EAAIoU,KAAKiP,EAAQ,WAIrBrjB,EAAIwc,OAAOyG,EAAG,GAAIA,EAAG,IACrBjjB,EAAIyc,OAAO5X,EAAG,GAAIA,EAAG,IAClBsF,KAAK4Y,WACJ/iB,EAAIwB,OACJxB,EAAI2jB,YAAYxZ,KAAK4Y,WAEzB/iB,EAAI2b,SACDxR,KAAK4Y,UACJ/iB,EAAIyB,UAGRzB,EAAIkb,UAAUrW,EAAG,GAAIA,EAAG,IACxB7E,EAAI4jB,OAAO7d,GACX/F,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,QAAQ,GAAI,GAChBzc,EAAIyc,QAAQ,EAAG,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQ7d,GACZ/F,EAAIkb,WAAWrW,EAAG,IAAKA,EAAG,M,mBAG9B,SAAMuB,GACF,IAAI+D,KAAKgU,aAAc,OAAO,EAC9B,qBAAuBhU,KAAKgU,aAA5B,GAAQvM,EAAR,KAAeiK,EAAf,KACMvX,EAAOlB,EAAqBgD,EAAOwL,EAAOiK,GAChD,OAAOvX,EAAO6F,KAAK6Y,gB,GAtFRrE,IA0FJmE,MClGTe,GAAYljB,KAAKuG,GAAK,IAoBtB4c,G,wDAKF,WAAYva,GAAS,oCACjB,cAAMA,GAEN,EAAKyZ,YAAgBzZ,EAAQyZ,aAAehhB,EAE5C,EAAKmG,OAAgBoB,EAAQpB,QAAU,EAEvC,EAAKlD,SAAgBsE,EAAQtE,UAAY,GAEzC,EAAKC,SAAgBqE,EAAQrE,UAAY,GAEzC,EAAK6d,SAAgBxZ,EAAQwZ,SAE7B,EAAKgB,WAAgBxa,EAAQwa,WAE7B,EAAK3E,WAAgB7V,EAAQ6V,WAAa,6NAE1C,EAAKC,SAAgB9V,EAAQ8V,UAAY,OAEzC,EAAKF,QAAgB5V,EAAQ4V,SAAW,GAExC,EAAK/X,SAAkBmC,EAAQnC,OAE/B,EAAK4c,UAAkBza,EAAQya,QAvBd,E,6DA0BrB,WACI,IAAMxgB,EAAU2G,KAAKqF,KAAK2J,kCACpB1V,EAAQ0G,KAAKsF,GAAG0J,kCACtB,GAAGhP,KAAK/C,OAAO,CACX,IAAM/E,EAAS8E,EACX3D,EAAQ2G,KAAKxG,SACbF,EAAM/B,EAAUK,MAChBoI,KAAKxG,QACLwG,KAAKtG,MACLsG,KAAKlF,SACLkF,KAAKjF,UACL,GAEJiF,KAAKgU,aAAe9b,EACpB8H,KAAKgZ,YAAc,CAAChZ,KAAKxG,QAASwG,KAAKtG,YAQpC,QAAoB6F,IAAjBS,KAAKxG,cAAwC+F,IAAfS,KAAKtG,MAAqB,CAC9D,IAAMxB,EAAS8E,EACX3D,EAAQ2G,KAAKxG,SACbF,EAAM0G,KAAKtG,OACXsG,KAAKxG,QACLwG,KAAKtG,MAAOsG,KAAKlF,SAAWkF,KAAKjF,UACrCiF,KAAKgU,aAAe9b,EACpB8H,KAAKgZ,YAAc,CAAChZ,KAAKxG,QAASwG,KAAKtG,WACpC,CACH,IAAMH,EAAOH,EAA4BC,EAASC,GAC5CpB,EAAS8E,EACXzD,EAAKE,MACLF,EAAKI,IACLJ,EAAKC,QACLD,EAAKG,MACLsG,KAAKlF,SAAWkF,KAAKjF,UACzBiF,KAAKgU,aAAe9b,EACpB8H,KAAKgZ,YAAc,CAACzf,EAAKC,QAASD,EAAKG,U,yBAI/C,SAAYgQ,GAER,OADA1J,KAAKiZ,yBACEva,EAA+BsB,KAAKgU,aAActK,K,oBAG7D,SAAO7T,GAAK,WAEFmI,EAASgC,KAAKhC,OACd9F,EAAS8H,KAAKgU,aACd7e,EAAI+C,EAAO,GACX4hB,EAAO5hB,EAAOA,EAAO/F,OAAS,GAC9B4nB,GAAa/Z,KAAKgZ,YAAY,GAAK,GAAK,EAAK,GAAKU,GAExD,GADA7jB,EAAIqU,UAAYrU,EAAI0b,YAAcvR,KAAKN,gBACpCM,KAAK4Z,WAAY,CAChB,IAAMI,GAAeha,KAAKgZ,YAAY,GAAK,GAAK,EAAK,GAAKU,GAC1D7jB,EAAImU,YACJnU,EAAIkb,UAAU5b,EAAE,GAAIA,EAAE,IACtBU,EAAI4jB,OAAOO,GACXnkB,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,OAAO,GAAI,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQO,GACZnkB,EAAIkb,WAAW5b,EAAE,IAAKA,EAAE,IA0C5B,GAxCAU,EAAImU,YACJnU,EAAIwc,OAAOld,EAAE,GAAIA,EAAE,IACnB+C,EAAO3C,MAAM,EAAG2C,EAAO/F,OAAS,GAAG2H,SAAQ,SAAC3E,EAAGuD,GAC3C,GAAG,EAAKsF,OAAQ,CACZ,IAAMic,EAAQ/hB,EAAOQ,GACfwhB,EAAQhiB,EAAOQ,EAAI,GACzB,EAAmBmF,EAAqBoc,EAAO9kB,EAAG+kB,EAAOlc,GAAjDtD,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GACTD,GAAMC,GACL9E,EAAIyc,OAAO5X,EAAG,GAAIA,EAAG,IACrB7E,EAAI0c,iBAAiBpd,EAAE,GAAIA,EAAE,GAAIwF,EAAG,GAAIA,EAAG,KAE3C9E,EAAIyc,OAAOnd,EAAE,GAAIA,EAAE,SAGvBU,EAAIyc,OAAOnd,EAAE,GAAIA,EAAE,OAG3BU,EAAIyc,OAAOwH,EAAK,GAAIA,EAAK,IAEtB9Z,KAAK4Y,WACJ/iB,EAAIwB,OACJxB,EAAI2jB,YAAYxZ,KAAK4Y,WAEzB/iB,EAAI2b,SACDxR,KAAK4Y,UACJ/iB,EAAIyB,UAGJ0I,KAAK6Z,UACLhkB,EAAImU,YACJnU,EAAIkb,UAAU+I,EAAK,GAAIA,EAAK,IAC5BjkB,EAAI4jB,OAAOM,GACXlkB,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,QAAQ,GAAI,GAChBzc,EAAIyc,QAAQ,EAAG,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQM,GACZlkB,EAAIkb,WAAW+I,EAAK,IAAKA,EAAK,KAE/B9Z,KAAKgV,QAGJ,OAFAnf,EAAImU,YACJnU,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YAC5BjV,KAAKxG,SACT,KAAKjC,EAAUE,OACX5B,EAAIuf,UAAY,OAChBvf,EAAI6hB,SAAS1X,KAAKgV,QAAS7f,EAAE,GAAK,EAAGA,EAAE,GAAK,IAC5C,MACJ,KAAKoC,EAAUC,MACX3B,EAAIuf,UAAY,OAChBvf,EAAI6hB,SAAS1X,KAAKgV,QAAS7f,EAAE,GAAK,GAAIA,EAAE,GAAK,GAC7C,MACJ,QACI,S,mBAMhB,SAAM8G,GACF,IAAM/D,EAAS8H,KAAKgU,aAChBmG,EAAQjiB,EAAO,GACbkiB,EAAeliB,EAAO3C,MAAM,GAClC,EAAG,CACC,IAAM8kB,EAAWD,EAAaxnB,QAC9B,GAAGynB,EAAU,CACT,IAAMlgB,EAAOlB,EAAqBgD,EAAOke,EAAOE,GAChD,GAAGlgB,EAAO6F,KAAK6Y,YACX,OAAO,EAGfsB,EAAQE,QACJF,GAER,OAAO,M,GA9KQ3F,IAkLRmF,MC5MTD,GAAYljB,KAAKuG,GAAK,IAmBtBud,G,wDAKF,WAAYlb,GAAS,oCACjB,cAAMA,GAEN,EAAKyZ,YAAgBzZ,EAAQyZ,aAAehhB,EAE5C,EAAKiD,SAAgBsE,EAAQtE,UAAY,EAEzC,EAAKC,SAAgBqE,EAAQrE,UAAY,EAEzC,EAAK6d,SAAgBxZ,EAAQwZ,SAE7B,EAAKgB,WAAgBxa,EAAQwa,WAE7B,EAAK3E,WAAgB7V,EAAQ6V,WAAa,6NAE1C,EAAKC,SAAgB9V,EAAQ8V,UAAY,OAEzC,EAAKF,QAAgB5V,EAAQ4V,SAAW,GAExC,EAAK/X,SAAkBmC,EAAQnC,OAnBd,E,6DA2DrB,WACI,IAAM5D,EAAU2G,KAAKqF,KAAK2J,kCACpB1V,EAAQ0G,KAAKsF,GAAG0J,kCACtB,GAAGhP,KAAK/C,OAAQ,CACZ,IAAM/E,EAASuC,EACXpB,EAAQ2G,KAAKxG,SACbF,EAAM/B,EAAUK,MAChBoI,KAAKxG,QACLjC,EAAUE,OACVuI,KAAKlF,SACLkF,KAAKjF,UAETiF,KAAKgU,aAAL,yBAAwB3a,EAAQ2G,KAAKxG,UAArC,eAAkDtB,IAClD8H,KAAKgZ,YAAc,CAAChZ,KAAKxG,QAASjC,EAAUE,aACzC,QAAoB8H,IAAjBS,KAAKxG,cAAwC+F,IAAfS,KAAKtG,MAAqB,CAC9D,IAAMxB,EAASuC,EACXpB,EAAQ2G,KAAKxG,SACbF,EAAM0G,KAAKtG,OACXsG,KAAKxG,QACLwG,KAAKtG,MAAOsG,KAAKlF,SAAWkF,KAAKjF,UACrCiF,KAAKgU,aAAL,yBAAwB3a,EAAQ2G,KAAKxG,UAArC,eAAkDtB,IAClD8H,KAAKgZ,YAAc,CAAChZ,KAAKxG,QAASwG,KAAKtG,WACpC,CACH,IAAMH,EAAOH,EAA4BC,EAASC,GAC5CpB,EAASuC,EACXlB,EAAKE,MACLF,EAAKI,IACLJ,EAAKC,QACLD,EAAKG,OAETsG,KAAKgU,aAAL,yBAAwBza,EAAKE,OAA7B,eAAuCvB,IACvC8H,KAAKgZ,YAAc,CAACzf,EAAKC,QAASD,EAAKG,U,oBAI/C,SAAO7D,GACHmK,KAAKiZ,yBACL,IAAM/gB,EAAS8H,KAAKgU,aACdpY,EAAQO,EAAerJ,MAAM,KAArB,CAA4B,GAA5B,sBAAkCoF,KAEhD,GADArC,EAAIqU,UAAYrU,EAAI0b,YAAcvR,KAAKN,gBACpCM,KAAK4Z,WAAY,CAChB,IAAMI,GAAeha,KAAKgZ,YAAY,GAAK,GAAK,EAAK,GAAKU,GAC1D7jB,EAAImU,YACJnU,EAAIkb,UAAU7Y,EAAO,GAAIA,EAAO,IAChCrC,EAAI4jB,OAAOO,GACXnkB,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,OAAO,GAAI,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQO,GACZnkB,EAAIkb,WAAW7Y,EAAO,IAAKA,EAAO,IAuBtC,GArBArC,EAAImU,YACJnU,EAAIwc,OAAOna,EAAO,GAAIA,EAAO,IAC7BrC,EAAI0kB,cAAJ,MAAA1kB,EAAG,eAAkBqC,EAAO3C,MAAM,KAC/ByK,KAAK4Y,WACJ/iB,EAAIwB,OACJxB,EAAI2jB,YAAYxZ,KAAK4Y,WAEzB/iB,EAAI2b,SACDxR,KAAK4Y,UACJ/iB,EAAIyB,UAERzB,EAAImU,YACJnU,EAAIkb,UAAU7Y,EAAO,GAAIA,EAAO,IAChCrC,EAAI4jB,OAAO7d,GACX/F,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,OAAO,GAAI,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQ7d,GACZ/F,EAAIkb,WAAW7Y,EAAO,IAAKA,EAAO,IAC/B8H,KAAKgV,QAAS,CACbnf,EAAImU,YACJ,IAAMwQ,EAAUtiB,EAAO,GAAKA,EAAO,GACnC,EAAoBsD,EAAY,GAAKtD,GAArC,sBAAKC,EAAL,KAAQC,EAAR,KAAWwD,EAAX,KACA/F,EAAIkb,UAAU5Y,EAAGC,GACjBvC,EAAI4jB,OAAO7d,GACR4e,GACC3kB,EAAI4jB,OAAOjjB,KAAKuG,IAEpBlH,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YACpCpf,EAAIuf,UAAY,SAChBvf,EAAI6hB,SAAS1X,KAAKgV,QAAS,IAAKiC,SAASjX,KAAKkV,WAAa,IAAI,GAC5DsF,GACC3kB,EAAI4jB,OAAOjjB,KAAKuG,IAEpBlH,EAAI4jB,QAAQ7d,GACZ/F,EAAIkb,WAAW5Y,GAAIC,M,mBAI3B,SAAM6D,GACF,IAAI+D,KAAKgU,aAAc,OAAO,EAC9B,IAAM9b,EAAS8H,KAAKgU,aACd7Z,EAAO2B,EAA2BG,EAAO/D,GAC/C,OAAOiC,EAAO6F,KAAK6Y,gB,GAlKFrE,IAsKV8F,MC1JTG,I,qBACF,aAA0B,MAAdrb,EAAc,uDAAJ,GAAI,uBAEtBY,KAAK0a,UAAgBtb,EAAQsb,WAAa,WAE1C1a,KAAK2a,IAAL,UAAqBvb,EAAQub,WAA7B,QAAoC,EAEpC3a,KAAK4a,UAAgBxb,EAAQwb,WAAa,SAE1C5a,KAAK6a,QAAgBzb,EAAQyb,SAAW,SAExC7a,KAAK4B,YAAcxC,E,6CAIvB,SAAO0b,GAAO,WACJC,EAAQD,EAAMxW,OAAO0W,QAAO,SAAA7a,GAAQ,OAAIA,EAASd,UAAYc,EAAS0B,oBACtEoZ,EAAgBH,EAAMxW,OAAO0W,QAAO,SAAA7a,GAAQ,OAAIA,EAASd,SAAWc,EAAS0B,oBAC7EqZ,EAAaJ,EAAM9kB,MAAQ8kB,EAAMzS,QAAQnS,KAAO4kB,EAAMzS,QAAQ2E,MACpE,GAAsB,aAAnBhN,KAAK0a,UAA0B,CAC9B,IAAIS,EAAe,EACfC,EAAqB,EACrB3F,EAAW,EACX4F,EAAY,EACVC,EAAWP,EAAMQ,OAAON,GAC9BK,EAASxhB,SAAQ,SAACqG,EAAUzH,GACA,UAArByH,EAASiQ,UACRjQ,EAASnK,MAAQ,EAEjBmK,EAAS+E,wBACT/E,EAASiG,SACTjG,EAASgG,4BAIjB4U,EAAMjhB,SAAQ,SAACqG,EAAUzH,GAErB,MAA0ByH,EAAS6F,uBAA3BhQ,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAET0kB,EAAOjiB,EAAM,EAAI,EAAKiiB,IAAM,EACV,eAArBxa,EAASiQ,UACRqF,EAAWjf,KAAKoC,IAAI5C,EAAOyf,IAE/B4F,GAAcplB,EAAS0kB,EACvBQ,GAAiBllB,EAAO,EAAI0kB,EAAMS,EAClCA,EAAqBnlB,EAAS,EAC9BkK,EAASc,OAAS,CAAC,EAAGka,MAE1BG,EAASxhB,SAAQ,SAACqG,EAAUzH,GACxB,GAAwB,UAArByH,EAASiQ,QAERjQ,EAAS+E,wBACT/E,EAASnK,MAAQyf,EACjBtV,EAASiG,cAEN,GAAwB,eAArBjG,EAASiQ,QAA0B,CACzC,IAAMpX,EAAI8hB,EAAMxb,SAAStJ,MAAQ8kB,EAAMxb,SAAS+I,QAAQnS,KAAO4kB,EAAMxb,SAAS+I,QAAQ2E,MACtF7M,EAAS+E,wBACT/E,EAASnK,MAAQQ,KAAKoC,IAAII,EAAGyc,GAC7BtV,EAASiG,aAIjBqP,EAAWjf,KAAKoC,IAAIsiB,EAAYzF,GAEhC4F,GAAsB,EACA,UAAnBrb,KAAK4a,WACJG,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAAkByH,EAAS6F,uBAAnBhQ,EAAR,EAAQA,MACRmK,EAASc,OAAO,KAAOwU,EAAWzf,GAAS,EAC3CmK,EAASc,OAAO,IAAMoa,KAIR,QAAnBrb,KAAK4a,WACJG,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAAkByH,EAAS6F,uBAAnBhQ,EAAR,EAAQA,MACRmK,EAASc,OAAO,IAAMwU,EAAWzf,GAAS,EAC1CmK,EAASc,OAAO,IAAMoa,KAGR,WAAnBrb,KAAK4a,WACJG,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAAkByH,EAAS6F,uBAA3B,EAAQhQ,MACRmK,EAASc,OAAO,IAAMoa,KAIlC,GAAsB,eAAnBrb,KAAK0a,UAA4B,CAChC,IAAIc,EAAc,EACdC,EAAoB,EACpBC,EAAY,EACZC,EAAW,EAaf,GAVAZ,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAA0ByH,EAAS6F,uBAA3BhQ,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACT0kB,EAAOjiB,EAAM,EAAI,EAAKiiB,IAAM,EAClCe,EAAYllB,KAAKoC,IAAI3C,EAAQylB,GAC7BC,GAAa3lB,EAAM2kB,EACH3kB,EAChBwlB,GAAgBxlB,EAAM,EAAI2kB,EAAMc,EAChCA,EAAoBzlB,EAAQ,EAC5BmK,EAASc,OAAS,CAACua,EAAa,MAEhB,UAAjBxb,KAAK6a,QAAqB,CACzB,IAAMe,EAAWV,EAAW,EAC5BH,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrByH,EAASc,OAAO,IAAM2a,KAG9B,GAAoB,QAAjB5b,KAAK6a,QAAmB,CACvB,IAAMe,EAAWV,EAAW,EAAIS,EAChCZ,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrByH,EAASc,OAAO,IAAM2a,KAG9B,GAAoB,WAAjB5b,KAAK6a,QAAsB,CAC1B,IAAMe,EAAWD,EAAW,EAC5BZ,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrByH,EAASc,OAAO,IAAM2a,KAG9B,GAAoB,kBAAjB5b,KAAK6a,SAA+BE,EAAM5oB,OAAS,EAAG,CAErD,IAAM6D,EAAQQ,KAAKoC,IAAIsiB,EAAYS,GAC7BE,GAAc7lB,EAAQ2lB,IAAaZ,EAAM5oB,OAAS,GAClDypB,EAAW5lB,EAAM,EACvB+kB,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrByH,EAASc,OAAO,IAAQ4a,EAAanjB,EAAOkjB,KAG9B,UAAnB5b,KAAK4a,WACJG,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAAmByH,EAAS6F,uBAApB/P,EAAR,EAAQA,OACRkK,EAASc,OAAO,KAAOya,EAAYzlB,GAAU,KAG/B,QAAnB+J,KAAK4a,WACJG,EAAMjhB,SAAQ,SAACqG,EAAUzH,GACrB,MAAmByH,EAAS6F,uBAApB/P,EAAR,EAAQA,OACRkK,EAASc,OAAO,IAAMya,EAAYzlB,GAAU,KAKxD,GAAGglB,EAAc9oB,OAAQ,CACA,UAAlB2oB,EAAM1K,QACL0K,EAAM9U,uBAEN8U,EAAM3U,wBAEV,IAAM2V,EAAQhB,EAAM9kB,MAAO,EACrB+lB,EAASjB,EAAM7kB,OAAQ,EAC7BglB,EAAcnhB,SAAQ,SAAAqG,GAClBA,EAASc,OAAS,EAAK+a,uBAAuB7b,EAAS0B,iBAAkB1B,EAAU2b,EAAOC,S,oCAKtG,SAAuBE,EAAQ9b,EAAUnH,EAAG2V,GACxC,IAAQxY,EAA6B8lB,EAA7B9lB,IAAK6W,EAAwBiP,EAAxBjP,MAAOE,EAAiB+O,EAAjB/O,OAAQhX,EAAS+lB,EAAT/lB,KAC5B,EAA0BiK,EAAS6F,uBAA3BhQ,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACTyc,EAAK1c,EAAQ,EACb2c,EAAK1c,EAAS,EAChBmC,EAAI,EACJD,EAAI,EAaR,MAZkB,kBAARhC,IACNiC,EAAIjC,EAAMwc,EAAKhE,GAEC,kBAAV3B,IACN7U,EAAIa,EAAIgU,EAAQ0F,GAEC,kBAAXxF,IACN9U,EAAIuW,EAAIzB,EAASyF,GAEF,kBAATzc,IACNiC,EAAIjC,EAAOwc,EAAK1Z,GAEb,CAACb,EAAGC,K,mBAGf,WACI,OAAO,IAAIqiB,EAAaza,KAAK4B,iB,MAItB6Y,MC3NTyB,I,yCACF,WAAYzZ,GAAQ,uBAChBzC,KAAKyC,OAASA,EACdzC,KAAKmc,GAAK1Z,EAAO0Z,GACjBnc,KAAKmR,KAAO1O,EAAO0O,KAGnBnR,KAAKoc,WAAQ7c,EACbS,KAAKqc,cAAW9c,EAEhBS,KAAKsc,QAAS,EACdtc,KAAKuc,YAAShd,EACdS,KAAKtH,SAAM6G,EACXS,KAAKwc,uBAAoBjd,EAEzBS,KAAKyc,aAAc,E,yDAIvB,WAAsD,IAAnCL,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAQlD,OAPA1F,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EAChBrc,KAAK0c,MAAQ,EACb1c,KAAK2c,MAAQ,EACVjX,GACCA,EAAS0W,EAAOC,EAAUrc,MAEvB,CACH0c,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZP,QAAOC,c,sBAIf,SAAS3W,GACL,OAAO1F,O,0BAGX,c,sBAEA,SAAS0F,GACLA,EAAS1F,Q,sBAGb,SAASU,GACL,IAAMkc,EAAQ,GAMd,OALA5c,KAAK6c,UAAS,SAAA7nB,GACV,IAAM8nB,EAAapc,EAAMwC,sBAAsBlO,EAAEyN,QAC9Cqa,GACCF,EAAMnqB,KAAKqqB,MAEZF,I,wBAGX,SAAWna,GACPzC,KAAKuc,OAAO9Z,OAAOzC,KAAKwc,mBAAmBnpB,OAAO2M,KAAKtH,IAAM,EAAG,EAAG+J,K,oBAGvE,WACIzC,KAAKuc,OAAO9Z,OAAOzC,KAAKwc,mBAAmBnpB,OAAO2M,KAAKtH,IAAK,O,MAI9DqkB,G,wDACF,WAAYta,GAAQ,6BAChB,cAAMA,GACN,EAAKua,QAAS,EACd,EAAKC,MAAQxa,EAAOwa,MAAQ,IAAI3Z,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBACpC,IAAMooB,EAAqBD,GAAQ,cAAcnoB,KAAtB,mBAJX,OAKhB,EAAKqoB,YAAc3a,EAAO2a,YAAc,IAAI9Z,KAAI,SAAC/P,EAAGmF,GAChD,IAAM1D,EAAImoB,EAAmB5pB,EAAGmF,GAEhC,OADA1D,EAAEsnB,QAAS,EACJtnB,KARK,E,6DAYpB,WAA0D,IAAnConB,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAClDgX,EAAQ,EACRC,EAAQ,EAeZ,OAdA3c,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EACb3W,GACCA,EAAS0W,EAAOC,EAAUrc,MAE9BA,KAAKid,KAAKnjB,SAAQ,SAACiC,GACf,MAAiCA,EAAEshB,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA5DtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBD,EAAQlmB,KAAKoC,IAAIwD,EAAIsgB,GACrBC,GAAStgB,EACT+f,GAAS/f,KAGb2D,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAOP,QAAOC,c,0CAI7B,SAA6BiB,EAAa5X,GACtC1F,KAAKod,WAAWtjB,SAAQ,SAAAyjB,GACpBD,EAAYC,GACZA,EAAKF,mBAAmB,EAAG,EAAG3X,Q,sBAKtC,SAASA,GACL,IAAI8X,EAqBJ,OApBAxd,KAAKid,KAAKnjB,SAAQ,SAAAiC,GACVyhB,GAIJ9X,EAAS,CACLL,KAAMmY,EACNlY,GAAIvJ,EACJ0hB,KAAM,OACNjkB,QAASjC,EAAUE,OACnBiC,MAAOnC,EAAUI,MAGrBoE,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,GAZHyhB,EAAOzhB,KAefiE,KAAKod,WAAWtjB,SAAQ,SAAA9E,GACpBA,EAAE0oB,SAAShY,MAER1F,O,sBAGX,SAAS0F,GACL1F,KAAKid,KAAKnjB,SAAQ,SAAA9E,GACdA,EAAE6nB,SAASnX,MAGf1F,KAAKod,WAAWtjB,SAAQ,SAAA9E,GACpBA,EAAE6nB,SAASnX,U,GA1EJwW,IA+EbyB,G,wDACF,WAAYlb,GAAQ,oCAChB,cAAMA,GACN,EAAKmb,YAAcnb,EAAOmb,YAAc,IAAIta,IAAI4Z,GAAQ,cAAcnoB,KAAtB,oBAChD,EAAK8oB,WAAapb,EAAOob,WAAa,IAAIva,IAAI4Z,GAAQ,aAAanoB,KAArB,oBAC9C,EAAK+oB,UAAW,EAChB,EAAKrB,aAAc,EALH,E,yDAQpB,WAAsD,IAAnCL,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAC9CgX,EAAQ,EACRC,EAAQ,EACZ3c,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EACb3W,GACCA,EAAS0W,EAAOC,EAAUrc,MAE9B,IAAI+d,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACdle,KAAK4d,WAAW9jB,SAAQ,SAACjG,EAAG6E,GACxB,MAAiC7E,EAAEwpB,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA5DtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBoB,EAAUvnB,KAAKoC,IAAImlB,EAAS3hB,GAC5B4hB,GAAW3hB,EACX+f,GAAS/f,KAEb,IAAM8hB,EAAgB9B,EAAW0B,EACjC3B,EAAQpc,KAAKoc,MACbpc,KAAK6d,UAAU/jB,SAAQ,SAACsQ,EAAG1R,GACvB,MAAiC0R,EAAEiT,mBAAmBjB,EAAQ,EAAG+B,EAAezY,GAAjEtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBsB,EAAUznB,KAAKoC,IAAIqlB,EAAS7hB,GAC5B8hB,GAAW7hB,EACX+f,GAAS/f,KAEbqgB,EAAQlmB,KAAKoC,IAAI,EAAGmlB,EAAUE,GAC9BtB,GAASnmB,KAAKoC,IAAIolB,EAASE,GAC3B9B,EAAQpc,KAAKoc,MAAQO,EAAQ,EAC7B,MAAsB3c,KAAKoe,SAASf,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA7DrJ,EAAf,EAAQsgB,MAIR,OAHAA,GAAStgB,EACT2D,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAOP,QAAOC,c,sBAI7B,SAAS3W,GAAU,WACX2Y,EAAQre,KACZA,KAAK4d,WAAW9jB,SAAQ,SAAAjG,GACpB6R,EAAS,CACLL,KAAMgZ,EACN/Y,GAAIzR,EACJ4pB,KAAM,aACNjkB,QAASjC,EAAUE,OACnBiC,MAAOnC,EAAUI,MAGrB9D,EAAIA,EAAE6pB,SAAShY,GACf2Y,EAAQxqB,KAGZ6R,EAAS,CACLL,KAAMgZ,EACN/Y,GAAItF,KAAKoe,SACT5kB,QAASjC,EAAUE,OACnBiC,MAAOnC,EAAUI,IACjB8lB,KAAM,eAGV,IAAIa,EAAQte,KAoBZ,OAnBAA,KAAK6d,UAAU/jB,SAAQ,SAAAsQ,GACnB1E,EAAS,CACLL,KAAMiZ,EACNhZ,GAAI8E,EACJ5Q,QAAS8kB,IAAU,EAAO/mB,EAAUC,MAAQD,EAAUE,OACtDiC,MAAOnC,EAAUI,IACjB8lB,KAAM,cAEVrT,EAAIA,EAAEsT,SAAShY,GACf4Y,EAAQlU,KAEZ1E,EAAS,CACLL,KAAMiZ,EACNhZ,GAAItF,KAAKoe,SACT5kB,QAAS8kB,IAAUte,KAAOzI,EAAUC,MAAQD,EAAUE,OACtDiC,MAAOnC,EAAUC,MACjBimB,KAAM,cAGHzd,KAAKoe,W,sBAehB,SAAS1Y,GACLA,EAAS1F,MACTA,KAAK4d,WAAW9jB,SAAQ,SAAA9E,GACpBA,EAAE6nB,SAASnX,MAEf1F,KAAK6d,UAAU/jB,SAAQ,SAAA9E,GACnBA,EAAE6nB,SAASnX,MAEf0B,QAAQC,IAAIrH,KAAKoe,UACjB1Y,EAAS1F,KAAKoe,Y,wBAGlB,SAAW3b,EAAQ8b,GACfve,KAAKyC,OAAO8b,EAASd,MAAMlgB,QAAQkF,O,GAtHjByZ,IA0HpBsC,G,wDACF,WAAY/b,GAAQ,oCAChB,cAAMA,GACN,EAAKgc,OAAShc,EAAOgc,OAAS,IAAInb,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBACnC,EAAK0pB,MAAMtsB,SACV,EAAKssB,MAAM,EAAKA,MAAMtsB,OAAS,GAAGusB,UAAW,GAEjD,EAAKZ,UAAW,EAChB,EAAKrB,aAAc,EAPH,E,yDAUpB,WAAsD,WAAnCL,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAC9CgX,EAAQ,EACRC,EAAQ,EACZ3c,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EACb3W,GACCA,EAAS0W,EAAOC,EAAUrc,MAG9B,IAAI+d,EAAU,EACVC,EAAU,EACd,GAAGhe,KAAKye,MAAMtsB,OAAQ,CAClB,IAAMyrB,EAAa5d,KAAKye,MAAMze,KAAKye,MAAMtsB,OAAS,GAAGyrB,WACrDxB,EAAQpc,KAAKoc,MACbwB,EAAW9jB,SAAQ,SAAA6kB,GACf,MAAiCA,EAAGtB,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA7DtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBoB,EAAUvnB,KAAKoC,IAAImlB,EAAS3hB,GAC5B4hB,GAAW3hB,EACX+f,GAAS/f,KAKjB,IAAIuiB,EAAUb,EACVc,EAAU,EACd7e,KAAKye,MAAM3kB,SAAQ,SAACjG,EAAG6E,GACnB,IAAMylB,EAAgB9B,EAAWuC,EAC7BX,EAAU,EACVC,EAAU,EACd9B,EAAQ,EAAKA,MACbvoB,EAAEgqB,UAAU/jB,SAAQ,SAAAwS,GAChB,MAAiCA,EAAG+Q,mBAAmBjB,EAAQ,EAAG+B,EAAezY,GAAlEtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBsB,EAAUznB,KAAKoC,IAAIqlB,EAAS7hB,GAC5B8hB,GAAW7hB,EACX+f,GAAS/f,KAEbuiB,GAAWX,EACXY,EAAUroB,KAAKoC,IAAIimB,EAASX,MAIhCxB,EAAQlmB,KAAKoC,IAAI,EAAGgmB,GACpBjC,EAAQnmB,KAAKoC,IAAIolB,EAASa,GAC1BzC,EAAQpc,KAAKoc,MAAQO,EACrB,MAAsB3c,KAAKoe,SAASf,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA7DrJ,EAAf,EAAQsgB,MAKR,OAJAA,GAAStgB,EACTsgB,GAAS,EACT3c,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAOP,QAAOC,c,sBAI7B,SAAS3W,GAAU,WACX2Y,EAAQre,KACZ,GAAGA,KAAKye,MAAMtsB,OAAQ,CAClB,IAAMyrB,EAAa5d,KAAKye,MAAMze,KAAKye,MAAMtsB,OAAS,GAAGyrB,WACrDA,EAAW9jB,SAAQ,SAACjG,EAAG6E,GACnBgN,EAAS,CACLL,KAAMgZ,EACN/Y,GAAIzR,EACJ2F,QAASjC,EAAUE,OACnBiC,MAAOnC,EAAUI,IACjB8lB,KAAM,eAEVY,EAAQxqB,EAAE6pB,SAAShY,MAmC3B,OAhCA0B,QAAQC,IAAIgX,GACZ3Y,EAAS,CACLL,KAAMgZ,EACN/Y,GAAItF,KAAKoe,SACT5kB,QAASjC,EAAUE,OACnBiC,MAAOnC,EAAUI,IACjB8lB,KAAM,eAGVzd,KAAKye,MAAM3kB,SAAQ,SAACjG,EAAG6E,GACnB,IAAI4lB,EAAQzqB,EACZA,EAAEgqB,UAAU/jB,SAAQ,SAAAsQ,GAChB1E,EAAS,CACLL,KAAMiZ,EACNhZ,GAAI8E,EACJ5Q,QAAS8kB,IAAUzqB,EAAI0D,EAAUC,MAAQD,EAAUE,OACnDiC,MAAOnC,EAAUI,IACjB8lB,KAAM,cAEVa,EAAQlU,EAAEsT,SAAShY,MAGvBA,EAAS,CACLL,KAAMiZ,EACNhZ,GAAI,EAAK8Y,SACT5kB,QAAS8kB,IAAUzqB,EAAI0D,EAAUC,MAAQD,EAAUE,OACnDiC,MAAOnC,EAAUC,MACjBimB,KAAM,YACN3iB,SAAU,IAAMpC,EAAM,QAIvBsH,KAAKoe,W,sBAahB,SAAS1Y,GACLA,EAAS1F,MACTA,KAAKye,MAAM3kB,SAAQ,SAAA9E,GACfA,EAAE6nB,SAASnX,MAEfA,EAAS1F,KAAKoe,Y,sBAGlB,SAAS1d,GACL,IAAMkc,EAAQ,GAOd,OANA5c,KAAK6c,UAAS,SAAA7nB,GACV,GAAc,eAAXA,EAAEmc,KAAL,CACA,IAAM2L,EAAapc,EAAMwC,sBAAsBlO,EAAEyN,QAC9Cqa,GACCF,EAAMnqB,KAAKqqB,OAEZF,I,wBAGX,SAAWna,EAAQ8b,GACf,IAAME,EAAQze,KAAKyC,OAAOgc,MACpBb,EAAaa,EAAMA,EAAMtsB,OAAS,GAAGyrB,WAC3CA,EAAWrgB,QAAQkF,O,GAnJGyZ,IAuJxB4C,G,qJAAyB5C,IAIzB6C,G,wDACF,WAAYtc,GAAQ,oCAChB,cAAMA,GACN,EAAKwa,MAAQxa,EAAOwa,MAAQ,IAAI3Z,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBACpC,EAAK+oB,UAAW,EAHA,E,yDAMpB,WAAsD,IAAnC1B,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAC9CgX,EAAQ,EACRC,EAAQ,EACZ3c,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EACb3W,GACCA,EAAS0W,EAAOC,EAAUrc,MAE9B,IAAMme,EAAgB9B,EAAW,EAWjC,OATArc,KAAKid,KAAKnjB,SAAQ,SAACiC,GACf,MAAiCA,EAAEshB,mBAAmBjB,EAAQ,EAAG+B,EAAezY,GAAjEtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBD,EAAQlmB,KAAKoC,IAAIwD,EAAIsgB,GACrBC,GAAStgB,EACT+f,GAAS/f,KAGb2D,KAAK0c,MAAQA,EAAQ,EACrB1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAOP,QAAOC,c,sBAI7B,SAAS3W,GAAU,WACX8X,EAAOxd,KAyBX,OAvBAA,KAAKid,KAAKnjB,SAAQ,SAACiC,EAAGrD,GAClBgN,EAAS,CACLL,KAAMmY,EACNlY,GAAIvJ,EACJ0hB,KAAM,OACNjkB,QAASgkB,IAAS,EAAOjmB,EAAUC,MAAOD,EAAUE,OACpDiC,MAAOnC,EAAUI,MAGrBoE,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAEX2J,EAAS,CACLL,KAAMmY,EACNlY,GAAItF,KACJyd,KAAM,OACNjkB,QAASgkB,IAASxd,KAAOzI,EAAUC,MAAQD,EAAUE,OACrDunB,UAAWxB,IAASxd,KACpBtG,MAAOnC,EAAUE,OACjBwF,QAAQ,EACRnC,SAAU,GACVC,SAAU,KAEPiF,O,sBAGX,SAAS0F,GACLA,EAAS1F,MACTA,KAAKid,KAAKnjB,SAAQ,SAAA9E,GACdA,EAAE6nB,SAASnX,Q,wBAInB,SAAWjD,EAAQ8b,GACfve,KAAKyC,OAAO8b,EAASd,MAAMlgB,QAAQkF,O,GApEdyZ,IAwEvB+C,G,wDACF,WAAYxc,GAAQ,oCAChB,cAAMA,GACN,EAAKmb,YAAcnb,EAAOmb,YAAc,IAAIta,IAAI4Z,GAAQ,cAAcnoB,KAAtB,oBAChD,EAAK8oB,WAAapb,EAAOob,WAAa,IAAIva,IAAI4Z,GAAQ,aAAanoB,KAArB,oBAC9C,EAAK2pB,UAAW,EAJA,E,yDAOpB,WAAsD,IAAnCtC,EAAmC,uDAA3B,EAAGC,EAAwB,uDAAb,EAAG3W,EAAU,uCAC9CgX,EAAQ,EACRC,EAAQ,EACZ3c,KAAKoc,MAAQA,EACbpc,KAAKqc,SAAWA,EACb3W,GACCA,EAAS0W,EAAOC,EAAUrc,MAG9B,IAAI+d,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACXle,KAAK0e,UACJ1e,KAAK4d,WAAW9jB,SAAQ,SAACjG,EAAG6E,GACxB,MAAiC7E,EAAEwpB,mBAAmBjB,EAAQ,EAAGC,EAAU3W,GAA5DtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBoB,EAAUvnB,KAAKoC,IAAImlB,EAAS3hB,GAC5B4hB,GAAW3hB,EACX+f,GAAS/f,KAIjB,IAAM8hB,EAAgB9B,EAAW7lB,KAAKoC,IAAImlB,EAAS,GAanD,OAZA3B,EAAQpc,KAAKoc,MACbpc,KAAK6d,UAAU/jB,SAAQ,SAACsQ,EAAG1R,GACvB,MAAiC0R,EAAEiT,mBAAmBjB,EAAQ,EAAG+B,EAAezY,GAAjEtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MACnBsB,EAAUznB,KAAKoC,IAAIqlB,EAAS7hB,GAC5B8hB,GAAW7hB,EACX+f,GAAS/f,KAEbqgB,EAAQlmB,KAAKoC,IAAI,EAAGmlB,EAAUE,GAC9BtB,GAASnmB,KAAKoC,IAAIolB,EAASE,GAE3Ble,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAOP,QAAOC,c,sBAI7B,SAAS3W,GACLA,EAAS1F,MACTA,KAAK4d,WAAW9jB,SAAQ,SAAA9E,GACpBA,EAAE6nB,SAASnX,MAEf1F,KAAK6d,UAAU/jB,SAAQ,SAAA9E,GACnBA,EAAE6nB,SAASnX,Q,wBAInB,SAAWjD,EAAQ8b,GACfve,KAAKyC,OAAO8b,EAASd,MAAMlgB,QAAQkF,O,GA3DlByZ,IAiEnBgD,GAAe,CACjBvB,eACAa,mBACAS,cACAH,oBACAC,kBACAhC,QACAoC,MAAOjD,IAGX,SAASgB,GAAQ/L,GACb,OAAO,SAASnc,EAAG0D,GACf,IAAMvD,EAAIiqB,GAAQpqB,GAMlB,GALAG,EAAEonB,OAASvc,KACX7K,EAAEuD,IAAMA,EACRvD,EAAEqnB,kBAAoBrL,EAGnBhc,EAAEsnB,YAAa,CACVznB,EAAEqqB,eACFrqB,EAAEqqB,aAAe,CACblO,KAAM,WACNgL,GAAI,GAAF,OAAKhnB,EAAEgnB,GAAP,eAGV,IAAMxP,EAAIyS,GAAQpqB,EAAEqqB,cACpB1S,EAAE4P,OAASvc,KACX2M,EAAEjU,IAAMA,EACRiU,EAAE6P,kBAAoBrL,EACtBhc,EAAEipB,SAAWzR,EAEjB,OAAOxX,GAGf,SAASiqB,GAAQ3c,GACb,IAAM0O,EAAO1O,EAAO0O,KACdmO,EAAcJ,GAAa/N,IAAS+N,GAAaC,MACjD5B,EAAO,IAAI+B,EAAY7c,GAC7B,OAAO8a,ECjlBX,SAAS1kB,GAAIV,GACT,OAAOA,EAAIA,EAEf,SAASW,GAAMC,EAAGC,GACd,OAAOH,GAAIE,EAAE,GAAKC,EAAE,IAAMH,GAAIE,EAAE,GAAKC,EAAE,I,IA2BrCumB,G,WACF,WAAYngB,GAAS,6BAEjBY,KAAKwf,WAAapgB,EAAQogB,YAAc,GAExCxf,KAAK2a,IAAMvb,EAAQub,KAAO,GAE1B3a,KAAKyf,kBAAL,UAAyBrgB,EAAQqgB,yBAAjC,SACAzf,KAAK0f,QAAQtgB,EAAQugB,KAErB3f,KAAK4f,QAAS,E,8CAMlB,SAAQD,GAAK,WACT3f,KAAK2f,IAAMA,EACX3f,KAAK6f,UAAY,GACjB7f,KAAK8f,cAAgB,GAErB9f,KAAK+f,KAAOX,GAAQpf,KAAK2f,KACzB3f,KAAK+f,KAAKlD,UAAS,SAACU,GACc,eAA3BA,EAAKf,oBACJe,EAAKyC,YAAc,EAAKP,mBAE5B,EAAKI,UAAUptB,KAAK,CAChB0e,KAAMoM,EAAKpM,KACX1O,OAAQ8a,EAAK9a,OACbL,WAAYmb,OAIpB,IAmBI0C,EAnBEC,EAAgB,CAClBC,SAAU,GACVC,WAAY,IAEVC,EAA0B,GAChCrgB,KAAK+f,KAAKO,uBAAuB,EAAG,GAAG,SAAClE,EAAOC,EAAUkB,GACjDA,EAAKP,SACDkD,EAAcC,SAAS/D,KACvB8D,EAAcC,SAAS/D,GAAS,IAEpC8D,EAAcC,SAAS/D,GAAOC,GAAYkB,EAEtC2C,EAAcE,WAAW/D,KACzB6D,EAAcE,WAAW/D,GAAY,IAEzC6D,EAAcE,WAAW/D,GAAUD,GAASmB,MAKpDvd,KAAK+f,KAAKQ,8BACN,SAACC,GACGP,EAAmBO,EAAQrE,GAC3BkE,EAAwBG,EAAQrE,IAAM,CAClCgE,SAAU,GACVC,WAAY,GACZ7C,KAAMiD,MAGd,SAACpE,EAAOC,EAAUkB,GACd,IAAM2C,EAAgBG,EAAwBJ,GAC1CC,EAAcC,SAAS/D,KACvB8D,EAAcC,SAAS/D,GAAS,IAEpC8D,EAAcC,SAAS/D,GAAOC,GAAYkB,EAEtC2C,EAAcE,WAAW/D,KACzB6D,EAAcE,WAAW/D,GAAY,IAEzC6D,EAAcE,WAAW/D,GAAUD,GAASmB,KAGpDvd,KAAKkgB,cAAgBA,EACrBlgB,KAAKqgB,wBAA0BA,EAC/BrgB,KAAK+f,KAAKrC,UAAS,SAACte,GAChB,EAAK0gB,cAAcrtB,KAAK2M,Q,yBAIhC,SAAYe,EAAUO,GAElB,GAAGP,EAASsgB,aAAetgB,EAASsgB,YAAYnE,OAC5C,OAAO,EAEX,IAAMoE,EAAShgB,EAAM6D,WAAWoc,MAAK,SAAAhtB,GAAC,OAAIA,EAAE0R,OAASlF,GAAYxM,EAAE2R,KAAOnF,KAC1E,IAAIugB,EACA,OAAO,EAEX,IAAME,EAAYzgB,EAASc,OAAO1L,QAElC,GADAmL,EAAM0F,WACH1F,EAAM6D,WAAWpS,OAAS,GAA7B,CACA,IAAM0uB,EAAgB1gB,EAASc,OACzBnN,EAAIgF,GAAM8nB,EAAWC,GAC3B,OAAG/sB,EAAI,MACHqM,EAASI,cAAc,IAAIoK,GAAW,YAAa,CAC/C1J,OAAQ2f,EACRzgB,WACAO,QACAzE,MAAO2kB,MAEJ,M,6BAKf,SAAgBlgB,EAAOwf,GAA6B,IAAd/nB,EAAc,uDAAV,EAAGC,EAAO,uDAAH,EACvConB,EAAaxf,KAAKwf,WAClB7E,EAAM3a,KAAK2a,IAEHmG,EAEVZ,EAFAC,SACYY,EACZb,EADAE,WAGA5E,EAAcrjB,EAClB/F,OAAOyH,KAAKknB,GAAmBjnB,SAAQ,SAACknB,EAActoB,GAClD,IAAMuoB,EAASF,EAAkBC,GAC7BE,EAAW,EACTC,EAAO/uB,OAAOyH,KAAKonB,GACzBE,EAAKrnB,SAAQ,SAAAsnB,GACT,IAAMzB,EAAMsB,EAAOG,GACbjhB,EAAWO,EAAMwC,sBAAsByc,EAAIld,QACjD,EAAkBtC,EAAS6F,uBAAnBhQ,EAAR,EAAQA,MACRkrB,EAAW1qB,KAAKoC,IAAI5C,EAAOkrB,MAE/B1F,GAAuB,IAAR9iB,EAAY,EAAGwoB,EAAS,EACvCC,EAAKrnB,SAAQ,SAAAsnB,GACT,IAAMzB,EAAMsB,EAAOG,GACbjhB,EAAWO,EAAMwC,sBAAsByc,EAAIld,QACjDtC,EAASc,OAAO,GAAKua,KAEzBA,GAAgB0F,EAAS,EAAIvG,KAGjC,IAAIQ,EAAe/iB,EAEnBhG,OAAOyH,KAAKinB,GAAiBhnB,SAAQ,SAACsnB,EAAW1oB,GAC7C,IAAM2oB,EAAMP,EAAgBM,GACxBE,EAAY,EACVC,EAAUnvB,OAAOyH,KAAKwnB,GAC5BE,EAAQznB,SAAQ,SAAAknB,GACZ,IAAMrB,EAAM0B,EAAIL,GACV7gB,EAAWO,EAAMwC,sBAAsByc,EAAIld,QACjD,EAA0BtC,EAAS6F,uBAA3B/P,EAAR,EAAQA,OAAR,EAAgBD,MAChBsrB,EAAY9qB,KAAKoC,IAAI3C,EAAQqrB,MAEjCnG,GAAwB,IAARziB,EAAY,EAAI4oB,EAAU,EAC1CC,EAAQznB,SAAQ,SAAAknB,GACZ,IAAMrB,EAAM0B,EAAIL,GACV7gB,EAAWO,EAAMwC,sBAAsByc,EAAIld,QACjDtC,EAASc,OAAO,GAAKka,KAEzBA,GAAiBmG,EAAU,EAAI9B,O,4BAKvC,SAAepgB,GACX,IAAMshB,EAAS1gB,KAAK6f,UAAUc,MAAK,SAAApD,GAAI,OAAIA,EAAKne,UAAYA,KAC5D,OAAGshB,EACQA,EAAOc,WAEX,O,oBAGX,SAAO9gB,GAAM,WACTV,KAAKyhB,gBAAgB/gB,EAAOV,KAAKkgB,eACjC9tB,OAAOsvB,OAAO1hB,KAAKqgB,yBAAyBvmB,SAAQ,SAAAqJ,GAEhD,IAAMoa,EAAO7c,EAAMwC,sBAAsBC,EAAQoa,KAAK9a,QACtD,EAAKgf,gBAAgB/gB,EAAOyC,EAASoa,EAAKtc,OAAO,GAAIsc,EAAKtc,OAAO,W,KAK9Dse,M,cCjMToC,G,gBACF,WAAYlf,EAAQ8a,EAAMqE,GAAc,uBAEpC5hB,KAAKmR,KAAO,aAEZnR,KAAKyC,OAASA,EACdzC,KAAKud,KAAOA,EACZvd,KAAK6hB,IAAMpf,EAAOof,IAClB7hB,KAAKmR,KAAO1O,EAAO0O,KACnBnR,KAAK8hB,YAAcrf,EAAOqf,YAE1B9hB,KAAKmc,GAAKyF,EAAe,GAAH,OAAMrE,EAAKpB,GAAX,YAAiB1Z,EAAO1O,KAAxB,yBAA+CwpB,EAAKpB,GAApD,YAA0D1Z,EAAO1O,MACvFiM,KAAK+hB,WAAY,EACjB/hB,KAAKgiB,uBAAoBziB,EAEzBS,KAAKiiB,sBAAmB1iB,EACxBS,KAAKkiB,eAAY3iB,KAQnB4iB,G,WACF,WAAY1f,GAAQ,kCAEhBzC,KAAKmR,KAAO,SAEZnR,KAAKyC,OAASA,EAEdzC,KAAKmc,GAAK1Z,EAAO1O,KAEjBiM,KAAKggB,aAAc,EAEnBhgB,KAAKiiB,sBAAmB1iB,EAExBS,KAAKoiB,aAAe3f,EAAO2f,aAAa9e,KAAI,SAAAnO,GAAC,OAAI,IAAIwsB,GAAWxsB,EAAG,MACnE6K,KAAKqiB,uBAAyB5f,EAAO4f,uBAAuB/e,KAAI,SAAAnO,GAAC,OAAI,IAAIwsB,GAAWxsB,EAAG,GAAM,MAC7F6K,KAAKsiB,WAAatiB,KAAKoiB,aAAazB,MAAK,SAAAxrB,GAAC,MAAsB,OAAlBA,EAAEsN,OAAO1O,Q,wDAI3D,SAAkBwuB,GAAS,WACvBviB,KAAKoiB,aAAatoB,SAAQ,SAAA5E,GACtB,IAAMstB,EAAQttB,EAASuN,OAAO+f,MACVttB,EAASuN,OAAOggB,YACpC,GAAGD,GAAkC,UAAzBttB,EAASuN,OAAO0O,MAAoBoR,EAAQC,GAAQ,CAC5D,IAAME,EAAYH,EAAQC,GACtBttB,EAASuN,OAAOggB,cAChB,EAAKC,UAAYA,GAEjBA,IAAc,IACdxtB,EAAS6sB,WAAY,GAEzB7sB,EAAS8sB,kBAAoBU,EAAUJ,eAG/CtiB,KAAKqiB,uBAAuBvoB,SAAQ,SAAA5E,GAChC,IAAMytB,EAAYztB,EAASuN,OAAOkgB,UAClC,GAAGA,GAAaJ,EAAQI,GAAY,CAChC,IAAMpF,EAAOgF,EAAQI,GACfC,EAAiBrF,EAAK8E,uBAAuB1B,MAAK,SAAA3rB,GAAC,OAAIA,EAAEyN,OAAOkgB,YAAc,EAAKxG,MACrFoB,IAAS,IACTroB,EAAS6sB,WAAY,GAEzB7sB,EAASgtB,UAAYU,Q,sBAMjC,SAASld,GACLA,EAAS1F,MACTA,KAAKoiB,aAAatoB,SAAQ,SAAA5E,GACnBA,EAAS2sB,eAAeM,GACvBzc,EAASxQ,Q,sBAKrB,SAASwQ,GACL1F,KAAKoiB,aAAatoB,SAAQ,SAAA5E,GACtB,GAAGA,EAAS8sB,6BAA6BL,GAAY,CACjD,IAAMkB,EAAa3tB,EAAS8sB,kBACzB9sB,EAAS6sB,UACRrc,EAAS,CACLL,KAAMnQ,EAASinB,GACf7W,GAAIud,EAAW1G,GACfsB,KAAM,WACNjkB,QAASjC,EAAUG,KACnBgC,MAAOnC,EAAUG,KACjBsd,QAAS9f,EAAS4sB,YAClBhnB,SAAU,GACVvB,KAAM,CACF8L,KAAMnQ,EACNoQ,GAAIud,KAIZnd,EAAS,CACLL,KAAMnQ,EAASinB,GACf7W,GAAIud,EAAW1G,GACfsB,KAAM,WACNzI,QAAS9f,EAAS4sB,YAClBvoB,KAAM,CACF8L,KAAMnQ,EACNoQ,GAAIud,SAQxB7iB,KAAKqiB,uBAAuBvoB,SAAQ,SAAA5E,GAChC,GAAGA,EAASgtB,qBAAqBP,GAAY,CACzC,IAAMkB,EAAa3tB,EAASgtB,UACzBhtB,EAAS6sB,UACRrc,EAAS,CACLL,KAAMnQ,EAASinB,GACf7W,GAAIud,EAAW1G,GACfsB,KAAM,WACNjkB,QAASjC,EAAUG,KACnBgC,MAAOnC,EAAUI,IACjBihB,SAAU,CAAC,GAAI,GACfgB,YAAY,EACZ5E,QAAS9f,EAAS4sB,YAClBhnB,SAAU,GACVC,SAAU,GACVxB,KAAM,CACF8L,KAAMnQ,EACNoQ,GAAIud,KAIZnd,EAAS,CACLL,KAAMnQ,EAASinB,GACf7W,GAAIud,EAAW1G,GACfsB,KAAM,WACN7E,SAAU,CAAC,GAAI,GACfgB,YAAY,EACZ5E,QAAS9f,EAAS4sB,YAClBvoB,KAAM,CACF8L,KAAMnQ,EACNoQ,GAAIud,EACJC,aAAa,a,KASzC,SAASC,GAAOtgB,GACZ,IAAM8f,EAAU,GACV3F,EAAQna,EAAOa,KAAI,SAAA/P,GACrB,IAAMgqB,EAAO,IAAI4E,GAAO5uB,GAExB,OADAgvB,EAAQhvB,EAAEQ,MAAQwpB,EACXA,KAKX,OAHAX,EAAM9iB,SAAQ,SAAAyjB,GACVA,EAAKyF,kBAAkBT,MAEpB3F,E,ICnJLqG,G,WACF,WAAY7jB,GAAS,uBAEjBY,KAAK4f,QAAS,EAEd5f,KAAK6f,UAAY,GAEjB7f,KAAK8f,cAAgB,GAErB9f,KAAKkjB,QAAU,GACfljB,KAAK0f,QAAQtgB,EAAQ+jB,oB,8CAMzB,SAAQC,GAAI,WACRpjB,KAAKojB,GAAKA,EACVpjB,KAAK6f,UAAY,GACjB7f,KAAK8f,cAAgB,GACrB,IAAMlD,EAAQmG,GAAO/iB,KAAKojB,IACpBC,EAAQ,GACdzG,EAAM9iB,SAAQ,SAAAyjB,GACVA,EAAKV,UAAS,SAAC7nB,GACX,EAAK6qB,UAAUptB,KAAK,CAChB0e,KAAMnc,EAAEmc,KACR/R,QAASpK,EAAEyN,OACX+e,WAAYxsB,OAGpBuoB,EAAKG,UAAS,SAAAte,GACV,IACUlK,EAGNkK,EAHAiG,KACIwd,EAEJzjB,EAFAkG,GACA/L,EACA6F,EADA7F,KAEJ,GAAGA,EAAKupB,YAAa,CACjB,IAAMQ,EAAM,GAAH,OAAMpuB,EAAN,YAAkB2tB,GACrBU,EAAM,GAAH,OAAMV,EAAN,YAAoB3tB,GAEvBsuB,EAAWjqB,EAAK8L,KACtB,GAAGge,EAAMjoB,SAASkoB,IAAQD,EAAMjoB,SAASmoB,GACrC,OAEAC,EAAS/gB,OAAOggB,cAChBY,EAAM5wB,KAAK6wB,GACXD,EAAM5wB,KAAK8wB,GACX,EAAKzD,cAAcrtB,KAAK2M,SAG5B,EAAK0gB,cAAcrtB,KAAK2M,SAKpCY,KAAKkjB,QAAUtG,I,yBAGnB,SAAYzc,EAAUO,GAClB,OAAO,I,oBAGX,SAAOA,GACWV,KAAK8f,cACL9f,KAAKkjB,QADnB,IAGMO,EAAc,GACdC,EAAO,IACb,SAASC,EAAkBpG,GAAqB,IAAfqG,EAAe,uDAAJ,GACpCC,EAAiB,CAAC,EAAG,GAGzB,OAAItG,EAAKmF,UACFkB,EAASxoB,SAASmiB,EAAKmF,WAEf,CACHmB,EAAe,GAAMH,EAAK,EAAKnG,EAAK9a,OAAOqhB,cAAgBJ,EAC3DG,EAAe,KAGvBD,EAASnxB,KAAK8qB,EAAKmF,WAEnBmB,EAAiBF,EAAkBpG,EAAKmF,UAAWkB,GAC5C,CACHC,EAAe,GAAMH,EAAK,EAAKnG,EAAK9a,OAAOqhB,cAAgBJ,EAC3DG,EAAe,GAAK,MAGjBA,EAGf7jB,KAAKkjB,QAAQppB,SAAQ,SAAAyjB,GACjB,IAAMpd,EAAWod,EAAK0E,mBACtB,EAAiB0B,EAAkBpG,GAAnC,sBAAOwG,EAAP,KAAWC,EAAX,KACIP,EAAYO,KACZP,EAAYO,GAAM,IAEtBP,EAAYO,GAAIvxB,KAAK8qB,GACrBpd,EAASc,OAAS,CAAC8iB,EAA8B,IAAzBN,EAAYO,GAAI7xB,OAAc6xB,GACnD,W,KA0CAf,MC9HFgB,GAAQrU,GAAaiC,IASrBqS,GAAetU,GAAa6C,IAS5B0R,GAAevU,GAAawD,IAS5BgR,GAAexU,GAAa4D,GAAS,CAC9CzD,WAD8C,SACnC/Z,EAAOC,GACd,MAAO,CAACD,EAAiB,OAATC,EAAkBA,MAW7BouB,GAAuBzU,GAAauE,GAAiB,CAC9DpE,WAD8D,SACnD/Z,EAAOC,GACd,MAAO,CAACD,EAAOC,EAAiB,MAARD,MAWnBsuB,GAAuB1U,GAAaoD,IAEpCuR,GAAa3U,GAAasB,GAAO,CAC1CnB,WAD0C,SAC/B/Z,EAAOC,EAAQd,GACtB,IAAMd,EAAImC,KAAKguB,KAAKhuB,KAAKmH,KAAK3H,EAAQA,EAAQC,EAASA,GAAU,GACjEd,EAAE6I,OAAS3J,EACX,IAAM2E,EAAQ,EAAJ3E,EACV,MAAO,CAAC2E,EAAGA,MAyBbyrB,G,wDACF,WAAYrlB,GAAS,oCACjB,eACA,EAAKuB,WAAa,QAIlB,EAAK+jB,aAAe,IAAIzY,GAAa7M,EAAQslB,cAC7C,EAAK1hB,kBACL,EAAK+D,YACL,EAAKvC,UAAUpF,GACf,EAAKyG,WAAWzG,GAEhB,EAAKvJ,IAAM,KAEX,EAAKH,OAAS,KAEd,EAAKivB,IAAM,EAEX,EAAKtc,QAAU,GACf,EAAK3R,SAAW,KAEtB,EAAKJ,MAAQ,KAEP,EAAKsuB,YAAcxlB,EAAQwlB,YAE3B,EAAKC,gBAAkBzlB,EAAQ0lB,mBAE/B,EAAKC,QAAU3lB,EAAQ2lB,SAAW,EAElC,EAAKC,QAAU5lB,EAAQ4lB,SAAW,GAElC,EAAKrb,gBAAkBvK,EAAQuK,cAE/B,EAAKsb,YAAc7lB,EAAQ6lB,YAGjC,EAAKC,QAAU,KACT,EAAKC,WAAa,CACdhtB,EAAG,KACHC,EAAG,KACHgtB,UAAU,EACVC,YAAY,GAEhB,EAAKC,eAAiB,CAClB3gB,OAAQ,KACRS,WAAY,KACZigB,YAAY,GAGhB,EAAKnlB,QAAU,CACXC,SAAU,KACVC,KAAM,KACNmlB,OAAQ,KACRC,iBAAiB,EACjBC,aAAa,EAEbC,MAAO,CACH3K,MAAO,KACPvZ,QAAS,KACTvF,MAAO,MAEX1C,KAAM,CACFpB,OAAGoH,EACHnH,OAAGmH,EACHomB,cAAUpmB,EACVqmB,cAAUrmB,GAEdsmB,OAAQ,CACJC,aAAa,EACbV,UAAU,EACVC,YAAY,IAIpB,EAAKU,OAAS,CACV5lB,SAAU,MAGd,EAAK6lB,gBAAkB,KAGvB,EAAKC,UAAY7mB,EAAQ6mB,UAEzB,EAAKC,UAAY,KACjB,EAAKC,UAAY,KAEjB,EAAKzxB,KAAOoD,EAAWC,QAtFN,E,uDA4FrB,SAAiBquB,GACbh0B,OAAOgI,OAAO4F,KAAKE,QAAS,CACxBqlB,OAAQa,M,qCAQhB,SAAwBjmB,GACpBA,EAASb,SAAWU,KACpBA,KAAKkmB,UAAY/lB,EACjB/N,OAAOgI,OAAO4F,KAAKE,QAAS,CACxBqlB,OAAQ,CAACvlB,KAAKkmB,WACdd,UAAU,M,wCAQlB,WACI,GAAGplB,KAAKkmB,UAAW,CAEf,IAAMjlB,EAASjB,KAAKkmB,UAAUjlB,OAE9B,OADAjB,KAAKkmB,UAAY,KACVjlB,K,oBAOf,SAAOolB,GACH,MASI7wB,EAAa6wB,GARb3wB,EADJ,EACIA,OACAG,EAFJ,EAEIA,IACO8uB,EAHX,EAGIruB,MACOgwB,EAJX,EAIItwB,MACQuwB,EALZ,EAKItwB,OACAY,EANJ,EAMIA,UACAC,EAPJ,EAOIA,WAPJ,EAQIZ,KARJ,EAQUC,IAEV6J,KAAKoG,SACLpG,KAAKnK,IAAMA,EACXmK,KAAKmW,WAAakQ,EAClBrmB,KAAKtK,OAASA,EACdsK,KAAKwmB,WAAa,CACdxwB,MAAOa,EACPZ,OAAQa,EACR2vB,aAAcH,EACdI,cAAeH,GAEnBvmB,KAAK2kB,IAAMA,EACX3kB,KAAK2mB,sBACL3mB,KAAKmG,wBAEL,IAYIygB,EAZEve,EAAUrI,KAAKqI,QACrB,EAA6DrI,KAAK/H,aAAnDqQ,EAAf,EAAQtS,MAAwBuS,EAAhC,EAAwBtS,OAAqB4wB,EAA7C,EAA0C1uB,EAAW2uB,EAArD,EAAkD1uB,EAC5C2uB,EAAa,CACf5uB,EAAGkQ,EACHjQ,EAAGiQ,EACHrS,MAAOswB,EAAoB,EAAVje,EACjBpS,OAAQswB,EAAqB,EAAVle,GAEjB3R,EAAW,CAAEyB,EAAG,EAAGC,EAAG,EAAGyQ,QAAS,EAAGC,QAAS,GAC9Cke,EAAUD,EAAW/wB,MAAQsS,EAC7B2e,EAAUF,EAAW9wB,OAASsS,EAC9B2e,EAAQF,GAAWC,EAAU,IAAM,IAGrCL,EADD5mB,KAAK4kB,YACS5kB,KAAK4kB,YAELpuB,KAAK2C,IAAI6tB,EAASC,GAGnCjnB,KAAK1J,MAAQswB,EACVA,EAAa5mB,KAAK+kB,UACjB/kB,KAAK+kB,QAAU6B,GAEhBA,EAAa5mB,KAAKglB,UACjBhlB,KAAKglB,QAAU4B,GAEnB,IAAMO,EAAWN,EAAMD,EACjBQ,EAAWN,EAAMF,EACjBS,EAAWN,EAAW/wB,MACtBsxB,EAAWP,EAAW9wB,OAC5B,GAAG+J,KAAK6kB,gBAAiB,CACrB,MAAiB7kB,KAAK6kB,gBAAgBsC,EAAUC,EAAUC,EAAUC,EAAUP,EAAW5uB,EAAG4uB,EAAW3uB,EAAGkuB,EAASC,EAAUM,EAAKC,EAAKxe,EAASC,GAAxIpQ,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX1B,EAASyB,EAAIA,EACbzB,EAAS0B,EAAIA,OAEb1B,EAASyB,EAAc,MAAV+uB,EAAgBH,EAAW5uB,GAAKkvB,EAAW/e,EAAUse,GAAc,EAAIve,EACpF3R,EAAS0B,EAAc,MAAV8uB,EAAgBH,EAAW3uB,GAAKkvB,EAAW/e,EAAWqe,GAAc,EAAIve,EAGzF3R,EAASmS,QAAUnS,EAASyB,EAAIgvB,EAChCzwB,EAASoS,QAAUpS,EAAS0B,EAAIgvB,EAChCpnB,KAAKtJ,SAAWA,EAChBsJ,KAAKunB,gBAAiB,EACtBvnB,KAAK4H,Y,4BAQT,SAAenF,EAAQ+kB,GACnB,IAAM1K,EAAa9c,KAAKkD,sBAAsBT,GAC9CzC,KAAKkmB,UAAY,IAAIlkB,EACrBhC,KAAKmmB,UAAYqB,EAAQ,CACrBniB,KAAMyX,EACNxX,GAAItF,KAAKkmB,YAEblmB,KAAK2G,YAAY,CACbxG,SAAUsC,IAEdzC,KAAKtL,KAAOoD,EAAWE,U,4BAO3B,SAAeoH,GACRY,KAAKtL,OAASoD,EAAWE,SACxBgI,KAAKmmB,UAAU5V,UAAUnR,K,8BAMjC,WACOY,KAAKtL,OAASoD,EAAWE,SACxBgI,KAAKmmB,UAAU5V,UAAU,CACrBjL,GAAItF,KAAKkmB,c,0BAQrB,WACI,MAKInvB,EAAaiJ,KAAKtK,OAAQsK,KAAKmW,YAJxBmQ,EADX,EACItwB,MACQuwB,EAFZ,EAEItwB,OACAY,EAHJ,EAGIA,UACAC,EAJJ,EAIIA,WAEJkJ,KAAKwmB,WAAa,CACdxwB,MAAOa,EACPZ,OAAQa,EACR2vB,aAAcH,EACdI,cAAeH,K,qBAQvB,SAAQhJ,GACJ,IAAMhK,EAASvT,KAAKoO,oBAAoB,CACpCpO,KAAKwmB,WAAWC,aAAa,EAC7BzmB,KAAKwmB,WAAWE,cAAc,IAE9Be,EAASlK,EAAKtc,OACfsc,EAAKje,SAASmP,0BACbgZ,EAASlK,EAAKje,SAASmP,wBAAwBgZ,IAGnD,IAAM1e,GAAUwK,EAAO,GAAKkU,EAAO,IAAMznB,KAAK1J,MACxC0S,GAAUuK,EAAO,GAAKkU,EAAO,IAAMznB,KAAK1J,MAG9C0J,KAAKqK,qBAAqBtB,EAAQC,GAClChJ,KAAK4H,Y,mCAGT,WACI,IAAM1P,EAAS8H,KAAKsE,OAAOkM,wBAC3B,GAAGxQ,KAAK/H,aAAc,CAClB+H,KAAK/H,aAAeA,EAAaC,GACjC,MAGI8H,KAAK/H,aAFFyvB,EADP,EACIvvB,EACGwvB,EAFP,EAEIvvB,EAEE9B,EAAQ0J,KAAK1J,MACnB0J,KAAKtJ,SAASyB,EAAI6H,KAAKtJ,SAASmS,QAAU6e,EAAOpxB,EACjD0J,KAAKtJ,SAAS0B,EAAI4H,KAAKtJ,SAASoS,QAAU6e,EAAOrxB,OAEjD0J,KAAK/H,aAAeA,EAAaC,K,iCAIzC,WAAsB,IAEd0vB,EAFc,OACZlyB,EAASsK,KAAKtK,OAEpBsK,KAAK0kB,aAAa5xB,MAAMkN,MACxB,IAAM6nB,EAA4B,WAC9B,EAAKnD,aAAaoD,OAAO,IAI7B,GAFAF,EAAkBC,EAEf7nB,KAAKimB,UAAW,CACf,IAAM8B,EAAkB/nB,KAAKgoB,YAAYjzB,KAAKiL,MACxCioB,EAAcjoB,KAAKkoB,QAAQnzB,KAAKiL,MACtCtK,EAAO+S,iBAAiB,WAAYsf,GACpCryB,EAAO+S,iBAAiB,OAAQwf,GAChCL,EAAkB,WACdC,IACAnyB,EAAOkX,oBAAoB,WAAYmb,GACvCryB,EAAOkX,oBAAoB,OAAQqb,IAG3CjoB,KAAK0P,QAAUkY,I,2BAGnB,SAAcO,EAAavf,GAAO,WAC1B3M,EAAQ+D,KAAKoO,oBAAoB+Z,GAC/BC,EAAgBnsB,EACtB+D,KAAKgR,UAAY/U,EACjB,IAuBImJ,EAvBA2V,EAAQ/a,KAAKsE,OACXoF,EAAK1J,KAAK+J,cACVpF,EAASoW,EAAM9J,SACjBhV,GAEA,SAACkE,GACG,OAAQ,EAAKD,QAAQ2lB,OAAOT,UACpBjlB,IAAa,EAAKE,sBAG9B,SAACF,GACG,OAAO5B,EAAUmL,EAAIvJ,EAASe,sBAElCmnB,EAAYroB,KAAKuE,WACjB/C,EAAUxB,KAqCd,GA3BI2E,GAAUA,EAAOrF,WAAaU,OAC9BoF,EAAaijB,EAAUpX,SAAShV,GAAO,SAACmE,GACpC,IAAI,EAAKF,QAAQ2lB,OAAOT,SACpB,OAAO,EAEX,IAAMkD,EAAe,EAAKjoB,mBAC1B,OAAOD,EAAKiF,OAASijB,GAAgBloB,EAAKkF,KAAOgjB,MAIzDl2B,OAAOgI,OAAO4F,KAAKE,QAAS,CACxBC,SAAUwE,EACVvE,KAAMgF,EACNogB,gBAAiB7gB,IAAW3E,KAAKE,QAAQC,SACzCslB,YAAargB,IAAepF,KAAKE,QAAQE,OAE7ChO,OAAOgI,OAAO4F,KAAKE,QAAQwlB,MAAO,CAC9B3K,QACAvZ,UACAvF,QACAmsB,kBAEJh2B,OAAOgI,OAAO4F,KAAKE,QAAQ3G,KAAM,CAC7BpB,EAAGgwB,EAAY,GACf/vB,EAAG+vB,EAAY,KAGN,eAAVvf,IAA2B5I,KAAKE,QAAQ2lB,OAAOT,WAAaplB,KAAKE,QAAQ2lB,OAAOC,YAAa,CAC5F,IAAIwC,EAAe3jB,EACnB,MAAO2jB,GAAgBA,EAAahpB,SAAS6Q,MAAQmY,IAAiBtoB,KAClEsoB,EAAeA,EAAahpB,SAEhCU,KAAKuoB,iBAAiBD,GAAgB,CAAEA,IACrCA,GACC3jB,EAAOrD,YAAY,IAAIqJ,GAAW,2BAA4B,CAC1D/B,QACAjE,OAAQ2jB,EACR5nB,MAAOV,KACPqB,SAAS,KAIrB,OAAOrB,KAAKE,U,8BAGhB,WACI,OAAOF,KAAKE,QAAQqlB,QAAUvlB,KAAKE,QAAQqlB,OAAO,K,8BAGtD,SAAiBplB,EAAUyI,GACvB,GAAG5I,KAAKgmB,kBAAoB7lB,EAAU,OAC5BwE,EAAM,UAAG3E,KAAK8G,qBAAR,aAAG,EAAoB3G,SAEnC,GADAH,KAAKwoB,iBAAmB7jB,EACrB3E,KAAKgmB,gBAAiB,CACrB,IAAMyC,EAASzoB,KAAKgmB,gBASpByC,EAAOloB,cAAc,IAAIoK,GAAW,YAAa,CAC7C/B,QACAzI,SAAUsoB,EACV9jB,YAGLxE,GASCA,EAASI,cAAc,IAAIoK,GAAW,YAAa,CAC/C/B,QACAzI,WACAwE,YAGR3E,KAAKgmB,gBAAkB7lB,OACjBH,KAAKgmB,iBASXhmB,KAAKgmB,gBAAgBzlB,cAAc,IAAIoK,GAAW,WAAY,CAC1D/B,QACAzI,WACAwE,OAAQ3E,KAAKwoB,sB,yBAKzB,SAAY5f,GAAO,WAIf,GAFAA,EAAMmC,iBACNnC,EAAM6C,mBACHzL,KAAKslB,eAAeD,WAAvB,CACArlB,KAAKslB,eAAeD,YAAa,EACjC,IAAQxc,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjB1W,OAAOgI,OAAO4F,KAAKE,QAAQ2lB,OAAQ,CAC/BC,aAAa,IAEjB9lB,KAAK0oB,cAAc,CAAC7f,EAASC,IAC7B,IAAM3I,EAAWH,KAAKE,QAAQC,UAAYH,KAAKE,QAAQE,KACvDJ,KAAK2oB,iBAAiBxoB,EAAUyI,GAC7B5I,KAAKE,QAAQulB,aAAezlB,KAAKE,QAAQslB,gBACxCoD,QAAQC,UAAUC,MAAK,WACnB,EAAKlhB,UACL,EAAK1H,QAAQulB,aAAc,EAC3B,EAAKvlB,QAAQslB,iBAAkB,EAC/B,EAAKF,eAAeD,YAAa,KAGrCrlB,KAAKslB,eAAeD,YAAa,K,qBAIzC,SAAQzc,GAAO,WAELmgB,GADyCngB,EAAvCC,QAAuCD,EAA9BE,QAA8BF,EAArBogB,QAAqBpgB,EAAZqgB,QACnBjpB,KAAK6G,kBACf1G,EAAW4oB,EAAQ5oB,SACzB,GAAGH,KAAKgmB,gBAAiB,CACrB,IAAMyC,EAASzoB,KAAKgmB,gBACpByC,EAAOloB,cAAc,IAAIoK,GAAW,cAAe,CAC/C/B,QACAzI,SAAUsoB,KAEdzoB,KAAKgmB,gBAAkB,KAE3B,MAGIhmB,KAAKE,QAFLE,EADJ,EACIA,KACUuE,EAFd,EAEIxE,SAEJ,EAEIH,KAAKE,QAAQwlB,MADbzpB,EADJ,EACIA,MAAOuF,EADX,EACWA,QAERpB,GAaCD,EAASc,OAAShF,EAClBmE,EAAKG,cAAc,IAAIoK,GAAW,OAAQ,CACtC/B,QACAzI,WACAC,OACAM,MAAOV,KACPwB,UACAvF,YAEE0I,EAYNA,EAAOpE,cAAc,IAAIoK,GAAW,OAAQ,CACxC/B,QACAzI,WACAO,MAAOV,KACP2E,SACA1I,WAaJ+D,KAAKO,cAAc,IAAIoK,GAAW,OAAQ,CACtC/B,QACAzI,WACAO,MAAOV,KACP2E,SACA1I,WAGRuO,uBAAsB,WAClB,EAAKtK,QAAQC,SAAW,KACxB,EAAKD,QAAQE,KAAO,KACpBhO,OAAOgI,OAAO,EAAK8F,QAAQ2lB,OAAQ,CAChCC,aAAa,S,yBAaxB,SAAYjd,EAASC,EAASC,EAAQC,EAAQJ,GAAO,WACjD,IAAG5I,KAAKkpB,SAAR,CACAlpB,KAAKkpB,UAAW,EAChB,MAAmDlpB,KAAK/H,aAAzCqQ,EAAf,EAAQtS,MAAwBuS,EAAhC,EAAwBtS,OACxB,GADA,EAA0CkC,EAA1C,EAA6CC,EACG4H,KAAKwmB,YAA/B2C,EAAtB,EAAQ1C,aAAiC2C,EAAzC,EAA0B1C,cACtB1B,EAAUhlB,KAAKglB,QACnB,GAAGhlB,KAAKilB,YAAa,CACjB,IAAMrxB,EAAIoM,KAAKilB,YACTxP,EAAWnN,EAAc,EAAJ1U,EACrB8nB,EAAYnT,EAAe,EAAJ3U,EAC7BoxB,EAAUxuB,KAAKoC,IAAIosB,EAASxuB,KAAKoC,IAAIuwB,EAAK1T,EAAU2T,EAAK1N,IAE7D,IAAI2N,EAAWrpB,KAAK1J,MACdgzB,EAAStgB,EAAS,EAAI,IAAM,EAAI,IACtCqgB,GAAYC,EACZD,EAAW7yB,KAAK2C,IAAI6G,KAAK+kB,QAASvuB,KAAKoC,IAAIosB,EAASqE,IAWpD,IAAIE,EAAgBF,EAAWrpB,KAAK1J,MAChCkzB,EAAgBlhB,EAAUtI,KAAK1J,MAC/BmzB,EAAgBlhB,EAAWvI,KAAK1J,MAChCozB,EAAgBphB,EAAUihB,EAC1BI,EAAgBphB,EAAWghB,EAE3BK,EAAK/gB,EAAU7I,KAAKtJ,SAASyB,EAC7B0xB,EAAK/gB,EAAU9I,KAAKtJ,SAAS0B,EAC7B0xB,GAAMF,EAAKJ,EACXO,GAAMF,EAAKJ,EAEfzpB,KAAK1J,MAAQ+yB,EACbrpB,KAAKqK,qBAAqByf,EAAKJ,EAAYK,EAAKJ,GAMhD3pB,KAAKO,cAAc,IAAIoK,GAAW,YAElC3K,KAAK8H,gBAAe,WAChB,EAAKohB,UAAW,Q,wBAcxB,SAAWngB,EAAQC,EAAQJ,GAAO,WAC3B5I,KAAKgqB,WACRhqB,KAAKgqB,UAAW,EAChBhqB,KAAKqK,qBAAqBtB,EAAQC,GAMlChJ,KAAKO,cAAc,IAAIoK,GAAW,YAClC3K,KAAK8H,gBAAe,WAChB,EAAKkiB,UAAW,Q,+BAcxB,SAAkBnhB,EAASC,EAASF,GAOhC,GANAxW,OAAOgI,OAAO4F,KAAKE,QAAQ3G,KAAM,CAC7BosB,SAAU9c,EACV+c,SAAU9c,IAEd9I,KAAK0oB,cAAc,CAAC7f,EAASC,GAAU,cAEpC9I,KAAKtL,OAASoD,EAAWE,QAA5B,CAKA,GAJA5F,OAAOgI,OAAO4F,KAAKE,QAAQ2lB,OAAQ,CAC/BT,UAAU,EACVC,YAAY,IAEbrlB,KAAKE,QAAQqlB,OAAQ,CACpB,IAAMA,EAASvlB,KAAKK,mBAUpBklB,EAAOhlB,cAAc,IAAIoK,GAAW,aAAc,CAC9C/B,QACAzI,SAAUolB,EACV7kB,MAAOV,QAIf,GAAGA,KAAKE,QAAQC,SAAU,CAWtB,IAAM1L,EAAIuL,KAAKE,QAAQC,SACvB1L,EAAE6M,YAAY,IAAIqJ,GAAW,qBAAsB,CAC/C/B,QACAjE,OAAQlQ,EACRiM,MAAOV,KACPqB,SAAS,S,8BAUrB,SAAiBwH,EAASC,EAASF,GAAO,WACtC,EAEI5I,KAAKE,QAAQ2lB,OADbT,EADJ,EACIA,SAAUC,EADd,EACcA,WAEd,EAAiBrlB,KAAKE,QAAQ3G,KAAtBpB,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EAEX,GADA4H,KAAKtK,OAAOU,MAAM6zB,OAAS,WACvB7E,IAAaC,EAAY,CACzB,MAGIrlB,KAAK0oB,cAAc,CAAC7f,EAASC,IAF7B1I,EADJ,EACIA,KACAD,EAFJ,EAEIA,SAEE1L,EAAI0L,GAAYC,EAyBtB,GAxBG3L,GAgBCA,EAAE6M,YAAY,IAAIqJ,GAAW,oBAAqB,CAC9C/B,QACAzI,SAAU1L,EACViM,MAAOV,KACPqB,SAAS,KAIdrB,KAAKtL,OAASoD,EAAWE,QA2BxB,OAdAgI,KAAKkmB,UAAUjlB,OAASjB,KAAKgR,eAE7BhR,KAAK8H,gBAAe,WAChB,EAAK5H,QAAQulB,aAAc,EAC3B,EAAKvlB,QAAQslB,iBAAkB,EAC/B,EAAKtlB,QAAQ2lB,OAAOR,YAAa,KAyB7C,GALArlB,KAAKO,cAAc,IAAIoK,GAAW,kBAAmB,CACjD/B,QACAlI,MAAOV,QAGPolB,IACJplB,KAAKtK,OAAOU,MAAM6zB,OAAS,YACxB5E,GAAH,CAEA,IAAMiD,EAAetoB,KAAKE,QAAQqlB,OAElCvlB,KAAKE,QAAQ2lB,OAAOR,YAAa,EACjC,IAAMtc,EAASF,EAAU1Q,EACnB6Q,EAASF,EAAU1Q,EAEtBkwB,EACCA,EAAaxuB,SAAQ,SAAArF,GACjBA,EAAEwM,OAAO,IAAM8H,EAAS,EAAKzS,MAC7B7B,EAAEwM,OAAO,IAAM+H,EAAS,EAAK1S,UAGjC0J,KAAKqK,qBAAqBtB,EAAQC,GAClChJ,KAAKO,cAAc,IAAIoK,GAAW,aAEtC,MAA2B3K,KAAK0oB,cAAc,CAAC7f,EAASC,IAAhD3I,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,KAClBJ,KAAK2oB,iBAAiBxoB,GAAYC,EAAMwI,GAExC5I,KAAK8H,gBAAe,WAChB,EAAK5H,QAAQulB,aAAc,EAC3B,EAAKvlB,QAAQslB,iBAAkB,EAC/B,EAAKtlB,QAAQ2lB,OAAOR,YAAa,Q,4BAczC,SAAe6E,EAAYthB,GACV5I,KAAKE,QAAQ3G,KAC1B,GAAGyG,KAAKtL,OAASoD,EAAWE,QAAS,CACjC,IAAMvD,EAAIuL,KAAKE,QAAQC,SACjB4oB,EAAU/oB,KAAK6G,iBAErB,GAAGpS,EACCA,EAAE6M,YAAY,IAAIqJ,GAAW,OAAQ,CACjC/B,QACAjE,OAAQlQ,EACRiM,MAAOV,KACP+oB,UACA1nB,SAAS,SAEV,CACH,IAAQwH,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACjB9I,KAAKO,cAAc,IAAIoK,GAAW,OAAQ,CACtC/B,QACAlI,MAAOV,KACP+oB,UACA9nB,OAAQjB,KAAKoO,oBAAoB,CAACvF,EAASC,OAcnD,OAXA9I,KAAKmqB,eACFnqB,KAAKkmB,YACJlmB,KAAKkmB,UAAUxW,UACf1P,KAAKkmB,UAAY,MAElBlmB,KAAKmmB,YACJnmB,KAAKmmB,UAAUzW,UACf1P,KAAKmmB,UAAY,MAErBnmB,KAAKtL,KAAOoD,EAAWC,aACvBiI,KAAK4H,UAgDT,GAAG5H,KAAKE,QAAQqlB,OAAQ,CACpB,IAAI6E,GAAc,EAKlB,GAJGpqB,KAAK4F,QAAQga,SACZwK,EAAcpqB,KAAKwG,YAAYxG,KAAKK,sBAGpC+pB,GAAepqB,KAAKE,QAAQE,KAAM,CAClC,MAEIJ,KAAKE,QAAQwlB,MADNlkB,GADX,EACIvF,MADJ,EACWuF,SAELpB,EAAOJ,KAAKE,QAAQE,KACpBD,EAAWH,KAAKK,mBAYtBD,EAAKG,cAAc,IAAIoK,GAAW,OAAQ,CACtC/B,QACAzI,WACAC,OACAM,MAAOV,KACPwB,aAEJxB,KAAKE,QAAQE,KAAO,KACpBJ,KAAKE,QAAQC,SAAW,KAEzBH,KAAKE,QAAQqlB,SACTvlB,KAAKE,QAAQC,SAaZH,KAAKE,QAAQC,SAASmB,YAAY,IAAIqJ,GAAW,WAAY,CACzD/B,QACAzI,SAAUH,KAAKK,mBACfK,MAAOV,KACP2E,OAAQ3E,KAAKE,QAAQC,SACrBkB,SAAS,KAYbrB,KAAKO,cAAc,IAAIoK,GAAW,WAAY,CAC1C/B,QACAzI,SAAUH,KAAKK,mBACfK,MAAOV,SAInBA,KAAKE,QAAQqlB,OAAS,KACtBvlB,KAAKqqB,6BAELrqB,KAAK4H,UAET5H,KAAKmqB,iB,0BAQT,SAAathB,EAASC,EAASF,GAC3B,MAII5I,KAAK0oB,cAAc,CAAC7f,EAASC,IAH7B1I,EADJ,EACIA,KACAD,EAFJ,EAEIA,SACA5G,EAHJ,EAGIA,KAEJ,GAAG/C,KAAKwE,IAAIzB,EAAKosB,SAAWpsB,EAAKpB,GAAK,GAC/B3B,KAAKwE,IAAIzB,EAAKqsB,SAAWrsB,EAAKnB,GAAK,EAAG,CACrC,GAAGwQ,EAAMjE,SAAW3E,KAAKtK,OAMrB,OALAsK,KAAKmqB,oBACL/3B,OAAOgI,OAAO4F,KAAKE,QAAQ3G,KAAM,CAC7BosB,cAAUpmB,EACVqmB,cAAUrmB,IAIlB,IAAQ6oB,EAAkBpoB,KAAKE,QAAQwlB,MAA/B0C,cACR,GAAGjoB,GAAYC,EAAM,CACjB,IAAMuE,EAAUxE,GAAYC,EAY5BuE,EAAOrD,YAAY,IAAIqJ,GAAW,QAAS,CACvC/B,QACAlI,MAAOV,KACP2E,SACAyjB,gBACA/mB,SAAS,UAYbrB,KAAKO,cAAc,IAAIoK,GAAW,QAAS,CACvC/B,QACAlI,MAAOV,KACPooB,mBAGRpoB,KAAKmqB,eACL/3B,OAAOgI,OAAO4F,KAAKE,QAAQ3G,KAAM,CAC7BosB,cAAUpmB,EACVqmB,cAAUrmB,O,gCAU1B,SAAmBsJ,EAASC,EAASF,GACjC,MAGI5I,KAAK0oB,cAAc,CAAC7f,EAASC,IAF7B1I,EADJ,EACIA,KACAD,EAFJ,EAEIA,SAEIioB,EAAkBpoB,KAAKE,QAAQwlB,MAA/B0C,cACR,GAAGjoB,GAAYC,EAAM,CACjB,IAAMuE,EAAUxE,GAAYC,EAY5BuE,EAAOrD,YAAY,IAAIqJ,GAAW,eAAgB,CAC9C/B,QACAlI,MAAOV,KACP2E,SACAyjB,gBACA/mB,SAAS,UAYbrB,KAAKO,cAAc,IAAIoK,GAAW,eAAgB,CAC9C/B,QACAlI,MAAOV,KACPooB,qB,6BAKZ,SAAgBvf,EAASC,EAASF,GAC9B,MAGI5I,KAAK0oB,cAAc,CAAC7f,EAASC,IAF7B1I,EADJ,EACIA,KACAD,EAFJ,EAEIA,SAEIioB,EAAkBpoB,KAAKE,QAAQwlB,MAA/B0C,cACR,GAAGjoB,GAAYC,EAAM,CACjB,IAAMuE,EAAUxE,GAAYC,EAC5BuE,EAAOrD,YAAY,IAAIqJ,GAAW,WAAY,CAC1C/B,QACAlI,MAAOV,KACP2E,SACAyjB,gBACA/mB,SAAS,UAGbrB,KAAKO,cAAc,IAAIoK,GAAW,WAAY,CAC1C/B,QACAlI,MAAOV,KACPooB,qB,0BA8CZ,WACIh2B,OAAOgI,OAAO4F,KAAKE,QAAQ3G,KAAM,CAC7BpB,OAAGoH,EACHnH,OAAGmH,IAIPnN,OAAOgI,OAAO4F,KAAKE,QAAQ2lB,OAAQ,CAC/BT,UAAU,EACVC,YAAY,IAEhBjzB,OAAOgI,OAAO4F,KAAKE,QAAS,CACxBC,SAAU,KACVC,KAAM,KACNmlB,OAAQ,S,kCAIhB,SAAqBxc,EAAQC,EAAQ1S,GACjC,MAAgC0J,KAAK/H,aAA7BE,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EAAGpC,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,OACrB,EAAgD+J,KAAKwmB,WAA/B2C,EAAtB,EAAQ1C,aAAiC2C,EAAzC,EAA0B1C,cAM1B,QALannB,IAAVjJ,IACCA,EAAQ0J,KAAK1J,OAId0J,KAAKilB,YAAa,CAEjB,IAAMrxB,EAAIoM,KAAKilB,YACTqF,GAAOnyB,EAAInC,EAAQpC,GAAG0C,EAAQ6yB,EAC9BoB,GAAOpyB,EAAIvE,GAAG0C,EAEd8F,EAAKjE,EAAI7B,EACTk0B,EAAKxqB,KAAKtJ,SAASyB,EAAI4Q,EACvBwF,EAAKic,EAAKpuB,EAChB4D,KAAKtJ,SAASmS,QAAUrS,KAAK2C,IAAI3C,KAAKoC,KAAK0xB,EAAK/b,IAAMgc,GAGtDvqB,KAAKtJ,SAASyB,EAAI6H,KAAKtJ,SAASmS,QAAUzM,EAI1C,IAAMquB,GAAOryB,EAAInC,EAASrC,GAAG0C,EAAQ8yB,EAC/BsB,GAAOtyB,EAAIxE,GAAG0C,EAEd+F,EAAKjE,EAAI9B,EACTq0B,EAAK3qB,KAAKtJ,SAAS0B,EAAI4Q,EACvBwF,EAAKmc,EAAKtuB,EAChB2D,KAAKtJ,SAASoS,QAAUtS,KAAK2C,IAAI3C,KAAKoC,KAAK6xB,EAAKjc,IAAMkc,GAEtD1qB,KAAKtJ,SAAS0B,EAAI4H,KAAKtJ,SAASoS,QAAUzM,OAE1C2D,KAAKtJ,SAASyB,GAAK4Q,EACnB/I,KAAKtJ,SAAS0B,GAAK4Q,EACnBhJ,KAAKtJ,SAASmS,QAAU7I,KAAKtJ,SAASyB,EAAIA,EAAI7B,EAC9C0J,KAAKtJ,SAASoS,QAAU9I,KAAKtJ,SAAS0B,EAAIA,EAAI9B,I,kCAKtD,SAAqBnB,GACjB,IAAMmB,EAAQ0J,KAAK1J,MACbI,EAAWsJ,KAAKtJ,SACtB,MAAO,CAACvB,EAAE,GAAKmB,EAAQI,EAASmS,QAAS1T,EAAE,GAAKmB,EAAQI,EAASoS,W,iCAGrE,SAAoB3T,GAChB,IAAMmB,EAAQ0J,KAAK1J,MACbI,EAAWsJ,KAAKtJ,SACtB,MAAO,EAAEvB,EAAE,GAAKuB,EAASmS,SAASvS,GAAQnB,EAAE,GAAKuB,EAASoS,SAAWxS,K,gCAGzE,SAAmB3C,GACf,IAAM2C,EAAQ0J,KAAK1J,MACnB,OAAOA,EAAQ3C,I,6BAGnB,WACI,MAA6CqM,KAAKwmB,WAAnCF,EAAf,EAAQtwB,MAAwBuwB,EAAhC,EAAwBtwB,OAClBS,EAAWsJ,KAAKtJ,SAChBJ,EAAQ0J,KAAK1J,MACbT,EAAMmK,KAAKnK,IACjBA,EAAI2T,eACJ3T,EAAIuB,UAAU,EAAG,EAAGkvB,EAASC,GAC7B1wB,EAAIS,MAAM0J,KAAK2kB,IAAK3kB,KAAK2kB,KACzB9uB,EAAI4T,UAAUnT,EAAO,EAAG,EAAGA,EAAOI,EAASmS,QAASnS,EAASoS,W,yBAGjE,WACI,IAAM8hB,EAAe,GAAH,sBACX5qB,KAAKoO,oBAAoB,CAAC,EAAE,KADjB,eAEXpO,KAAKoO,oBAAoB,CAACpO,KAAKwmB,WAAWC,aAAazmB,KAAKwmB,WAAWE,kBAG9E,OADA1mB,KAAK6qB,cAAgBD,EACdA,I,6BAGX,WACI,OAAO5qB,KAAK6qB,gB,qBAIhB,WACI7qB,KAAK8H,mB,sBAMT,WACI,GAAI9H,KAAKunB,eAAT,CAEAvnB,KAAK+H,gBACL/H,KAAK8qB,kBACL,IAAMj1B,EAAMmK,KAAKnK,IACX6T,EAAK1J,KAAK+J,cAChB/J,KAAK+qB,SAAWrhB,EAEb1J,KAAK2J,eACJ3J,KAAKuE,WAAWpN,OAAOtB,GAAK,SAACuK,GAAD,OAAUA,EAAKlB,YAAYwK,MACvD1J,KAAKsE,OAAOnN,OAAOtB,GAAK,SAACsK,GACrB,IAAMnN,EAASuL,EAAUmL,EAAIvJ,EAASe,mBAGtC,OADAf,EAAS6qB,aAAeh4B,EACjBA,OAGXgN,KAAKsE,OAAOnN,OAAOtB,GAAK,SAACsK,GACrB,IAAMnN,EAASuL,EAAUmL,EAAIvJ,EAASe,mBAGtC,OADAf,EAAS6qB,aAAeh4B,EACjBA,KAEXgN,KAAKuE,WAAWpN,OAAOtB,GAAK,SAACuK,GAAD,OAAUA,EAAKlB,YAAYwK,OAExD1J,KAAKkmB,YACJrwB,EAAIwB,OACJ2I,KAAKkmB,UAAU/uB,OAAOtB,GACtBA,EAAIyB,WAEL0I,KAAKmmB,YACJtwB,EAAIwB,OACJ2I,KAAKmmB,UAAUjnB,YAAYwK,GAC3B1J,KAAKmmB,UAAUhvB,OAAOtB,GACtBA,EAAIyB,gB,kBA/xCIoK,cAoyCpBtP,OAAOgI,OAAOqqB,GAAMpyB,UAAWoU,IAC/BrU,OAAOgI,OAAOqqB,GAAMpyB,UAAW8R,IAC/B/R,OAAOgI,OAAOqqB,GAAMpyB,UAAWsT,IAC/BvT,OAAOgI,OAAOqqB,GAAMpyB,UAAW0Q,GAC/B3Q,OAAOgI,OAAOqqB,GAAMpyB,UAAW44B,IAC/B74B,OAAOgI,OAAOqqB,GAAMpyB,UAAW64B,IAC/B94B,OAAOgI,OAAOqqB,GAAMpyB,UAAW84B,IAEhB1G,UCr7CA,IACX2G,QADW,WAEP,MAAO,CACH3mB,WAAYzE,KAAKyE,WACjBK,eAAgB9E,KAAK8E,eACrBC,gBAAiB/E,KAAK+E,gBACtBC,oBAAqBhF,KAAKgF,sBAGlCrT,KATW,WAUP,MAAO,CACHopB,MAAO,KAGfsQ,QAAS,CACL5mB,WADK,SACMtE,EAAUsC,GACjBzC,KAAKsrB,eAAe7mB,WAAWtE,GAC5BsC,GACCtC,EAASF,OAAOuD,sBAAsBf,EAAQtC,IAGtD2E,eAPK,SAOU1E,GACXJ,KAAKsrB,eAAexmB,eAAe1E,IAEvC2E,gBAVK,SAUW5E,GACZH,KAAKsrB,eAAevmB,gBAAgB5E,IAExC6E,oBAbK,SAae5E,GAChBJ,KAAKsrB,eAAetmB,oBAAoB5E,IAE5CmrB,qBAhBK,WAiBDvrB,KAAKsrB,eAAe/kB,cACpBvG,KAAKsrB,eAAellB,YCjBjB,IACXolB,OAAQ,CAACrnB,IACTinB,QAFW,WAGP,MAAO,CACHK,YAAazrB,KAAKyrB,YAClBC,SAAU1rB,KAAK2rB,cAGvBC,MAAO,CACHxsB,QAAS,CACL+R,KAAM/e,OACNy5B,QAAS,WACL,MAAO,KAGfC,QAASC,QACTC,mBAAoB,CAChB7a,KAAM8a,WAGdt6B,KApBW,WAqBP,MAAO,CAGHu6B,YAAa,GACbC,YAAa,KAGrBh1B,OAAQ,SAAUvB,GAAe,WAC7B,GAAIoK,KAAKksB,YAAY/5B,OAEd,CACH,IAAMi6B,EAASpsB,KAAKksB,YAAY5oB,KAAI,YAAkC,IAA/B6N,EAA+B,EAA/BA,KAAM1O,EAAyB,EAAzBA,OAAQL,EAAiB,EAAjBA,WACjD,IAAI,EAAKiqB,aAAalb,GAAO,CACzB,IAAG,EAAKkb,aAAa,eAGjB,OAFAlb,EAAO,cAKf,GAAG/O,EAAWkqB,UACV,OAAOlqB,EAAWkqB,UAEtB,MAAgB,EAAKD,aAAalb,GAAM,CAAE1O,SAAQL,eAAlD,sBAAOmqB,EAAP,KAMA,OALG,EAAKP,qBACJO,EAAMz3B,IAAM,EAAKk3B,mBAAmBvpB,IAGxCL,EAAWkqB,UAAYC,EAChBA,KAELC,EAASxsB,KAAKmsB,YAAY7oB,KAAI,SAAA/J,GAChC,IAAI4X,EAAO5X,EAAK4X,MAAQ,YACxB,IAAI,EAAKkb,aAAalb,GAClB,OAAO,KAEX,GAAG5X,EAAK+yB,UACJ,OAAO/yB,EAAK+yB,UAEhB,MAAgB,EAAKD,aAAalb,GAAM,CAAE/R,QAAS7F,IAAnD,sBAAOgzB,EAAP,KACA,GAAG,EAAKP,mBAAoB,CACxB,IAAMS,EAAK,EAAKT,mBAAmBzyB,EAAK8L,KAAK5C,QACvCiqB,EAAK,EAAKV,mBAAmBzyB,EAAK+L,GAAG7C,QACrCkqB,EAAKpzB,EAAKkkB,KAChB8O,EAAMz3B,IAAN,UAAe23B,EAAf,YAAqBC,EAArB,YAA2BC,GAG/B,OADApzB,EAAK+yB,UAAYC,EACVA,KAGX,OAAO32B,EAAc,MAAD,yBAAYw2B,GAAZ,eAAuBI,KAxC3C,OAAO52B,EAAc,MAAOoK,KAAK4sB,OAAOf,UA4ChDgB,QA1EW,WA2EP7sB,KAAKsrB,eAAiB,IAAI7G,GAAMzkB,KAAKZ,SACrCY,KAAK8sB,kBACL9sB,KAAK+sB,gBAETC,cA/EW,WAgFPhtB,KAAKsrB,eAAe5b,WAExB2b,QAAS,CACL0B,aADK,WACU,WACX/sB,KAAKitB,MAAM,kBAAkB,GAC7B,IAAIh7B,EAAI,EACFi7B,EAAK,SAALA,IACF,IAAMxb,EAAMzf,EAAI,IACVk7B,EAAW,EAAK9oB,MAAM9O,MAAMtD,EAAGyf,GAClCyb,EAASh7B,QAER,EAAKg6B,YAAc,EAAKA,YAAY5Q,OAAO4R,GAC3Cl7B,EAAIyf,EACJlH,sBAAsB0iB,IAEtB1iB,sBAAsB,EAAK4iB,WAAWr4B,KAAK,KAG7Cs4B,EAAK,SAALA,IACF,IAAM3b,EAAMzf,EAAI,IACVwrB,EAAO,EAAKb,MAAMrnB,MAAMtD,EAAGyf,GAC9B+L,EAAKtrB,QAEJ,EAAK+5B,YAAc,EAAKA,YAAY3Q,OAAOkC,GAC3CxrB,EAAIyf,EACJlH,sBAAsB6iB,KAEtBp7B,EAAI,EACJuY,sBAAsB0iB,KAG9B1iB,sBAAsB6iB,IAE1BD,WA/BK,WA+BQ,WACTptB,KAAKsrB,eAAegC,OAAOttB,KAAKutB,KAChCn7B,OAAOyH,KAAKmG,KAAKwtB,YAAYlqB,KAAI,SAAAsF,GAC7B,IAAM6kB,EAAO,EAAKD,WAAW5kB,GAAO7T,KAAK,GACzC,EAAKu2B,eAAe7iB,iBAAiBG,EAAO6kB,MAEhDztB,KAAKitB,MAAM,kBAAkB,IAEjCH,gBAvCK,WAuCa,WAId9sB,KAAK4c,MAAQ5c,KAAKsrB,eAAe1lB,QAAQia,UAAUvc,KAAI,SAAA/J,GACdA,EAA7B4X,KAAR,IAEIzO,EAFUN,EAAuB7I,EAAvB6I,WAAYK,EAAWlJ,EAAXkJ,OACpBa,EAAM,EAAKgoB,eAAeroB,6BAQhC,OALIP,EADDY,EAAIV,IAAIH,GACDa,EAAIlP,IAAIqO,GAERa,EAAIX,IAAIF,GAElBC,EAAIN,WAAaA,EACV7I,KAKXyG,KAAKqE,MAAQrE,KAAKsrB,eAAe1lB,QAAQka,cAAcvqB,SAE3Dm4B,aA5DK,WA6DD1tB,KAAKksB,YAAclsB,KAAK4c,MAAMrnB,QAC9ByK,KAAKmsB,YAAcnsB,KAAKqE,MAAM9O,SAWlC6Q,OAzEK,SAyEEkX,EAAaqQ,GAAe,WAC/B3tB,KAAK8sB,kBACL9sB,KAAK0tB,eACL1tB,KAAK4tB,WAAU,WACRtQ,GACCA,IAEJ,EAAKgO,eAAe/kB,cACpB,EAAK+kB,eAAexjB,gBAAe,WAC5B6lB,GACCA,WAUhBhC,YA7FK,WA8FD,OAAO3rB,KAAKsrB,gBAKhBG,YAnGK,WAmGS,WACPzrB,KAAK6tB,uBAGR7tB,KAAK6tB,sBAAuB,EAC5B7tB,KAAK4tB,WAAU,WACX,EAAKtC,eAAe1jB,UACpB,EAAKimB,sBAAuB,S,wBCzM7B,YAAUC,GACrB,IAAMC,EAA+B,kBAAbD,EAClBE,EAAcF,GACdA,EACN,MAAO,CACHG,OAAQ,CAAC,aAAc,mBACvBrC,MAAO,CACHxsB,QAAS,CACL+R,KAAM/e,OACNy5B,QAAS,WACL,MAAO,KAGfxsB,QAAS,CACL8R,KAAM4a,QACNF,SAAS,GAEbppB,OAAQ,CACJ0O,KAAM/e,SAGd87B,MAAO,CACH9uB,QADG,SACKwB,EAAKwV,GAET,IAAM+X,EAASC,KAAKxtB,EAAKwV,GACS,IAA/BhkB,OAAOyH,KAAKs0B,GAAQh8B,QAQvB6N,KAAKsrB,eAAe/a,UAAU3P,IASlC,WArBG,SAqBWA,EAAKwV,GAAQ,WACnBiY,EAAO,GACPC,EAAU,GACRC,EAAOn8B,OAAOyH,KAAK+G,GAAK0C,KAAI,SAAAqJ,GAAC,MAAK,CAAE/D,MAAO+D,EAAGF,QAAS7L,EAAI+L,OAC3D6hB,EAAOp8B,OAAOyH,KAAKuc,GAAQ9S,KAAI,SAAAqJ,GAAC,MAAK,CAAE/D,MAAO+D,EAAGF,QAAS2J,EAAOzJ,OACvE4hB,EAAKz0B,SAAQ,SAACf,GACV,IAAM01B,EAAO11B,EAAE0T,QACX+hB,EAAK7N,MAAK,SAACjlB,GAAD,OAAOA,EAAE+Q,UAAYgiB,MAC/BJ,EAAK57B,KAAKsG,MAGlBy1B,EAAK10B,SAAQ,SAACf,GACV,IAAMmN,EAAOnN,EAAE0T,QACX8hB,EAAK5N,MAAK,SAACjlB,GAAD,OAAOA,EAAE+Q,UAAYvG,MAC/BooB,EAAQ77B,KAAKsG,MAIrBs1B,EAAKv0B,SAAQ,SAACf,GACV,EAAKuyB,eAAe7iB,iBAAiB1P,EAAE6P,MAAO7P,EAAE0T,YAEpD6hB,EAAQx0B,SAAQ,SAACf,GACb,EAAKuyB,eAAe1e,oBAAoB7T,EAAE6P,MAAO7P,EAAE0T,aAG3DpN,QA9CG,SA8CKuB,GACJZ,KAAKsrB,eAAejsB,QAAUuB,GAIlC6B,OAnDG,SAmDI7B,GACHZ,KAAKsrB,eAAerrB,OAAOuD,sBAAsB5C,EAAKZ,KAAKsrB,kBAGnEn0B,OAAQ,SAAUvB,GACd,OAAO,MAEXi3B,QA3EG,WA4EC7sB,KAAKsrB,eAAkB,IAAIyC,EAAQ/tB,KAAKZ,SACxCY,KAAKsrB,eAAejsB,QAAUW,KAAKX,QACnCW,KAAK0uB,gBACL1uB,KAAKyE,WAAWzE,KAAKsrB,eAAgBtrB,KAAKyC,SAM9CksB,UArFG,WAsFC3uB,KAAKsrB,eAAe5b,UACpB1P,KAAK+E,gBAAgB/E,KAAKsrB,iBAE9BD,QAAS,CACLqD,cADK,WACW,WACZt8B,OAAOyH,KAAKmG,KAAKwtB,YAAYlqB,KAAI,SAAAsF,GAC7B,IAAM6kB,EAAO,EAAKD,WAAW5kB,GAC7B,EAAK0iB,eAAe7iB,iBAAiBG,EAAO6kB,UC3FjD,YAAUK,EAAUc,GAC/B,IAAMb,EAA+B,kBAAbD,EAClBE,EAAcF,GACdA,EACN,MAAO,CACHG,OAAQ,CAAE,iBAAkB,sBAAuB,YACnDrC,MAAO,CACHxsB,QAAS,CACL+R,KAAM/e,OACNy5B,QAAS,WACL,MAAO,KAGfxmB,KAAMjT,OACNkT,GAAIlT,QAaR+E,OAAQ,SAAUvB,GACd,OAAO,MAEXi3B,QA1BG,WA2BC,IAAMnsB,EAAQV,KAAK0rB,WACbmD,EAAenuB,EAAMwC,sBAAsBlD,KAAKqF,MAChDypB,EAAapuB,EAAMwC,sBAAsBlD,KAAKsF,IAEjDupB,GAAgBC,IACf9uB,KAAKsrB,eAAiB,IAAIyC,EAAJ,mCACf/tB,KAAKZ,SADU,IAElBiG,KAAMwpB,EACNvpB,GAAIwpB,KAER9uB,KAAK0uB,gBACL1uB,KAAK8E,eAAe9E,KAAKsrB,kBAGjCyD,QAzCG,WAyCO,WACN/uB,KAAKgvB,QAAUhvB,KAAKivB,QAAO,iBAAM,CAAC,EAAK5pB,KAAM,EAAKC,GAAI,EAAKlG,YAAU,WACjE,EAAK8vB,oBAGb7D,QAAS,CACL6D,cADK,WAED,IAAMxuB,EAAQV,KAAK0rB,WACbmD,EAAenuB,EAAMwC,sBAAsBlD,KAAKqF,MAChDypB,EAAapuB,EAAMwC,sBAAsBlD,KAAKsF,IACpDtF,KAAKsrB,eAAe/a,UAApB,mCACOvQ,KAAKZ,SADZ,IAEIiG,KAAMwpB,EACNvpB,GAAIwpB,MAmBZJ,cA3BK,WA2BW,WACZt8B,OAAOyH,KAAKmG,KAAKwtB,YAAYlqB,KAAI,SAAAsF,GAC7B,IAAM6kB,EAAO,EAAKD,WAAW5kB,GAC7B,EAAK0iB,eAAe7iB,iBAAiBG,EAAO6kB,QAIxDkB,UAhFG,WAiFC3uB,KAAKgvB,UACFhvB,KAAKsrB,gBACJtrB,KAAKgF,oBAAoBhF,KAAKsrB,mBC7F/B,I,UAAA,SAAUwC,GACrB,IAAMC,EAA+B,kBAAbD,EAClBE,EAAcF,GACdA,EACN,MAAO,CACHtC,OAAQ,CAACrnB,IACT8pB,OAAQ,CACJkB,iBAAkB,CACd9pB,KAAM,cAEV+pB,sBAAuB,CACnB/pB,KAAM,mBAEVomB,YAAa,CACTpmB,KAAM,gBAGdlO,OAAQ,SAAUvB,GACd,OAAOA,EAAc,cAAeoK,KAAK4sB,OAAOf,UAEpDD,MAAO,CACHxsB,QAAS,CACL+R,KAAM/e,OACNy5B,QAAS,WACL,MAAO,KAGfxsB,QAAS,CACL8R,KAAM4a,QACNF,SAAS,GAEbppB,OAAQ,CACJ0O,KAAM/e,SAGd87B,MAAO,CACH9uB,QADG,SACKwB,EAAKwV,GACNiZ,KAAKC,UAAU1uB,KAASyuB,KAAKC,UAAUlZ,IAG1CpW,KAAKsrB,eAAe/a,UAAU3P,IAGlC,WARG,SAQWA,EAAKwV,GAAQ,WACnBiY,EAAO,GACPC,EAAU,GACRC,EAAOn8B,OAAOyH,KAAK+G,GAAK0C,KAAI,SAAAqJ,GAAC,MAAK,CAAE/D,MAAO+D,EAAGF,QAAS7L,EAAI+L,OAC3D6hB,EAAOp8B,OAAOyH,KAAKuc,GAAQ9S,KAAI,SAAAqJ,GAAC,MAAK,CAAE/D,MAAO+D,EAAGF,QAAS2J,EAAOzJ,OACvE4hB,EAAKz0B,SAAQ,SAACf,GACV,IAAM01B,EAAO11B,EAAE0T,QACX+hB,EAAK7N,MAAK,SAACjlB,GAAD,OAAOA,EAAE+Q,UAAYgiB,MAC/BJ,EAAK57B,KAAKsG,MAGlBy1B,EAAK10B,SAAQ,SAACf,GACV,IAAMmN,EAAOnN,EAAE0T,QACX8hB,EAAK5N,MAAK,SAACjlB,GAAD,OAAOA,EAAE+Q,UAAYvG,MAC/BooB,EAAQ77B,KAAKsG,MAIrBs1B,EAAKv0B,SAAQ,SAACf,GACV,EAAKuyB,eAAe7iB,iBAAiB1P,EAAE6P,MAAO7P,EAAE0T,YAEpD6hB,EAAQx0B,SAAQ,SAACf,GACb,EAAKuyB,eAAe1e,oBAAoB7T,EAAE6P,MAAO7P,EAAE0T,aAG3DpN,QAjCG,SAiCKuB,GACJZ,KAAKsrB,eAAejsB,QAAUuB,GAIlC6B,OAtCG,SAsCI7B,GACHZ,KAAKsrB,eAAerrB,OAAOuD,sBAAsB5C,EAAKZ,KAAKsrB,kBAGnEuB,QAzEG,WAyEO,WACN7sB,KAAKsrB,eAAkB,IAAIyC,EAAQ/tB,KAAKZ,SACxCY,KAAKsrB,eAAejsB,QAAUW,KAAKX,QACnCjN,OAAOyH,KAAKmG,KAAKwtB,YAAYlqB,KAAI,SAAAsF,GAC7B,IAAM6kB,EAAO,EAAKD,WAAW5kB,GAAO7T,KAAK,GACzC,EAAKu2B,eAAe7iB,iBAAiBG,EAAO6kB,MAEhDztB,KAAKmvB,iBAAiBnvB,KAAKsrB,eAAgBtrB,KAAKyC,SAEpDssB,QAlFG,WAmFC/uB,KAAKsrB,eAAe/kB,eAExBgpB,QArFG,WAsFCvvB,KAAKsrB,eAAe7pB,iBAExBktB,UAxFG,WAyFC3uB,KAAKsrB,eAAe5b,UACpB1P,KAAKovB,sBAAsBpvB,KAAKsrB,oBC1FtCkE,GAAc,CAQhB,QAQA,YAQA,UAQA,UAQA,UAQA,OAQA,OAEA,aAOEC,GAAc,CAChB,OACA,WAOA,cAEEC,GAAe,CAQjB,eAQA,uBAQA,eAQA,uBAQA,eAEA,cAGEC,GAAa,CACf,CACI57B,KAAM,QACN67B,UAAWC,IAEf,CAMI97B,KAAM,QACN67B,UAAWE,GAAW,WAZd,sBAcTJ,GAAapsB,KAAI,SAAAvP,GAAI,MAAK,CACzBA,OACA67B,UAAWE,GAAW/7B,QAhBd,eAkBTy7B,GAAYlsB,KAAI,SAAAvP,GAAI,MAAK,CACxBA,OACA67B,UAAW5B,GAAcj6B,QApBjB,eAsBT07B,GAAYnsB,KAAI,SAAAvP,GAAI,MAAK,CACxBA,OACA67B,UAAWG,GAAUh8B,SAGvBi8B,GAAkB,IACxBC,eAAeC,OAAO,cAAtB,wDACI,aAAc,oCACV,eACA,EAAKC,aAAa,CAACz7B,KAAM,SAFf,EADlB,yCAAmD07B,eASpC,I,GAAA,IASXC,QAAS,SAACC,GAAsB,IAAjBxgB,EAAiB,uDAAP,GACjBygB,EAAcP,GACflgB,GAAWA,EAAQ0gB,SAClBD,EAAczgB,EAAQ0gB,QAE1Bb,GAAW71B,SAAQ,SAAAkH,GACfsvB,EAAIV,UAAJ,UAAiBW,GAAjB,OAA+BvvB,EAAEjN,MAAQiN,EAAE4uB,cAG5C9f,EAAQ2gB,gBACPr+B,OAAOyH,KAAKiW,EAAQ2gB,gBAAgB32B,SAAQ,SAAA/F,GACxCu8B,EAAIV,UAAJ,UAAiBW,GAAjB,OAA+Bx8B,GAAQi6B,GAAcle,EAAQ2gB,eAAe18B,QAGjF+b,EAAQ4gB,cACPt+B,OAAOyH,KAAKiW,EAAQ4gB,cAAc52B,SAAQ,SAAA/F,GACtCqT,QAAQC,IAAR,UAAekpB,GAAf,OAA6Bx8B,IAC7Bu8B,EAAIV,UAAJ,UAAiBW,GAAjB,OAA+Bx8B,GAAQ+7B,GAAWhgB,EAAQ4gB,aAAa38B,QAG5E+b,EAAQ6gB,YACPv+B,OAAOyH,KAAKiW,EAAQ6gB,YAAY72B,SAAQ,SAAA/F,GACpCqT,QAAQC,IAAR,UAAekpB,GAAf,OAA6Bx8B,IAC7Bu8B,EAAIV,UAAJ,UAAiBW,GAAjB,OAA+Bx8B,GAAQg8B,GAAUjgB,EAAQ6gB,WAAW58B,UCpM9E2lB,GAAYljB,KAAKuG,GAAK,IACfxF,GAAY,CAErBC,MAAO,EAEPC,OAAQ,EAERC,KAAM,EAENC,IAAK,EAELi5B,UAAW,EACXC,QAAS,IAGAC,IAAe,wBACvBv5B,GAAUC,MAAQ,IAASkiB,IADJ,kBAEvBniB,GAAUE,OAAS,IAASiiB,IAFL,kBAGvBniB,GAAUG,KAAO,GAHM,kBAIvBH,GAAUI,IAAM,GAAK+hB,IAJE,kBAKvBniB,GAAUq5B,UAAY,IAASlX,IALR,kBAMvBniB,GAAUs5B,QAAU,IAASnX,IANN,IASrB,SAAS1c,GACZtC,EAAIC,GASN,IAREC,EAQF,uDARcrD,GAAUI,IACtBkD,EAOF,uDAPYtD,GAAUI,IACpB+kB,EAMF,uDANU,GACRC,EAKF,uDALU,GACRoU,EAIF,uDAJS,EACPC,EAGF,uDAHS,GACPC,EAEF,uCADEC,EACF,uCACMh5B,EAAS,GAEb,GAAG0C,IAAcrD,GAAUE,OAAQ,CAG/B,GAAGoD,IAAYtD,GAAUC,MACrB,GAAIy5B,GAAkC,IAArBA,EAAU9+B,OAAc,CAErC,IAAMgG,EAAI84B,EAAU,GAAKC,EAAW,GAC9B94B,EAAI64B,EAAU,GAAKC,EAAW,GACpCh5B,EAAOzF,KAAK,CAACiI,EAAG,GAAItC,IACpBF,EAAOzF,KAAK,CAAC0F,EAAGC,IAChBF,EAAOzF,KAAK,CAAC0F,EAAGwC,EAAG,UAEnBzC,EAAOzF,KAAK,CAACiI,EAAG,GAAIC,EAAG,KAG5BE,IAAYtD,GAAUs5B,UACrB34B,EAAOzF,KAAK,CAACiI,EAAG,GAAIA,EAAG,GAAKs2B,IAC5B94B,EAAOzF,KAAK,CAACkI,EAAG,GAAKo2B,EAAMr2B,EAAG,GAAKs2B,IACnC94B,EAAOzF,KAAK,CAACkI,EAAG,GAAKo2B,EAAMp2B,EAAG,MAItC,GAAGC,IAAcrD,GAAUC,QACpBqD,IAAYtD,GAAUI,KACrBO,EAAOzF,KAAK,CAACkI,EAAG,GAAID,EAAG,KAExBG,IAAYtD,GAAUC,OACrB,GAAIy5B,GAAkC,IAArBA,EAAU9+B,OAAc,CAErC,IAAM+c,EAAK+hB,EAAU,GAAKC,EAAW,GAC/BjvB,EAAKgvB,EAAU,GAAKC,EAAW,GAC/B/hB,EAAK8hB,EAAU,GAAKC,EAAW,GAC/BhvB,EAAK+uB,EAAU,GAAKC,EAAW,GACrCh5B,EAAOzF,KAAK,CAACyc,EAAIC,IACjBjX,EAAOzF,KAAK,CAACyc,EAAIhN,IACjBhK,EAAOzF,KAAK,CAACwP,EAAIC,IACjBhK,EAAOzF,KAAK,CAACwP,EAAItH,EAAG,UAEpBzC,EAAOzF,KAAK,CAACiI,EAAG,GAAKgiB,EAAOhiB,EAAG,KAC/BxC,EAAOzF,KAAK,CAACiI,EAAG,GAAKgiB,EAAO/hB,EAAG,KAmB3C,OAdGC,IAAcrD,GAAUq5B,YACpB/1B,IAAYtD,GAAUI,KACrBO,EAAOzF,KAAK,CAACkI,EAAG,GAAID,EAAG,KAExBG,IAAYtD,GAAUs5B,UACrB34B,EAAOzF,KAAK,CAACiI,EAAG,GAAKgiB,EAAOhiB,EAAG,KAC/BxC,EAAOzF,KAAK,CAACiI,EAAG,GAAKgiB,EAAOhiB,EAAG,GAAKiiB,IACpCzkB,EAAOzF,KAAK,CAACiI,EAAG,GAAKq2B,EAAMr2B,EAAG,GAAKiiB,IACnCzkB,EAAOzF,KAAK,CAACiI,EAAG,GAAKq2B,EAAMp2B,EAAG,OAItCzC,EAAOqF,QAAQ7C,GACfxC,EAAOzF,KAAKkI,GACLzC,EAEX,SAASsF,GAAS9C,EAAIC,GAClB,MAAO,CAACD,EAAG,GAAKC,EAAG,GAAID,EAAG,GAAKC,EAAG,IAGtC,SAAS8C,GAAOC,GACZ,OAAOlH,KAAKmH,KAAKD,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAGpD,SAASE,GAASF,EAAKpH,GACnB,MAAO,CAACoH,EAAI,GAAKpH,EAAOoH,EAAI,GAAKpH,GAG9B,SAAS66B,GAAiBj5B,GAC7B,IAAMk5B,EAAO,GACTz9B,EAAIuE,EAAO/F,OACXF,EAAI,EACJo/B,EAAc,EAClB,MAAOp/B,EAAI0B,EAAG,CACV,IAAM+G,EAAKxC,EAAOjG,EAAE,GACd0I,EAAKzC,EAAOjG,GACZkI,EAAO3D,KAAKmH,KAAK7E,GAAM4B,EAAIC,IACjC02B,GAAel3B,EACfi3B,EAAK3+B,KAAK,CACNiI,KAAIC,KACJR,OACAk3B,gBAEJp/B,IAEJ,OAAOm/B,EAGJ,SAASvzB,GAAqBC,EAAS3I,EAAG4I,EAAOC,GACpD,IAAMC,EAAOT,GAASrI,EAAG2I,GACnBI,EAAOV,GAASrI,EAAG4I,GACnBI,EAAUV,GAAOQ,GACjBG,EAAUX,GAAOS,GACvB,IAAIC,IAAYC,EACZ,MAAO,CACH1D,GAAI,KACJC,GAAI,MAGZ,IAAM0D,EAAKT,GAASK,EAAMD,EAAOG,GAC3BG,EAAKV,GAASM,EAAMF,EAAOI,GACjC,MAAO,CACH1D,GAAI8C,GAASrI,EAAGkJ,GAChB1D,GAAI6C,GAASrI,EAAGmJ,IAGjB,SAASI,GAA+BC,EAAUC,GACrD,IAAIzJ,EAAIwJ,EAAS,GACbhL,EAAIgL,EAASxM,OACbF,EAAI,EACR,iBAAyB2M,EAAzB,GAAOC,EAAP,KAAWC,EAAX,KAAeC,EAAf,KAAmBV,EAAnB,KACA,MAAOpM,EAAI0B,EAAG,CACV,IAAMqL,EAAKL,EAAS1M,GACpB,GAAGkD,EAAE,KAAO6J,EAAG,IAEX,GAAG7J,EAAE,GAAK4J,GAAM5J,EAAE,GAAK0J,KACb1J,EAAE,GAAKkJ,GAAMW,EAAG,GAAKX,GAAQlJ,EAAE,GAAK2J,GAAME,EAAG,GAAKF,GACpD,OAAO,OAIf,GAAG3J,EAAE,GAAKkJ,GAAMlJ,EAAE,GAAK2J,KACb3J,EAAE,GAAK4J,GAAMC,EAAG,GAAKD,GAAQ5J,EAAE,GAAK0J,GAAMG,EAAG,GAAKH,GACpD,OAAO,EAGnB1J,EAAI6J,EACJ/M,IAEJ,OAAO,EAGJ,SAASgH,GAAqB9D,EAAG4D,EAAGC,GACvC,IAAME,EAAKJ,GAAMC,EAAGC,GACpB,GAAW,IAAPE,EAAU,OAAOJ,GAAM3D,EAAG4D,GAC9B,IAAItE,IAAMU,EAAE,GAAK4D,EAAE,KAAOC,EAAE,GAAKD,EAAE,KAAO5D,EAAE,GAAK4D,EAAE,KAAOC,EAAE,GAAKD,EAAE,KAAOG,EAE1E,OADAzE,EAAI+B,KAAKoC,IAAI,EAAGpC,KAAK2C,IAAI,EAAG1E,IACrBqE,GAAM3D,EAAG,CAAE4D,EAAE,GAAKtE,GAAKuE,EAAE,GAAKD,EAAE,IAAKA,EAAE,GAAKtE,GAAKuE,EAAE,GAAKD,EAAE,MAGrE,SAASF,GAAIV,GACT,OAAOA,EAAIA,EAER,SAASW,GAAMC,EAAGC,GACrB,OAAOH,GAAIE,EAAE,GAAKC,EAAE,IAAMH,GAAIE,EAAE,GAAKC,EAAE,I,gMCtLvC,WAA0B,MAClB2B,EAAKqF,KAAKiB,OAKd,iBAAiBtG,EAAjB,GAAOsH,EAAP,KAAWC,EAAX,KACMlJ,EAAIgH,KAAKhK,MAAQ,EACjB2Y,EAAI3O,KAAK/J,OAAS,EAClB0c,EAAKhE,EAAI,EACf,6BACKpX,GAAUC,MAAQ,CAACyK,EAAKjJ,EAAGkJ,IADhC,iBAEK3K,GAAUG,KAAO,CAACuK,EAAKjJ,EAAGkJ,IAF/B,iBAGK3K,GAAUE,OAAS,CAACwK,EAAIC,EAAKyM,IAHlC,iBAIKpX,GAAUI,IAAM,CAACsK,EAAIC,EAAKyM,IAJ/B,iBAKKpX,GAAUq5B,UAAY,CAAC3uB,EAAKjJ,EAAGkJ,EAAGyQ,IALvC,iBAMKpb,GAAUs5B,QAAU,CAAC5uB,EAAKjJ,EAAGkJ,EAAGyQ,IANrC,I,oBAUJ,SAAO9c,GACHA,EAAIwB,OACgB,IAAjB2I,KAAKD,UACJlK,EAAIib,YAAc9Q,KAAKD,SAE3B,sEAAalK,GACbA,EAAIyB,c,GA3BiB2sB,ICSvBpsB,GAAc,GAEpB,SAASy5B,GAAsBp5B,GAC3B,IAAIjG,EAAI,EACR,MAAOA,EAAIiG,EAAO/F,OAAQ,CACtB,GAAG+F,EAAOjG,EAAE,GAAG,GAAKiG,EAAOjG,GAAG,GAC1B,MAAO,CAACiG,EAAOjG,EAAE,GAAGsD,QAAS2C,EAAOjG,GAAGsD,SAE3CtD,KAGR,SAASs/B,GAAUnnB,EAAGrO,GAClB,OAAOqO,EAAE,KAAOrO,EAAE,IAAMqO,EAAE,KAAOrO,EAAE,G,IAGjCy1B,G,wDAKF,WAAYpyB,GAAS,oCACjB,cAAMA,GAEN,EAAKyZ,YAAgBzZ,EAAQyZ,aAAehhB,GAE5C,EAAKmG,OAAgBoB,EAAQpB,QAAU,EAEvC,EAAKlD,SAAgBsE,EAAQtE,UAAY,GAEzC,EAAKC,SAAgBqE,EAAQrE,UAAY,GAEzC,EAAK6d,SAAgBxZ,EAAQwZ,SAE7B,EAAKgB,WAAgBxa,EAAQwa,WAE7B,EAAK3E,WAAgB7V,EAAQ6V,WAAa,6NAE1C,EAAKC,SAAgB9V,EAAQ8V,UAAY,OAEzC,EAAKF,QAAgB5V,EAAQ4V,SAAW,GACxC,EAAK6E,UAAkBza,EAAQya,QAC/B,EAAKoX,UAAgB7xB,EAAQ6xB,UAC7B,EAAKQ,YAAgBryB,EAAQqyB,YAC7B,EAAKC,QAAgBtyB,EAAQsyB,QAC7B,EAAKC,SAAgB,EACrB,EAAKC,cAAgB,EACrB,EAAKC,UAAgBzyB,EAAQyyB,UAC7B,EAAKC,WAAgB1yB,EAAQ0yB,WAE7B,EAAKC,aAAe3yB,EAAQ2yB,aAE5B,EAAKC,WAAa5yB,EAAQ4yB,YAAc,CACpC9f,QAAQ,GAhCK,E,gDAoCrB,SAAU9S,GAAS,WACfhN,OAAOyH,KAAKuF,GAAStF,SAAQ,SAAAkH,GACzB,QAAkBzB,IAAfH,EAAQ4B,IAAmC,OAAf5B,EAAQ4B,KACnC,EAAKA,GAAK5B,EAAQ4B,GACT,eAANA,GAAoB,OACbkR,EAAS9S,EAAQ4yB,WAAW9f,OAClC,YAAK+f,aAAL,SAAYvqB,SACTwK,IACC,EAAK+f,MAAQ,EAAKhyB,OAAOiH,mBAAkB,SAACiB,GACxC,EAAK6pB,WAAWvK,OAAUtf,EAAU,GAAM,EAAK6pB,WAAWrX,c,oCAQlF,WACI,IAAMthB,EAAU2G,KAAKqF,KAAK6sB,0BACpB54B,EAAQ0G,KAAKsF,GAAG4sB,0BAChB3e,EAASvT,KAAKqF,KAAK0T,YACnB7gB,EAAS8E,GACX3D,EAAQ2G,KAAKxG,SACbF,EAAM0G,KAAKtG,OACXsG,KAAKxG,QACLwG,KAAKtG,MACLsG,KAAKlF,UAAY,IACjBkF,KAAKjF,UAAY,GACjB,GACAiF,KAAK0xB,SAAW,GAChB1xB,KAAKixB,UACL1d,GACJvT,KAAKgU,aAAe9b,EACpB8H,KAAKgZ,YAAc,CAAChZ,KAAKxG,QAASwG,KAAKtG,OACvCsG,KAAKmyB,0BAA4Bb,GAAsBp5B,GACpD8H,KAAKyxB,cACJzxB,KAAKmyB,0BAA0B,GAAG,GAAK37B,KAAK2C,IAAI6G,KAAKyxB,YAAcle,EAAO,GAAIvT,KAAKmyB,0BAA0B,GAAG,KAGpHnyB,KAAKoyB,cAAgBjB,GAAiBj5B,K,yBAI1C,SAAYwR,GAER,OADA1J,KAAKiZ,yBACEva,GAA+BsB,KAAKgU,aAActK,K,oBAG7D,SAAO7T,GAAK,WAERA,EAAIwB,OACgB,IAAjB2I,KAAKD,UACJlK,EAAIib,YAAc9Q,KAAKD,SAE3B,IAAM/B,EAASgC,KAAKhC,OACd9F,EAAS8H,KAAKgU,aACdqe,EAAYryB,KAAKmyB,0BACjBh9B,EAAI+C,EAAO,GACX4hB,EAAO5hB,EAAOA,EAAO/F,OAAS,GAC9B4nB,EAAW+W,GAAgB9wB,KAAKgZ,YAAY,IAqBlD,GAnBAnjB,EAAIqU,UAAYrU,EAAI0b,YAAcvR,KAAKgyB,WAAW9f,OAASlS,KAAKgyB,WAAW/f,MAAQjS,KAAKN,gBACxF7J,EAAImU,YACJnU,EAAIwc,OAAOld,EAAE,GAAIA,EAAE,IACnB+C,EAAO3C,MAAM,EAAG2C,EAAO/F,OAAS,GAAG2H,SAAQ,SAAC3E,EAAGuD,GAC3C,GAAG,EAAKsF,OAAQ,CACZ,IAAMic,EAAQ/hB,EAAOQ,GACfwhB,EAAQhiB,EAAOQ,EAAI,GACzB,EAAmBmF,GAAqBoc,EAAO9kB,EAAG+kB,EAAOlc,GAAjDtD,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GACTD,GAAMC,GACL9E,EAAIyc,OAAO5X,EAAG,GAAIA,EAAG,IACrB7E,EAAI0c,iBAAiBpd,EAAE,GAAIA,EAAE,GAAIwF,EAAG,GAAIA,EAAG,KAE3C9E,EAAIyc,OAAOnd,EAAE,GAAIA,EAAE,SAGvBU,EAAIyc,OAAOnd,EAAE,GAAIA,EAAE,OAG3BU,EAAIyc,OAAOwH,EAAK,GAAIA,EAAK,IACtB9Z,KAAK6xB,UAAW,CACf,IAAM/zB,EAAU5F,EAAOA,EAAO/F,OAAS,GACjCgD,EAAI6K,KAAKsF,GAAGrE,OAClB,EAAmBpD,GAAqBC,EAAS3I,EAAG,CAACA,EAAE,GAAIA,EAAE,GAAK,IAAK6K,KAAK8xB,YAApEp3B,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,GACZ9E,EAAIyc,OAAO5X,EAAG,GAAIA,EAAG,IACrB7E,EAAI0c,iBAAiBpd,EAAE,GAAIA,EAAE,GAAIwF,EAAG,GAAIA,EAAG,IAY/C,GATGqF,KAAK4Y,WACJ/iB,EAAIwB,OACJxB,EAAI2jB,YAAYxZ,KAAK4Y,WAEzB/iB,EAAI2b,SACDxR,KAAK4Y,UACJ/iB,EAAIyB,UAGL0I,KAAK+xB,aAAc,CAClB3qB,QAAQC,IAAIrH,KAAK+xB,cACjBl8B,EAAIwB,OACJ,IAAIi7B,EAAsB,EACtBC,EAAQ,EACNC,EAAWxyB,KAAKoyB,cAAcjgC,OACpCiV,QAAQC,IAAIrH,KAAKoyB,eACjB,MAAOG,EAAQC,EAAU,CACrB,MAIIxyB,KAAKoyB,cAAcG,GAHnB73B,EADJ,EACIA,GAAIC,EADR,EACQA,GACJR,EAFJ,EAEIA,KACAk3B,EAHJ,EAGIA,YAEEz0B,EAAKjC,EAAG,GAAKD,EAAG,GAChBoC,EAAKnC,EAAG,GAAKD,EAAG,GAEtB,MAAO43B,EAAsBjB,EAAa,CACtC,GAAGiB,EAAsB,EAAG,CACxB,IAAMj+B,EAAI,GAAKg9B,EAAciB,GAAuBn4B,EAChDhC,OAAC,EAAEC,OAAC,EAAEwD,OAAK,EACZgB,GACCzE,EAAIuC,EAAG,GAAKrG,EAAIuI,EAChBxE,EAAIsC,EAAG,GACPkB,EAAQgB,EAAK,EAAIk0B,GAAgBv5B,GAAUC,OAASs5B,GAAgBv5B,GAAUG,OACxEoF,IAEN3E,EAAIuC,EAAG,GACPtC,EAAIsC,EAAG,GAAMrG,EAAIyI,EACjBlB,EAAQkB,EAAK,EAAIg0B,GAAgBv5B,GAAUE,QAAUq5B,GAAgBv5B,GAAUI,MAEnF9B,EAAImU,YACJnU,EAAIkb,UAAU5Y,EAAGC,GACjBvC,EAAI4jB,OAAO7d,GACX/F,EAAIwc,QAAQ,EAAG,GACfxc,EAAIyc,OAAO,GAAI,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIyc,QAAQ,EAAG,GACfzc,EAAIwb,OACJxb,EAAI4jB,QAAQ7d,GACZ/F,EAAIkb,WAAW5Y,GAAIC,GAEvBk6B,GAAuBtyB,KAAK+xB,aAEhCQ,IAGJ18B,EAAIyB,UAGR,GAAG0I,KAAKgyB,WAAW9f,OAAQ,CACvB,IAAMugB,EAAWzyB,KAAKgyB,WAAWrX,IAC3B+X,EAAc1yB,KAAKgyB,WAAWvK,OAChC6K,EAAsBI,EACtBH,EAAQ,EACNC,EAAWxyB,KAAKoyB,cAAcjgC,OACpC,MAAOogC,EAAQC,EAAU,CACrB,MAIIxyB,KAAKoyB,cAAcG,GAHnB73B,EADJ,EACIA,GAAIC,EADR,EACQA,GACJR,EAFJ,EAEIA,KACAk3B,EAHJ,EAGIA,YAEEz0B,EAAKjC,EAAG,GAAKD,EAAG,GAChBoC,EAAKnC,EAAG,GAAKD,EAAG,GAEtB,MAAO43B,EAAsBjB,EAAa,CACtC,GAAGiB,EAAsB,EAAG,CACxB,IAAMj+B,EAAI,GAAKg9B,EAAciB,GAAuBn4B,EACpDtE,EAAImU,YACJ,IAAI7R,OAAC,EAAEC,OAAC,EACLwE,GACCzE,EAAIuC,EAAG,GAAKrG,EAAIuI,EAChBxE,EAAIsC,EAAG,GACJkC,EAAK,GACJ/G,EAAIwc,OAAOla,EAAI,EAAGC,GAClBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,GACtBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,KAEtBvC,EAAIwc,OAAOla,EAAI,EAAGC,GAClBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,GACtBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,KAEpB0E,IACN3E,EAAIuC,EAAG,GACPtC,EAAIsC,EAAG,GAAMrG,EAAIyI,EACdA,EAAK,GACJjH,EAAIwc,OAAOla,EAAGC,EAAI,GAClBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,GACtBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,KAEtBvC,EAAIwc,OAAOla,EAAGC,EAAI,GAClBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,GACtBvC,EAAIyc,OAAOna,EAAI,EAAGC,EAAI,KAI9BvC,EAAI2c,YACJ3c,EAAIwb,OAERihB,GAAuBG,EAE3BF,KAIR,GAAGvyB,KAAK2xB,QAAQ,CACZ97B,EAAImU,YACJnU,EAAIwc,OAAOggB,EAAU,GAAG,GAAIA,EAAU,GAAG,IACzCx8B,EAAIyc,OAAO+f,EAAU,GAAG,GAAIA,EAAU,GAAG,IACzCx8B,EAAIwB,OAEJxB,EAAIyb,UAAY,EAChBzb,EAAIqU,UAAY,OAChBrU,EAAI0b,YAAc,UAClB1b,EAAI2b,SACJ,IAAMrZ,EAAIk6B,EAAU,GAAG,GACjBj6B,GAAKi6B,EAAU,GAAG,GAAKA,EAAU,GAAG,IAAI,EAAIA,EAAU,GAAG,GAC/Dx8B,EAAIkb,UAAU5Y,EAAGC,GACjBvC,EAAImU,YACJnU,EAAIwc,QAAQ,GAAI,GAChBxc,EAAIyc,OAAO,GAAI,GACfzc,EAAI0c,iBAAiB,GAAI,EAAG,GAAI,GAChC1c,EAAIyc,OAAO,EAAG,GACdzc,EAAI0c,iBAAiB,EAAG,EAAG,EAAG,GAC9B1c,EAAIyc,QAAQ,EAAG,GACfzc,EAAI0c,kBAAkB,EAAG,GAAI,EAAG,GAChC1c,EAAIyc,QAAQ,GAAI,GAChBzc,EAAI0c,kBAAkB,GAAI,GAAI,GAAI,GAClC1c,EAAI2c,YACJ3c,EAAI2b,SACJ3b,EAAIwb,OAEJxb,EAAIyb,UAAY,EAChBzb,EAAImU,YACJnU,EAAIwc,QAAQ,EAAG,GACfxc,EAAIyc,OAAO,EAAG,GACdzc,EAAI2b,SACJ3b,EAAImU,YACJnU,EAAIwc,OAAO,GAAI,GACfxc,EAAIyc,OAAO,EAAG,GACdzc,EAAI2b,SACJ3b,EAAIkb,WAAW5Y,GAAIC,GAEnBvC,EAAIyB,UAGR,GAAG0I,KAAK4xB,aAAc,CAClB/7B,EAAIwB,OACJxB,EAAIyb,UAAY,EAChBzb,EAAIqU,UAAY,OAChBrU,EAAI0b,YAAc,UAClB1b,EAAI2jB,YAAY,CAAC,EAAG,IACpB,IAAMrhB,EAAIk6B,EAAU,GAAG,GACjBj6B,GAAKi6B,EAAU,GAAG,GAAKA,EAAU,GAAG,IAAI,EAAIA,EAAU,GAAG,GAC/Dx8B,EAAIkb,UAAU5Y,EAAGC,GACjBvC,EAAImU,YACJnU,EAAI+I,MAAM,IAAK,EAAG,GAAI,IACtB/I,EAAIwb,OACJxb,EAAI2b,SACJ3b,EAAIkb,WAAW5Y,GAAIC,GACnBvC,EAAIyB,UAGR,IAAI0I,KAAK6Z,QAAS,CACd,IAAM8Y,EAAQpB,GAAUc,EAAU,GAAIn6B,EAAOA,EAAO/F,OAAS,IAC1DwgC,GAAS3yB,KAAK2xB,UACb97B,EAAIwB,OACJxB,EAAIqU,UAAYrU,EAAI0b,YAAc,WAEtC1b,EAAImU,YACJnU,EAAIkb,UAAU+I,EAAK,GAAIA,EAAK,IAC5BjkB,EAAI4jB,OAAOM,GACXlkB,EAAIwc,OAAO,EAAG,GACdxc,EAAIyc,QAAQ,GAAI,GAChBzc,EAAIyc,QAAQ,EAAG,GACfzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIwb,OACJxb,EAAI4jB,QAAQM,GACZlkB,EAAIkb,WAAW+I,EAAK,IAAKA,EAAK,IAC3B6Y,GACC98B,EAAIyB,UAGZ,GAAG0I,KAAKgV,QAGJ,OAFAnf,EAAImU,YACJnU,EAAIkhB,KAAJ,UAAc/W,KAAKkV,SAAnB,YAA+BlV,KAAKiV,YAC5BjV,KAAKxG,SACT,KAAKjC,GAAUE,OACX5B,EAAIuf,UAAY,OAChBvf,EAAI6hB,SAAS1X,KAAKgV,QAAS7f,EAAE,GAAK,EAAGA,EAAE,GAAK,IAC5C,MACJ,KAAKoC,GAAUC,MACf,KAAKD,GAAUq5B,UACX/6B,EAAIuf,UAAY,OAChBvf,EAAI6hB,SAAS1X,KAAKgV,QAAS7f,EAAE,GAAK,GAAIA,EAAE,GAAK,GAC7C,MACJ,QACI,MAGZU,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAM/D,EAAS8H,KAAKmyB,0BACdh4B,EAAOlB,GAAqBgD,EAAO/D,EAAO,GAAIA,EAAO,IAC3D,OAAGiC,EAAO6F,KAAK6Y,gB,GAvVCrE,IA8VTgd,MClXT35B,GAAc,EACd+6B,G,wDACF,WAAYxzB,GAAS,oCACjB,cAAMA,GACN,EAAKyZ,YAAgBzZ,EAAQyZ,aAAehhB,GAC5C,EAAK85B,SAAU,EAHE,E,6DAWrB,WAEI,IAAMt4B,EAAU2G,KAAKqF,KAAK6sB,0BACpB54B,EAAQ0G,KAAKsF,GAAG4sB,0BAChBh6B,EAAS,CAACmB,EAAQ2G,KAAKxG,SAAUF,EAAM0G,KAAKtG,QAClDsG,KAAKgU,aAAe9b,I,yBAIxB,SAAYwR,GAER,OADA1J,KAAKiZ,yBACEva,GAA+BsB,KAAKgU,aAActK,K,oBAG7D,SAAO7T,GACHA,EAAIwB,OACJ,qBAAmB2I,KAAKgU,aAAxB,GAAQ8E,EAAR,KAAYpe,EAAZ,KAsBA,GArBA7E,EAAIqU,UAAYrU,EAAI0b,YAAcvR,KAAKN,gBACvC7J,EAAImU,YAEJnU,EAAIwc,OAAOyG,EAAG,GAAIA,EAAG,IACrBjjB,EAAIyc,OAAO5X,EAAG,GAAIA,EAAG,IACrB7E,EAAIwB,OACJxB,EAAI2jB,YAAY,CAAC,EAAG,IACpB3jB,EAAI2b,SACJ3b,EAAIyB,UAEJzB,EAAIqU,UAAY,OAChBrU,EAAImU,YACJnU,EAAIub,IAAI0H,EAAG,GAAIA,EAAG,GAAG,EAAG,EAAG,EAAG,EAAItiB,KAAKuG,IACvClH,EAAIwb,OACJxb,EAAI2b,SAEJ3b,EAAImU,YACJnU,EAAIub,IAAI1W,EAAG,GAAIA,EAAG,GAAG,EAAG,EAAG,EAAG,EAAIlE,KAAKuG,IAEvClH,EAAIwb,OACJxb,EAAI2b,SACDxR,KAAK2xB,QAAS,CACb97B,EAAIwB,OAEJxB,EAAIyb,UAAY,EAChBzb,EAAIqU,UAAY,OAEhB,IAAM/R,EAAI2gB,EAAG,GACP1gB,GAAKsC,EAAG,GAAKoe,EAAG,IAAI,EAAIA,EAAG,GACjCjjB,EAAIkb,UAAU5Y,EAAGC,GACjBvC,EAAImU,YACJnU,EAAIwc,OAAO,GAAI,GACfxc,EAAIyc,OAAO,KAAM,GACjBzc,EAAIyc,OAAO,IAAK,GAChBzc,EAAIyc,OAAO,EAAG,GACdzc,EAAIyc,QAAQ,IAAK,GACjBzc,EAAIyc,QAAQ,KAAM,GAClBzc,EAAI2c,YACJ3c,EAAI2b,SACJ3b,EAAIwb,OAEJxb,EAAIyb,UAAY,EAChBzb,EAAImU,YACJnU,EAAIwc,QAAQ,EAAG,GACfxc,EAAIyc,OAAO,EAAG,GACdzc,EAAI2b,SACJ3b,EAAImU,YACJnU,EAAIwc,OAAO,GAAI,GACfxc,EAAIyc,OAAO,EAAG,GACdzc,EAAI2b,SACJ3b,EAAIkb,WAAW5Y,GAAIC,GAEnBvC,EAAIyB,UAIRzB,EAAIyB,Y,mBAGR,SAAM2E,GACF,IAAM/D,EAAS8H,KAAKgU,aACd7Z,EAAOlB,GAAqBgD,EAAO/D,EAAO,GAAIA,EAAO,IAC3D,GAAGiC,EAAO6F,KAAK6Y,YACX,OAAO,M,GA5FUrE,IAsGdoe,MC7GX,GAAS,WAAa,IAAIC,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOlW,MAAM,CAAC+V,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOC,SAASP,EAAIQ,GAAIR,EAAe,aAAE,SAAS19B,GAAG,OAAO69B,EAAG,MAAM,CAACl+B,IAAIK,EAAEm+B,SAAS,CAACN,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAO1V,KAAK8V,MAAM,CAAC,UAAY,OAAO,KAAO,eAAeC,GAAG,CAAC,UAAY,SAASC,GAAQ,OAAOZ,EAAIa,YAAYD,EAAQt+B,EAAEm+B,UAAU,QAAUT,EAAIc,YAAY,CAACd,EAAIe,GAAG,IAAIf,EAAIgB,GAAG1+B,EAAEm+B,SAAS,OAAON,EAAG,MAAM,CAACnR,IAAK,YAAe1sB,EAAS,QAAG2+B,UAAS,EAAKZ,MAAM,CAACL,EAAIM,OAAOY,aAAa,CAACf,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAO1V,MAAM,CAACoV,EAAIe,GAAG,IAAIf,EAAIgB,GAAG1+B,EAAEm+B,SAAS,cAAa,GAAGN,EAAG,MAAM,CAACgB,YAAY,CAAC,SAAW,aAAa,CAAChB,EAAG,UAAU,CAACnR,IAAI,QAAQqR,MAAML,EAAIM,OAAO19B,QAAQ89B,MAAM,CAAC,QAAUV,EAAIzzB,QAAQ,QAAUyzB,EAAIoB,aAAa,mBAAqBpB,EAAI7G,oBAAoBwH,GAAG,CAAC,iBAAiB,SAASC,GAAQZ,EAAIoB,aAAaR,GAAQ,MAAQZ,EAAIqB,cAAc,KAAOrB,EAAIsB,OAAO,SAAWtB,EAAIuB,YAAYC,YAAYxB,EAAIyB,GAAG,CAAC,CAACx/B,IAAI,aAAay/B,GAAG,SAAS1S,GACx/B,IAAIpf,EAASof,EAAIpf,OACbL,EAAayf,EAAIzf,WACrB,MAAO,CAAC4wB,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO9wB,EAAO,WAAaL,GAAYoxB,GAAG,CAAC,WAAa,SAASC,GAAQ,OAAOZ,EAAI2B,aAAa/xB,IAAS,UAAY,SAASgxB,GAAQ,OAAOZ,EAAI4B,YAAYhB,EAAQhxB,UAAe,CAAC3N,IAAI,QAAQy/B,GAAG,SAAS1S,GAC9O,IAAIpf,EAASof,EAAIpf,OACjB,MAAO,CAACuwB,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO9wB,GAAQ+wB,GAAG,CAAC,MAAQX,EAAI6B,sBAAsB,CAAC5/B,IAAI,WAAWy/B,GAAG,SAAS1S,GACjH,IAAIpf,EAASof,EAAIpf,OACjB,MAAO,CAACuwB,EAAG,iBAAiB,CAACO,MAAM,CAAC,KAAO9wB,QAAa,CAAC3N,IAAI,MAAMy/B,GAAG,SAAS1S,GAC/E,IAAIpf,EAASof,EAAIpf,OACjB,MAAO,CAACuwB,EAAG,WAAW,CAACO,MAAM,CAAC,KAAO9wB,QAAa,CAAC3N,IAAI,iBAAiBy/B,GAAG,SAAS1S,GACpF,IAAIziB,EAAUyiB,EAAIziB,QAClB,MAAO,CAAC4zB,EAAG,cAAc,CAACO,MAAM,CAAC,YAAcn0B,QAAc,CAACtK,IAAI,YAAYy/B,GAAG,SAAS1S,GAC1F,IAAIziB,EAAUyiB,EAAIziB,QAClB,MAAO,CAAC4zB,EAAG,aAAa,CAACO,MAAM,CAAC,YAAcn0B,GAASo0B,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOZ,EAAI8B,aAAalB,EAAQr0B,cAAoB4zB,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOyB,SAAS,CAAC5B,EAAG,MAAM,CAACnR,IAAI,UAAUqR,MAAML,EAAIM,OAAOne,aAAa,GAAGge,EAAG,cAAc,CAACO,MAAM,CAAC,KAAOV,EAAIgC,QAAQC,iBAAiB9B,EAAG,aAAa,CAACO,MAAM,CAAC,KAAOV,EAAIkC,MAAMC,cAAc,GAAGhC,EAAG,MAAM,CAACA,EAAG,MAAM,CAACH,EAAIe,GAAG,UAAUZ,EAAG,MAAM,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACH,EAAIe,GAAG,UAAUZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBC,QAAQ3B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,gBAAgBT,EAAG,KAAK,CAACH,EAAIe,GAAG,UAAUZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBG,WAAW7B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,mBAAmBT,EAAG,KAAK,CAACH,EAAIe,GAAG,YAAYZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgB5T,WAAWkS,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,mBAAmBT,EAAG,KAAK,CAACH,EAAIe,GAAG,YAAYZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBI,aAAa9B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,qBAAqBT,EAAG,KAAK,CAACH,EAAIe,GAAG,gBAAgBZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBp6B,UAAU04B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,kBAAkBT,EAAG,KAAK,CAACH,EAAIe,GAAG,gBAAgBZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBn6B,UAAUy4B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,kBAAkBT,EAAG,KAAK,CAACH,EAAIe,GAAG,oBAAoBZ,EAAG,QAAQ,CAACO,MAAM,CAAC,KAAO,UAAU0B,SAAS,CAAC,MAAQpC,EAAIqC,gBAAgBxD,SAAS8B,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOZ,EAAIuC,SAAS3B,EAAQ,0BACnrD8B,GAAkB,G,yBCdTL,GAAkB,CAC3BC,OAAS,GACTE,UAAY,GACZC,YAAc,IACdhU,UAAY,GACZxmB,SAAU,IACVC,SAAU,GACV22B,QAAS,IAGN,SAAS8D,KACZpjC,OAAOyH,KAAKq7B,IAAiBp7B,SAAQ,SAAAkH,GACjC,IAAMxM,EAAQihC,aAAaC,QAAQ10B,GACnCoG,QAAQC,IAAI7S,GACC,OAAVA,IACC0gC,GAAgBl0B,GAAKxM,MAM1B,SAASmhC,GAAmB7gC,EAAKN,GACpC0gC,GAAgBpgC,GAAON,EACvBihC,aAAaG,QAAQ9gC,EAAKN,GAGvB,SAASqhC,GAAmB/gC,GAC/B,OAAQogC,GAAgBpgC,GAGrB,SAASghC,GAAuBC,EAAetzB,EAAQxG,GAC1D,IAAM+5B,EAA8B,WAAnBvzB,EAAO6wB,QACxB,GAAG0C,EAAU,CACT,IAAM/jC,EAAI8jC,EAAc7yB,sBAAsBT,EAAOgc,MAAM,IAC3DxsB,EAAEgP,OAAShF,MACR,CACH,IAAMhK,EAAI8jC,EAAc7yB,sBAAsBT,GAC9CxQ,EAAEgP,OAAShF,GAIZ,SAASg6B,GAAgBF,EAAetzB,GAC3C,IAAMuzB,EAA8B,WAAnBvzB,EAAO6wB,QACxB,GAAG0C,EAAU,CACT,IAAME,EAAQzzB,EAAOgc,MAAM,GACrBxsB,EAAI8jC,EAAc7yB,sBAAsBgzB,GAC9C,OAAOjkC,EAAEgP,OAET,IAAMhP,EAAI8jC,EAAc7yB,sBAAsBT,GAC9C,OAAOxQ,EAAEgP,OC/CjB,SAASk1B,GAAQ7C,GACb,OAAQA,GACJ,IAAK,aACL,IAAK,UACL,IAAK,SACL,IAAK,QACL,IAAK,gBACL,IAAK,YACL,IAAK,aACL,IAAK,aACL,IAAK,KACD,MAAO,aAEX,QACI,OAAOA,GAInB,SAAS8C,GAAO7Y,GACZ,MAAoB,WAAjBA,EAAK+V,QACG/V,EAAKkB,MAAM,GAEflB,EAGX,SAAS8Y,GACL9Y,EAAM+Y,GAMR,IACMC,EANJ7Z,EAKF,uDALU,EACRC,EAIF,uDAJU,EACR0E,EAGF,uDAHQ,EACNJ,EAEF,uDAFW,EACTvb,EACF,uCAGM8wB,EAAmB7Z,EACnB8Z,EAAiB9Z,EAiCrB,OA/BA2Z,EAAKx8B,SAAQ,SAAC6S,EAAGjU,GACb,MAAiCiU,EAAE0Q,mBAAmBgE,EAAMmV,EAAkBvV,EAAQvb,GAAvEtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MAQb4Z,GAAiC,WAArBA,EAASjD,SAAgC,IAAPj3B,GAAmB,IAAPD,GAM5Do6B,EAAmBC,EACnBA,GAAkBp6B,EAClBsQ,EAAE0Q,mBAAmBgE,EAAMmV,EAAkBvV,EAAQvb,GACpC,UAAdiH,EAAE2mB,SAAqC,YAAd3mB,EAAE2mB,QAC1BkD,GAAoB,EAEpBA,GAAoBn6B,EAExBo6B,EAAiBjgC,KAAKoC,IAAI49B,EAAkBC,KAZ5CD,GAAoB,EACpBC,EAAiBjgC,KAAKoC,IAAI49B,EAAkBC,IAchD/Z,EAAQlmB,KAAKoC,IAAIwD,EAAIsgB,GACrB6Z,EAAW5pB,KAEfgQ,EAAQ8Z,EAED,CAAE/Z,QAAOC,S,IA+BdT,G,WACF,WAAYzZ,GAAQ,uBAChBzC,KAAKyC,OAASA,EACdzC,KAAKmc,GAAK1Z,EAAO0Z,GACjBnc,KAAKszB,QAAU7wB,EAAO6wB,QACtBtzB,KAAKmR,KAAOglB,GAAQ1zB,EAAO6wB,SAC3BtzB,KAAKuc,YAAShd,EACdS,KAAKwc,uBAAoBjd,EACzBS,KAAKtH,SAAM6G,EAEXS,KAAKqhB,SAAM9hB,EACXS,KAAKihB,YAAS1hB,EACdS,KAAK0c,WAAQnd,EACbS,KAAK2c,WAAQpd,EAEbS,KAAK02B,SAAW,K,yDAGpB,SAAmBrV,EAAKJ,EAAQvb,GAQ5B,OAPA1F,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EACdjhB,KAAK0c,MAAQ,EACb1c,KAAK2c,MAAQ,EACVjX,GACCA,EAAS2b,EAAKJ,EAAQjhB,MAEnB,CACH0c,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZ0E,MACAJ,Y,sBAIR,SAASvb,GACL,OAAO1F,O,sBAGX,SAAS0F,GACLA,EAAS1F,Q,wBAGb,SAAWyC,GACPzC,KAAKuc,OAAO9Z,OAAOzC,KAAKwc,mBAAmBnpB,OAAO2M,KAAKtH,IAAM,EAAG,EAAG+J,K,oBAGvE,WACIzC,KAAKuc,OAAO9Z,OAAOzC,KAAKwc,mBAAmBnpB,OAAO2M,KAAKtH,IAAK,K,sBAGhE,SAASgI,GACL,IAAMkc,EAAQ,GAMd,OALA5c,KAAK6c,UAAS,SAAC7nB,GACX,IAAM8nB,EAAapc,EAAMwC,sBAAsBlO,EAAEyN,QAC7Cqa,GACAF,EAAMnqB,KAAKqqB,MAEZF,M,KAGT+Z,G,wDACF,WAAYl0B,GAAQ,6BAChB,cAAMA,GACN,EAAKwa,MAAQxa,EAAOwa,MAAQ,IAAI3Z,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBACpC,IAAMooB,EAAqBD,GAAQ,cAAcnoB,KAAtB,mBAHX,OAIhB,EAAKqoB,YAAc3a,EAAO2a,YAAc,IAAI9Z,KAAI,SAAC/P,EAAGmF,GAChD,IAAM1D,EAAImoB,EAAmB5pB,EAAGmF,GAEhC,OADA1D,EAAEsnB,QAAS,EACJtnB,KAPK,E,+CAWpB,SAAS0Q,GACL,IAAI8X,EAoBJ,OAnBAxd,KAAKid,KAAKnjB,SAAQ,SAACiC,GACVyhB,GAIL9X,EAAS,CACLL,KAAMmY,EACNlY,GAAI8wB,GAAOr6B,GACXvC,QAASjC,GAAUE,OACnBiC,MAAOnC,GAAUI,MAGrBoE,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,GAXHyhB,EAAOzhB,KAcfiE,KAAKod,WAAWtjB,SAAQ,SAAC9E,GACrBA,EAAE0oB,SAAShY,MAER1F,O,sBAGX,SAAS0F,GACLA,EAAS1F,MACTA,KAAKid,KAAKnjB,SAAQ,SAAAiC,GACdA,EAAE8gB,SAASnX,MAEf1F,KAAKod,WAAWtjB,SAAQ,SAAAiC,GACpBA,EAAE8gB,SAASnX,Q,oCAInB,WAAsD,IAA/B2b,EAA+B,uDAAzB,EAAGJ,EAAsB,uDAAb,EAAGvb,EAAU,uCAClD1F,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EAgBd,MAAyBoV,GAAar2B,KAAMA,KAAKid,KAAM,EAAG,EAAG,EAAG,EAAGvX,GAA3DgX,EAAR,EAAQA,MAAOC,EAAf,EAAeA,MAGf,OAFA3c,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EACN,CACHD,QAAOC,QAAO0E,MAAKJ,Y,0CAI3B,SAA6Bvb,GACzB1F,KAAKod,WAAWtjB,SAAQ,SAAAyjB,GACpBA,EAAKF,mBAAmB,EAAG,GAAG,SAACgE,EAAKJ,EAAQ2V,GACxCA,EAAWC,eAAiBtZ,Y,GA3ExBrB,IAiFdsC,G,wDACF,WAAY/b,GAAQ,oCAChB,cAAMA,GACN,EAAKga,aAAc,EACnB,EAAK2B,SAAW,KAChB,EAAKK,OAAShc,EAAOgc,OAAS,IAAInb,IAAI4Z,GAAQ,SAASnoB,KAAjB,oBACtC,EAAK+hC,SAAW,EAAKrY,MAAMlpB,MAAM,EAAG,EAAKkpB,MAAMtsB,OAAS,GACxD,EAAK4kC,YAAc,EAAKtY,MAAM,EAAKA,MAAMtsB,OAAS,GAClD,EAAK4kC,YAAYC,WAAY,EAPb,E,+CAUpB,SAAStxB,GA4DL,IAAIgX,EAAQ1c,KAAK+2B,YAAYra,MACvBua,EAAaj3B,KAAK+2B,YAAYrZ,SAAShY,GAC7CA,EAAS,CACLL,KAAM4xB,GAAcj3B,KAAK+2B,YACzBzxB,GAAItF,KAAKoe,SACT5kB,QAASjC,GAAUE,OACnBiC,MAAOnC,GAAUI,IACjB8lB,KAAM,eAGV,IAKIyZ,EACAxY,EANA/qB,EAAIqM,KAAK82B,SAAS3kC,OAClBglC,EAAW,EACfn3B,KAAKye,MAAM3kB,SAAQ,SAAAjG,GACfsjC,EAAW3gC,KAAKoC,IAAIu+B,EAAUtjC,EAAE6oB,UAIpC,IAAI0a,EAAsBp3B,KAAK+2B,YAC3BM,EAAkBD,EAAoB1a,MAAQ,EAClD,MAAO/oB,IAAK,CACRujC,EAAcl3B,KAAK82B,SAASnjC,GAC5B,IAAMsjC,EAAaC,EAAYxZ,SAAShY,GACpC4xB,OAAW,EACf,GAAIH,GAAY,EAAG,CACf,IAAMxa,EAAQsa,EAAaG,EAAoB/V,IAAM4V,EAAW5V,IAAM,EACtEiW,EAAc,CAACH,GAAYF,EAAa,EAAI,GAAIta,GACV,IAAlCua,EAAYtZ,WAAWzrB,QAAiBklC,IACxCC,EAAY/5B,QAAQ,GACpB+5B,EAAY/5B,QAAQ,IAGzB25B,EAAYtZ,WAAWzrB,SACtBklC,GAAkB,GAKtB3xB,EAAS,CACLL,KAAM4xB,GAAcC,EACpB5xB,GAAItF,KAAKoe,SACT5kB,QAASy9B,EAAa1/B,GAAUE,OAASF,GAAUC,MACnDkC,MAAOnC,GAAUC,MACjBqiB,SAAS,EACTgY,WAAW,EACXC,WAAY,EACZwF,cACAx8B,SAAU+6B,GAAmB,YAC7B0B,OAAQ7Y,EAAWA,EAAS2C,IAAMrhB,KAAKoe,SAASiD,IAChD5D,KAAM,eAKN/X,EAAS,CACLyL,KAAM,iBACN9L,KAAM6xB,EACN5xB,GAAI8xB,EACJ59B,QAASjC,GAAUE,OACnBiC,MAAOnC,GAAUI,IACjBihB,SAAU,CAAC,EAAG,GACd6E,KAAM,UAIdf,EAAQlmB,KAAKoC,IAAI8jB,EAAOwa,EAAYxa,OACpCgC,EAAWwY,EACXE,EAAsBF,EAG1B,OAAOl3B,KAAKoe,W,sBAEhB,SAAS1Y,GACLA,EAAS1F,MACTA,KAAKye,MAAM3kB,SAAQ,SAAAiC,GACfA,EAAE8gB,SAASnX,MAEf1F,KAAKoe,SAASvB,SAASnX,K,gCAG3B,WAAkD,IAA/B2b,EAA+B,uDAAzB,EAAGJ,EAAsB,uDAAb,EAAGvb,EAAU,uCAC1CgX,EAAQ,EACRC,EAAQ,EACZ3c,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EAEdjhB,KAAK82B,SAASh9B,SAAQ,SAACjG,EAAG6E,GACtB,MAAiC7E,EAAEwpB,mBAAmBgE,EAAM1E,EAAOsE,EAAQvb,GAA5DrJ,EAAf,EAAQsgB,MAAkBvgB,EAA1B,EAAmBsgB,MACnBC,GAAStgB,EACTqgB,EAAQlmB,KAAKoC,IAAI8jB,EAAOtgB,MAE5B,MAAiC4D,KAAK+2B,YAAY1Z,mBAAmBgE,EAAM1E,EAAOsE,EAAQvb,GAA3ErJ,EAAf,EAAQsgB,MAAkBvgB,EAA1B,EAAmBsgB,MACnBC,GAAStgB,EACTqgB,EAAQlmB,KAAKoC,IAAI8jB,EAAOtgB,GACxB,MAAuC4D,KAAKoe,SAASf,mBAAmBgE,EAAM1E,EAAOsE,EAAQvb,GAA9E8xB,EAAf,EAAQ7a,MAAqB8a,EAA7B,EAAsB/a,MAMtB,OALAC,GAAS6a,EACT9a,EAAQlmB,KAAKoC,IAAI8jB,EAAO+a,GACxBz3B,KAAK0c,MAAQlmB,KAAKoC,IAAI8jB,EAAO,GAC7B1c,KAAK2c,MAAQA,EAEN,CACHD,MAAO1c,KAAK0c,MAAOC,QAAO0E,MAAKJ,c,GA3Kb/E,IAyLxB+C,G,wDACF,WAAYxc,GAAQ,oCAChB,cAAMA,GACN,EAAKu0B,WAAY,EACjB,EAAKpZ,YAAcnb,EAAOmb,YAAc,IAAIta,IAAI4Z,GAAQ,cAAcnoB,KAAtB,oBAHhC,E,+CAMpB,SAAS2Q,GAAU,IACX8X,EADW,OAgBf,OAdGxd,KAAK4d,WAAWzrB,QACf6N,KAAK4d,WAAW9jB,SAAQ,SAACiC,EAAGrD,GACxBgN,EAAS,CACLL,KAAMmY,GAAQ,EACdlY,GAAI8wB,GAAOr6B,GACXvC,QAAUgkB,GAAQ,EAAKwZ,UAAaz/B,GAAUE,OAASF,GAAUC,MACjEkC,MAAOnC,GAAUI,IACjB8lB,KAAM,eAGV1hB,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAGRyhB,I,sBAEX,SAAS9X,GACLA,EAAS1F,MACTA,KAAK4d,WAAW9jB,SAAQ,SAAAiC,GACpBA,EAAE8gB,SAASnX,Q,gCAInB,SAAmB2b,EAAKJ,EAAQvb,GAC5B,IAAMsxB,EAAYh3B,KAAKg3B,UAGvBh3B,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EACVvb,GACAA,EAAS2b,EAAKJ,EAAQjhB,MAG1B,MAAiCq2B,GAAar2B,KAAMA,KAAK4d,WAAY,EAAG,EAAGyD,EAAM,EAAGJ,GAAU+V,EAAY,EAAI,GAAItxB,GAAnGtJ,EAAf,EAAQsgB,MAAkBrgB,EAA1B,EAAmBsgB,MAqBnB,OAHA3c,KAAK0c,MAAQlmB,KAAKoC,IAAIwD,EAAI,IAAM46B,EAAY,EAAI,GAEhDh3B,KAAK2c,MAAQtgB,EAAK,EACX,CACHqgB,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZ0E,MAAKJ,Y,wBAIb,SAAWxe,EAAQ8b,GACM,UAAlBA,EAASd,KACR,0EAAiBhb,GAEjBzC,KAAKyC,OAAOmb,WAAWrgB,QAAQkF,K,sBAIvC,SAAS/B,GAOL,OAAOV,KAAKuc,OAAOmb,SAASh3B,K,oBAGhC,WACoC,IAA7BV,KAAKuc,OAAOkC,MAAMtsB,OACjB6N,KAAKuc,OAAO1Z,SAEZ,2E,GA5FaqZ,IAuGnB4C,G,wDACF,WAAYrc,GAAQ,oCAChB,cAAMA,GACN,EAAKwa,MAAQxa,EAAOwa,MAAQ,IAAI3Z,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBAFpB,E,+CAKpB,SAAS2Q,GAAU,IACX8X,EADW,OA0Bf,OAxBGxd,KAAKid,KAAK9qB,QACT6N,KAAKid,KAAKnjB,SAAQ,SAACiC,EAAGrD,GAClBgN,EAAS,CACLL,KAAMmY,GAAQ,EACdlY,GAAI8wB,GAAOr6B,GACXvC,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUq5B,UAC7Cl3B,MAAOnC,GAAUI,IACjB8lB,KAAM,gBAGV1hB,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAGf2J,EAAS,CACLL,KAAMmY,GAAQxd,KACdsF,GAAItF,KACJxG,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUq5B,UAC7Cl3B,MAAOnC,GAAUs5B,QACjB/1B,SAAU+6B,GAAmB,YAC7B96B,SAAU86B,GAAmB,YAC7BnE,QAASmE,GAAmB,WAC5BpY,KAAM,gBAEHzd,O,sBAEX,SAAS0F,GACLA,EAAS1F,MACTA,KAAKid,KAAKnjB,SAAQ,SAAAiC,GACdA,EAAE8gB,SAASnX,Q,gCAGnB,SAAmB2b,EAAKJ,EAAQvb,GAG5B1F,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EACVvb,GACAA,EAAS2b,EAAKJ,EAAQjhB,MAU1B,MAAyBq2B,GAAar2B,KAAMA,KAAKid,KAAM,EAAG,EAAGoE,EAAM,EAAGJ,EAAS,EAAGvb,GAA1EgX,EAAR,EAAQA,MAAOC,EAAf,EAAeA,MAGf,OAFA3c,KAAK0c,MAAQlmB,KAAKoC,IAAI8jB,EAAQ,EAAG,GACjC1c,KAAK2c,MAAQA,EAAQ,EACd,CACHD,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZ0E,MAAKJ,Y,wBAIb,SAAWxe,EAAQ8b,GACM,gBAAlBA,EAASd,KACR,0EAAiBhb,EAAQ8b,GAEzBve,KAAKyC,OAAOwa,KAAK1f,QAAQkF,O,GAtENyZ,IAkFzB6C,G,wDACF,WAAYtc,GAAQ,oCAChB,cAAMA,GACN,EAAKwa,MAAQxa,EAAOwa,MAAQ,IAAI3Z,IAAI4Z,GAAQ,QAAQnoB,KAAhB,oBAFpB,E,+CAKpB,SAAS2Q,GAAU,IACX8X,EADW,OA6Bf,OA3BGxd,KAAKid,KAAK9qB,QACT6N,KAAKid,KAAKnjB,SAAQ,SAACiC,EAAGrD,GAClBgN,EAAS,CACLL,KAAMmY,GAAQ,EACdlY,GAAI8wB,GAAOr6B,GACXvC,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUq5B,UAC7Cl3B,MAAOnC,GAAUI,IACjB8lB,KAAM,cAGV1hB,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAGf2J,EAAS,CACLL,KAAMmY,GAAQxd,KACdsF,GAAItF,KACJxG,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUq5B,UAC7Cl3B,MAAOnC,GAAUs5B,QAIjB/1B,SAAU+6B,GAAmB,YAC7B96B,SAAU86B,GAAmB,YAC7BnE,QAASmE,GAAmB,WAC5BpY,KAAM,cAEHzd,O,sBAGX,SAAS0F,GACLA,EAAS1F,MACTA,KAAKid,KAAKnjB,SAAQ,SAAAiC,GACdA,EAAE8gB,SAASnX,Q,gCAGnB,SAAmB2b,EAAKJ,EAAQvb,GAC5B1F,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EACVvb,GACAA,EAAS2b,EAAKJ,EAAQjhB,MAE1B,MAAyBq2B,GAAar2B,KAAMA,KAAKid,KAAM,EAAG,EAAGoE,EAAM,EAAGJ,EAAS,EAAGvb,GAA1EgX,EAAR,EAAQA,MAAOC,EAAf,EAAeA,MAGf,OAFA3c,KAAK0c,MAAQlmB,KAAKoC,IAAI8jB,EAAQ,EAAG,GACjC1c,KAAK2c,MAAQA,EAAQ,EACd,CACHD,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZ0E,MAAKJ,Y,wBAGb,SAAWxe,EAAQ8b,GACM,cAAlBA,EAASd,KACR,0EAAiBhb,EAAQ8b,GAEzBve,KAAKyC,OAAOwa,KAAK1f,QAAQkF,O,GA/DRyZ,IAqEvByb,G,wDACF,WAAYl1B,GAAQ,oCAChB,cAAMA,GACN,EAAKga,aAAc,EACnB,EAAK2B,SAAW,KAChB,EAAKR,YAAcnb,EAAOmb,YAAc,IAAIta,IAAI4Z,GAAQ,cAAcnoB,KAAtB,oBAChD,EAAK8oB,WAAapb,EAAOob,WAAa,IAAIva,IAAI4Z,GAAQ,aAAanoB,KAArB,oBAL9B,E,+CAQpB,SAAS2Q,GAAU,IACX8X,EADW,OAsDf,OAnDGxd,KAAK6d,UAAU1rB,QACd6N,KAAK6d,UAAU/jB,SAAQ,SAACiC,EAAGrD,GACvBgN,EAAS,CACLL,KAAMmY,GAAQ,EACdlY,GAAI8wB,GAAOr6B,GACXvC,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUC,MAC7CkC,MAAOnC,GAAUI,IACjB8lB,KAAM,cAGV1hB,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAGf2J,EAAS,CACLL,KAAMmY,GAAQxd,KACdsF,GAAItF,KAAKoe,SACT5kB,QAASgkB,EAAOjmB,GAAUE,OAASF,GAAUC,MAC7CkC,MAAOnC,GAAUC,MACjBimB,KAAM,YACNma,cAAe53B,KAAK63B,cACpB/8B,SAAU+6B,GAAmB,YAC7Bhc,SAAS,EACTgY,WAAW,EACXC,WAAY,IAIhBtU,EAAO,KACJxd,KAAK4d,WAAWzrB,QACf6N,KAAK4d,WAAW9jB,SAAQ,SAACiC,EAAGrD,GACxBgN,EAAS,CACLL,KAAMmY,GAAQ,EACdlY,GAAI8wB,GAAOr6B,GACXvC,QAASjC,GAAUE,OACnBiC,MAAOnC,GAAUI,IACjB8lB,KAAM,eAGV1hB,EAAIA,EAAE2hB,SAAShY,GACf8X,EAAOzhB,KAGf2J,EAAS,CACLL,KAAMmY,GAAQxd,KACdsF,GAAItF,KAAKoe,SACT5kB,QAASjC,GAAUE,OACnBiC,MAAOnC,GAAUI,IACjB8lB,KAAM,eAGHzd,KAAKoe,W,sBAGhB,SAAS1Y,GACLA,EAAS1F,MACTA,KAAK4d,WAAW9jB,SAAQ,SAAAiC,GACpBA,EAAE8gB,SAASnX,MAEf1F,KAAK6d,UAAU/jB,SAAQ,SAAAiC,GACnBA,EAAE8gB,SAASnX,MAEf1F,KAAKoe,SAASvB,SAASnX,K,gCAG3B,SAAmB2b,EAAKJ,EAAQvb,GAC5B1F,KAAKqhB,IAAMA,EACXrhB,KAAKihB,OAASA,EACVvb,GACAA,EAAS2b,EAAKJ,EAAQjhB,MAG1B,MAAmCq2B,GAAar2B,KAAMA,KAAK4d,WAAY,EAAG,EAAGyD,EAAM,EAAGJ,EAAQvb,GAA/EoyB,EAAf,EAAQpb,MAAmBqb,EAA3B,EAAoBpb,MAEpB3c,KAAK63B,cAAgBrhC,KAAKoC,IAAIk/B,EAAK,GACnC,MAAmCzB,GAAar2B,KAAMA,KAAK6d,UAAW,EAAG,EAAGwD,EAAM,EAAGJ,EAASzqB,KAAKoC,IAAIk/B,EAAK,GAAIpyB,GAAjGsyB,EAAf,EAAQtb,MAAmBub,EAA3B,EAAoBtb,MACpB3c,KAAKk4B,cAAgB1hC,KAAKoC,IAAIo/B,EAAK,GACnC,IAAIrb,EAAQnmB,KAAKoC,IAAIm/B,EAAKE,GAAO,EAC7Bvb,EAAQlmB,KAAKoC,IAAIk/B,EAAK,GAAKthC,KAAKoC,IAAIo/B,EAAK,GAE7C,EAAuCh4B,KAAKoe,SAASf,mBAAmBgE,EAAM1E,EAAOsE,EAAQvb,GAA9E8xB,EAAf,EAAQ7a,MAAqB8a,EAA7B,EAAsB/a,MAMtB,OALAC,GAAS6a,EACT9a,EAAQlmB,KAAKoC,IAAI8jB,EAAO+a,GACxBz3B,KAAK0c,MAAQA,EACb1c,KAAK2c,MAAQA,EAEN,CACHD,MAAO1c,KAAK0c,MACZC,MAAO3c,KAAK2c,MACZ0E,MAAKJ,Y,wBAIb,SAAWxe,EAAQ8b,GACfve,KAAKyC,OAAO8b,EAASd,MAAMlgB,QAAQkF,O,GA1GjByZ,IA8GpBgD,GAAe,CACjB,GAAMyY,GACN,OAAUnZ,GACV,WAAcS,GACd,QAAWH,GACX,MAASC,GACT4X,SACAxX,MAAOjD,IAGX,SAASgB,GAAQ/L,GACb,OAAO,SAAUnc,EAAG0D,GAChB,IAAMvD,EAAIiqB,GAAQpqB,GAKlB,GAJAG,EAAEonB,OAASvc,KACX7K,EAAEuD,IAAMA,EACRvD,EAAEqnB,kBAAoBrL,EAElBhc,EAAEsnB,YAAa,CAEVznB,EAAEqqB,eACHrqB,EAAEqqB,aAAe,CACbiU,QAAS,WACTnX,GAAI,GAAF,OAAKhnB,EAAEgnB,GAAP,eAIV,IAAMxP,EAAIyS,GAAQpqB,EAAEqqB,cACpB1S,EAAE4P,OAASvc,KACX2M,EAAEjU,IAAMA,EACRiU,EAAE6P,kBAAoBrL,EACtBhc,EAAEipB,SAAWzR,EAGjB,OAAOxX,GAGf,SAASiqB,GAAQ3c,GACb,IAAM0O,EAAO1O,EAAO6wB,QACdhU,EAAcJ,GAAa/N,IAAS+N,GAAaC,MACjD5B,EAAO,IAAI+B,EAAY7c,GAC7B,OAAO8a,E,IC5zBL4a,G,WACF,WAAY11B,GAAQ,uBAKhBzC,KAAK6f,UAAY,GACjB7f,KAAK8f,cAAgB,GACrB9f,KAAKyC,OAAS,KACdzC,KAAK4f,QAAS,EACd5f,KAAK0f,QAAQjd,G,kDAGjB,SAAYtC,EAAUO,GAClB0G,QAAQC,IAAIrH,KAAK6f,UAAU,GAAGpd,QAI9B,IAHA,IAAMme,EAAYzgB,EAASc,OAAO1L,QAC9B6iC,EAAe,KAEVnmC,EAAI,EAAGA,EAAI+N,KAAK6f,UAAU1tB,OAAQF,IAAK,CAC5CmV,QAAQC,IAAIrH,KAAK6f,UAAU5tB,GAAGwQ,QAC9B,MAA+BzC,KAAK6f,UAAU5tB,GAAtCwQ,EAAR,EAAQA,OAAQL,EAAhB,EAAgBA,WACVjP,EAAIuN,EAAMwC,sBAAsBT,GACtC,GAAGtP,IAAMgN,EAAU,CACf,IAAMg1B,EAASU,GAAmB,UAC5BvU,EAAYuU,GAAmB,aAC/BP,EAAcO,GAAmB,eACjCR,EAAYQ,GAAmB,aAC/BgB,EAAiBz0B,EAAWy0B,eAC9BwB,EAAK,EACLC,EAAK,EACT,GAAGzB,EAAgB,CACf,MAAeZ,GAAgBv1B,EAAOm2B,EAAep0B,QAArD,sBAAOtK,EAAP,KAAUC,EAAV,KACAigC,EAAKlgC,EACLmgC,EAAKlgC,EAET,IAAQipB,EAAwBjf,EAAxBif,IAAKJ,EAAmB7e,EAAnB6e,OAAmB7e,EAAXK,OACrB21B,EAAe,CACXnX,GAAUqU,EAAcD,GAAagD,EACrChX,GAAOC,EAAY6T,GAAUmD,GAEjC,OAGR,IAAIF,EAEA,OADA13B,EAAM0F,UACC,EAGX,IAAMtS,EAAIgF,GAAM8nB,EAAWwX,GAC3B,OAAItkC,EAAI,KACJqM,EAASI,cAAc,IAAIoK,GAAW,YAAa,CAC/C1J,OAAQ2f,EACRzgB,WACAO,QACAzE,MAAO2kB,MAEJ,IAEPlgB,EAAM0F,UAEH,K,qBAGX,SAAQ3D,GAAQ,WACZzC,KAAKyC,OAASA,EACdzC,KAAK6f,UAAY,GACjB7f,KAAK8f,cAAgB,GAErB9f,KAAK+f,KAAOX,GAAQpf,KAAKyC,QAEzBzC,KAAK+f,KAAKlD,UAAS,SAACU,GACK,WAAjBA,EAAK+V,SAAyC,UAAjB/V,EAAK+V,SAItC,EAAKzT,UAAUptB,KAAK,CAChB0e,KAAMoM,EAAKpM,KACX1O,OAAQ8a,EAAK9a,OACbL,WAAYmb,OAQpBvd,KAAK+f,KAAKO,uBAAuB,EAAG,GAAG,SAACe,EAAKJ,EAAQ1D,OAIrDvd,KAAK+f,KAAKQ,8BAA6B,eAcvC,IAAM4U,EAASU,GAAmB,UAC5BvU,EAAYuU,GAAmB,aAC/BP,EAAcO,GAAmB,eACjCR,EAAYQ,GAAmB,aAErC71B,KAAK+f,KAAKrC,UAAS,SAACte,GAEhB,IAAMm5B,EAAmBn5B,EAAQiG,KACjBgc,GAAQkX,EAAhBtX,OAAgBsX,EAARlX,KAChB,GAAGjiB,EAAQk4B,YAAa,CAGpB,GAAmC,IAA/Bl4B,EAAQk4B,YAAYnlC,OAAc,CAClC,qBAAeiN,EAAQk4B,YAAvB,GAAOn/B,EAAP,KAAUC,EAAV,KACAgH,EAAQ6xB,UAAY,CACf94B,GAAMm9B,EAAcD,GAAaC,EAAa,EAAI,GAClDl9B,GAAMkpB,EAAY6T,GAAU7T,EAAY,EAAI,IAGrD,GAAmC,IAA/BliB,EAAQk4B,YAAYnlC,OAAc,CAClC,qBAAyBiN,EAAQk4B,YAAjC,GAAOpoB,EAAP,KAAWC,EAAX,KAAelN,EAAf,KAAmBC,EAAnB,KACA9C,EAAQ6xB,UAAY,CACf/hB,GAAOomB,EAAcD,GACrBlmB,GAAOmS,EAAY6T,GACnBlzB,GAAOqzB,EAAcD,GAAaC,EAAa,EAAI,GACnDpzB,GAAOof,EAAY6T,GAAU7T,EAAY,EAAI,UAItDliB,EAAQ6xB,UAAY,GAExB,GAAG7xB,EAAQm4B,OAAQ,CACf,IAAM9F,GAAeryB,EAAQm4B,OAASlW,IAAQC,EAAY6T,GAC1D/1B,EAAQqyB,YAAcA,OAEtBryB,EAAQqyB,iBAAclyB,OAEGA,IAA1BH,EAAQw4B,gBACPxwB,QAAQC,IAAI,gBAAiBjI,EAAQw4B,eACrCx4B,EAAQtE,WAAasE,EAAQw4B,cAAgB,IAAMtC,EAAcD,IAG9B,OAApCkD,EAAiB91B,OAAO6wB,UACvBl0B,EAAQ4V,QAA4B,cAAjB5V,EAAQqe,KAAuB,KAAO,OAEtB,UAApC8a,EAAiB91B,OAAO6wB,UACvBl0B,EAAQ4V,QAA4B,cAAjB5V,EAAQqe,KAAuB,MAAQ,MAE9D,EAAKqC,cAAcrtB,KAAK2M,Q,oBAOhC,SAAOsB,GAGH,IAAMy0B,EAASU,GAAmB,UAC5BvU,EAAYuU,GAAmB,aAC/BP,EAAcO,GAAmB,eACjCR,EAAYQ,GAAmB,aAQrC71B,KAAK6f,UAAU/lB,SAAQ,YAAoB,IAAjBsI,EAAiB,EAAjBA,WAChBy0B,EAAiBz0B,EAAWy0B,eAC9BwB,EAAK,EACLC,EAAK,EACT,GAAGzB,EAAgB,CACf,MAAeZ,GAAgBv1B,EAAOm2B,EAAep0B,QAArD,sBAAOtK,EAAP,KAAUC,EAAV,KAEAigC,EAAKlgC,EACLmgC,EAAKlgC,EAET,IAAQipB,EAAwBjf,EAAxBif,IAAKJ,EAAmB7e,EAAnB6e,OAAQxe,EAAWL,EAAXK,OACftC,EAAWO,EAAMwC,sBAAsBT,GAC7CtC,EAASc,OAAS,CACdggB,GAAUqU,EAAcD,GAAagD,EACrChX,GAAOC,EAAY6T,GAAUmD,U,KAwB9BH,MCvNX,GAAS,WAAa,IAAItF,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAIzwB,WAAoB,UAAE4wB,EAAG,qBAAqB,CAACO,MAAM,CAAC,OAASV,EAAItV,QAAQyV,EAAG,qBAAqBH,EAAI2F,GAAG,CAACjF,MAAM,CAAC,OAASV,EAAItV,KAAK,QAAUsV,EAAIzzB,SAASo0B,GAAG,CAAC,MAAQX,EAAI4F,eAAe,aAAe5F,EAAI6F,eAAe,kBAAoB7F,EAAI8F,iBAAiB,SAAW9F,EAAI+F,WAAW,yBAA2B/F,EAAIgG,2BAA2B,WAAahG,EAAIiG,aAAa,WAAajG,EAAIkG,eAAelG,EAAIrF,YAAY,CAACwF,EAAG,UAAU,CAACO,MAAM,CAAC,QAAUV,EAAImG,YAAY,CAAChG,EAAG,SAAS,CAACO,MAAM,CAAC,QAAUV,EAAIoG,gBAAgB,GAAGjG,EAAG,UAAU,CAACO,MAAM,CAAC,QAAUV,EAAIqG,YAAY,CAAClG,EAAG,SAAS,CAACO,MAAM,CAAC,QAAU,CACprBre,SAAU,OACVC,UAAW,OACXH,QAAS6d,EAAItV,KAAKvI,QAClBS,SAAU,IACVC,UAAU,EACVN,UAAW,YACT,IAAI,IACd,GAAkB,G,wNCEtB,SAAS+jB,GAAUC,GACf,IAAMjkC,EAAI,IAAIkkC,MAEd,OADAlkC,EAAEmkC,IAAMF,EACDjkC,EAGJ,IAAMokC,GAAiB,CAC1B,WAAcJ,GAAUK,MACxB,QAAWL,GAAUM,MACrB,OAAUN,GAAUO,MACpB,MAASP,GAAUQ,MACnB,cAAiBR,GAAUS,MAC3B,UAAaT,GAAUU,MACvB,WAAcV,GAAUW,MACxB,WAAcX,GAAUY,MACxB,GAAMZ,GAAUa,OAGPC,GAAoB,CAC7B,WAAcT,KACd,QAAWC,KACX,OAAUC,KACV,MAASC,KACT,cAAiBC,KACjB,UAAaC,KACb,WAAcC,KACd,WAAcC,KACd,GAAMC,MAGGE,GAAkB,CAC3B,WAAc,UACd,QAAW,UACX,OAAU,UACV,WAAc,UACd,MAAS,UACT,cAAiB,UACjB,UAAa,UACb,WAAc,UACd,GAAM,WAGGC,GAAqB,CAC9B,WAAc,UACd,QAAW,UACX,OAAU,UACV,WAAc,UACd,MAAS,UACT,cAAiB,UACjB,UAAa,OACb,WAAc,OACd,GAAM,QCpBV,SAAS,GAAuBpE,GAC9B,IAAF,IACA,WACA,YAEA,4BAEA,0DACE,MAAF,gBAEA,eACErb,UAAFA,aACEC,IAAFA,KAEe,IACbsT,OAAFA,uEACErC,MAAFA,CACIrO,KAAJA,OACInb,WAAJA,QAEEzQ,KANF,WAOI,IAAJ,YAEA,gBACA,gBACI,MAAJ,CAEMqnC,UAANA,CACQlnB,aAARA,EACQzJ,QAARA,EACQ3I,gBAARA,GAEMw5B,UAANA,CACQljC,MAARA,IACQ+W,WAARA,GACQI,cAARA,IAEM8rB,YAANA,CACQrhB,MAARA,EACQ5hB,MAARA,GACQC,OAARA,MAIEmkC,SAAFA,CACItF,cADJ,WAEM,OAAN,4BAEIuF,gBAJJ,WAKM,OAAN,kEAEIrF,UAPJ,WAQM,OAAN,sBAEIsF,UAVJ,WAWM,OAAN,2BAEIl7B,QAbJ,WAcM,IAAN,wBACA,iBACA,GACQO,YAARA,eASM,OAPN,IACQ46B,EAARA,CACU56B,YAAVA,qBACUC,WAAVA,KAGMwH,QAANA,mDACA,iBACQtB,OAARA,GACQtG,YAARA,EACQC,YAARA,cACQC,gBAARA,OACQoS,aAARA,EACQ7b,OAARA,GACQ8J,QAARA,qCACAw6B,KAIEhL,QApEF,WAqEI,KAAJ,eAEElE,QAAFA,CACIsN,iBADJ,SACAlF,GACMA,EAANA,2CACMA,EAANA,mBAEIiF,eALJ,SAKA9vB,GACMA,EAANA,kBACM,IAAN,iBAAU,EAAV,UAAU,EAAV,UAEMxW,OAANA,2BACQ+e,KAARA,UACQ6X,QAARA,EACQC,QAARA,EACQuR,QAARA,EACQ71B,OAARA,mBAGIi0B,WAjBJ,WAkBMxmC,OAANA,uBACQooC,QAARA,EACQ71B,OAARA,aAGIk0B,2BAvBJ,SAuBAjwB,GACM,IAAN,iBACA,8BACMlI,EAANA,qBAEIo4B,aA5BJ,SA4BAlwB,GACM,IAAN,kBACMxB,QAANA,OACM,IAAN,QAAU,EAAV,oBAAU,EAAV,KAAU,EAAV,KACMhV,OAANA,2BACQ+e,KAARA,eACQ6X,QAARA,EACQC,QAARA,EACQuR,QAARA,EACQ71B,OAARA,aAGIo0B,aAxCJ,SAwCAnwB,GACA,sBACQ,KAAR,eAGI6vB,eA7CJ,SA6CA7vB,GACMA,EAANA,kBACM,KAAN,uBC7KqU,M,aCOjUgnB,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,GAAAA,G,QClBX,GAAS,WAAa,IAAIiD,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,qBAAqBH,EAAI2F,GAAG,CAACjF,MAAM,CAAC,OAASV,EAAItV,KAAK,QAAUsV,EAAIzzB,SAASo0B,GAAG,CAAC,kBAAoBX,EAAI8F,mBAAmB9F,EAAIrF,YAAY,CAACwF,EAAG,UAAU,CAACO,MAAM,CAAC,QAAUV,EAAImG,YAAY,CAAChG,EAAG,SAAS,CAACO,MAAM,CAAC,QAAUV,EAAIoG,gBAAgB,IAAI,IAClV,GAAkB,G,wBCctB,aACA9jC,GAAEA,IAAMA,KACO,QACby2B,MAAFA,CACIrO,KAAJA,QAEE5rB,KAJF,WAKI,MAAJ,CACMyN,QAANA,CACQ0G,OAARA,QACU4U,UAAVA,WACUC,IAAVA,MAGMqe,UAANA,CACQ3wB,QAARA,GACQ3I,gBAARA,OACQD,YAARA,UACQD,YAARA,GAEMy5B,YAANA,CACQrhB,MAARA,GACQ5hB,MAARA,GACQC,OAARA,MAIEo1B,QAAFA,CACIsN,iBADJ,SACAlF,GACMA,EAANA,2CACMA,EAANA,qBC7CqU,MCOjU,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIZ,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,qBAAqB,CAACO,MAAM,CAAC,OAASV,EAAItV,OAAO,CAACyV,EAAG,UAAU,CAACO,MAAM,CAAC,QAAU,CACxK7zB,gBAAiB,UACjBF,YAAa,EACbxB,OAAQ,EACR+F,WAAW,OACT,IACV,GAAkB,GCSP,IACb6nB,MAAFA,CACIrO,KAAJA,QAEEsP,QAJF,WAKIzlB,QAAJA,iBCpBwU,MCOpU,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIyrB,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,qBAAqB,CAACO,MAAM,CAAC,OAASV,EAAItV,KAAK,QAAUsV,EAAIzzB,UAAU,CAAC4zB,EAAG,UAAU,CAACO,MAAM,CAAC,QAAUV,EAAImG,YAAY,CAAChG,EAAG,SAAS,CAACO,MAAM,CAAC,QAAUV,EAAIoG,gBAAgB,IAAI,IAC7Q,GAAkB,G,wBCkBtB,aACA9jC,GAAEA,IAAMA,KACO,QACby2B,MAAFA,CACIrO,KAAJA,QAEE5rB,KAJF,WAKI,MAAJ,CACMyN,QAANA,CACQ0G,OAARA,QACU4U,UAAVA,WACUC,IAAVA,MAGMqe,UAANA,CACQ3wB,QAARA,GACQ3I,gBAARA,OACQD,YAARA,UACQD,YAARA,GAEMy5B,YAANA,CACQrhB,MAARA,GACQ5hB,MAARA,GACQC,OAARA,OC1CmU,MCO/T,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAI48B,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAACO,MAAM,CAAC,QAAUV,EAAIzzB,QAAQ,KAAOyzB,EAAI4H,YAAYp1B,KAAK5C,OAAO,GAAKowB,EAAI4H,YAAYn1B,GAAG7C,QAAQ+wB,GAAG,CAAC,kBAAoBX,EAAI8F,iBAAiB,MAAQ9F,EAAI6H,QAAQ,WAAa7H,EAAIiG,aAAa,WAAajG,EAAIkG,aAAa,UAAYlG,EAAI8H,YAAY,SAAW9H,EAAI+H,WAAW,UAAY/H,EAAIgI,cAAc,KAAOhI,EAAI8B,iBAC3a,GAAkB,GCiBP,IACb1G,OAAFA,CACA,cACA,UACA,YACA,UACA,UAEErC,MAAFA,CACI6O,YAAJA,QAGE9oC,KAZF,WAaI,MAAJ,CACMmpC,YAANA,EACMnJ,SAANA,EACMC,cAANA,IAGEwI,SAAFA,CAKIh7B,QALJ,WAQM,OADAgI,QAANA,kBACA,mCACA,kBADA,IAMQuqB,QAARA,aACQC,aAARA,gBACQ5zB,OAARA,EACQ6a,YAARA,IACQ9Y,QAARA,0CAEQiyB,WAARA,CACU9f,OAAVA,kCACUD,MAAVA,UACU0I,IAAVA,KAEQjb,gBAARA,aAGIo1B,cA5BJ,WA6BM,OAAN,4BAEIuF,gBA/BJ,WAgCM,OAAN,yEAEIC,UAlCJ,WAmCM,OAAN,+CAGEpM,MAAFA,CACI,yBADJ,SACAttB,GACM,KAAN,eAGE2uB,QA9DF,WA+DI,KAAJ,eAEElE,QAAFA,CACIsN,iBADJ,SACAlF,GACMA,EAANA,2CACMA,EAANA,mBAOIkB,aAVJ,SAUAlB,GACM,KAAN,gBACM,KAAN,eAEIkH,YAdJ,SAcAlH,GAGM,KAAN,eAGImH,WApBJ,SAoBAnH,GAKM,IAAN,uBACA,iBACQ9mB,EAARA,iCAKIkuB,cAhCJ,WAiCM,KAAN,eAMI/B,aAvCJ,WAwCM,KAAN,YAEIC,aA1CJ,WA2CA,uBACQ,KAAR,aAGI2B,QA/CJ,SA+CA9xB,GACMxB,QAANA,OACMwB,EAANA,kBACM,IAAN,iBAAU,EAAV,UAAU,EAAV,UAEM,KAAN,WACMxW,OAANA,2BACQ+e,KAARA,UACQ6X,QAARA,EACQC,QAARA,EACQuR,QAARA,EACQ71B,OAARA,sBC7IoV,MCOhV,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIkuB,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,qBAAqB,CAACO,MAAM,CAAC,QAAUV,EAAIzzB,QAAQ,KAAOyzB,EAAI4H,YAAYp1B,KAAK5C,OAAO,GAAKowB,EAAI4H,YAAYn1B,GAAG7C,QAAQ+wB,GAAG,CAAC,kBAAoBX,EAAI8F,iBAAiB,MAAQ9F,EAAI6H,QAAQ,WAAa7H,EAAIiG,aAAa,WAAajG,EAAIkG,iBACrU,GAAkB,GCDlBgC,GAAO,EACX,SAASC,KACL,mBAAaD,MAGV,SAASE,GAAQ3H,GACpB,OAAQA,GACJ,IAAK,aACD,MAAO,CACHnX,GAAI6e,KACJ1H,UACAte,QAAS,IAEjB,IAAK,UACL,IAAK,QACD,MAAO,CACHmH,GAAI6e,KACJ1H,UACAte,QAAS,GACTiI,KAAM,IAEd,IAAK,SACD,MAAO,CACHd,GAAI6e,KACJ1H,UACA7U,MAAO,CACHwc,GAAQ,cACRA,GAAQ,cACRA,GAAQ,cACRA,GAAQ,gBAMpB,IAAK,aACD,MAAO,CACH9e,GAAI6e,KACJ1H,UACAte,QAAS,GACT4I,WAAY,IAEpB,IAAK,KACD,MAAO,CACHzB,GAAI6e,KACJ1H,UACAte,QAAS,GACT4I,WAAY,GACZC,UAAW,IAGnB,QACI,OAAO,MCtCJ,QACboQ,OAAFA,mCACErC,MAAFA,CACI6O,YAAJA,QAEE9oC,KALF,WAMI,MAAJ,CACMggC,SAANA,IAGEyI,SAAFA,CACIh7B,QADJ,WAGM,OAAN,mCACA,kBADA,IAEQuyB,QAARA,aACQjyB,gBAARA,qCAIE6vB,QApBF,WAqBI,KAAJ,eAEElE,QAAFA,CACIsN,iBADJ,SACAlF,GACMA,EAANA,2CACMA,EAANA,mBAEIiH,QALJ,WAMM,IAAN,mBACM,KAAN,gDACM,KAAN,oBAEI5B,aAVJ,WAWM1xB,QAANA,aACM,KAAN,YAEI2xB,aAdJ,WAeM3xB,QAANA,aACM,KAAN,cCrDqV,MCOjV,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIyrB,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO,SAAS,CAACP,EAAG,MAAM,CAACkI,WAAW,CAAC,CAACnnC,KAAK,OAAOonC,QAAQ,SAAS3mC,MAAOq+B,EAAIt5B,KAAW,OAAE6hC,WAAW,gBAAgBlI,MAAML,EAAIM,OAAOpT,KAAK3pB,MAAOy8B,EAAkB,gBAAG,CAACA,EAAIwI,GAAG,YAAY,MAClT,GAAkB,GCWP,IACbzP,MAAFA,CACIryB,KAAJA,QAEE6gC,SAAFA,CACIkB,eADJ,WAGM,OADAl0B,QAANA,eACA,4FCnBsV,M,yBCStV,SAASm0B,GAAcC,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACA,IACA,EACAF,GACA,KACA,MAIa,M,QC5BX,GAAS,WAAa,IAAI1I,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOpT,MAAM,CAACiT,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOuI,OAAO,CAAC7I,EAAIe,GAAG,cAAcZ,EAAG,KAAK,CAACE,MAAML,EAAIM,OAAOmD,MAAMzD,EAAIQ,GAAIR,EAAQ,MAAE,SAAS5W,GAAQ,OAAO+W,EAAG,KAAK,CAACl+B,IAAImnB,EAAOqX,QAAQE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAI8I,eAAe1f,EAAOqX,YAAY,CAACN,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOiG,KAAK7F,MAAM,CAAC,IAAMtX,EAAOmd,QAAQpG,EAAG,OAAO,CAACH,EAAIe,GAAGf,EAAIgB,GAAG5X,EAAOqX,iBAAgB,MACnd,GAAkB,GCsBtB,SAASsI,KACP,MAAF,CACA,aACA,UACA,SACA,QACA,MACAt4B,KAAA,YAAI,MAAJ,CACMgwB,QAANA,EACMrhB,MAANA,MACM4pB,SAANA,MACMzC,KAANA,UAIe,QACbnL,OAAFA,6CACErC,MAAFA,CACIryB,KAAJA,QAEE5H,KALF,WAMI,MAAJ,CACM2kC,KAANA,OAGEjL,QAAFA,CACIsQ,eADJ,SACA9nC,GACM,IAAN,QACA,mBACM4mC,EAANA,qBACM,KAAN,oBACM,KAAN,iBCtDkV,M,aCQlV,SAAS,GAAce,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACA,IACA,EACA,GACA,KACA,MAIa,M,QC3BX,GAAS,WAAa,IAAI5I,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOpT,MAAM,CAACiT,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOuI,OAAO,CAAC7I,EAAIe,GAAG,IAAIf,EAAIgB,GAAGhB,EAAIt5B,KAAK+5B,SAAS,OAAON,EAAG,KAAK,CAACE,MAAML,EAAIM,OAAOmD,MAAM,CAACtD,EAAG,KAAK,CAACQ,GAAG,CAAC,MAAQX,EAAIiJ,aAAa,CAAC9I,EAAG,OAAO,CAACH,EAAIe,GAAG,eACtS,GAAkB,GCmBtB,SAAS,KACP,MAAF,CACA,aACA,UACA,SACA,QACA,MACAtwB,KAAA,YAAI,MAAJ,CACMgwB,QAANA,EACMrhB,MAANA,MACM4pB,SAANA,MACMzC,KAANA,UAIe,QACbnL,OAAFA,mCACErC,MAAFA,CACIryB,KAAJA,QAEE5H,KALF,WAMI,MAAJ,CACM2kC,KAANA,OAGEjL,QAAFA,CACIyQ,WADJ,WAEM,IAAN,mBACM15B,EAANA,SACM,KAAN,mBACM,KAAN,iBClDiV,M,aCQjV,SAAS,GAAco5B,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACA,IACA,EACA,GACA,KACA,MAIa,M,QC3BX,GAAS,WAAa,IAAI5I,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO,SAAS,CAACP,EAAG,MAAM,CAACkI,WAAW,CAAC,CAACnnC,KAAK,OAAOonC,QAAQ,SAAS3mC,MAAOq+B,EAAIt5B,KAAW,OAAE6hC,WAAW,gBAAgBlI,MAAML,EAAIM,OAAOpT,KAAK3pB,MAAOy8B,EAAkB,gBAAG,CAACA,EAAIe,GAAG,IAAIf,EAAIgB,GAAGhB,EAAIt5B,KAAKoL,OAAOqQ,SAAS,UAC1U,GAAkB,GCQP,IACb4W,MAAFA,CACIryB,KAAJA,QAEE6gC,SAAFA,CACIkB,eADJ,WAGM,OADAl0B,QAANA,eACA,+FChBuV,M,aCQvV,SAAS,GAAco0B,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACA,IACA,EACA,GACA,KACA,MAIa,M,QCtBf,SAASM,GAAa5qB,GAClB,OAAQA,GACJ,IAAK,UACD,OAAO6qB,GACX,IAAK,UACD,OAAOC,GACX,IAAK,eACD,OAAOC,GACX,QACI,OAAO,MAGJ,QACXC,YAAY,EACZvQ,MAAO,CACHryB,KAAMnH,QAEV+E,OALW,SAKJtD,EAAG2nC,GACN,IACIjiC,EACAiiC,EAAQ5P,MADRryB,KAEEzE,EAAM0mC,EAAQ7pC,KAAKmD,IACnBsnC,EAAkBL,GAAaxiC,EAAK4X,MAC1C,MAAiB,iBAAd5X,EAAK4X,KACGtd,EAAEuoC,EAAiB,CACtBtnC,MACA82B,MAAO4P,EAAQ5P,MACf4H,GAAIgI,EAAQa,YAGbxoC,EAAE4B,GAAS,CACdm2B,MAAO,CACHryB,SAEL,CACC1F,EAAEuoC,EAAiB,CACftnC,MACA82B,MAAO4P,EAAQ5P,MACf4H,GAAIgI,EAAQa,gBC3CxB,GAAS,WAAa,IAAIxJ,EAAI7yB,KAAS8yB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACO,MAAM,CAAC,KAAO,SAAS,CAACP,EAAG,MAAM,CAACkI,WAAW,CAAC,CAACnnC,KAAK,OAAOonC,QAAQ,SAAS3mC,MAAOq+B,EAAIt5B,KAAW,OAAE6hC,WAAW,gBAAgBlI,MAAML,EAAIM,OAAO19B,SAAS,CAAEo9B,EAAU,OAAEG,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOpT,MAAM,CAACiT,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOmJ,QAAQ,CAACtJ,EAAG,MAAM,CAACH,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIluB,OAAO2uB,YAAYN,EAAG,SAAS,CAACQ,GAAG,CAAC,MAAQX,EAAI0J,UAAU,CAAC1J,EAAIe,GAAG,aAAaZ,EAAG,MAAM,CAACE,MAAML,EAAIM,OAAOne,SAAS,CAACge,EAAG,WAAW,CAACE,MAAML,EAAIM,OAAOqJ,IAAIvH,SAAS,CAAC,MAAQpC,EAAIluB,OAAOqQ,SAASwe,GAAG,CAAC,KAAOX,EAAI4J,uBAAuB5J,EAAI6J,UAC9lB,GAAkB,GCkBP,IACbzO,OAAFA,gBACErC,MAAFA,CACIryB,KAAJA,QAEE6gC,SAAFA,CACIz1B,OADJ,WAEM,OAAN,uBAGE0mB,QAAFA,CACIkR,QADJ,WAEMnqC,OAANA,kBACQooC,QAARA,KAGIiC,gBANJ,SAMA7zB,GACM,IAAN,iBACM,KAAN,iBACM,KAAN,iBCtC+U,M,aCQ/U,SAAS,GAAc4yB,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACA,IACA,EACA,GACA,KACA,MAIa,M,QC8Ff,SAAS,KACP,MAAF,CACA,aACA,UACA,SACA,QACA,MACAn4B,KAAA,YAAI,MAAJ,CACMgwB,QAANA,EACMrhB,MAANA,MACM4pB,SAANA,MACMzC,KAANA,UAKA5D,KACe,QACb7F,WAAFA,CACIgN,UAAJA,GACIC,QAAJA,GACIC,UAAJA,GACIC,aAAJA,GACItL,UAAJA,GACIuL,WAAJA,GACIC,WAAJA,GACIC,UAAJA,IAEE7R,QAXF,WAYI,MAAJ,CACMK,YAANA,iBACMyR,iBAANA,sBACMC,QAANA,aACMC,YAANA,iBACMvI,QAANA,aACME,MAANA,WACMsI,QAANA,aACMxX,OAANA,YAEMyX,SAANA,cACMC,UAANA,iBAGE5rC,KA1BF,WA2BI,IAAJ,aACA,iBACMs0B,WAANA,EACMngB,OAANA,EACM8e,YAANA,EACMI,QAANA,GACMrb,eAANA,EACMsb,YAANA,IACMH,mBAPN,SAOAqC,EAAAC,EAAAC,EAAAC,EAAA/Y,EAAAC,EAAAgvB,EAAAC,GACQ,MAAR,CACUtlC,EAAVA,MACUC,EAAVA,MAII,MAAJ,CACMgH,QAANA,EACMs+B,WAANA,GACMzJ,cAANA,EACM7yB,cAANA,KACMyzB,QAANA,CACQC,cAARA,CACU3jB,UAAVA,EACUqpB,QAAVA,EACUxR,QAAVA,EACUC,QAAVA,EACUtkB,OAAVA,KACUokB,QAAVA,OAGMgM,MAANA,CACQC,UAARA,CACUwF,QAAVA,EACU71B,OAAVA,OAIMg5B,YAANA,KAEMzI,gBAANA,GAEMre,MAANA,KACMwmB,QAANA,CACQj9B,MAARA,GAEMylB,OAANA,CACQT,SAARA,CACUoV,QAAVA,MAKEtM,MAAFA,CACI+F,aADJ,SACArzB,GACA,GACQ,KAAR,cAGI,yBANJ,SAMAA,GACMwG,QAANA,wBAGEikB,QAAFA,CACIjjB,WADJ,WAEM,IAAN,iCACM2tB,EAANA,mCAEIrB,gBALJ,SAKA/nB,GACMvF,QAANA,uBACMuF,EAANA,kBACM,KAAN,iBAEIunB,cAVJ,WAWM,KAAN,cACM,KAAN,eACM,KAAN,iBAEIzI,YAfJ,WAgBMrkB,QAANA,mBACM,KAAN,2BAEI81B,iBAnBJ,SAmBA3f,GAAM,IAAN,OAEM,KAAN,wCACM,KAAN,sCACQ,EAAR,aACA,IACA,qBACY,EAAZ,oBAEY,EAAZ,gBAMIiX,aAlCJ,SAkCA/xB,GACM,KAAN,gBACM,IAAN,iCACA,6BACA,mBACQ,KAAR,4BAGI2xB,WA1CJ,WA2CM,KAAN,mBACM,KAAN,2BAEIT,UA9CJ,WA+CM,KAAN,2BAKIgB,aApDJ,SAoDAhoB,EAAA8tB,GACM,IAAN,iCACA,oBACM,GAAN,oBACQld,EAARA,mBACQ,IAAR,6BACA,iCACUA,EAAVA,gBACUnb,EAAVA,iBAEUA,EAAVA,SAGMq4B,EAANA,qBACM,KAAN,oBACM,KAAN,2BAGI6C,SAtEJ,SAsEA/f,GACM,KAAN,QACM,KAAN,iBAEIggB,UA1EJ,SA0EA54B,GACM,OAAN,gBAEIw4B,QA7EJ,SA6EA16B,GACM,IAAN,iCACA,6BACM2E,QAANA,iCACA,oBACQ2uB,EAARA,WACQ,KAAR,eAGI5B,OAtFJ,SAsFAxnB,GACM,IAAN,iCACA,oBACA,iBACM,KAAN,8BACM,KAAN,wCACM,KAAN,+BACQmpB,YACR,iBACM,KAAN,2BA+BI9J,mBA9HJ,SA8HAvpB,GACM,OAAN,MAYIixB,YA3IJ,SA2IA/mB,EAAA2mB,GACM,IAAN,iBACA,uCAEA,4BAAU,EAAV,QAAU,EAAV,SACMlsB,QAANA,SAEMw2B,EAANA,4BACM,KAAN,YACMjxB,EAANA,sCACM,IAAN,iCACMopB,EAANA,aACQ51B,SAARA,QAEM,KAAN,2BAGIi9B,YA5JJ,WA6JMhrC,OAANA,mCACQ+e,UAARA,EACQqpB,QAARA,EACQxR,QAARA,EACQC,QAARA,EACQtkB,OAARA,KACQokB,QAARA,QAIIqM,SAvKJ,SAuKAzoB,EAAA7X,GACM,IAAN,kBACM6gC,QACA,KAAN,oBAGIlB,YA7KJ,SA6KA9nB,EAAAlK,GACM,IAAN,iBACA,iCACA,6BACA,IACA,iCACQ8a,EAARA,gBACQnb,EAARA,iBAEQA,EAARA,SAEM,KAAN,8BACM,KAAN,wCACM,KAAN,+BACQ0zB,YACR,oBC/Z8T,M,aCQ9T,SAAS,GAAc0F,GAErBx7B,KAAK,UAAa,cAAOy7B,QAAU,cAMrC,IAAI,GAAY,gBACd,GACA,GACAlG,IACA,EACA,GACA,KACA,MAIa,M,QCpBfjF,OAAIrU,OAAO4hB,eAAgB,EAC3BvN,OAAInkB,IAAI2xB,GAAgB,CACpBnN,WAAY,CACRa,aACAoB,mBAEJlC,aAAc,CACVqN,qBAGR,IAAIzN,OAAI,CACNn5B,OAAQ,SAAAwX,GAAC,OAAIA,EAAEqvB,OACd1Q,OAAO,S,qBCnBV55B,EAAOD,QAAU,ssD,oCCAjB,oE,oCCAA,oE,oCCAA,oE,+hFCAAC,EAAOD,QAAU,s3C,8CCCjBC,EAAOD,QAAU,CAAC,KAAO,4B,uBCAzBC,EAAOD,QAAU,CAAC,QAAU,sBAAsB,KAAO,mBAAmB,OAAS,qBAAqB,QAAU,sBAAsB,IAAM,oB,qBCDhJC,EAAOD,QAAU,00B,qBCCjBC,EAAOD,QAAU,CAAC,IAAM,gBAAgB,QAAU,oBAAoB,KAAO,iBAAiB,QAAU,oBAAoB,KAAO,iBAAiB,WAAa,uBAAuB,QAAU,oBAAoB,QAAU,sB,mBCDhOC,EAAOD,QAAU,krC,mBCAjBC,EAAOD,QAAU,8iE,mBCAjBC,EAAOD,QAAU,krC,mBCAjBC,EAAOD,QAAU,8wD,mBCAjBC,EAAOD,QAAU,s6D,kCCAjB,oE,mBCAAC,EAAOD,QAAU,80B,kCCAjB,oE,qBCCAC,EAAOD,QAAU,CAAC,KAAO,6B,mBCDzBC,EAAOD,QAAU","file":"js/app.f766d109.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export { default } from  \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-wrapper.vue?vue&type=style&index=1&module=true&lang=css&\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-wrapper.vue?vue&type=style&index=1&module=true&lang=css&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"op-menu_root_omvQ4\",\"title\":\"op-menu_title_1jWBs\",\"list\":\"op-menu_list_1ohR4\",\"icon\":\"op-menu_icon_1nkwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"add-menu_root_3sqwT\",\"title\":\"add-menu_title_7SCi7\",\"list\":\"add-menu_list_x2GTu\",\"icon\":\"add-menu_icon_1lZOX\"};","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-wrapper.vue?vue&type=style&index=0&lang=css&\"","\n/**\n * @typedef {Object} CanvasMeta\n * @property {Element} canvas - canvas 元素\n * @property {number} width - 画布宽度\n * @property {number} height - 画布高度\n * @property {number} raw_width - 画布元素宽度\n * @property {number} raw_height - 画布元素高度\n * @property {number} left - 画布距离左端距离\n * @property {number} top - 画布距离顶端距离\n * @property {Context2d} ctx - Context2d\n * @property {number} scale - 当前的像素设备比\n */\n/**\n * 创建一个 canvas 元素\n * @param  {Element} wrapper - dom元素\n * @return {CanvasMeta}\n */\nexport function createCanvas(wrapper) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const { width, height, left, top } = wrapper.getBoundingClientRect();\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    canvas.style.userSelect = 'none';\n    const scale = window.devicePixelRatio;\n    canvas.width = Math.floor(width * scale);\n    canvas.height = Math.floor(height * scale);\n\n    if(wrapper) {\n        wrapper.style.position = 'relative';\n        wrapper.style.overflow = 'hidden';\n        wrapper.append(canvas);\n    }\n    return {\n        canvas,\n        width,\n        height,\n        raw_width: canvas.width,\n        raw_height: canvas.height,\n        left,\n        top,\n        ctx,\n        scale,\n    }\n}\n\nexport function resizeCanvas(canvas, wrapper) {\n    const { width, height, left, top } = wrapper.getBoundingClientRect();\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    const scale = window.devicePixelRatio;\n    canvas.width = Math.floor(width * scale);\n    canvas.height = Math.floor(height * scale);\n    return {\n        width,\n        height,\n        raw_width: canvas.width,\n        raw_height: canvas.height,\n    }\n}\n\nconst caheCanvas = document.createElement('canvas');\ncaheCanvas.width = 1;\ncaheCanvas.height = 1;\nconst caheCanvasctx = caheCanvas.getContext('2d');\nconst scale = window.devicePixelRatio;\ncaheCanvasctx.scale(scale, scale);\n\n/**\n * 在离线canvas上绘制元素\n * @param  {render} render - 绘图函数\n */\nexport function requestCacheCanvas(render) {\n    caheCanvasctx.clearRect(0,0,5,5);\n    caheCanvasctx.save();\n    render(caheCanvasctx);\n    caheCanvasctx.restore();\n    caheCanvasctx.clearRect(0,0,5,5);\n}","/**\n * 方向\n * @readonly\n * @enum {number}\n */\nexport const DIRECTION = {\n    /** RIGHT */\n    RIGHT: 0,\n    /** BOTTOM */\n    BOTTOM: 1,\n    /** LEFT */\n    LEFT: 2,\n    /** TOP */\n    TOP: 3,\n    /** SELF */\n    SELF: 100,\n}\n\nexport function nextDirection(direction, clockwise) {\n    const nextDir = (direction + (clockwise ? 1 : -1)) % 4;\n    return nextDir;\n}\n\nexport function oppositeDirection(direction) {\n    return (direction + 2) % 4\n}\n\nexport const APPROXIMATE = 6;\n\nexport const JFLOW_MODE = {\n    DEFAULT: 'DEFAULT',\n    LINKING: 'LINKING',\n}\n\nexport const LINE_DIR = {\n    FROM: 'from',\n    TO: 'to',\n}","import {\n    Bezier,\n} from 'bezier-js';\nimport { DIRECTION } from './constance';\n\n/**\n * 根据点计算最小外接矩形\n * @param {number[][]} points - 点集合\n * @return {Object} demension 宽高，坐标\n */\nexport function bounding_box(points) {\n    if(points.length === 0) {\n        return {\n            width: 1,\n            height: 1,\n            x: 0,\n            y: 0,\n        }\n    }\n    let min_x = Infinity; \n    let min_y = Infinity; \n    let max_x = -Infinity; \n    let max_y = -Infinity; \n    for(let idx in points) {\n        const item = points[idx];\n        if(item[0] < min_x){\n            min_x = item[0]\n        }\n\n        if (item[0] > max_x) {\n            max_x = item[0]\n        } \n\n        if (item[1] < min_y) {\n            min_y = item[1]\n        }\n\n        if (item[1] > max_y) {\n            max_y = item[1]\n        }\n    }\n    return {\n        // points: [(min_x,min_y),(max_x,min_y),(max_x,max_y),(min_x,max_y)],\n        width: Math.max(max_x - min_x, 10),\n        height: Math.max(max_y - min_y, 10),\n        x: min_x,\n        y: min_y,\n    }\n}\n\nfunction sqr(x) {\n    return x * x;\n}\nexport function dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n// p - point\n// v - start point of segment\n// w - end point of segment\nexport function distToSegmentSquared(p, v, w) {\n    const l2 = dist2(v, w);\n    if (l2 === 0) return dist2(p, v);\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return dist2(p, [ v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1]) ]);\n}\n\nexport function minIntersectionBetweenNodes(dmsfrom, dmsto) {\n    const meta = {\n        fromDir: null,\n        fromP: null,\n        toDir: null,\n        toP: null,\n        distMin: Infinity\n    }\n    Object.keys(dmsfrom).forEach(df => {\n        if((+df) === DIRECTION.SELF) {\n            return;\n        }\n        let pf = dmsfrom[df];\n        Object.keys(dmsto).forEach(dt => {\n            if((+dt) === DIRECTION.SELF) {\n                return;\n            }\n            let pt = dmsto[dt];\n            const dist = dist2(pf, pt);\n            if(dist < meta.distMin) {\n                Object.assign(meta, {\n                    distMin: dist,\n                    fromDir: +df,\n                    fromP: pf,\n                    toDir: +dt,\n                    toP: pt,\n                })\n            }\n        })\n    });\n    return meta;\n}\n\n// export function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, anticlock = false) {\n//     const isSameDirection = start_dir === end_dir;\n//     const isVerticalStart = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(start_dir);   \n//     const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n//     const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n//     const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n//     const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n//     if(isSameDirection) {\n//         let span = Math.abs(isVerticalStart ? (endY - p1[1]) : (endX - p1[0]))\n//         span = Math.min(span, 50);\n//         const symb = [DIRECTION.RIGHT, DIRECTION.BOTTOM].includes(end_dir)\n//         span = symb ? span : - span;\n//         const cp1 = isVerticalStart ? [p1[0], p1[1] + span] : [p1[0] + span, p1[1]];\n//         const cp2 = isVerticalEnd ? [endX, endY + span] : [endX + span, endY];\n//         return [ \n//             ...cp1,\n//             ...cp2,\n//             endX, endY ];\n//     }\n//     let spanStart = (anticlock ? -5 : 1) * (isVerticalStart ? (endY - p1[1]) / 2 : (endX - p1[0]) / 2)\n//     let spanEnd = (anticlock ? -4 : 1) * (isVerticalEnd ? (p1[1] - endY) / 2 : (p1[0] - endX) / 2)\n//     let u1 = spanStart / Math.abs(spanStart);\n//     spanStart = u1 * Math.min(Math.abs(spanStart), 50);\n//     let u2 = spanEnd / Math.abs(spanEnd);\n//     spanEnd = u2 * Math.min(Math.abs(spanEnd), 50);\n//     const cp1 = isVerticalStart ? [p1[0], p1[1] + spanStart] : [p1[0] + spanStart, p1[1]];\n//     const cp2 = isVerticalEnd ? [endX, endY + spanEnd] : [endX + spanEnd, endY];\n//     return [ \n//         ...cp1,\n//         ...cp2,\n//         endX, endY ];\n// }\nfunction _resolveControlPoint(p, dir, spanx, spany){\n    if(dir === DIRECTION.TOP){\n        return [p[0], p[1]-spany]\n    }\n    if(dir === DIRECTION.BOTTOM){\n        return [p[0], p[1]+spany]\n    }\n    if(dir === DIRECTION.LEFT){\n        return [p[0]-spanx, p[1]]\n    }\n    if(dir === DIRECTION.RIGHT){\n        return [p[0]+spanx, p[1]]\n    }\n}\n\nexport function bezierPoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 0, minSpanY = 0) {\n    const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const cp1 = _resolveControlPoint(p1, start_dir, spanx, spany);\n    const cp2 = _resolveControlPoint(p2, end_dir, spanx, spany);\n    const arrowspan = [DIRECTION.TOP, DIRECTION.LEFT].includes(end_dir) ? -5 : 5;\n    const isVerticalEnd = [DIRECTION.TOP, DIRECTION.BOTTOM].includes(end_dir);\n    const endX = isVerticalEnd ? p2[0] : p2[0] + arrowspan;\n    const endY = isVerticalEnd ? p2[1] + arrowspan : p2[1];\n    return [ \n        ...cp1,\n        ...cp2,\n        endX, endY];\n}\n\nexport function bezierPoint(t, P) {\n    const q = 1-t;\n    const x = q*q*q*P[0] + 3*q*q*t*P[2] + 3*q*t*t*P[4] + t*t*t*P[6];\n    const y = q*q*q*P[1] + 3*q*q*t*P[3] + 3*q*t*t*P[5] + t*t*t*P[7];\n    const u = q*q*(P[2]-P[0]) + 2*t*q*(P[4]-P[2]) + t*t*(P[6]-P[4]);\n    const v = q*q*(P[3]-P[1]) + 2*t*q*(P[5]-P[3]) + t*t*(P[7]-P[5]);\n    let angle = Math.atan2(v, u);\n    // console.log(angle * 180)\n    // if(angle < 0) {\n    //     angle = Math.PI + angle;\n    // }\n    return [x, y, angle];\n}\n\n// export function bezierPoints(p1, p2, start_vec, end_vec) {\n\n// }\n\nexport function distToBezierSegmentSquared(p, points) {\n    const b = new Bezier(...points);\n\n    const point = b.project({ x: p[0], y: p[1] });\n    const d = dist2(p, [ point.x, point.y ]);\n    return d;\n}\n\nexport function getBezierAngle(t, sx, sy, cp1x, cp1y, cp2x, cp2y, ex, ey) {\n  var dx = Math.pow(1-t, 2)*(cp1x-sx) + 2*t*(1-t)*(cp2x-cp1x) + t * t * (ex - cp2x);\n  var dy = Math.pow(1-t, 2)*(cp1y-sy) + 2*t*(1-t)*(cp2y-cp1y) + t * t * (ey - cp2y);\n  return -Math.atan2(dx, dy) + 0.5*Math.PI;\n}\n\n\nexport function getInstanceHeight(instance) {\n    const rect = instance.getBoundingRect();\n    // let min_y = Infinity;\n    // let max_y = -Infinity;\n    // let min_x = Infinity;\n    // let max_x = -Infinity;\n    // rect.forEach(point => {\n    //     max_y = Math.max(max_y, point[1]);\n    //     min_y = Math.min(min_y, point[1]);\n    //     max_x = Math.max(max_x, point[0]);\n    //     min_x = Math.min(min_x, point[0]);\n    // });\n    return {\n        height: rect[3] - rect[1],\n        width: rect[2] - rect[0],\n    }\n}\n\nexport function polylinePoints(p1, p2, start_dir = DIRECTION.TOP, end_dir = DIRECTION.TOP, minSpanX = 10, minSpanY = 10, isSelf) {\n    const dirSpan = Math.abs(start_dir - end_dir);\n    // const spanx = Math.max(Math.abs((p1[0] - p2[0])/2), minSpanX);\n    // const spany = Math.max(Math.abs((p1[1] - p2[1])/2), minSpanY);\n    const isVerticalStart = (start_dir === DIRECTION.TOP || start_dir === DIRECTION.BOTTOM);\n    let points = [];\n    switch (dirSpan) {\n        case 0:\n            // 都按向右好了\n            if(start_dir === DIRECTION.TOP) {\n                const y = Math.min(p1[1], p2[1]);\n                const yp = y - minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.BOTTOM) {\n                const y = Math.max(p1[1], p2[1]);\n                const yp = y + minSpanY;\n                points.push([p1[0], yp]);\n                points.push([p2[0], yp]);\n            }\n            if(start_dir === DIRECTION.LEFT) {\n                const x = Math.min(p1[0], p2[0]);\n                const xp = x - minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            if(start_dir === DIRECTION.RIGHT) {\n                const x = Math.max(p1[0], p2[0]);\n                const xp = x + minSpanX;\n                points.push([xp, p1[1]]);\n                points.push([xp, p2[1]]);\n            }\n            break;\n        case 1:\n        case 3:  \n            if(isSelf) {\n                if(!isVerticalStart) {\n                    points.push([p1[0] + minSpanX, p1[1]]);\n                    points.push([p1[0] + minSpanX, p2[1] + minSpanY]);\n                    points.push([p2[0], p2[1] + minSpanY]);\n                } else {\n                    points.push([p1[0], p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p1[1] + minSpanY]);\n                    points.push([p2[0] + minSpanX, p2[1]]);\n                }\n            } else {\n                const point = isVerticalStart ? [p1[0], p2[1]]: [p2[0], p1[1]]\n                points.push(point);\n            }\n            break;\n        case 2:\n            const pmiddle = [\n                (p1[0] - p2[0])/2 + p2[0],\n                (p1[1] - p2[1])/2 + p2[1]\n            ]; \n            if(isVerticalStart) {\n                points.push([p1[0], pmiddle[1]])\n                points.push([p2[0], pmiddle[1]])\n            } else {\n                points.push([pmiddle[0], p1[1]])\n                points.push([pmiddle[0], p2[1]])\n            }\n            break;\n        default:\n            break;\n    }\n    points.unshift(p1);\n    points.push(p2);\n    return points;\n}\n\nfunction minusVec(p1, p2) {\n    return [p1[0] - p2[0], p1[1] - p2[1]]\n}\n\nfunction absVec(vec) {\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\n\nfunction scaleVec(vec, scale) {\n    return [vec[0] * scale, vec[1] * scale];\n}\n\nexport function makeRadiusFromVector(pbefore, p, pnext, radius) {\n    const vec1 = minusVec(p, pbefore);\n    const vec2 = minusVec(p, pnext);\n    const absVec1 = absVec(vec1);\n    const absVec2 = absVec(vec2);\n    if(!absVec1 || !absVec2) {\n        return {\n            p1: null,\n            p2: null,\n        }\n    }\n    const r1 = scaleVec(vec1, radius/absVec1);\n    const r2 = scaleVec(vec2, radius/absVec2);\n    return {\n        p1: minusVec(p, r1),\n        p2: minusVec(p, r2),\n    }\n}\n// 矩形重叠计算\nexport function doOverlap(rec1, rec2) {\n    if (rec1[0] == rec1[2] || rec1[1] == rec1[3] ||\n        rec2[0] == rec2[2] || rec2[1] == rec2[3]) {\n        // the line cannot have positive overlap\n        return false;\n    }\n\n    return !(rec1[2] <= rec2[0] ||   // left\n                rec1[3] <= rec2[1] ||   // bottom\n                rec1[0] >= rec2[2] ||   // right\n                rec1[1] >= rec2[3]);    // top\n}\n\nexport function isPolyLineIntersectionRectange(polyline, rect) {\n    let p = polyline[0];\n    let l = polyline.length;\n    let i = 1;\n    const [l0, l1, r0, r1] = rect;\n    while (i < l) {\n        const cp = polyline[i];\n        if(p[0] === cp[0]) {\n            // vertical\n            if(p[0] < r0 && p[0] > l0 \n                && !((p[1] > r1 && cp[1] > r1) || (p[1] < l1 && cp[1] < l1))){\n                    return true;\n                } \n        } else {\n            // horizontal\n            if(p[1] < r1 && p[1] > l1\n                && !((p[0] > r0 && cp[0] > r0) || (p[0] < l0 && cp[0] < l0))){\n                    return true;\n                } \n        }\n        p = cp;\n        i++;\n    }\n    return false;\n}","import { setUniqueId, getUniqueId } from '../utils/functions';\nimport { nextDirection } from '../utils/constance';\nconst margin = 5;\nconst ishitKey = Symbol('ishit');\nconst isInViewBox = Symbol('isInViewBox');\n/**\n * @typedef Instance~Configs\n * @type {object}\n * @property {number} borderWidth      - 边的宽度 默认是 2\n * @property {string} borderColor      - 边框颜色 默认 black\n * @property {string} color            - 填充颜色 默认 white\n * @property {string} shadowColor      - 阴影颜色\n * @property {string} shadowBlur       - 阴影扩散范围\n * @property {string} shadowOffsetX    - 阴影偏移 X\n * @property {string} shadowOffsetX    - 阴影偏移 Y\n */\n\n/** \n * 图中的最小单元\n * @constructor Instance\n * @extends EventTarget\n * @param {Instance~Configs} configs - 最小单元的一些通用属性配置\n */\nclass Instance extends EventTarget{\n    constructor(configs = {}) {\n        super();\n        Object.assign(this, configs);\n        // this.anchor = configs.anchor || [0, 0];\n        // this.belongs = undefined;\n        /** @member {boolean}      - 元素可见 默认 true */\n        this.visible = true;\n        // this._jflow = undefined;\n        this._belongs = undefined;\n        this[ishitKey] = false; \n\n        /** @member {number}      - 边的宽度 默认是 0 */\n        this.borderWidth =      configs.borderWidth || 0;\n        /** @member {string}     - 边框颜色 默认 transparent */\n        this.borderColor =      configs.borderColor || 'transparent';\n        /** @member {string}     - 填充颜色 默认 transparent */\n        this.backgroundColor =  configs.backgroundColor || 'transparent';\n        /** @member {string}     - 阴影颜色 空就不显示阴影 */\n        this.shadowColor =      configs.shadowColor;\n        /** @member {string}     - 阴影扩散范围 默认 5 */\n        this.shadowBlur  =      configs.shadowBlur || 5;\n        /** @member {string}     - 阴影偏移 X */\n        this.shadowOffsetX =    configs.shadowOffsetX || 0;\n        /** @member {string}     - 阴影偏移 Y */\n        this.shadowOffsetY =    configs.shadowOffsetY || 0;\n        /** @member {number}     - 透明度 */\n        this.opacity  =         configs.opacity || 1\n\n    }\n    /**\n     * @member {boolean} - 当前单元选中状态\n     */\n    get _isTargeting() {\n        return this === (this._jflow._target.instance || this._jflow._target.link);\n    }\n    /**\n     * @member {boolean} - 当前单元移动状态\n     */\n    get _isMoving() {\n        return this === this._jflow._getMovingTarget();\n    }\n    /**\n     * @member {boolean}  - 当前单元碰撞检测状态\n     */\n    get _isHit() {\n        return this[ishitKey];\n    }\n    /**\n     * @member {JFlow}  - canvas上 jflow 实体\n     */\n    get _jflow() {\n        return this._belongs.uniqueName === 'jflow' ? this._belongs : this._belongs._jflow;\n    }\n\n    set _isHit(ishit) {\n        if(this[ishitKey] !== ishit) {\n            /**\n             * 鼠标移入事件\n             *\n             * @event Instance#mouseenter\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            /**\n             * 鼠标移出事件\n             *\n             * @event Instance#mouseleave\n             * @type {object}\n             * @property {Instance} instance      - 移入的对象 \n             */\n            this.dispatchEvent(new CustomEvent(ishit ? 'mouseenter': 'mouseleave' , {\n                detail: {\n                    instance: this,\n                    jflow: this._jflow\n                }\n            }));\n        }\n        this[ishitKey] = ishit; // validation could be checked here such as only allowing non numerical values\n    }\n\n    get isInViewBox() {\n        return this[isInViewBox];\n    }\n\n    set _isInViewBox(val) {\n        const oldval = this[isInViewBox];\n        if(val !== oldval) {\n            if(val) {\n                this.onEnterViewbox();\n            } else {\n                this.onLeaveViewbox();\n            } \n        }    \n        this[isInViewBox] = val;\n    }\n\n    /**\n     * 当节点离开可视区域的回调\n     */\n    onEnterViewbox() {\n        return;\n    }\n\n    /**\n     * 当节点离开可视区域的回调\n     */\n    onLeaveViewbox() {\n        return;\n    }\n\n    /**\n     * 改变当前配置\n     * @param {Configs} configs - The string containing two comma-separated numbers.\n     */\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n            }\n        })\n    }\n    /**\n     * 绘制单元\n     * @param {Context2d} ctx \n     */\n    render(ctx) {\n        throw 'require render implement'\n    }\n    /**\n     * 判断当前单元是否被命中\n     * @param {number[]} point \n     * @return {Boolean}\n     */\n    isHit(point) {\n        throw 'require isHit implement'\n    }\n    /**\n     * 计算当前的最大外接矩形的\n     * @return {number[]} [leftx, lefty, rightx, righty]\n     */\n    getBoundingRect() {\n        throw 'require getBoundingRect implement'\n    }\n    calculateIntersection() {\n        throw 'require calculateIntersection implement'\n    }\n    /**\n     * 计算当前连线接入点的位置\n     * @return {Object} intersection 交叉点\n     * @return {number} intersection[DIRECTION.TOP] 上\n     * @return {number} intersection[DIRECTION.BOTTOM] 下\n     * @return {number} intersection[DIRECTION.LEFT] 上\n     * @return {number} intersection[DIRECTION.RIGHT] 右\n     */\n    getIntersectionsInFourDimension() {\n        throw 'require getIntersectionsInFourDimension implement'\n    }\n\n\n    /**\n     * 获取当前所在层级的坐标\n     * @return {Number[]} 坐标\n     */\n    getCenter() {\n        return this.anchor;\n    }\n    /**\n     * 获取宽高\n     * @return {Object} demension 宽高\n     * @return {number} demension.width 宽\n     * @return {number} demension.height 高\n     */\n    getBoundingDimension() {\n        const rect = instance.getBoundingRect();\n        let min_y = Infinity;\n        let max_y = -Infinity;\n        let min_x = Infinity;\n        let max_x = -Infinity;\n        rect.forEach(point => {\n            max_y = Math.max(max_y, point[1]);\n            min_y = Math.min(min_y, point[1]);\n            max_x = Math.max(max_x, point[0]);\n            min_x = Math.min(min_x, point[0]);\n        });\n        return {\n            height: max_y - min_y,\n            width: max_x - min_x,\n        }\n    }\n    /**\n     * 冒泡事件\n     * @param {JFlowEvent} customEvent 自定义事件\n     */\n    bubbleEvent(customEvent){\n        customEvent.detail.currentTarget = this;\n        this.dispatchEvent(customEvent);\n        if(customEvent.detail.bubbles){\n            if(this._belongs.bubbleEvent) {\n                this._belongs.bubbleEvent(customEvent);\n            } else {\n                this._belongs.dispatchEvent(customEvent); \n            }\n            \n        }\n    }\n    /**\n     * 反算回页面的像素坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(point);\n        } else {\n            return point;\n        }\n    }\n\n    calculateToRealWorldWithScalar(length){\n        return this._jflow.scale * length;\n    }\n\n    /**\n     * 从当前布局中删除虚拟布局节点\n     */\n    // removeFromLayoutSource() {\n    //     if(this._layoutNode) {\n    //         this._layoutNode.remove();\n    //     }\n    // }\n\n    recalculateUp() {\n        if(this.belongs) {\n            this.belongs.recalculateUp();\n        }\n    }\n\n    destroy() {\n        this._belongs = undefined;\n        // this.removeEventListener();\n    }\n}\n\nexport default Instance;","import Instance from './instance';\nimport { nextDirection } from '../utils/constance';\n\n/**\n * 绝对定位 配置， 绝对定位不受布局影响，相对于当前组来定位\n * @typedef {object} Node~AbsolutePosition \n * @property {number} top       - 上距离\n * @property {number} bottom    - 下距离\n * @property {number} right     - 右距离\n * @property {number} left      - 左距离\n */\n/**\n * Node 配置\n * @typedef {Instance~Configs} Node~Configs \n * @property {number[]} anchor - 坐标\n * @property {Node~AbsolutePosition} absolutePosition - 绝对定位位置\n */\n/**\n * 节点基类\n * @constructor Node\n * @extends Instance\n * @param {Node~Configs} configs - 节点配置\n */\nclass Node extends Instance {\n    constructor(configs = {}) {\n        super(configs);\n        this._rawConfigs = configs;\n        // for layout\n        /** @member {number[]} */\n        this.anchor =           configs.anchor || [0, 0];\n        /** @member {Node~AbsolutePosition} */\n        this.absolutePosition = configs.absolutePosition;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k]\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n    }\n    setAnchorX(x) {\n        this.anchor[0] = x;\n    }\n    setAnchorY(y) {\n        this.anchor[1] = y;\n    }\n    setAnchor(x, y) {\n        this.anchor[0] = x;\n        this.anchor[1] = y;\n    }\n    /**\n     * 克隆当前节点.\n     * @return {Node} 当前节点的副本\n     */\n    clone() {\n        const C = this.constructor;\n        const t = new C(this._rawConfigs);\n        t.visible = this.visible;\n        return t;\n    }\n}\n\nexport default Node;","import Node from './node';\nimport { DIRECTION } from '../utils/constance';\n\nclass GhostNode extends Node {\n    constructor(configs) {\n        super(configs);\n    }\n\n    render(ctx) {}\n\n    isHit(point) {\n        return false;\n    }\n    calculateIntersection(point) {\n        return this.anchor;\n    }\n\n    getIntersectionsInFourDimension() {\n        const [x2, y2] = this.anchor;\n        return {\n            [DIRECTION.RIGHT]:  [x2, y2],\n            [DIRECTION.LEFT]:   [x2, y2],\n            [DIRECTION.BOTTOM]: [x2, y2],\n            [DIRECTION.TOP]:    [x2, y2],\n        }\n    }\n}\n\nexport default GhostNode;","function getMapObject() {\n    return {\n        layoutNode: undefined,\n        jflowNode: undefined,\n    }\n}\nclass NodeWeakMap {\n    constructor() {\n        this._map = new WeakMap();\n    }\n\n    get(source) {\n        return this._map.get(source);\n    }\n\n    set(source) {\n        const obj = getMapObject();\n        this._map.set(source, obj);\n        return obj;\n    }\n\n    has(source) {\n        return this._map.has(source);\n    }\n\n    delete(source) {\n        this._map.delete(source);\n    }\n\n    clear() {\n        this._map.clear();\n    }\n}\n\nexport const NodeWeakMapMixin = {\n    initNodeWeakMap() {\n        this.source_Layout_Render_NodeMap = new NodeWeakMap();\n    },\n    getRenderNodeBySource(source) {\n        const mapping = this.source_Layout_Render_NodeMap.get(source);\n        if(mapping) {\n            return mapping.jflowNode;\n        }\n        return undefined;\n    },  \n    getLayoutNodeBySource(source) {\n        const mapping = this.source_Layout_Render_NodeMap.get(source);\n        if(mapping) {\n            return mapping.layoutNode;\n        }\n        return undefined;\n    },\n    _getMap(source) {\n        const map = this.source_Layout_Render_NodeMap;\n        let obj;\n        if(map.has(source)) {\n            obj = map.get(source);\n        } else {\n            obj = map.set(source);\n        }\n        return obj\n    },\n    setLayoutNodeBySource(source, layoutNode) {\n        let obj = this._getMap(source);\n        obj.layoutNode = layoutNode;\n    },\n    setRenderNodeBySource(source, instance) {\n        let obj = this._getMap(source);\n        obj.jflowNode = instance;\n    },\n}\n\nexport default NodeWeakMap;\n\n","/**\n * 绘图栈\n * @extends Array\n */\nclass InstanceStack extends Array {\n    constructor() {\n        super();\n        this._currentHit = null;\n    }\n    /**\n     * 绘制当前栈\n     * @param {Context2d} ctx - canvas context2d\n     */\n    render(ctx, condition) {\n        let movingTarget;\n        this.forEach(instance => {\n            if(instance._isMoving) {\n                movingTarget = instance;\n                return;\n            }\n            if(instance.visible && (!condition || condition(instance))) {\n                ctx.save();\n                // if(instance.reflow && !instance._reflowed) {\n                //     instance.reflow();\n                //     instance._reflowed = true;\n                // }\n                instance.render(ctx);\n                ctx.restore();\n            }\n        });\n        if(movingTarget) {\n            ctx.save();\n            // if(movingTarget.reflow && !movingTarget._reflowed) {\n            //     movingTarget.reflow();\n            //     movingTarget._reflowed = true;\n            // }\n            movingTarget.render(ctx);\n            ctx.restore();\n        }\n    }\n\n    /**\n     * 碰撞对象过滤条件\n     * @name InstanceStack~InstanceFilter\n     * @function\n     * @param {Instance} instance - 当前对象\n    */\n    /**\n     * 碰撞检测\n     * @param {number[]} point - 碰撞点\n     * @param {InstanceStack~InstanceFilter} condition - 碰撞对象过滤条件\n     * @return {Instance}\n     */\n    checkHit(point, condition, currentConstraint){\n        let i = this.length - 1;\n        while(i >= 0) {\n            const instance = this[i];\n            \n            if(instance.visible && !instance.ignoreHit) {\n                if(condition && condition(instance)) {\n                    i--\n                    continue;\n                }\n                if(currentConstraint && !currentConstraint(instance)) {\n                    i--\n                    continue\n                }\n                const ishit = instance.isHit(point, condition);\n                instance._isHit = !!ishit;\n                if(ishit) {\n                    if(this._currentHit !== instance) {\n                        if(this._currentHit) {\n                            this._currentHit._isHit = false;\n                        }\n                        this._currentHit = instance;\n                    }\n                    if(typeof ishit !== 'boolean') {\n                        return ishit;\n                    }\n                    return instance;\n                }\n                \n            }\n            i--\n        }\n        this._currentHit = null;\n        return null;\n    }\n    /**\n     * 获取当前层栈的最小外接矩形\n     * @return {number[][]} - 外接矩形坐标\n     */\n    getBoundingRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                const rect = instance.getBoundingRect()\n                points.push([rect[0], rect[1]]);\n                points.push([rect[2], rect[3]]);\n            }\n        });\n        return points;\n    }\n\n    /**\n     * 获取当前层栈的锚点矩形\n     * @return {number[][]} - 锚点矩形坐标\n     */\n    getAnchorRectPoints() {\n        const points = [];\n        this.forEach(instance => {\n            if(instance.visible && !instance.absolutePosition) {\n                points.push(instance.anchor);\n            }\n        });\n        return points;\n    }\n}\n\nexport default InstanceStack;\n","import InstanceStack from './stack';\nimport { setUniqueId, getUniqueId } from '../utils/functions';\n/**\n * 对象栈 mixin 用于方便控制节点栈和连线栈\n *\n * @mixin\n */\nconst StackMixin = {\n    /** @property {Node[]}          - 对象数组 */\n    instances: [],\n    /** @property {BaseLink[]}      - 连线数组 */\n    links: [],\n    /** @property {InstanceStack}       - 对象栈 */\n    _stack: null,\n    /** @property {InstanceStack}       - 连线栈 */\n    _linkStack: null,\n    /**\n     * 初始化对象栈\n     * @param {JflowConfigs} configs - 配置\n     */\n    initStack({ data }) {\n        this._stack = new InstanceStack();\n        this._linkStack = new InstanceStack();\n        if(!data) return;\n        this.instances = data.instances;\n        this.links = data.links;\n        this.instances.forEach(i => { \n            this._stack.push(i);\n            i._belongs = this;\n        })\n        this.links.forEach((link) => {\n            this._linkStack.push(link);\n            link._belongs = this;\n        });\n    },\n    /**\n     * 加入节点对象\n     * @param {Node} instance - 节点对象\n     */\n    addToStack(instance) {\n        instance._belongs = this;\n        this._stack.push(instance);\n        // this.recalculate()\n    },\n    /**\n     * 替换对象\n     * @param {Instance} target - 被替换的对象\n     * @param {Instance} instance - 替换对象\n     */\n    replaceFromStack(target, instance) {\n        const index = this._stack.findIndex(i => i === target);\n        this._stack.splice(index, 1, instance);\n        target._belongs = null;\n        instance._belongs = this;\n        // this.recalculate()\n    },\n    /**\n     * 加入连线对象\n     * @param {BaseLink} instance - 连线对象\n     */\n    addToLinkStack(link) {\n        link._belongs = this;\n        this._linkStack.push(link);\n    },\n    /**\n     * 删除节点对象\n     * @param {Node} target - 节点对象\n     */\n    removeFromStack(target) {\n        // this.removeLinkOnInstance(target);\n        const index = this._stack.findIndex(i => i === target);\n        this._stack.splice(index, 1);\n        // this.recalculate()\n    },\n    /**\n     * 删除连线对象\n     * @param {Node} target - 连线对象\n     */\n    removeFromLinkStack(target) {\n        const index = this._linkStack.findIndex(i => i === target);\n        this._linkStack.splice(index, 1);\n    },\n   \n    emptyLink() {\n        this._linkStack = new InstanceStack();\n    },\n    /**\n     * 重置当前栈中对象的位置\n     */\n    resetChildrenPosition() {\n        this._stack.forEach(i => {\n            i.anchor = [0,0]\n        });\n    },\n\n    addInstanceToLink(targetLink, instance) {\n        this.addToStack(instance);\n        const { from, to } = targetLink;\n        const index = this._linkStack.findIndex(l => l === targetLink);\n        const _constuctor = targetLink.__proto__.constructor;\n        const l1 = new _constuctor({\n            from, \n            to: instance,\n        });\n        l1._belongs = this;\n        const l2 = new _constuctor({\n            from: instance, \n            to,\n        });\n        l2._belongs = this;\n\n        this._linkStack.splice(index, 1, l1, l2);\n    },\n    \n    /**\n     * 循环当前栈中节点\n     * @property {stackIteratorCallback} 循环访问栈中每个节点\n     */\n    interateNodeStack(callback) {\n        this._stack.forEach(instance => {\n            callback(instance);\n        })\n    }   \n    /**\n    * 循环访问栈中每个节点\n    * @callback stackIteratorCallback\n    * @param {Node} instance 栈中节点\n    */\n}\n\nexport default StackMixin;","/**\n * Layout mixin 配置\n * @typedef {Object} LayoutMixin~LayoutConfigs\n * @property {Layout} layout             - 布局对象 \n */\n/**\n * 布局 mixin 用于注册和方便控制布局\n *\n * @mixin\n */\nconst LayoutMixin = {\n    /** @property {Layout}      - 布局对象 */\n    _layout: null,\n    /**\n     * 初始化布局\n     * @param {LayoutMixin~LayoutConfigs} configs - 配置\n     */\n    initLayout(configs) {\n        this._layout = configs.layout;\n    },\n    /**\n     * 从当前层出发，向上层递归重排\n     */\n    recalculateUp() {\n        let dirty = true;\n        if(this.getBoundingDimension) {\n            const { width: wold, height: hold } = this.getBoundingDimension();\n            if(this.resetChildrenPosition) {\n                this.resetChildrenPosition();\n            }\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            this.reflow();\n            if(this._getBoundingGroupRect){\n                this._getBoundingGroupRect();\n            }\n            const { width: wnow, height: hnow } = this.getBoundingDimension();\n            dirty = (wold !== wnow || hold !== hnow)\n        } else {\n            this.reflow();\n        }\n        if(this._belongs && dirty) {\n            this._belongs.recalculateUp();\n        }\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排，并重算当前布局下的最小外接矩形\n     */\n    recalculate() {\n        this.reflow();\n        if(this._getBoundingGroupRect){\n            this._getBoundingGroupRect();\n        }\n    },\n    /**\n     * 布局静态检查\n     * @param {Instance} instance - 检查单元\n     * @return {Boolean} - 检查结果 \n     */\n    staticCheck(instance) {\n        if(this._layout) {\n            return this._layout.staticCheck(instance, this);\n        }\n        return false;\n    },\n    /**\n     * 重新计算布局，相当于浏览器里面重排\n     */\n    reflow() {\n        if(this._layout) {\n            this._layout.reflow(this);\n        }\n    },\n}\n\nexport default LayoutMixin;","/**\n * 消息 mixin 用于给Jflow传递消息\n *\n * @mixin\n */\nconst MessageMixin = {\n    _message: null,\n    /**\n     * 发送消息\n     * @param {Object} msg - 消息体\n     */\n    sendMessage(msg) {\n        this._message = msg;\n    },\n    /**\n     * 接收消息\n     * @return {Object} msg - 消息体\n     */\n    consumeMessage() {\n        const msg = this._message;\n        this._message = null;\n        return msg;\n    },\n    readMessage() {\n        return this._message;\n    }\n}\n\nexport default MessageMixin;","\nexport default {\n    initAnime() {\n        this.anime_queue = [];\n        this.__animeClock__ = undefined;\n        // this.animeclock = undefined;\n        // this.frameRendered = false;\n    },\n    // setAnimeClock(time) {\n    //     if(time !== this.animeclock) {\n    //         this.frameRendered = false;\n    //         this.animeclock = time;\n    //     }\n    // },\n\n    // hasAnimeAndFrameRendered() {\n    //     return this.anime_queue.length && this.frameRendered;\n    // },\n\n    // setFrameRendered() {\n    //     if(this.anime_queue.length) {\n    //         this.frameRendered = true;\n    //     }\n    // },\n\n    requestJFlowAnime(frameCallBack) {\n        console.log('requestJFlowAnime')\n        const meta = this.enqueueAnime(frameCallBack);\n        this._runAnime();\n        return meta;\n    },\n\n    enqueueAnime(callback) {\n        const animeMeta = {\n            start: undefined,\n            callback,\n            cancel: () => {\n                this._cancelAnime(animeMeta);\n                this._render();\n            }\n        }\n        this.anime_queue.push(animeMeta);\n        return animeMeta;\n    },\n\n    _cancelAnime(meta) {\n        const idx = this.anime_queue.findIndex(m => m === meta);\n        ~idx && this.anime_queue.splice(idx, 1);\n        \n    },\n\n    runAnime() {\n        this._runAnime();\n        // requestAnimationFrame(this._runAnime.bind(this));\n    },\n    _runAnime() {\n        if (this.anime_queue.length) {\n            this.scheduleRender((t) => {\n                if(this.__animeClock__  !== t) {\n                    this._runAnime()\n                }\n                this.__animeClock__  = t;\n            });\n            // requestAnimationFrame(this._runAnime.bind(this))\n        }\n    },\n\n    runAnimeFrame() {\n        this.anime_queue.forEach(meta => {\n            const timestamp = Date.now();\n            if(!meta.start) {\n                meta.start = timestamp;\n            }\n            const elapsed = timestamp - meta.start;\n            meta.callback(elapsed);\n        });\n    }\n}","import { createCanvas } from '../utils/canvas';\nexport default {\n    // 传入一个别的 context2d 来绘制\n    captureMap(wrapper, padding = 0) {\n\n        this._getBoundingGroupRect();\n        const { \n            width: p_width, \n            height: p_height, \n            x: p_x, \n            y: p_y \n        } = this.bounding_box;\n        let miniMap = this.miniMap;\n        if(!miniMap) {\n            this.miniMap = createCanvas(wrapper);\n            const {\n                width, height,\n                raw_width,\n                raw_height,\n            } = this.miniMap;\n            this.addEventListener('zoompan', () => {\n                this._renderMap && this._renderMap();\n            })\n            let pressDown = false;\n            this.miniMap.canvas.addEventListener('pointerdown', (event) => {\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                pressDown = true;\n                this._onMoveMap && this._onMoveMap(offsetX, offsetY)  \n            })\n            this.miniMap.canvas.addEventListener('pointermove', (event) => {\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                if(pressDown) {\n                    this._onMoveMap && this._onMoveMap(offsetX, offsetY)\n                }\n                if(offsetY < 5 || offsetX < 5 || offsetX > width-5 || offsetY > height-5) {\n                    pressDown = false;\n                }\n            })\n            this.miniMap.canvas.addEventListener('pointerup', () => {\n                pressDown = false;\n            })\n\n            const caheCanvas = document.createElement('canvas');\n            caheCanvas.width = raw_width;\n            caheCanvas.height = raw_height;\n            this.cacheMinimapCtx = caheCanvas.getContext('2d');\n        }\n        const { \n            width,\n            height,\n            raw_width,\n            raw_height,\n            left,\n            top,\n            scale,\n            ctx\n        } = this.miniMap\n        const pad2 = padding * 2;\n        const pad = padding;\n        const r1 = (width - pad2) / p_width;\n        const r2 = (height - pad2) / p_height;\n        const r = Math.min(r1, r2);\n        let m_x = 0;\n        let m_y = 0;\n        if(r1 < r2) {\n            m_y = (height - p_height * r + pad) / 2;\n            m_x = pad;\n        } else {\n            m_x = (width - p_width * r + pad) / 2;\n            m_y = pad;\n        }\n        const cachectx = this.cacheMinimapCtx;\n        cachectx.setTransform();\n        cachectx.clearRect(0, 0, raw_width, raw_height);\n        cachectx.scale(scale, scale);\n        cachectx.transform(r, 0, 0, r, m_x, m_y);\n        // ctx.fillStyle = 'red';\n        // ctx.arc( 30, 30, 100, 0, 2*Math.PI);\n        // ctx.fill()\n        // debugger\n        const br = [0,0,0,0]\n        if(this.NodeRenderTop) {\n            this._linkStack.render(cachectx, (link) => { link.isInViewBox(br); return true; });\n            // this._linkStack.render(cachectx);\n            this._stack.render(cachectx);\n        } else {\n            this._stack.render(cachectx);\n            this._linkStack.render(cachectx, (link) => { link.isInViewBox(br); return true; });\n        }\n        const _cacheMapImageData = cachectx.getImageData(0, 0,raw_width, raw_height);\n        this._renderMap = () => {\n            ctx.save();\n            ctx.setTransform();\n            ctx.clearRect(0, 0, raw_width, raw_height);\n            // if(!i) {\n            ctx.scale(scale, scale);\n            ctx.putImageData(_cacheMapImageData, 0, 0);\n            ctx.transform(r, 0, 0, r, m_x, m_y);\n            const [x, y, t, d] = this._getViewBox();\n            ctx.beginPath();\n            ctx.rect(x, y,  t-x, d-y);\n            ctx.setTransform();\n            ctx.rect(0, 0, raw_width, raw_height);\n            ctx.clip(\"evenodd\");\n            \n            ctx.fillStyle = 'rgba(0,0,0,0.4)';\n            ctx.fillRect(0, 0, raw_width, raw_height);\n            ctx.restore();\n            // }\n        }\n        this._renderMap();\n\n        this._onMoveMap = (offsetX, offsetY) => {\n            const [x, y, t, d] = this._getViewBox();\n            // const w = t-x;\n            const a = (t-x)/2 + x;\n            const b = (d-y)/2 + y;\n            \n            const p = [a * r + m_x, b * r + m_y]\n            this._recalculatePosition((p[0] - offsetX)/ r * this.scale, (p[1] - offsetY)/ r * this.scale);\n            this._render();\n            this._renderMap();\n        }\n        // this._render(ctx);\n    }\n\n\n}","export default {\n    initSchedule() {\n        this.__clock__ = undefined;\n    },\n    scheduleRender(callback) {\n        requestAnimationFrame((timestamp) => {\n            const isFirstTime = this.__clock__ !== timestamp\n            if(isFirstTime) {\n                this.__render();\n            }\n            if(callback) {\n                callback(timestamp);\n            }\n            this.__clock__ = timestamp;\n        })\n    }\n}","/**\n * JFlow 抛出事件\n * @extends CustomEvent\n * @property {Event}  originEvent      - 原始事件\n * @property {Instance} target         - 事件触发对象\n * @property {JFlow} jflow             - JFlow 对象\n * @property {boolean} bubbles         - 冒泡标识\n */\nclass JFlowEvent extends CustomEvent{\n    constructor(event, configs = {}) {\n        const detail = {\n            ...configs,\n            originEvent: configs.event,\n            target: configs.target,\n            jflow: configs.jflow,\n            bubbles: configs.bubbles || false,    \n        }\n        super(event, {\n            detail\n        });\n    }\n}\n\nexport default JFlowEvent;","/**\n * 事件处理函数\n * @name EventAdapter~Handler\n * @function\n * @param {Event} event - 原生事件\n * @param {JFlow} jflow - 当前jflow 对象\n */\n\n/**\n * EventAdapter 对象 plugin 配置\n * @typedef {Object} EventAdapter~pluginDef\n * @property {Object} canvas - canvas 相关的事件\n * @property {EventAdapter~Handler} canvas.eventName - 注册 canvas 上的事件处理\n * @property {Object} document - document 相关的事件\n * @property {EventAdapter~Handler} document.eventName - 注册 document 上的事件处理\n */\n\nfunction getDefaultPlugin() {\n    return {\n        canvas: {\n            wheel: function (event, jflow) {\n                event.preventDefault();\n                let { offsetX, offsetY, deltaX, deltaY } = event\n                if(event.ctrlKey) { \n                    deltaY = -deltaY;\n                    jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n                } else {\n                    jflow.panHandler(-deltaX, -deltaY, event);\n                }\n            },\n            pointerdown: function (event, jflow) {\n                const { offsetX, offsetY, deltaY, button } = event\n                if(button !== 0) return;\n                jflow.pressStartHandler(offsetX, offsetY, event);\n            },\n            pointermove: function (event, jflow) {\n                const { offsetX, offsetY } = event\n                jflow.pressMoveHandler(offsetX, offsetY, event);\n            },\n            pointerup: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { button } = event\n                if(button !== 0) return;\n                jflow.pressUpHanlder(false, event)\n            },\n            contextmenu: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.contextMenuHanlder(offsetX, offsetY, event);\n            },\n            dblclick: function (event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.dblclickHandler(offsetX, offsetY, event);\n            },\n            click: function(event, jflow) {\n                event.preventDefault();\n                event.stopPropagation();\n                const { offsetX, offsetY } = event;\n                jflow.clickHanlder(offsetX, offsetY, event);\n            }\n        },\n        document: {\n            pointerup: function(event, jflow) {\n                jflow.pressUpHanlder(true, event);\n            }\n        }\n    }\n}\n\n/** \n * EventAdapter 对象\n * EventAdapter 通过 plugin 的形式实现多种交互方式的映射\n * @constructor EventAdapter\n */\nclass EventAdapter {\n    constructor(plugin = {}) {\n        this.plugin = getDefaultPlugin();\n        this.use(plugin);\n        this.canvasHandlers = [];\n        this.documentHandlers = [];\n    }\n    use(plugin = {}) {\n        const { canvas: ca, document: docObj } = plugin;\n        if(ca) {\n            for(let eventName in ca){\n                if (ca.hasOwnProperty(eventName)) {\n                    this.plugin.canvas[eventName] = ca[eventName];\n                }\n            }\n        }\n        if(docObj) {\n            for(let eventName in docObj){\n                if (docObj.hasOwnProperty(eventName)) {\n                    this.plugin.document[eventName] = docObj[eventName];\n                }\n            }\n        }\n    }\n\n    apply(jflow) {\n        const { canvas: ca, document: docObj } = this.plugin;\n        const canvas = jflow.canvas;\n        for(let eventName in ca){\n            const handler = ca[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            canvas.addEventListener(eventName, handlerWrapperd)\n            this.canvasHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n        for(let eventName in docObj){\n            const handler = docObj[eventName];\n            function handlerWrapperd (e) {\n                handler(e, jflow);\n            }\n            document.addEventListener(eventName, handlerWrapperd)\n            this.documentHandlers.push({\n                eventName,\n                handlerWrapperd\n            });\n        }\n    }\n\n    unload(jflow) {\n        const canvas = jflow.canvas;\n        this.canvasHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            canvas.removeEventListener(eventName, handlerWrapperd);\n        });\n        this.documentHandlers.forEach(({ eventName, handlerWrapperd }) => {\n            document.removeEventListener(eventName, handlerWrapperd);\n        })\n    }\n}\n\nexport default EventAdapter;\n","import Node from './node';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\nconst GroupMixin = {\n    ...StackMixin,\n    ...LayoutMixin,\n    _setPadding(configs) {\n        this.padding = {\n            top: configs.paddingTop || configs.padding || 0,\n            right: configs.paddingRight || configs.padding || 0,\n            bottom: configs.paddingBottom || configs.padding || 0,\n            left: configs.paddingLeft || configs.padding || 0,\n        };\n    },\n    _setMargin(configs)  {\n        this.margin = {\n            top: configs.marginTop || configs.margin || 0,\n            right: configs.marginRight || configs.margin || 0,\n            bottom: configs.marginBottom || configs.margin || 0,\n            left: configs.marginLeft || configs.margin || 0,\n        };\n    },\n    _getCenter() {\n        const anchor = this.anchor;\n        const padding = this.padding;\n        const margin = this.margin;\n        const mx = (margin.left - margin.right)/2;\n        const my = (margin.top - margin.bottom)/2;\n        const centerX = (padding.left - padding.right)/2 + mx;\n        const centerY = (padding.top - padding.bottom)/2 + my;\n        this._shape.anchor = [anchor[0] + mx, anchor[1] + my];\n        return [anchor[0] + centerX, anchor[1] + centerY];\n    },\n    setAnchorX(x) {\n        this.anchor[0] = x;\n        this._getCenter(); \n    },\n    setAnchorY(y) {\n        this.anchor[1] = y;\n        this._getCenter(); \n    },\n    setAnchor(x, y) {\n        this.anchor[0] = x;\n        this.anchor[1] = y;\n        this._getCenter(); \n    },\n    _calculatePointBack(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx - cx, gy - cy]\n        return p\n    },\n    /**\n     * 反算回 canvas 顶层坐标\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToCoordination(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        // const p = [cx + anchor[0] - spanH, cy + anchor[1] - spanV];\n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            return this._belongs.calculateToCoordination(p);\n        } else {\n            return p;\n        }\n    },\n    /**\n     * 反算回页面的像素坐标，重载 {@link Instance#calculateToRealWorld}\n     * @param {Number[]} point\n     * @return {Number[]} 世界坐标\n     */\n    calculateToRealWorld(point) {\n        const [gx, gy] = point;\n        const [cx, cy] = this._getCenter(); \n        const p = [gx + cx, gy + cy]\n        if(this._belongs && this._belongs.calculateToRealWorld) {\n            return this._belongs.calculateToRealWorld(p);\n        }\n    },\n    clone() {\n        const C = this.constructor;\n        const configs = Object.assign({}, this._rawConfigs, {\n            layout: this._layout && this._layout.clone(),\n        })\n        const t = new C(configs);\n        this.interateNodeStack((instance) => {\n            t.addToStack(instance.clone());\n        })\n        t.recalculate();\n        t.visible = this.visible;\n        return t;\n    },\n    getBoundingDimension() {\n        return {\n            width: this.width,\n            height: this.height,\n        }\n    },\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    },\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    },\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let x, y;\n        if(theta2 < theta1) {\n            x = x2 + (dirx?w:-w);\n            y = w * (diry?theta2:-theta2) + y2;\n        } else {\n            y = y2 + (diry?h:-h);\n            x = h / (dirx?theta2:-theta2) + x2;\n        }\n        return [x, y];\n    },\n    onEnterViewbox() {\n        this.interateNodeStack((instance) => {\n            instance.onEnterViewbox();\n        })\n    },\n    onLeaveViewbox() {\n        this.interateNodeStack((instance) => {\n            instance.onLeaveViewbox();\n        })\n    },\n    destroy() {\n        this._shape.destroy();\n        this.interateNodeStack((instance) => {\n            instance.destroy();\n        })\n    }, \n}\n\nfunction defaultShift(width, height) {\n    return [width, height];\n}\n\n/**\n * 根据paddingbox宽高来计算shapeshiftbox的宽高\n * @function shapeShift\n * @param {number} width            - paddingBox宽\n * @param {number} height           - paddingBox高\n * @return {number[]}\n */\n\n/**\n * 组工厂函数，用于通过JFlow 绘图节点来创建不同的组\n * @global \n * @function GroupFactory\n * @param {Node} jflowNodeConstructor - 绘图节点构造器\n * @param {object} options            - 配置项\n * @param {shapeShift} options.shapeShift - shift层适配方法\n * @return {Group} - 绘图节点构造器\n */\nfunction GroupFactory(jflowNodeConstructor, options = {}) {\n    const shapeShift = typeof options.shapeShift === 'function' ? options.shapeShift : defaultShift;\n\n    /**\n     * Group 配置\n     * @typedef {Object} GroupTemplate~GroupConfigs\n     * @property {number} width             - 设定宽度\n     * @property {number} minWidth          - 最小宽度\n     * @property {number} height            - 设定高度\n     * @property {number} padding          - 内边距\n     * @property {number} paddingTop          - 内上边距\n     * @property {number} paddingRight         - 内右边距\n     * @property {number} paddingBottom        - 内下边距\n     * @property {number} paddingLeft          - 内左边距\n     * @property {number} margin            - 外边距\n     * @property {number} marginTop          - 外上边距\n     * @property {number} marginRight         - 外右边距\n     * @property {number} marginBottom        - 外下边距\n     * @property {number} marginLeft          - 外左边距\n     * @property {boolean} lock            - 布局锁定状态 默认 true\n     */\n    class t extends Node {\n        /**\n        * @constructs GroupTemplate\n        * @param {GroupTemplate~GroupConfigs} configs - 组配置\n        * @mixes LayoutMixin\n        * @mixes StackMixin \n        */\n        constructor(configs) {\n            super(configs);\n                this.initStack(configs);\n                this.initLayout(configs);\n                /** @member {Node}      - 壳绘图单元 */\n                this._shape = new jflowNodeConstructor(configs);\n                this._shape.anchor = [0, 0];\n                this._shape._belongs = this;\n                this._setPadding(configs);\n                this._setMargin(configs);  \n                /** @member {Number}      - 设定宽度 */\n                this.definedWidth =     configs.width;\n                /** @member {Number}      - 最小宽度 */\n                this.minWidth =         configs.minWidth;\n                /** @member {Number}      - 设定的高度 */\n                this.definedHeight =    configs.height;\n                /** @member {Boolean}      - 组内元素是否锁定， 默认true */\n                this.lock =             configs.lock ?? true ;\n                this.display =          configs.display || 'default';\n                this._getBoundingGroupRect();\n                this.reflow();\n                this._getBoundingGroupRect();  \n        }\n    }\n    Object.assign(t.prototype, GroupMixin);\n    Object.assign(t.prototype, { \n        reflow() {\n            GroupMixin.reflow.call(this);\n            const margin = this.margin;\n            const [shapeWidth, shapeHeight] = shapeShift(\n                    this.width - margin.left - margin.right,\n                    this.height - margin.top - margin.bottom, this._shape);\n            this._shape.width = shapeWidth;\n            this._shape.height = shapeHeight;\n        },\n        setConfig(configs) {\n            this._shape.setConfig(configs);\n            this._setPadding(configs);\n            this._setMargin(configs);  \n            if('opacity' in configs) {\n                this.opacity = configs.opacity\n            }\n            \n            if(configs.layout && this._layout !== configs.layout) {\n                this._layout = configs.layout;\n            }\n        },\n        _getBoundingGroupRect() {\n            const points = this._stack.getBoundingRectPoints();\n            // content box \n            const bbox = bounding_box(points);\n\n             // padding box \n            const padding = this.padding;\n            const minWidth = this.minWidth - padding.left - padding.right;\n            const definedWidth = this.definedWidth - padding.left - padding.right;\n            const w = bbox.width + padding.left + padding.right;\n            const h = bbox.height + padding.top + padding.bottom;\n            const paddingWidth = minWidth ? Math.max(minWidth, w) : definedWidth || w;\n            const paddingHeight = this.definedHeight || h;\n            this._paddingWidth = paddingWidth;\n            this._paddingHeight = paddingHeight;\n\n            // shapeBox\n            const [shapeWidth, shapeHeight] = shapeShift(paddingWidth, paddingHeight, this._shape)\n            this._shape.width = shapeWidth;\n            this._shape.height = shapeHeight;\n            // marginBox\n            const margin = this.margin;\n            this.width = shapeWidth + margin.left + margin.right;\n            this.height = shapeHeight + margin.top + margin.bottom;\n        },\n        \n        render(ctx) {\n            ctx.save();\n            if(this._isMoving){\n                ctx.globalAlpha = 0.6\n            }\n\n            const [cx, cy] = this._getCenter(); \n            this._shape.render(ctx);\n            ctx.translate(cx, cy);\n            this._stack.render(ctx);\n            this._linkStack.render(ctx);    \n            ctx.translate(-cx, -cy);\n            ctx.restore();\n\n            // ctx.save();\n            // ctx.beginPath();\n            // ctx.arc(cx, cy, 5, 0, Math.PI*2);\n            // ctx.fillStyle = 'rgb(0,0,0)'\n            // ctx.fill();\n            // ctx.restore();\n        },\n        isHit(point, condition) {\n            const p = this._calculatePointBack(point);\n            this._currentp = p; // 暂存，为了后续计算别的位置\n            const target = this._stack.checkHit(p, condition);\n            if(target) return target;\n            return this._shape.isHit(point);\n        },        \n    });\n    return t\n}\n\nexport default GroupFactory;\n\n","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 圆形单元 配置\n * @typedef {Node~Configs} Point~PointConfigs\n * @property {number} radius  - 半径\n */\n/**\n * 圆形节点\n * @constructor Point\n * @extends Node\n * @param {Point~PointConfigs} configs - 配置\n */\nclass Point extends Node {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Point';\n        /** @member {Number}      - 半径 */\n        this.radius =           configs.radius || 10;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        ctx.arc(this.anchor[0], this.anchor[1], this.radius, 0, 2 * Math.PI);\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        return Math.pow(point[0] - anchor[0], 2) + Math.pow(point[1] - anchor[1], 2) < this.radius * this.radius\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const r = this.radius;\n        const ltx = anchor[0] - r;\n        const lty = anchor[1] - r;\n        const rbx = anchor[0] + r;\n        const rby = anchor[1] + r;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const dist = Math.sqrt(vecx * vecx + vecy * vecy);\n\n        const ratio = this.radius / dist;\n        return [x2 - ratio * vecx, y2 - ratio * vecy];\n    }\n\n    getIntersectionsInFourDimension() {\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        return {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const r = this.radius;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2 + r, y2],\n            [DIRECTION.LEFT]:   [x2 - r, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+r],\n            [DIRECTION.TOP]:    [x2, y2-r],\n        }\n        // console.log(Math.abs(vecx) > Math.abs(vecy), vecx, r)\n        // if() {\n        //     return {\n        //         p: [x2 + (vecx<0?r:-r), y2],\n        //         dir: vecx<0 ? DIRECTION.RIGHT : DIRECTION.LEFT,\n        //     }\n        // } else {\n        //     return {\n        //         p: [x2, y2+(vecy<0?r:-r)],\n        //         dir: vecy<0 ? DIRECTION.BOTTOM : DIRECTION.TOP,\n        //     }\n        // }\n        let interDir = (Math.abs(vecy) > Math.abs(vecx)\n            ? (vecy < 0 ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (vecx < 0 ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // interDir = this.checkLinked(interDir, end);\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n\n    getBoundingDimension() {\n        return {\n            width: this.radius * 2,\n            height: this.radius * 2,\n        }\n    }\n\n}\n\nexport default Point;","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * @typedef Rectangle~border\n * @type {object}\n * @property {number} borderColor      - 边框宽度, 默认 0\n * @property {number} borderWidth      - 边框颜色, 默认 transparent\n */\n/**\n * @typedef Rectangle~borders\n * @type {object}\n * @property {Rectangle~border} top      - 上边框\n * @property {Rectangle~border} right      - 右边框\n * @property {Rectangle~border} bottom      - 下边框\n * @property {Rectangle~border} left      - 左边框\n */\n\n/**\n * 矩形单元 配置\n * @typedef {Node~Configs} Rectangle~RectangleConfigs\n * @property {number} width - 宽\n * @property {number} height - 高\n * @property {number} borderRadius - 圆角矩形半径\n * @property {string} borderColor - 边框颜色, 默认 transparent\n * @property {string} borderWidth - 边框宽度, 默认 0\n * @property {Rectangle~borders} border      - 边框设置\n */\n/**\n * 矩形单元\n * @constructor Rectangle\n * @extends Node\n * @param {Rectangle~RectangleConfigs} configs\n */\nclass Rectangle extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rectangle';\n         /** @member {Number}      - 宽 */\n        this.width =            configs.width || 10;\n         /** @member {Number}      - 高 */\n        this.height =           configs.height || 10;\n         /** @member {Number}      - 圆角矩形半径 */\n        this.borderRadius =     configs.borderRadius || 0;\n        this._setBorder(configs);\n    }\n\n    _setBorder(configs){\n        /** @member {Rectangle~borders}      - 边框设置，优先级高于 borderWidth，borderColor */\n        this.border = {\n            top: {\n                color: configs.border?.top?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.top?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.top?.borderWidth,\n            },\n            right: {\n                color: configs.border?.right?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.right?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.right?.borderWidth,\n            },\n            bottom: {\n                color: configs.border?.bottom?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.bottom?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.bottom?.borderWidth,\n            },\n            left: {\n                color: configs.border?.left?.borderColor || configs.borderColor || 'transparent',\n                width: configs.border?.left?.borderWidth || configs.borderWidth || 0,\n                enable: configs.border?.left?.borderWidth,\n            }\n        };\n        this.borderColor = configs.borderColor || 'transparent';\n        this.borderWidth = configs.borderWidth || 0;\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._setBorder(configs);\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n\n        const {\n            borderRadius: radius, anchor, width, height\n        } = this;\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        const xt = this.anchor[0] + this.width / 2;\n        const yt = this.anchor[1] + this.height / 2;\n        if(this.borderRadius) {\n            ctx.beginPath();\n            ctx.moveTo(x + radius, y);\n            ctx.lineTo(x + width - radius, y);\n            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n            ctx.lineTo(x + width, y + height - radius);\n            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n            ctx.lineTo(x + radius, y + height);\n            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n            ctx.closePath();\n            if(this.borderWidth) {\n                ctx.lineWidth = this.borderWidth;\n                ctx.strokeStyle = this.borderColor;\n                ctx.stroke();\n            }\n        } else {\n            ctx.beginPath();\n            ctx.rect(this.anchor[0] - this.width / 2, this.anchor[1] - this.height / 2, this.width, this.height);\n        }\n        ctx.fillStyle = this.backgroundColor;\n        if(this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderRadius) {\n            if(this.border.top.enable) {\n                ctx.save();\n                ctx.beginPath();\n                ctx.moveTo(x, y + radius);\n                ctx.quadraticCurveTo(x, y, x + radius, y);\n                ctx.lineTo(x + width - radius, y);\n                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n                ctx.closePath();\n\n                // ctx.fill();\n                ctx.clip();\n\n                ctx.beginPath();\n                ctx.rect(x, y, this.width, this.border.top.width);\n                ctx.fillStyle = this.border.top.color;\n                ctx.fill();\n                ctx.restore();\n            }\n\n            // if(this.border.right.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x + width, y + radius);\n            //     ctx.lineTo(x + width, y + height - radius);\n            //     ctx.strokeStyle = this.border.right.color;\n            //     ctx.lineWidth = this.border.right.width;\n            //     ctx.stroke();\n            // }\n\n            // if(this.border.bottom.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x + width - radius, y + height);\n            //     ctx.lineTo(x + radius, y + height);\n            //     ctx.strokeStyle = this.border.bottom.color;\n            //     ctx.lineWidth = this.border.bottom.width;\n            //     ctx.stroke();\n            // }\n\n            // if(this.border.left.enable) {\n            //     ctx.beginPath();\n            //     ctx.moveTo(x, y + height - radius);\n            //     ctx.lineTo(x, y + radius);\n            //     ctx.strokeStyle = this.border.left.color;\n            //     ctx.lineWidth = this.border.left.width;\n            //     ctx.stroke();\n            // }\n        } else {\n            if(this.border.top.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, y);\n                ctx.lineTo(xt, y);\n                ctx.strokeStyle = this.border.top.color;\n                ctx.lineWidth = this.border.top.width;\n                ctx.stroke();\n            }\n\n            if(this.border.right.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, y);\n                ctx.lineTo(xt, yt);\n                ctx.strokeStyle = this.border.right.color;\n                ctx.lineWidth = this.border.right.width;\n                ctx.stroke();\n            }\n\n            if(this.border.bottom.width) {\n                ctx.beginPath();\n                ctx.moveTo(xt, yt);\n                ctx.lineTo(x, yt);\n                ctx.strokeStyle = this.border.bottom.color;\n                ctx.lineWidth = this.border.bottom.width;\n                ctx.stroke();\n            }\n\n            if(this.border.left.width) {\n                ctx.beginPath();\n                ctx.moveTo(x, yt);\n                ctx.lineTo(x, y);\n                ctx.strokeStyle = this.border.left.color;\n                ctx.lineWidth = this.border.left.width;\n                ctx.stroke();\n            }\n        }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        return point[0] > anchor[0] - w\n            && point[0] < anchor[0] + w\n            && point[1] > anchor[1] - h\n            && point[1] < anchor[1] + h;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    calculateIntersection(point) {\n        const [x1, y1] = point;\n        const [x2, y2] = this.anchor;\n        const w = this.width/2;\n        const h = this.height/2;\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let x, y;\n        if(theta2 < theta1) {\n            x = x2 + (dirx?w:-w);\n            y = w * (diry?theta2:-theta2) + y2;\n        } else {\n            y = y2 + (diry?h:-h);\n            x = h / (dirx?theta2:-theta2) + x2;\n        }\n        return [x, y];\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n\n    calculateIntersectionInFourDimension(point, end) {\n        const [x1, y1] = point;\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        const allIntersections = {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n        const vecx = x2 - x1;\n        const vecy = y2 - y1;\n        const theta1 = h/w;\n        const theta2 = Math.abs(vecy/vecx);\n        const dirx = x1 > x2;\n        const diry = y1 > y2;\n        let interDir = (theta2 > theta1\n            ? (diry ? DIRECTION.BOTTOM : DIRECTION.TOP)\n            : (dirx ? DIRECTION.RIGHT : DIRECTION.LEFT));\n\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(JSON.stringify(this._intersections));\n        //     console.log(interDir)\n        // }\n        // interDir = this.checkLinked(interDir, end);\n        // if(this._belongs && this._belongs.calculateToCoordination) {\n        //     console.log(interDir)\n        // }\n\n        // if(!interDir) {\n        //     debugger\n        // }\n        // let endDir = interDir;\n        // if(end === 'to') {\n        //     endDir = oppositeDirection(endDir)\n        // }\n        return {\n            p: allIntersections[interDir],\n            dir: interDir,\n        }\n    }\n}\n\nexport default Rectangle;","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\n/**\n * 胶囊单元 配置\n * @typedef {Node~Configs} Capsule~CapsuleConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n */\n/**\n * 胶囊单元\n * @constructor Capsule\n * @extends Node\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass Capsule extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Capsule';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const leftCenter = x - hw + hh;\n        const rightCenter = x + hw - hh;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        ctx.moveTo(leftCenter, top);\n        ctx.lineTo(rightCenter, top);\n        ctx.arc(rightCenter, y, hh, -Math.PI/2, Math.PI/2);\n        ctx.lineTo(leftCenter, bottom);\n        ctx.arc(leftCenter, y, hh, Math.PI/2, Math.PI/2*3);\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const anchor = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const ww =  Math.abs(hw - hh);\n        const leftCenter = anchor[0] - hw + hh;\n        const rightCenter = anchor[0] + hw - hh;\n        const rr = hh * hh;\n        return (point[0] > anchor[0] - ww\n            && point[0] < anchor[0] + ww\n            && point[1] > anchor[1] - hh\n            && point[1] < anchor[1] + hh)\n            || ( Math.pow(point[0] - leftCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n            || ( Math.pow(point[0] - rightCenter, 2) + Math.pow(point[1] - anchor[1], 2) < rr)\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Capsule;","import Capsule from './capsule';\n/**\n * 垂直胶囊单元\n * @constructor CapsuleVertical\n * @extends Capsule\n * @param {Capsule~CapsuleConfigs} configs - 配置\n */\nclass CapsuleVertical extends Capsule {\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const left = x - hw;\n        const right = x + hw;\n\n        ctx.moveTo(left, topCenter);\n        ctx.arc(x, topCenter, hw, -Math.PI, 0);\n        ctx.lineTo(right, bottomCenter);\n        ctx.arc(x, bottomCenter, hw, 0, Math.PI);\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n    }\n\n    isHit(point, condition) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy =  Math.abs(hh - hw);\n        const topCenter = y - hh + hw;\n        const bottomCenter = y + hh - hw;\n        const rr = hw * hw;\n        return (point[0] > x - hw\n            && point[0] < x + hw\n            && point[1] > y - yy\n            && point[1] < y + yy)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - topCenter, 2) < rr)\n            || ( Math.pow(point[0] - x, 2) + Math.pow(point[1] - bottomCenter, 2) < rr)\n    }\n}\nexport default CapsuleVertical;","import Node from '../node';\nimport { DIRECTION } from '../../utils/constance';\n/**\n * 菱形单元 配置\n * @typedef {Node~Configs} Rhombus~RhombusConfigs\n * @property {number} diagonalsV  - 内十字高度\n * @property {number} diagonalsH  - 内十字宽度\n */\n/**\n * 菱形单元\n * @constructor Rhombus\n * @param {Rhombus~RhombusConfigs} configs - 配置\n * @extends Node\n */\nclass Rhombus extends Node {\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Rhombus';\n        /** @member {Number}      - 内十字高度 */\n        this.height =           configs.diagonalsV || 10;\n        /** @member {Number}      - 内十字宽度 */\n        this.width =            configs.diagonalsH || 20;\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        const w = this.width / 2;\n        const h = this.height / 2;\n        const center = this.anchor;\n        ctx.translate(center[0], center[1])\n        ctx.beginPath();\n        ctx.moveTo(0, -h);\n        ctx.lineTo(w, 0);\n        ctx.lineTo(0, h);\n        ctx.lineTo(-w, 0);\n        ctx.closePath();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        ctx.fillStyle = this.backgroundColor;\n        if(this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        ctx.translate(-center[0], -center[1])\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const v = this.height / 2;\n        const h = this.width / 2;\n        const anchor = this.anchor;\n        const x = Math.abs(point[0] - anchor[0]);\n        const y = Math.abs(point[1] - anchor[1]);\n        return (x / h + y / v) <= 1;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height /2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n            [DIRECTION.SELF]:   [x2+w*0.618, y2+h*0.618]\n        }\n    }\n}\n\nexport default Rhombus;\n","import Node from '../node';\nimport { DIRECTION, oppositeDirection } from '../../utils/constance';\nimport { makeBezierPoints } from '../../utils/functions';\n/**\n * 钻石形单元 配置\n * @typedef {Node~Configs} Diamond~DiamondConfigs\n * @property {number} width  - 内部矩形宽\n * @property {number} height - 内部矩形高\n * @property {number} side   - 两侧三角形的宽\n */\n/**\n * 钻石形单元\n * @constructor Diamond\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Node\n */\n\nclass Diamond extends Node {\n\n    constructor(configs = {}) {\n        super(configs);\n        this.type =             'Diamond';\n        /** @member {Number}      - 内部矩形宽 */\n        this.width =            configs.width || 20;\n        /** @member {Number}      - 内部矩形高 */\n        this.height =           configs.height || 10;\n        /** @member {Number}      - 两侧三角形的宽 */\n        this.side =             configs.side || 6;\n        this._doCache();\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        this._doCache();\n    }\n\n    _doCache() {\n        this.sinSIDE = Math.sin(Math.PI/3) * this.side;\n        this.cosSIDE = Math.cos(Math.PI/3) * this.side;\n    }\n\n    render(ctx) {\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const xx = hh / 1.732\n        const leftCenter = x - hw + xx;\n        const rightCenter = x + hw - xx;\n        const right = x + hw;\n        const left = x - hw;\n        const top = y - hh;\n        const bottom = y + hh;\n\n        this._cachePoints = [\n            [rightCenter, top],\n            [right, y],\n            [rightCenter, bottom],\n            [leftCenter, bottom],\n            [left, y],\n            [leftCenter, top]\n        ];\n\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const {\n            side, sinSIDE, cosSIDE\n        } = this;\n        ctx.moveTo(x, top);\n        ctx.lineTo(rightCenter - side, top);\n        ctx.quadraticCurveTo(rightCenter, top, rightCenter + cosSIDE, top + sinSIDE);\n        ctx.lineTo(right - cosSIDE, y - sinSIDE);\n        ctx.quadraticCurveTo(right, y, right - cosSIDE, y + sinSIDE);\n        ctx.lineTo(rightCenter + cosSIDE, bottom - sinSIDE);\n        ctx.quadraticCurveTo(rightCenter, bottom, rightCenter - side, bottom);\n\n        ctx.lineTo(leftCenter + side, bottom);\n        ctx.quadraticCurveTo(leftCenter, bottom, leftCenter - cosSIDE, bottom - sinSIDE);\n        ctx.lineTo(left + cosSIDE, y + sinSIDE);\n        ctx.quadraticCurveTo(left, y, left + cosSIDE, y - sinSIDE);\n        ctx.lineTo(leftCenter - cosSIDE, top + sinSIDE);\n        ctx.quadraticCurveTo(leftCenter, top, leftCenter + side, top);\n\n        ctx.closePath();\n\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        // if(this._isTargeting) {\n        //     this.renderFocus(ctx);\n        // }\n        // ctx.fillStyle = 'rgba(0,0,0,0.3)';\n        // ctx.fillRect(x-hw, y-hh, this.width, this.height)\n\n        ctx.restore();\n\n\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const polygon = this._cachePoints;\n        let odd = false;\n        // For each edge (In this case for each point of the polygon and the previous one)\n        for (let i = 0, j = polygon.length - 1; i < polygon.length; i++) {\n            // If a line from the point into infinity crosses this edge\n            if (((polygon[i][1] > point[1]) !== (polygon[j][1] > point[1])) // One point needs to be above, one below our y coordinate\n                // ...and the edge doesn't cross our Y corrdinate before our x coordinate (but between our x coordinate and infinity)\n                && (point[0] < ((polygon[j][0] - polygon[i][0]) * (point[1] - polygon[i][1]) / (polygon[j][1] - polygon[i][1]) + polygon[i][0]))) {\n                // Invert odd\n                odd = !odd;\n            }\n            j = i;\n\n        }\n        return odd;\n    }\n\n    getBoundingRect() {\n        const anchor = this.anchor;\n        const w = this.width /2;\n        const h = this.height/2;\n        const ltx = anchor[0] - w;\n        const lty = anchor[1] - h;\n        const rbx = anchor[0] + w;\n        const rby = anchor[1] + h;\n        return [\n            ltx, lty,\n            rbx, rby,\n        ]\n    }\n\n    getBoundingDimension() {\n        return {\n            height: this.height,\n            width: this.width,\n        }\n    }\n\n    getIntersectionsInFourDimension() {\n        let p2 = this.anchor;\n        if(this._belongs && this._belongs.calculateToCoordination) {\n            p2 = this._belongs.calculateToCoordination(p2);\n        }\n\n        const [x2, y2] = p2;\n        const w = this.width/2;\n        const h = this.height/2;\n        return {\n            [DIRECTION.RIGHT]:  [x2+w, y2],\n            [DIRECTION.LEFT]:   [x2-w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2+h],\n            [DIRECTION.TOP]:    [x2, y2-h],\n        }\n    }\n}\n\nexport default Diamond;","import Diamond from './diamond';\nconst backsqrt3 = 1/Math.sqrt(3)\n\n/**\n * 垂直钻石形单元\n * @constructor DiamondVertical\n * @param {Diamond~DiamondConfigs} configs - 配置\n * @extends Diamond\n */\nclass DiamondVertical extends Diamond {\n    constructor(configs) {\n        super(configs)\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        ctx.beginPath();\n        const [x, y] = this.anchor;\n        const hw = this.width/2;\n        const hh = this.height/2;\n        const yy = hw / 1.732\n\n        const top = y - hh;\n        const bottom = y + hh;\n        const topmiddle = y - hh + yy;\n        const bottommiddle = y + hh - yy;\n        const xleft = x - hw;\n        const xright = x + hw;\n\n        ctx.moveTo(x, top);\n        ctx.lineTo(xright, topmiddle);\n        ctx.lineTo(xright, bottommiddle);\n        ctx.lineTo(x, bottom);\n        ctx.lineTo(xleft, bottommiddle);\n        ctx.lineTo(xleft, topmiddle);\n        ctx.closePath();\n        ctx.fillStyle = this.backgroundColor;\n        if (this.shadowColor) {\n            ctx.shadowColor = this.shadowColor;\n            ctx.shadowBlur = this.shadowBlur;\n            ctx.shadowOffsetX = this.shadowOffsetX;\n            ctx.shadowOffsetY = this.shadowOffsetY;\n        }\n        ctx.fill();\n        if(this.borderWidth) {\n            ctx.lineWidth = this.borderWidth;\n            ctx.strokeStyle = this.borderColor;\n            ctx.stroke();\n        }\n\n        ctx.restore();\n        this._cachePoints = [\n            [x, top],\n            [xright, topmiddle],\n            [xright, bottommiddle],\n            [x, bottom],\n            [xleft, bottommiddle],\n            [xleft, topmiddle]\n        ];\n    }\n}\nexport default DiamondVertical;","export default {\n    canvas: {\n        wheel (event, jflow) {\n            event.preventDefault();\n            let { offsetX, offsetY, deltaX, deltaY } = event \n            if(event.ctrlKey) { \n                deltaY = -deltaY;\n            }\n            jflow.zoomHandler(offsetX, offsetY, deltaX, deltaY, event);\n        },\n    }\n}","import Instance from './instance';\n\n/**\n * @typedef {Instance~Configs} BaseLink~Configs\n * @property {Instance} from   - 起始单元\n * @property {Instance} to     - 终止单元\n * @property {String} fromDir  - 起始方向 \n * @property {String} toDir    - 终止方向 \n * @property {String} key      - 连线唯一键值\n * @property {String} backgroundColor    - 线条颜色 \n */\n/**\n * 连线基类\n * @constructor BaseLink\n * @extends Instance\n * @param {BaseLink~Configs} configs - 配置\n */\nclass BaseLink extends Instance{\n    constructor(configs = {}) {\n        super();\n        /** @member {Instance}      - 起始单元 */\n        this.from     = configs.from;\n        /** @member {Instance}      - 终止单元 */\n        this.to       = configs.to;\n        /** @member {DIRECTION}      - 起始方向 */\n        this.fromDir  = configs.fromDir;\n        /** @member {DIRECTION}      - 终止方向 */\n        this.toDir    = configs.toDir;\n        /** @member {number[][]}     - 连线控制点缓存 */\n        this._cachePoints = null;\n        /** @member {string}     - 连线颜色，默认为 #000 */\n        this.backgroundColor = configs.backgroundColor || '#000';\n\n        this.isSelf        = !!configs.isSelf\n    }\n\n    /**\n     * 是否出现在当前视窗内\n     * @param {number[]} viewbox\n     */\n    isInViewBox(viewbox){\n        return true;\n    }\n\n    \n}\n\nexport default BaseLink;","import Rectangle from './shapes/rectangle';\nimport { DIRECTION } from '../utils/constance';\nimport { requestCacheCanvas } from '../utils/canvas';\nimport JFlowEvent from '../events';\nfunction createInputElement() {\n    const input = document.createElement('input');\n    input.setAttribute('style',`\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        background-image:none;\n        background-color:transparent;\n        -webkit-box-shadow: none;\n        -moz-box-shadow: none;\n        box-shadow: none;`);\n    return input;\n}\n/**\n * 文字对齐方式\n * @readonly\n * @enum {string}\n */\nconst TEXT_ALIGN = {\n    CENTER: 'center',\n    LEFT: 'left',\n    RIGHT: 'right',\n};\n/**\n * 文字单元 配置\n * @typedef {Rectangle~RectangleConfigs} Text~TextConfigs\n * @property {String} fontFamily    - 字体\n * @property {Number} fontSize      - 字号\n * @property {String} content       - 内容\n * @property {String} textColor     - 字体颜色\n * @property {TEXT_ALIGN} textAlign     - 文字对齐方式\n * @property {String} backgroundColor     - 背景颜色\n * @property {number} lineHeight    - 行高\n * @property {number} indent        - 缩进\n * @property {Boolean} editable      - 是否可编辑\n * @property {number} minWidth      - 最小宽度\n * @property {string} placeholder   - 占位文字\n * @property {Boolean} emptyWhenInput - 输入状态时是否清空input框\n */\n/**\n * 文字对象\n * @description 可以绘制文字\n * @constructor Text\n * @extends Rectangle\n * @param {Text~TextConfigs} configs - 配置\n */\nclass Text extends Rectangle {\n    constructor(configs) {\n        super(configs);\n        this.type =             'Text';\n        /** @member {String}      - 内容 */\n        this.content =          configs.content || '';\n        /** @member {String}      - 字体 */\n        this.fontFamily =       configs.fontFamily || '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {String}      - 字号 */\n        this.fontSize =         configs.fontSize || '28px';\n        /** @member {String}      - 字体颜色 */\n        this.textColor =        configs.textColor || 'white';\n        /** @member {String}      - 文字对齐方式 */\n        this.textAlign =        configs.textAlign || TEXT_ALIGN.CENTER;\n        /** @member {String}      - 文字基线方式 */\n        this.textBaseline =     configs.textBaseline || 'middle';\n        /** @member {Number}      - 行高 */\n        this.lineHeight =       configs.lineHeight ;\n        /** @member {Number}      - 缩进 */\n        this.indent =           configs.indent || 0;\n        this.backgroundColor =  configs.backgroundColor;\n        /** @member {Boolean}      - 是否可编辑 */\n        this.editable =         configs.editable;\n        // this.acceptPatten =     configs.acceptPatten;\n        /** @member {number}      - 最小宽度 */\n        this.minWidth =         configs.minWidth || 0;\n        this.maxWidth =         configs.maxWidth;\n        this.ellipsis =         configs.ellipsis;\n\n        this.placeholder =          configs.placeholder || '';\n        this.emptyWhenInput =       configs.emptyWhenInput || false;\n        this.editting =  false;\n        this.disabled =        configs.disabled;\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n        });\n        this._makeEditable();\n    }\n\n    /**\n     * 编辑态\n     */\n    _makeEditable() {\n        if(this.editable) {\n            this.addEventListener('click', (event) => {\n                if(this.disabled) {\n                    return;\n                }\n                let x;\n                const hw = this.width / 2;\n                if(this.textAlign === TEXT_ALIGN.LEFT){\n                    x = this.anchor[0] - hw + this.indent / 2;\n                } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n                    x = this.anchor[0] + hw;\n                } else {\n                    x = this.anchor[0] + this.indent / 2;\n                }\n                const p = [ x, -this.height/2 ];\n                const fontSize = +/(\\d+)/.exec(this.fontSize)[1];\n                const [offsetX, offsetY] = this.calculateToRealWorld(p);\n                let inputElement = createInputElement();\n                const wrapper = this._jflow.DOMwrapper;\n                let oldVal = this.content;\n                inputElement.style.transform =`translate(${offsetX}px, ${offsetY}px)`;\n                inputElement.style.width = this.calculateToRealWorldWithScalar(this.width + 5) + 'px';\n                inputElement.style.height = this.calculateToRealWorldWithScalar(this.height) + 'px';\n                inputElement.style.fontFamily = this.fontFamily;\n                wrapper.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.fontSize = `${fontSize * this._jflow.scale}px`;\n                inputElement.style.lineHeight = `${this.lineHeight * this._jflow.scale}px`;\n                inputElement.style.textIndent = `${this.indent * this._jflow.scale}px`;\n                inputElement.value = this.emptyWhenInput ? '' : this.content;\n                inputElement.style.color = this.textColor;\n                inputElement.setAttribute('placeholder', this.placeholder);\n\n                inputElement.addEventListener(\"focus\",  (e) => {\n                    // e.preventDefault();\n                    this.content = '';\n                    this.editting = true;\n                    this._jflow._render();\n                    inputElement.style.outline = \"none\";\n                });\n                let blurHandler = () => {\n                    this.editting = false;\n                    this.dispatchEvent(new JFlowEvent('blur', {\n                        target: this,\n                    }))\n                    const val = inputElement.value;\n                    /**\n                        * 文字改变事件\n                        * @event Text#change\n                        * @type {object}\n                        * @property {Text} target           - 当前文字对象\n                        * @property {String} oldVal         - 原始文字\n                        * @property {String} val            - 当前文字\n                        */\n                    this.dispatchEvent(new JFlowEvent('change', {\n                        target: this,\n                        oldVal,\n                        val,\n                    }))\n                    this.content = oldVal;\n                    this._jflow._render();\n                    this._jflow.removeEventListener('zoompan', blurHandler)\n                    inputElement.removeEventListener('blur', blurHandler)\n                    wrapper.removeChild(inputElement);\n                    inputElement = null;\n                    blurHandler = null;\n                    this.inputElement = null;\n                };\n                this._jflow.addEventListener('zoompan', blurHandler);\n                inputElement.addEventListener('blur', blurHandler);\n                const keyUpHandler = (e) => {\n                    if (e.key === 'Enter' || e.keyCode === 13) {\n                        e.preventDefault();\n                        inputElement.removeEventListener('keypress', keyUpHandler)\n                        blurHandler();\n                    }\n                };\n                inputElement.addEventListener('keypress', keyUpHandler)\n                inputElement.addEventListener('input', (e) => {\n                    let changed = false;\n                    this.dispatchEvent(new JFlowEvent('input', {\n                        target: this,\n                        oldVal,\n                        val: e.target.value,\n                        handler(val) {\n                            oldVal = val;\n                            inputElement.value = val;\n                            changed = true;\n                        }\n                    }))\n                    if(!changed) {\n                        oldVal = e.target.value\n                    }\n                })\n                wrapper.append(inputElement);\n                inputElement.focus({\n                    preventScroll: true\n                });\n                this.inputElement = inputElement;\n            })\n        }\n    }\n\n    renderShadowText(ctx) {\n        ctx.beginPath();\n        ctx.font = `${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.textColor;\n        const t_h = parseInt(this.fontSize);\n        const {\n            actualBoundingBoxLeft,\n            actualBoundingBoxRight,\n            fontBoundingBoxAscent,\n            fontBoundingBoxDescent\n        } = ctx.measureText(this.content);\n        this._textWidth = this.indent + Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight);\n        if(this.maxWidth && this.ellipsis) {\n            if(this._textWidth > this.maxWidth) {\n                const ratio =this.maxWidth / this._textWidth;\n                const l = Math.floor(this.content.length * ratio - 3);\n                this.ellipsisContent = this.content.substring(0, l) + '...'; \n            }  else {\n                this.ellipsisContent = this.content;\n            }\n            this.width = this.maxWidth;\n        } else{ \n            this.width = Math.max(this.minWidth, this._textWidth);\n        }\n        \n        const height = (Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent)) || t_h;\n        if(this.lineHeight) {\n            this.height = this.lineHeight;\n        } else {\n            this.height = height;\n        }\n\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                // if(this.editting && k === 'content') {\n                //     return;\n                // }\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        requestCacheCanvas((ctx) => {\n            this.renderShadowText(ctx);\n        });\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        if(this.editting) {\n            return;\n        }\n        ctx.beginPath();\n       \n        ctx.font = `${this.fontSize} ${this.fontFamily}`;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        ctx.fillStyle = this.textColor;\n        let content = this.content;\n        if(this.ellipsisContent) {\n            content = this.ellipsisContent;\n        }\n        if(this.textAlign === TEXT_ALIGN.LEFT){\n            const hw = this.width / 2;\n            ctx.fillText(content, this.anchor[0] - hw + this.indent / 2, this.anchor[1]);\n        } else if(this.textAlign === TEXT_ALIGN.RIGHT) {\n            const hw = this.width / 2;\n            ctx.fillText(content, this.anchor[0] + hw, this.anchor[1]);\n        } else {\n            ctx.fillText(content, this.anchor[0] + this.indent / 2, this.anchor[1]);\n        }\n        ctx.fill();\n        ctx.restore();\n    }\n}\n\nexport default Text;","import Rectangle from './shapes/rectangle';\nimport StackMixin from './stackMixin';\nimport LayoutMixin from './layoutMixin';\nimport { bounding_box } from '../utils/functions';\nimport { DIRECTION } from '../utils/constance';\n\n/**\n * @typedef {Object} Icon~ImageBounding\n * @property {number} width   - 图片宽度\n * @property {number} height   - 图片高度 \n */\n/**\n * 图片单元 配置\n * @typedef {Rectangle~RectangleConfigs} Icon~IconConfigs\n * @property {number} image   - 图片地址\n * @property {number} imageWidth   - 图片宽度\n * @property {number} imageHeight   - 图片高度\n */\n\n/**\n * 图片单元\n * @description 图片单元可以绘制图片，图片加载后会自动重新绘制\n * @constructor Icon\n * @extends Rectangle\n * @param {Icon~IconConfigs} configs - 配置\n */\nclass Icon extends Rectangle {\n    constructor(configs) {\n        super(configs)\n        /** @member {CanvasImageSource}      - 图片 */\n        this.image = configs.image;\n        this.image.onload = () => {\n            this._jflow._render();\n            // requestAnimationFrame(() => {\n                \n            // })\n        }\n        /** @member {Icon~ImageBounding}      - 图片维度 */\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width,\n            height: configs.imageHeight ||  configs.height,\n        }\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                this._rawConfigs[k] = configs[k];\n            }\n        });\n        if(configs.image && !configs.image.complete) {\n            this.image.onload = () => {\n                this._jflow._render();\n                // requestAnimationFrame(() => {\n                //     this._jflow._render();\n                // })\n            }\n        }\n        this.imageBounding = {\n            width: configs.imageWidth || configs.width || this.imageBounding.width,\n            height: configs.imageHeight ||  configs.height || this.imageBounding.height,\n        }\n    }\n\n    render(ctx) {\n        ctx.save();\n        if(this._isMoving){\n            ctx.globalAlpha = 0.6\n        }\n        Rectangle.prototype.render.call(this, ctx);\n        const x = this.anchor[0] - this.width / 2;\n        const y = this.anchor[1] - this.height / 2;\n        if(this.opacity < 1) {\n            ctx.globalAlpha = this.opacity;\n        }\n        if(this.image.complete) {\n            ctx.drawImage(this.image, x, y, this.imageBounding.width, this.imageBounding.height);\n        }\n        ctx.restore();\n    }\n}\nexport default Icon;","import Rectangle from './shapes/rectangle';\n/**\n * @funtion domFactory\n * @param {Element} container - DOM容器\n */\n/**\n * DOM元素容器 配置\n * @typedef {Rectangle~Configs} ShadowDom~RectangleConfigs\n * @property {domFactory} createDocument - 宽\n */\n/**\n * DOM元素容器 内容可贴 DOM 元素，支持缩放平移\n * @constructor ShadowDom\n * @extends Rectangle\n * @param {ShadowDom~RectangleConfigs} configs\n */\nclass ShadowDom extends Rectangle {\n    constructor(configs) {\n        super(configs);\n        this.domFactory = configs.createDocument;\n        this._dom = null;\n    }\n\n    getRealWorldPosition() {\n        const b = this.getBoundingRect();\n        return this.calculateToRealWorld(b.slice(0, 2));\n    }\n\n    render(ctx) {\n        if(!this._dom && this.domFactory) {\n            requestAnimationFrame(() => {\n                if(!this._dom) {\n                    const container = document.createElement('div');\n                    const pos = this.getRealWorldPosition();\n                    const scale = this._jflow.scale;\n                    container.setAttribute('style', `\n                        position: absolute;\n                        width: ${this.width}px;\n                        height: ${this.height}px;\n                        transform-origin: left top;\n                        top: 0;\n                        left: 0;\n                        transform: translate(${pos[0]}px, ${pos[1]}px) scale(${scale});`);\n                    this._dom = container;\n                    this._jflow.DOMwrapper.appendChild(container);\n                    this.domFactory(container);\n                }\n            });\n        } else {\n            const pos = this.getRealWorldPosition();\n            const scale = this._jflow.scale;\n            this._dom.style.transform = `translate(${pos[0]}px, ${pos[1]}px) scale(${scale})`\n        }\n        super.render(ctx)\n    }    \n\n    onEnterViewbox() {\n        if(this._dom) {\n            this._dom.style.display = 'block';\n        }\n    }\n\n    onLeaveViewbox(){\n        if(this._dom) {\n            this._dom.style.display = 'none';\n        }\n    }\n\n    destroy() {\n        \n        if(this._dom) {\n            this._jflow.DOMwrapper.removeChild(this._dom);\n        }\n        super.destroy();\n    }\n}\nexport default ShadowDom;\n","import BaseLink from './base-link';\nimport { distToSegmentSquared, isPolyLineIntersectionRectange } from '../utils/functions';\nimport { APPROXIMATE } from '../utils/constance';\n/**\n * @typedef {BaseLink~Configs} Link~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n */\n/**\n * 直线\n * @constructor Link\n * @extends BaseLink\n * @param {Link~Configs} configs - 配置\n */\nclass Link extends BaseLink {\n    constructor(configs) {\n        super(configs);\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        this.fontSize      = configs.fontSize || '12px';\n        this.content       = configs.content || '';\n        this.lineDash      = configs.lineDash;\n        this.approximate  = configs.approximate || APPROXIMATE;\n    }\n\n    _calculateAnchorPoints() {\n        const p0 = this.from.calculateIntersection(this.to.getCenter());\n        const p1 = this.to.calculateIntersection(this.from.getCenter());\n        this._cachePoints = [p0, p1];\n        const dx = p1[0] - p0[0];\n        const dy = p1[1] - p0[1];\n        const angle = Math.atan2(dy, dx);\n        this._cacheAngle = angle;\n    }\n    \n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return true;\n    }\n\n    render(ctx) {\n        const [ p0, p1 ] = this._cachePoints;\n        const angle = this._cacheAngle;\n        const dx = p1[0] - p0[0];\n        const dy = p1[1] - p0[1];\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        ctx.beginPath();\n        if(this.content){ \n\n            ctx.textAlign = 'center';\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            ctx.textBaseline = 'middle';\n            const {\n                actualBoundingBoxLeft,\n                actualBoundingBoxRight,\n                fontBoundingBoxAscent,\n                fontBoundingBoxDescent\n            } = ctx.measureText(this.content);\n            const x = dx /2 + p0[0];\n            const y = dy /2 + p0[1];\n            ctx.fillText(this.content, x, y);\n            const width = Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) + 20;\n            const height = (Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent)) * 1.5;\n            ctx.beginPath();\n            let region = new Path2D();\n            region.rect(x - width/2 , y - height/2, width, height);\n            const rx = Math.min(p1[0], p0[0]) - 10;\n            const ry = Math.min(p1[1], p0[1]) - 10;\n            const rw = Math.abs(dx) + 20;\n            const rh = Math.abs(dy) + 20;\n            region.rect(rx , ry, rw, rh);\n            ctx.clip(region, \"evenodd\");\n        }\n\n\n        ctx.moveTo(p0[0], p0[1]);\n        ctx.lineTo(p1[0], p1[1]);\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        ctx.translate(p1[0], p1[1]);\n        ctx.rotate(angle);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-5, -4);\n        ctx.lineTo(-5, 4);\n        ctx.lineTo(0, 0);\n        ctx.fill();\n        ctx.rotate(-angle);\n        ctx.translate(-p1[0], -p1[1]);\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const [ start, end ] = this._cachePoints;\n        const dist = distToSegmentSquared(point, start, end)\n        return dist < this.approximate;\n    }\n}\n\nexport default Link;","import BaseLink from './base-link';\nimport { \n    polylinePoints, \n    distToSegmentSquared, \n    makeRadiusFromVector, \n    minIntersectionBetweenNodes,\n    isPolyLineIntersectionRectange\n} from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\n// import { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} PolyLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} radius        - 拐角弧度\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {String} isSelf        - 是否为自连接\n */\n/**\n * 方形折线\n * @constructor PolyLink\n * @extends BaseLink\n * @param {PolyLink~Configs} configs - 配置\n */\nclass PolyLink extends BaseLink {\n     /**\n     * 创建方形折线\n     * @param {PolyLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}   - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}   - 拐角弧度 */\n        this.radius        = configs.radius || 0;\n        /** @member {Number}   - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 10;\n        /** @member {Number}   - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 10;\n        /** @member {Number}    - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Number}    - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {Number}    - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}    - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {Number}    - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Number}    - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n\n        this.noArrow       = !!configs.noArrow \n    }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf){\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                this.toDir, \n                this.minSpanX, \n                this.minSpanY,\n                true);\n\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, this.toDir]\n            // const points = polylinePoints(\n            //     dmsfrom[this.fromDir],\n            //     dmsto[this.toDir],\n            //     this.fromDir,\n            //     this.toDir, this.minSpanX , this.minSpanY);\n            // this._cachePoints = points\n            // this._cacheAngle = [this.fromDir, this.toDir]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = polylinePoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = polylinePoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir,\n                this.minSpanX , this.minSpanY);\n            this._cachePoints = points\n            this._cacheAngle = [meta.fromDir, meta.toDir]\n        }\n    }\n    \n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return isPolyLineIntersectionRectange(this._cachePoints, br);\n    }\n\n    render(ctx) {\n        // this._calculateAnchorPoints();\n        const radius = this.radius;\n        const points = this._cachePoints;\n        const p = points[0];\n        const pEnd = points[points.length - 1];\n        const angleEnd = ((this._cacheAngle[1] + 2) % 4) * 90 * PIINRATIO;\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(p[0], p[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-p[0], -p[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(p[0], p[1]);\n        points.slice(1, points.length - 1).forEach((p, idx) => {\n            if(this.radius) {\n                const pLast = points[idx];\n                const pNext = points[idx+2];\n                const { p1, p2 } = makeRadiusFromVector(pLast, p, pNext, radius);\n                if(p1 && p2){\n                    ctx.lineTo(p1[0], p1[1]);\n                    ctx.quadraticCurveTo(p[0], p[1], p2[0], p2[1]);\n                } else {\n                    ctx.lineTo(p[0], p[1]);\n                }  \n            } else {\n                ctx.lineTo(p[0], p[1]);\n            }\n        });\n        ctx.lineTo(pEnd[0], pEnd[1]);\n\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        if(!this.noArrow) {\n            ctx.beginPath();\n            ctx.translate(pEnd[0], pEnd[1]);\n            ctx.rotate(angleEnd);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-5, -4);\n            ctx.lineTo(-5, 4);\n            ctx.lineTo(0, 0);\n            ctx.fill();\n            ctx.rotate(-angleEnd);\n            ctx.translate(-pEnd[0], -pEnd[1]);\n        }\n        if(this.content) {\n            ctx.beginPath();\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            switch (this.fromDir) {\n                case DIRECTION.BOTTOM:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 2, p[1] + 10);\n                    break;\n                case DIRECTION.RIGHT:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 10, p[1] - 2);\n                    break;\n                default:\n                    break;\n            }\n        }\n\n    }\n\n    isHit(point) {\n        const points = this._cachePoints;\n        let lastP = points[0];\n        const remainPoints = points.slice(1)\n        do {\n            const currentP = remainPoints.shift();\n            if(currentP) {\n                const dist = distToSegmentSquared(point, lastP, currentP);\n                if(dist < this.approximate){\n                    return true;\n                }\n            }\n            lastP = currentP;\n        } while(lastP)\n\n        return false\n    }\n}\n\nexport default PolyLink;","import BaseLink from './base-link';\nimport { bezierPoints, distToBezierSegmentSquared, getBezierAngle, minIntersectionBetweenNodes } from '../utils/functions';\nimport { APPROXIMATE, DIRECTION } from '../utils/constance';\nimport { dist2, bezierPoint } from '../utils/functions';\nconst PIINRATIO = Math.PI / 180\n/**\n * @typedef {BaseLink~Configs} BezierLink~Configs\n * @property {Number} approximate   - 点击响应范围\n * @property {Number} minSpanX      - 起点终点在 x 方向最小的跨度\n * @property {Number} minSpanY      - 起点终点在 y 方向最小的跨度\n * @property {Number[]} lineDash    - 虚线数组\n * @property {Boolean} doubleLink   - 双向箭头\n * @property {String} fontFamily    - 连线上的文字字体\n * @property {Number} fontSize      - 连线上的文字大小\n * @property {String} content       - 连线上的文字\n * @property {Boolean} isSelf        - 是否为自连接\n */\n/**\n * 贝塞尔曲线\n * @constructor BezierLink\n * @extends BaseLink\n * @param {BezierLink~Configs} configs - 配置\n */\nclass BezierLink extends BaseLink {\n     /**\n     * 创建贝塞尔曲线.\n     * @param {BezierLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}      - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}      - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 0;\n        /** @member {Number}      - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 0;\n        /** @member {Number[]}      - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Boolean}      - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {String}      - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}      - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {String}      - 连线上的文字 */\n        this.content       = configs.content || '';\n        /** @member {Boolean}      - 是否为自连接 */\n        this.isSelf        = !!configs.isSelf\n    }\n    \n    // getColor() {\n    //     if(this._isTargeting) {\n    //         return this.hoverStyle;\n    //     }\n    //     return this.defaultStyle;\n    // }\n    \n    // _calculateAnchorPoints() {\n    //     let start;\n    //     let end;\n    //     if(this.fromDir !== undefined) {\n    //         start = {\n    //             dir: this.fromDir,\n    //             p: this.from.getIntersectionsInFourDimension()[this.fromDir],\n    //         }\n    //     } else {\n    //         start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     }\n    //     if(this.toDir !== undefined) {\n    //         end = {\n    //             dir: this.toDir,\n    //             p: this.to.getIntersectionsInFourDimension()[this.toDir],\n    //         }\n    //     } else {\n    //         end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     }\n        \n        \n    //     // const start = this.from.calculateIntersectionInFourDimension(this.to.getCenter(), 'from');\n    //     // const end = this.to.calculateIntersectionInFourDimension(this.from.getCenter(), 'to');\n    //     const p1 = start.p;\n    //     const p2 = end.p;\n    //     const points = bezierPoints(p1, p2, start.dir, end.dir, this.anticlock);\n\n    //     this._cachePoints = [...p1, ...points]\n    // }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsInFourDimension();\n        const dmsto = this.to.getIntersectionsInFourDimension();\n        if(this.isSelf) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[DIRECTION.SELF],\n                this.fromDir,\n                DIRECTION.BOTTOM, \n                this.minSpanX, \n                this.minSpanY);\n\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, DIRECTION.BOTTOM]\n        } else if(this.fromDir !== undefined && this.toDir !== undefined) {\n            const points = bezierPoints(\n                dmsfrom[this.fromDir],\n                dmsto[this.toDir],\n                this.fromDir,\n                this.toDir, this.minSpanX , this.minSpanY);\n            this._cachePoints = [...dmsfrom[this.fromDir], ...points] \n            this._cacheAngle = [this.fromDir, this.toDir]\n        } else {\n            const meta = minIntersectionBetweenNodes(dmsfrom, dmsto);\n            const points = bezierPoints(\n                meta.fromP,\n                meta.toP,\n                meta.fromDir,\n                meta.toDir);\n\n            this._cachePoints = [...meta.fromP, ...points];\n            this._cacheAngle = [meta.fromDir, meta.toDir];\n        }\n    }\n\n    render(ctx) {\n        this._calculateAnchorPoints();\n        const points = this._cachePoints;\n        const angle = getBezierAngle.apply(null, [1, ...points])\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        if(this.doubleLink) {\n            const beginAngle = ((this._cacheAngle[0] + 2) % 4) * 90 * PIINRATIO;\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            ctx.rotate(beginAngle);\n            ctx.moveTo(5, 0);\n            ctx.lineTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.lineTo(5, 0);\n            ctx.fill();\n            ctx.rotate(-beginAngle);\n            ctx.translate(-points[0], -points[1]);\n        }\n        ctx.beginPath();\n        ctx.moveTo(points[0], points[1])\n        ctx.bezierCurveTo(...points.slice(2));\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n        ctx.beginPath();\n        ctx.translate(points[6], points[7]);\n        ctx.rotate(angle);\n        ctx.moveTo(5, 0);\n        ctx.lineTo(0, -4);\n        ctx.lineTo(0, 4);\n        ctx.lineTo(5, 0);\n        ctx.fill();\n        ctx.rotate(-angle);\n        ctx.translate(-points[6], -points[7]);\n        if(this.content) {\n            ctx.beginPath();\n            const hasFlip = points[0] > points[6];\n            let [x, y, angle] = bezierPoint(0.5, points);\n            ctx.translate(x, y);\n            ctx.rotate(angle);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            ctx.textAlign = 'center';\n            ctx.fillText(this.content, 0, -(parseInt(this.fontSize) || 12)/4);\n            if(hasFlip){\n                ctx.rotate(Math.PI);\n            }\n            ctx.rotate(-angle);\n            ctx.translate(-x, -y);\n        }\n    }\n\n    isHit(point) {\n        if(!this._cachePoints) return false;\n        const points = this._cachePoints;\n        const dist = distToBezierSegmentSquared(point, points)\n        return dist < this.approximate;\n    }\n}\n\nexport default BezierLink;","/**\n * 线性布局配置\n * @typedef {Object} LinearLayout~Configs\n * @property {string} direction     - 排列方向 默认 vertical\n * @property {number} gap           - 边距, 默认是 5\n * @property {string} alignment     - 垂直排列方向对齐方式 默认 center\n * @property {string} justify       - 排列方向对齐方式 默认 center\n */\n/**\n    线性布局\n\n    排列方向\n    direction:\n        + vertical 从上至下排布\n        + horizontal 从左至右排布\n    \n    不重叠，中线对齐\n    只针对当前的 group\n\n    对齐方式\n    alignment: \n        + start 主轴左侧对齐\n        + center 主轴对齐\n        + end   主轴右侧对齐\n    justify: \n        + start 开始时对齐\n        + center 居中对齐\n        + end   末尾对齐\n        + space-between 平均分配空间对齐\n\n * @constructor LinearLayout\n * @implements {Layout}\n * @param {LinearLayout~Configs} configs - 配置\n */\n\nclass LinearLayout {\n    constructor(configs = {}) {\n        /** @member {string}  - 排列方向 默认 vertical */\n        this.direction =     configs.direction || 'vertical';\n        /** @member {number}  - 边距, 默认是 5 */\n        this.gap =           configs.gap ?? 5;\n        /** @member {string}  - 垂直排列方向对齐方式 默认 center */\n        this.alignment =     configs.alignment || 'center';\n        /** @member {string}  - 排列方向对齐方式 默认 center */\n        this.justify =       configs.justify || 'center';\n        // this.widthSetByParent =  configs.width === '100%'\n        this._rawConfigs = configs;\n    }\n\n\n    reflow(group) {\n        const stack = group._stack.filter(instance => instance.visible && !instance.absolutePosition);\n        const absoluteStack = group._stack.filter(instance => instance.visible && instance.absolutePosition)\n        const groupWidth = group.width - group.padding.left - group.padding.right;\n        if(this.direction === 'vertical') {\n            let reduceHeight = 0;\n            let lastInstanceHeight = 0;\n            let maxWidth = 0;\n            let allHeight = 0;\n            const childAll = stack.concat(absoluteStack);\n            childAll.forEach((instance, idx) =>  {\n                if(instance.display === 'block') {\n                    instance.width = 0;\n                    // instance.definedWidth = maxWidth;\n                    instance.resetChildrenPosition();\n                    instance.reflow();\n                    instance._getBoundingGroupRect();\n                }\n            });\n\n            stack.forEach((instance, idx) =>  {\n                \n                const { width, height } = instance.getBoundingDimension();\n                // console.log(height, instance.type);\n                const gap = (idx > 0 ? this.gap : 0);\n                if(instance.display !== 'outstretch') {\n                    maxWidth = Math.max(width, maxWidth);\n                }\n                allHeight += (height + gap);\n                reduceHeight += (height/2 + gap + lastInstanceHeight)\n                lastInstanceHeight = height / 2;\n                instance.anchor = [0, reduceHeight];\n            });\n            childAll.forEach((instance, idx) =>  {\n                if(instance.display === 'block') {\n                    // instance.definedWidth = maxWidth;\n                    instance.resetChildrenPosition();\n                    instance.width = maxWidth;\n                    instance.reflow();\n                    // instance._getBoundingGroupRect();\n                } else if(instance.display === 'outstretch') {\n                    const w = group._belongs.width - group._belongs.padding.left - group._belongs.padding.right;\n                    instance.resetChildrenPosition();\n                    instance.width = Math.max(w, maxWidth);\n                    instance.reflow();\n                }\n            });\n\n            maxWidth = Math.max(groupWidth, maxWidth);\n            \n            allHeight = allHeight/2;\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = -(maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                    // console.log(maxWidth, width, instance.anchor[0])\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[0] = (maxWidth - width) / 2;\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n            if(this.alignment === 'center') {\n                stack.forEach((instance, idx) =>  {\n                    const { width } = instance.getBoundingDimension();\n                    instance.anchor[1] -= allHeight;\n                })\n            }\n        } \n        if(this.direction === 'horizontal') {\n            let reduceWidth = 0;\n            let lastInstanceWidth = 0;\n            let maxHeight = 0;\n            let allWidth = 0;\n            let allPureWidth = 0;\n            \n            stack.forEach((instance, idx) =>  {\n                const { width, height } = instance.getBoundingDimension();\n                const gap = (idx > 0 ? this.gap : 0);\n                maxHeight = Math.max(height, maxHeight);\n                allWidth += (width+gap);\n                allPureWidth += width;\n                reduceWidth += (width/2 + gap + lastInstanceWidth)\n                lastInstanceWidth = width / 2;\n                instance.anchor = [reduceWidth, 0]\n            });\n            if(this.justify === 'start') {\n                const withdraw = groupWidth/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                });  \n            }\n            if(this.justify === 'end') {\n                const withdraw = groupWidth/2 - allWidth;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += withdraw;\n                });  \n            }\n            if(this.justify === 'center') { \n                const withdraw = allWidth / 2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] -= withdraw;\n                })                \n            }\n            if(this.justify === 'space-between' && stack.length > 1) {\n                \n                const width = Math.max(groupWidth, allWidth);\n                const gapAverage = (width - allWidth) / (stack.length - 1);\n                const withdraw = width/2;\n                stack.forEach((instance, idx) => {\n                    instance.anchor[0] += ((gapAverage * idx) - withdraw);\n                });  \n            }\n            if(this.alignment === 'start') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = -(maxHeight - height) / 2;\n                })\n            }\n            if(this.alignment === 'end') {\n                stack.forEach((instance, idx) => {\n                    const { height } = instance.getBoundingDimension();\n                    instance.anchor[1] = (maxHeight - height) / 2;\n                })\n            }\n        }\n\n        if(absoluteStack.length) {\n            if(group.display === 'block') {\n                group.getBoundingDimension();\n            } else {\n                group._getBoundingGroupRect();\n            }\n            const WIDTH = group.width /2;\n            const HEIGHT = group.height /2;\n            absoluteStack.forEach(instance => {\n                instance.anchor = this._resolveAbsoluteAnchor(instance.absolutePosition, instance, WIDTH, HEIGHT);\n            })\n        }\n    }\n\n    _resolveAbsoluteAnchor(config, instance, w, h){\n        const { top, right, bottom, left } = config;\n        const { width, height } = instance.getBoundingDimension();\n        const hw = width / 2;\n        const hh = height / 2;\n        let y = 0;\n        let x = 0;\n        if(typeof top === 'number') {\n            y = top + hh - h;\n        }\n        if(typeof right === 'number') {\n            x = w - right - hw;\n        }\n        if(typeof bottom === 'number') {\n            y = h - bottom - hh;\n        }\n        if(typeof left === 'number') {\n            x = left + hw - w;\n        }\n        return [x, y]\n    }\n\n    clone() {\n        return new LinearLayout(this._rawConfigs);\n    }\n}\n\nexport default LinearLayout;","\n// import EventEmitter from '../../utils/EventEmitter';\nimport { DIRECTION } from '../../utils/constance';\nclass BaseNode {\n    constructor(source) {\n        this.source = source;\n        this.id = source.id;\n        this.type = source.type;\n        // this.isDraggable = true;\n        // this.getJflowInstance = undefined;\n        this.level = undefined;\n        this.sequence = undefined;\n        // this.isLocked = false;\n        this.isFree = false;\n        this.parent = undefined;\n        this.idx = undefined;\n        this.parentIterateType = undefined;\n        \n        this.hasEndPoint = false;\n        // source._getAstNode = () => this;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        this.level = level;\n        this.sequence = sequence;\n        this.spanX = 1;\n        this.spanY = 1;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            level, sequence,\n        }\n    }\n\n    makeLink(callback) {\n        return this;\n    }\n\n    makeEndpoint() { }\n\n    traverse(callback) {\n        callback(this);\n    }\n\n    getNodes(jflow) {\n        const nodes = [];\n        this.traverse(n => {\n            const renderNode = jflow.getRenderNodeBySource(n.source);\n            if(renderNode)\n                nodes.push(renderNode);\n        })\n        return nodes;\n    }\n\n    linkSource(source) {\n        this.parent.source[this.parentIterateType].splice(this.idx + 1, 0, source);\n    }\n\n    remove() {\n        this.parent.source[this.parentIterateType].splice(this.idx, 1);\n    }\n}\n\nclass Root extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.isroot = true;\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        const playgrounditerator = mapFunc('playground').bind(this)\n        this.playground = (source.playground || []).map((s, idx) => {\n            const n = playgrounditerator(s, idx);\n            n.isFree = true;\n            return n;\n        });\n    }\n\n    reflowBodyPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, sequence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    reflowPlaygroundPreCalculate(preCallback, callback) {\n        this.playground.forEach(node => {\n            preCallback(node)\n            node.reflowPreCalculate(0, 0, callback)\n        })\n    }\n\n\n    makeLink(callback) {\n        let last;\n        this.body.forEach(b => {\n            if(!last) {\n                last = b;\n                return;\n            }\n            callback({\n                from: last,\n                to: b,\n                part: 'body',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n\n        this.playground.forEach(n => {\n            n.makeLink(callback);\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n\n        this.playground.forEach(n => {\n            n.traverse(callback);\n        })\n    }\n}\n\nclass IfStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.isLocked = true;\n        this.hasEndPoint = true;\n    }\n    \n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        let c_spanX = 1;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        this.consequent.forEach((c, idx) => {   \n            const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n            c_spanX = Math.max(c_spanX, sx);\n            c_spanY += sy;\n            level += sy;\n        });\n        const nextSequeence = sequence + c_spanX;\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n        level = this.level + spanY - 1;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        this.consequent.forEach(c => {\n            callback({\n                from: lastc,\n                to: c,\n                part: 'consequent',\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            });\n\n            c = c.makeLink(callback)\n            lastc = c;\n        })\n\n        callback({\n            from: lastc,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n        });\n\n        let lasta = this;\n        this.alternate.forEach(a => {\n            callback({\n                from: lasta,\n                to: a,\n                fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n                part: 'alternate',\n            })\n            a = a.makeLink(callback)\n            lasta = a;\n        });\n        callback({\n            from: lasta,\n            to: this.Endpoint,\n            fromDir: lasta === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            toDir: DIRECTION.RIGHT,\n            part: 'alternate',\n        });\n\n        return this.Endpoint;\n    }\n\n    // makeEndpoint() {\n    //     const fakeSource = {\n    //         type: 'endpoint',\n    //         id: `${this.id}-endpoint`,\n    //     };\n    //     this.Endpoint = makeAST(fakeSource);\n    //     this.Endpoint.parent = this.parent;\n    //     this.Endpoint.idx = this.idx;\n    //     this.Endpoint.parentIterateType = this.parentIterateType;\n    //     return fakeSource;     \n    // }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n        console.log(this.Endpoint)\n        callback(this.Endpoint);\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.cases = (source.cases || []).map(mapFunc('case').bind(this))\n        if(this.cases.length) {\n            this.cases[this.cases.length - 1].lastCase = true;\n        }\n        this.isLocked = true;\n        this.hasEndPoint = true;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n\n        let c_spanX = 1;\n        let c_spanY = 0;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            level = this.level;\n            consequent.forEach(cc => {\n                const { spanX: sx, spanY: sy } = cc.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        \n        let s_spanX = c_spanX;\n        let s_spanY = 0;\n        this.cases.forEach((c, idx) => {\n            const nextSequeence = sequence + s_spanX;\n            let a_spanX = 0;\n            let a_spanY = 0;\n            level = this.level;\n            c.alternate.forEach(ca => {\n                const { spanX: sx, spanY: sy } = ca.reflowPreCalculate(level + 1, nextSequeence, callback);\n                a_spanX = Math.max(a_spanX, sx);\n                a_spanY += sy;\n                level += sy;\n            });\n            s_spanX += a_spanX;\n            s_spanY = Math.max(s_spanY, a_spanY);\n        });\n       \n        \n        spanX = Math.max(1, s_spanX);\n        spanY = Math.max(c_spanY, s_spanY);\n        level = this.level + spanY;\n        const { spanY: sy } = this.Endpoint.reflowPreCalculate(level + 1, sequence, callback);\n        spanY += sy;\n        spanY += 1 // 要算上自己\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    makeLink(callback) {\n        let lastc = this;\n        if(this.cases.length) {\n            const consequent = this.cases[this.cases.length - 1].consequent;\n            consequent.forEach((c, idx) => {\n                callback({\n                    from: lastc,\n                    to: c,\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'consequent',\n                });\n                lastc = c.makeLink(callback)\n            });\n        }\n        console.log(lastc)\n        callback({\n            from: lastc,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n        });\n\n        this.cases.forEach((c, idx) => {\n            let lasta = c;\n            c.alternate.forEach(a => {\n                callback({\n                    from: lasta,\n                    to: a,\n                    fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'alternate',\n                });\n                lasta = a.makeLink(callback)\n            })\n            \n            callback({\n                from: lasta,\n                to: this.Endpoint,\n                fromDir: lasta === c ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n                toDir: DIRECTION.RIGHT,\n                part: 'alternate',\n                minSpanX: 32 * (idx + 1),\n            });\n        });\n\n        return this.Endpoint;\n    }\n\n    // makeEndpoint() {\n    //     this.Endpoint = makeAST({\n    //         type: 'endpoint',\n    //         id: `${this.id}-endpoint`,\n    //     });\n    //     this.Endpoint.parent = this.parent;\n    //     this.Endpoint.parentIterateType = this.parentIterateType;     \n    //     this.Endpoint.idx = this.idx;\n    // }\n\n    traverse(callback) {\n        callback(this);\n        this.cases.forEach(n => {\n            n.traverse(callback);\n        });\n        callback(this.Endpoint);\n    }\n\n    getNodes(jflow) {\n        const nodes = [];\n        this.traverse(n => {\n            if(n.type === 'SwitchCase') return\n            const renderNode = jflow.getRenderNodeBySource(n.source);\n            if(renderNode)\n                nodes.push(renderNode);\n        })\n        return nodes;\n    }\n\n    linkSource(source, linkMeta) {\n        const cases = this.source.cases;\n        const consequent = cases[cases.length - 1].consequent;\n        consequent.unshift(source);\n    }\n}\n\nclass ForEachStatement extends BaseNode {\n    \n}\n\nclass WhileStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        this.isLocked = true\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        const nextSequeence = sequence + 1;\n        // level--;\n        this.body.forEach((b) => {\n            const { spanX: sx, spanY: sy } = b.reflowPreCalculate(level + 1, nextSequeence, callback);\n            spanX = Math.max(sx, spanX);\n            spanY += sy;\n            level += sy;\n        });\n\n        this.spanX = spanX + 1;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }\n    }\n\n    makeLink(callback) {\n        let last = this;\n        // const lastIdx = this.body.length - 1;\n        this.body.forEach((b, idx) => {\n            callback({\n                from: last,\n                to: b,\n                part: 'body',\n                fromDir: last === this ? DIRECTION.RIGHT: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            })\n            \n            b = b.makeLink(callback);\n            last = b;\n        });\n        callback({\n            from: last,\n            to: this,\n            part: 'body',\n            fromDir: last === this ? DIRECTION.RIGHT : DIRECTION.BOTTOM,\n            anticlock: last === this,\n            toDir: DIRECTION.BOTTOM,\n            isSelf: true,\n            minSpanX: 20,\n            minSpanY: 20,\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nclass SwitchCase extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n        this.lastCase = false;\n    }\n\n    reflowPreCalculate(level = 0, sequence = 0, callback) {\n        let spanX = 1;\n        let spanY = 1;\n        this.level = level;\n        this.sequence = sequence;\n        if(callback) {\n            callback(level, sequence, this);\n        }\n        \n        let c_spanX = 0;\n        let c_spanY = 0;\n        let a_spanX = 0;\n        let a_spanY = 0;\n        if(this.lastCase) {\n            this.consequent.forEach((c, idx) => {\n                const { spanX: sx, spanY: sy } = c.reflowPreCalculate(level + 1, sequence, callback);\n                c_spanX = Math.max(c_spanX, sx);\n                c_spanY += sy;\n                level += sy;\n            });\n        }\n        \n        const nextSequeence = sequence + Math.max(c_spanX, 1);\n        level = this.level;\n        this.alternate.forEach((a, idx) => {\n            const { spanX: sx, spanY: sy } = a.reflowPreCalculate(level + 1, nextSequeence, callback);\n            a_spanX = Math.max(a_spanX, sx);\n            a_spanY += sy;\n            level += sy;\n        });\n        spanX = Math.max(1, c_spanX + a_spanX);\n        spanY += Math.max(c_spanY, a_spanY);\n\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, level, sequence\n        }       \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(n => {\n            n.traverse(callback);\n        });\n        this.alternate.forEach(n => {\n            n.traverse(callback);\n        });\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n\n    // makeLink()\n}\n \nconst TYPE_MAPPING = {\n    IfStatement,\n    SwitchStatement,\n    SwitchCase,\n    ForEachStatement,\n    WhileStatement,\n    Root,\n    other: BaseNode,\n}\n\nfunction mapFunc(type)  {\n    return function(n, idx) {\n        const p = makeAST(n);\n        p.parent = this;\n        p.idx = idx;\n        p.parentIterateType = type;\n\n        // 重要！！！ weakMap 功能需要 endPoint source 保持一致\n        if(p.hasEndPoint) {\n            if(!n.__endpoint__) {\n                n.__endpoint__ = {\n                    type: 'endpoint',\n                    id: `${p.id}-endpoint`,\n                };\n            }\n            const e = makeAST(n.__endpoint__);\n            e.parent = this;\n            e.idx = idx;\n            e.parentIterateType = type;\n            p.Endpoint = e;\n        }\n        return p;\n    }\n}\nfunction makeAST(source) {\n    const type = source.type;\n    const Constructor = TYPE_MAPPING[type] || TYPE_MAPPING.other;\n    const node = new Constructor(source);\n    return node;\n}\nexport { \n    makeAST,\n}\n\n","import JFlowEvent from '../events'; \nimport { DIRECTION } from '../utils/constance';\nimport { makeAST } from './low-code-types/baseNode';\n\nfunction sqr(x) {\n    return x * x;\n}\nfunction dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n/**\n * @typedef {Object} LowcodeLayout~Configs\n * @property {number} linkLength - 最小连线长度\n * @property {number} gap       - 列间隙\n * @property {boolean} treeItemDraggable - 树上的是否可以拖动\n * @property {Object} ast       - 语法树\n */\n\n/**\n    lowcode layout\n\n    type: \n        + IfStatement,\n        + SwitchStatement,\n        + SwitchCase,\n        + ForEachStatement,\n        + WhileStatement,\n        + Root,\n        + other,\n    \n    * @implements {Layout}\n    * @param {LowcodeLayout~Configs} - 配置\n    \n */\nclass LowcodeLayout {\n    constructor(configs) {\n        /** @member {number}      - 最小连线长度 */\n        this.linkLength = configs.linkLength || 18;\n        /** @member {number}      - 列间隙 */\n        this.gap = configs.gap || 30;\n        /** @member {boolean}      - 树上的是否可以拖动 */\n        this.treeItemDraggable = configs.treeItemDraggable ?? true;\n        this.reOrder(configs.ast);\n        /** @member {boolean}      - true 需要检查元素拖动 */\n        this.static = true;\n    }\n    /**\n     * 从 ast 计算布局\n     * @param {AstNode} ast - ASL 树\n     */\n    reOrder(ast) {\n        this.ast = ast;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n\n        this.root = makeAST(this.ast)// new AstNode(this.ast, this.flowStack, true);\n        this.root.traverse((node) => {\n            if(node.parentIterateType !== 'playground') {\n                node.isDraggable = this.treeItemDraggable\n            }\n            this.flowStack.push({\n                type: node.type,\n                source: node.source,\n                layoutNode: node,\n            });\n        });\n\n        const layoutMapping = {\n            vertical: {},\n            horizontal: {},\n        };\n        const playgroundLayoutMapping = {}\n        this.root.reflowBodyPreCalculate(0, 0, (level, sequence, node) => {\n            if(!node.isroot) {\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            }\n        });\n\n        let currentTopNodeId;\n        this.root.reflowPlaygroundPreCalculate(\n            (topNode) => {\n                currentTopNodeId = topNode.id;\n                playgroundLayoutMapping[topNode.id] = {\n                    vertical: {},\n                    horizontal: {},\n                    node: topNode,\n                }\n            },\n            (level, sequence, node) => {\n                const layoutMapping = playgroundLayoutMapping[currentTopNodeId];\n                if(!layoutMapping.vertical[level]){\n                    layoutMapping.vertical[level] = {};\n                }\n                layoutMapping.vertical[level][sequence] = node;\n                \n                if(!layoutMapping.horizontal[sequence]){\n                    layoutMapping.horizontal[sequence] = {};\n                }\n                layoutMapping.horizontal[sequence][level] = node;\n            })\n\n        this.layoutMapping = layoutMapping;\n        this.playgroundLayoutMapping = playgroundLayoutMapping;\n        this.root.makeLink((configs) => {\n            this.flowLinkStack.push(configs)\n        })\n    }\n\n    staticCheck(instance, jflow) {\n\n        if(instance._layoutNode && instance._layoutNode.isFree) {\n            return false;\n        }\n        const finded = jflow._linkStack.find(l => l.from === instance || l.to === instance);\n        if(!finded) {\n            return false;\n        }\n        const nowAnchor = instance.anchor.slice();\n        jflow.reflow();\n        if(jflow._linkStack.length < 2) return;\n        const currentAnchor = instance.anchor;\n        const d = dist2(nowAnchor, currentAnchor);\n        if(d > 1000) {\n            instance.dispatchEvent(new JFlowEvent('outOfFlow', {\n                anchor: nowAnchor,\n                instance,\n                jflow,\n                point: nowAnchor,\n            }))\n            return true;\n        }\n        return false;\n    }\n\n    reflowByMapping(jflow, layoutMapping, x = 0, y = 0) {\n        const linkLength = this.linkLength;\n        const gap = this.gap;\n        const {\n            vertical: verticalMapping,\n            horizontal: horizontalMapping,\n        } = layoutMapping;\n\n        let reduceWidth = x;\n        Object.keys(horizontalMapping).forEach((columnNumber, idx) => {\n            const column = horizontalMapping[columnNumber];\n            let rowWidth = 0;\n            const rows = Object.keys(column)\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source) // ast.getJflowInstance();\n                const { width } = instance.getBoundingDimension();\n                rowWidth = Math.max(width, rowWidth);\n            });\n            reduceWidth += idx === 0 ? 0: rowWidth/2\n            rows.forEach(rowNumber => {\n                const ast = column[rowNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                instance.anchor[0] = reduceWidth;\n            });\n            reduceWidth += (rowWidth/2 + gap) ;\n        });\n\n        let reduceHeight = y;\n        // console.log(verticalMapping)\n        Object.keys(verticalMapping).forEach((rowNumber, idx) => {\n            const row = verticalMapping[rowNumber];\n            let rowHeight = 0;\n            const columns = Object.keys(row)\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                const { height, width } = instance.getBoundingDimension();\n                rowHeight = Math.max(height, rowHeight);\n            });\n            reduceHeight += idx === 0 ? 0 : rowHeight/2;\n            columns.forEach(columnNumber => {\n                const ast = row[columnNumber];\n                const instance = jflow.getRenderNodeBySource(ast.source);\n                instance.anchor[1] = reduceHeight;\n            });\n            reduceHeight += (rowHeight/2 + linkLength) ;\n        });\n        \n    }\n\n    findLayoutNode(configs) {\n        const finded = this.flowStack.find(node => node.configs === configs);\n        if(finded) {\n            return finded.layoutMeta;\n        }\n        return null;\n    }\n\n    reflow(jflow){\n        this.reflowByMapping(jflow, this.layoutMapping);\n        Object.values(this.playgroundLayoutMapping).forEach(mapping => {\n            // const node = mapping.node.getJflowInstance();\n            const node = jflow.getRenderNodeBySource(mapping.node.source)\n            this.reflowByMapping(jflow, mapping, node.anchor[0], node.anchor[1]);\n        })\n    }\n}\n\nexport default LowcodeLayout;","import { DIRECTION } from '../../utils/constance';\nfunction getRelationShip(p1, p2) {\n    if(p1.type === 'Array' && p2.type !== 'Array') {\n        return '多对一'\n    }\n    if(p2.type === 'Array' && p1.type !== 'Array') {\n        return '一对多'\n    }\n    if(p1.type === 'Array' && p2.type === 'Array') {\n        return '多对多'\n    }\n    if(p1.type !== 'Array' && p2.type !== 'Array') {\n        return '一对一'\n    }\n}\n/**\n    ER property Node\n    * @implements {LayoutNode}\n */\nclass ERProperty {\n    constructor(source, node, isNavigation) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERProperty';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        this.node = node;\n        this.ref = source.ref;\n        this.type = source.type;\n        this.association = source.association;\n        /** @member {String}      - 唯一标识 */\n        this.id = isNavigation ? `${node.id}-${source.name}-navigation` : `${node.id}-${source.name}`\n        this._selfLink = false;\n        this.parentPropertyRef = undefined;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        this.doubleRef = undefined;\n    }\n}\n/**\n ER Node\n * @implements {LayoutNode}\n * @param {Object} source\n */\nclass ERNode { \n    constructor(source) {\n        /** @member {String}      - 布局节点类型 */\n        this.type = 'ERNode';\n        /** @member {Object}      - 数据源 */\n        this.source = source;\n        /** @member {String}      - 唯一标识 */\n        this.id = source.name;\n        /** @member {Boolean}      - true, 可拖动 */\n        this.isDraggable = true;\n        /** @member {LayoutNode~getJflowInstance}      - 获取jflow对象 */\n        this.getJflowInstance = undefined;\n        // this.adjacencyList = []\n        this.propertyList = source.propertyList.map(p => new ERProperty(p, this));\n        this.navigationPropertyList = source.navigationPropertyList.map(p => new ERProperty(p, this, true))\n        this.idProperty = this.propertyList.find(p => p.source.name === 'id');\n        // this.VertexNameProperty = this.propertyList.find(p => p.source.type === 'VertexName');\n    }\n\n    _traverseProperty(nodeMap) {\n        this.propertyList.forEach(property => {\n            const idRef = property.source.idRef; // 决定链接的对象\n            const isParentRef = property.source.isParentRef; // 决定连接的性质\n            if(idRef && property.source.type !== 'Array' && nodeMap[idRef]) {\n                const parentRef = nodeMap[idRef];\n                if (property.source.isParentRef) {\n                    this.parentRef = parentRef;\n                }\n                if (parentRef === this) {\n                    property._selfLink = true;\n                }\n                property.parentPropertyRef = parentRef.idProperty;\n            }\n        });\n        this.navigationPropertyList.forEach(property => {\n            const objectRef = property.source.objectRef;\n            if(objectRef && nodeMap[objectRef]) {\n                const node = nodeMap[objectRef];\n                const targetProperty = node.navigationPropertyList.find(n => n.source.objectRef === this.id)\n                if (node === this) {\n                    property._selfLink = true;\n                }\n                property.doubleRef = targetProperty;\n            }\n        })\n        \n    }\n\n    traverse(callback) {\n        callback(this);\n        this.propertyList.forEach(property => {\n            if(property.ref instanceof ERNode) {\n                callback(property);\n            }\n        })\n    }\n\n    makeLink(callback) {\n        this.propertyList.forEach(property => {\n            if(property.parentPropertyRef instanceof ERProperty) {\n                const toProperty = property.parentPropertyRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.LEFT,\n                        content: property.association,\n                        minSpanX: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                }\n            }\n        });\n\n        \n        this.navigationPropertyList.forEach(property => {\n            if(property.doubleRef instanceof ERProperty) {\n                const toProperty = property.doubleRef;\n                if(property._selfLink) {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        fromDir: DIRECTION.LEFT,\n                        toDir: DIRECTION.TOP,\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        minSpanX: 80,\n                        minSpanY: 80,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                        }\n                    });\n                } else {\n                    callback({\n                        from: property.id,\n                        to: toProperty.id,\n                        part: 'property',\n                        lineDash: [10, 5],\n                        doubleLink: true,\n                        content: property.association,\n                        meta: {\n                            from: property,\n                            to: toProperty,\n                            isObjectRef: true,\n                        }\n                    });\n                }\n            }\n        })\n    }\n}\n\nfunction makeER(source) {\n    const nodeMap = {};\n    const nodes = source.map(s => {\n        const node = new ERNode(s);\n        nodeMap[s.name] = node\n        return node;\n    });\n    nodes.forEach(node => {\n        node._traverseProperty(nodeMap);\n    });\n    return nodes;\n}\nexport { \n    makeER,\n}","\nimport { makeER } from './er-node';\n/**\n * ER source\n * @typedef {Object} ERLayout~sourceConfigs\n * @property {string} type - node\n * @property {string} id - 唯一标识\n * @property {Object[]} properties - 描述\n */\n/**\n * ER布局数据源配置\n * @typedef {Object} ERLayout~Configs\n * @property {ERLayout~sourceConfigs[]} entityRelationship - 关系\n */\n/**\n    ER layout\n\n    Entity Relationship Structure\n    tree = [\n        {\n            type: 'node',\n            id: 'uniqueID',\n            properties: [\n                {\n                    name: 'xxxx',\n                    ref: someUniqueId,\n                    description: 'xxxxxx',\n                },\n                ...\n            ]\n        },\n        ...\n    ]\n    \n    * @implements {Layout}\n */\n\nclass ERLayout {\n    constructor(configs) {\n        /** @member {boolean}      - false 不需要布局变化检查 */\n        this.static = false;\n        /** @member {Layout~NodeMeta[]}      - 布局节点单元数组 */\n        this.flowStack = [];\n        /** @member {Layout~LinkMeta[]}      - 布局连线单元数组 */\n        this.flowLinkStack = [];\n        /** @member {LayoutNode[]}      - 布局节点数组 */\n        this.erNodes = [];\n        this.reOrder(configs.entityRelationship);\n    }\n    /**\n     * 从 tree 计算布局\n     * @param {AstNode} tree - ER 树\n     */\n    reOrder(er) {\n        this.er = er;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n        const nodes = makeER(this.er);\n        const idMap = [];\n        nodes.forEach(node => {\n            node.traverse((n) => {\n                this.flowStack.push({\n                    type: n.type,\n                    configs: n.source,\n                    layoutMeta: n,\n                })\n            });\n            node.makeLink(configs => {\n                const {\n                    from: property,\n                    to: toProperty,\n                    meta,\n                } = configs;\n                if(meta.isObjectRef) {\n                    const id1 = `${property}-${toProperty}`;\n                    const id2 = `${toProperty}-${property}`;\n                    \n                    const fromMeta = meta.from;\n                    if(idMap.includes(id1) || idMap.includes(id2)) {\n                        return;\n                    }\n                    if(!fromMeta.source.isParentRef) {  \n                        idMap.push(id1);\n                        idMap.push(id2);\n                        this.flowLinkStack.push(configs)\n                    }\n                } else {\n                    this.flowLinkStack.push(configs)\n                }\n               \n            })\n        });\n        this.erNodes = nodes;\n    }\n\n    staticCheck(instance, jflow) {\n        return false;\n    }\n\n    reflow(jflow){\n        const links = this.flowLinkStack;\n        const nodes = this.erNodes;\n        let x = 0;\n        const lineMapping = {};\n        const size = 1000;\n        function computeNodeAnchor(node, recorded = []) {\n            let relativeAnchor = [0, 0];\n            \n            \n            if (node.parentRef) {\n                if(recorded.includes(node.parentRef)) {\n                    // debugger;\n                    return [\n                        relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                        relativeAnchor[1]\n                    ];\n                }\n                recorded.push(node.parentRef);\n                \n                relativeAnchor = computeNodeAnchor(node.parentRef, recorded);\n                return [\n                    relativeAnchor[0] - (size/2) + node.source.diagramWeight * size,\n                    relativeAnchor[1] + 600,\n                ];\n            } else {\n                return relativeAnchor;\n            }\n        }\n        this.erNodes.forEach(node => {\n            const instance = node.getJflowInstance();\n            const [nx, ny] = computeNodeAnchor(node);\n            if(!lineMapping[ny]) {\n                lineMapping[ny] = [];\n            }\n            lineMapping[ny].push(node);\n            instance.anchor = [nx + lineMapping[ny].length * 500, ny];\n            x+=300\n        });\n        // debugger\n        // // Kahn’s Algorithm\n        // // Calcuate the incoming degree of each vertex\n        // const vertices = nodes.slice();\n        // debugger\n        // const inDegree = {};\n        // vertices.forEach(v => {\n        //     v.adjacencyList.forEach(p => {\n        //         const name = p.name;\n        //         inDegree[name] = inDegree[name] + 1 || 1;\n        //     })\n            \n        // })\n        // console.log(inDegree)\n        // debugger\n\n        // // Create a queue which stores the vertex without dependencies\n        // const queue = vertices.filter((v) => !inDegree[v.name]);\n        // console.log(queue)\n        // debugger\n        // const topNums = {};\n        // let index = 0;\n        // while (queue.length) {\n        //     const v = queue.shift();\n        //     topNums[v.name] = index++;\n        //     v.adjacencyList.forEach(neighbor => {\n        //         const name = neighbor.name;\n        //         inDegree[name]--;\n        //         if (inDegree[name] === 0) {\n        //             queue.push(neighbor);\n        //         }\n        //     });\n        // }\n        // if (index !== vertices.length) {\n        //     console.log(\"Detect a cycle\");\n        // }\n        // console.log(topNums);\n    }\n}\n\nexport default ERLayout;","import { createCanvas, resizeCanvas } from '../utils/canvas';\nimport { bounding_box, doOverlap } from '../utils/functions';\nimport { JFLOW_MODE } from '../utils/constance';\nimport GhostNode from '../instance/ghostNode';\nimport { NodeWeakMapMixin } from '../instance/nodeWeakMap';\nimport StackMixin from '../instance/stackMixin';\nimport InstanceStack from '../instance/stack';\nimport LayoutMixin from '../instance/layoutMixin';\nimport MessageMixin from '../instance/messageMixin';\nimport AnimeMixin from '../anime/animeMixin';\nimport MiniMapMixin from '../miniMap/minimap-mixin';\nimport ScheduleMixin from './schedule';\nimport { setUniqueId, getUniqueId } from '../utils/functions';\nimport JFlowEvent from '../events';\n\nimport EventAdapter from '../events/adapter';\n\nimport GroupFactory from '../instance/groupFactory';\nimport Point from '../instance/shapes/point';\nimport Rectangle from '../instance/shapes/rectangle';\nimport Capsule from '../instance/shapes/capsule';\nimport CapsuleVertical from '../instance/shapes/capsule-vertical';\nimport Rhombus from '../instance/shapes/rhombus';\nimport Diamond from '../instance/shapes/diamond';\nimport DiamondVertical from '../instance/shapes/diamond-vertical';\n/**\n * @funtion setInitialPosition\n * @param {Number} RealboxX - 内容映射到canvas上的 X\n * @param {Number} RealboxY - 内容映射到canvas上的 Y \n * @param {Number} RealboxW - 内容映射到canvas上的宽度\n * @param {Number} RealboxH - 内容映射到canvas上的高度 \n * @param {Number} CanvasWidth  - 视窗宽度\n * @param {Number} CanvasHeight  - 视窗高度\n * @return {Object} - 初始位置 { x, y }\n */\n\n/**\n * @funtion linkGen\n * @param {Node} from - 出发绘图节点\n * @param {Node} to - 临时节点，当前鼠标指的地方\n * @return {BaseeLink} - 连线对象\n */\n\n\n/** \n * @class Group\n * @classdesc 矩形组单元 由 {@link GroupFactory} 通过 {@link Rectangle} 生成\n * @groupfrom Rectangle\n * @augments GroupTemplate\n * @augments Rectangle\n * @param {(Rectangle~RectangleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const Group = GroupFactory(Rectangle);\n/** \n * @class CapsuleGroup\n * @classdesc 胶囊组单元 由 {@link GroupFactory} 通过 {@link Capsule} 生成\n * @groupfrom Capsule\n * @augments GroupTemplate\n * @augments Capsule\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleGroup = GroupFactory(Capsule);\n/** \n * @class RhombusGroup\n * @classdesc 菱形组单元 由 {@link GroupFactory} 通过 {@link Rhombus} 生成\n * @augments GroupTemplate\n * @augments Rhombus\n * @groupfrom Rhombus\n * @param {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const RhombusGroup = GroupFactory(Rhombus);\n/** \n * @class DiamondGroup\n * @classdesc 钻石形组单元 由 {@link GroupFactory} 通过 {@link Diamond} 生成\n * @groupfrom Diamond\n * @augments GroupTemplate\n * @augments Diamond\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondGroup = GroupFactory(Diamond, {\n    shapeShift(width, height) {\n        return [width + height * 0.28865, height]\n    }\n});\n/** \n * @class DiamondVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link DiamondVertical} 生成\n * @groupfrom DiamondVertical\n * @augments GroupTemplate\n * @augments DiamondVertical\n * @param {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const DiamondVerticalGroup = GroupFactory(DiamondVertical, {\n    shapeShift(width, height) {\n        return [width, height + width * 0.5773]\n    }\n});\n/** \n * @class CapsuleVerticalGroup\n * @classdesc 垂直钻石形组单元 由 {@link GroupFactory} 通过 {@link CapsuleVertical} 生成\n * @groupfrom CapsuleVertical\n * @augments GroupTemplate\n * @augments CapsuleVertical\n * @param {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 配置\n */\nexport const CapsuleVerticalGroup = GroupFactory(CapsuleVertical);\n\nexport const PointGroup = GroupFactory(Point, {\n    shapeShift(width, height, p) {\n        const r = Math.ceil(Math.sqrt(width * width + height * height) / 2);\n        p.radius = r;\n        const w = r * 2;\n        return [w, w];\n    }\n});\n/**\n * @typedef JFlow~JFlowConfigs\n * @type {object}\n * @property {Boolean} allowDrop      - 是否允许 dragdrop\n * @property {Number} maxZoom         - 最大缩放\n * @property {Number} minZoom         - 最小缩放\n * @property {number} initialZoom     - 初始缩放比\n * @property {EventAdapter~pluginDef} eventAdapter\n */\n\n/**\n * @typedef {JFlow~JFlowConfigs | LayoutMixin~LayoutConfigs} JFlow~JFlowLayoutConfigs\n */\n/** \n * JFlow 对象\n * JFlow 是 canvas 上面封装的一个顶层对象，具有处理事件和绘制的功能\n * @constructor JFlow\n * @param {JFlow~JFlowLayoutConfigs} configs - 配置项\n * @mixes LayoutMixin\n * @mixes StackMixin\n * @mixes MessageMixin\n */\nclass JFlow extends EventTarget{\n    constructor(configs) {\n        super();\n        this.uniqueName = 'jflow';\n        /**\n         * @member {EventAdapter} eventAdapter    - eventAdapter 对象\n         **/\n        this.eventAdapter = new EventAdapter(configs.eventAdapter);\n        this.initNodeWeakMap();\n        this.initAnime();\n        this.initStack(configs);\n        this.initLayout(configs);\n        /** @member {Context2d}     - Context2d 对象 */\n        this.ctx = null;\n        /** @member {Element}       - canvas 元素 */\n        this.canvas = null;\n        /** @member {number}       - 设备DPR */\n        this.dpr = 1;\n        /** @member {number}       - 内边距 */\n        this.padding = 20;\n        this.position = null;\n        /** @member {number}     - 缩放 */\n\t\tthis.scale = null;\n        /** @member {number}     - 初始缩放 */\n        this.initialZoom = configs.initialZoom;\n        /** @member {setInitialPosition} - 初始位置计算 */\n        this.initialPosition = configs.setInitialPosition;\n        /** @member {number}     - 最大缩放 */\n        this.maxZoom = configs.maxZoom || 3;\n        /** @member {number}     - 最小缩放 */\n        this.minZoom = configs.minZoom || .5;\n        \n        this.NodeRenderTop = !!configs.NodeRenderTop\n\n        this.worldMargin = configs.worldMargin;\n\t\t// this.initScale = 1;\n\t\t// this.initPosition = null\n\t\tthis.offeset = null;\n        this._lastState = {\n            x: null,\n            y: null,\n            dragging: false,\n            processing: false\n        };\n        this._lastDragState = {\n            target: null,\n            targetLink: null,\n            processing: false,\n        }\n\n        this._target = {\n            instance: null,\n            link: null,\n            moving: null,\n            isInstanceDirty: false, \n            isLinkDirty: false, \n            // isMovingDirty: false, \n            cache: {\n                stack: null,\n                belongs: null,\n                point: null,\n            },\n            meta: {\n                x: undefined,\n                y: undefined,\n                initialX: undefined,\n                initialY: undefined, \n            },\n            status: {\n                dragovering: false,\n                dragging: false,\n                processing: false,\n            }\n        }\n\n        this._focus = {\n            instance: null,\n        }\n\n        this._dragOverTarget = null;\n        // this.lock = configs.lock;\n\n        this.allowDrop = configs.allowDrop;\n        // 临时绘制的对象\n        this._tempNode = null;\n        this._tempLink = null;\n\n        this.mode = JFLOW_MODE.DEFAULT;\n    }\n    /**\n     * 设置当前拖动的 JFlow 对象\n     * @param {Object[]} targets - 具有 anchor 属性的对象\n     */\n    setMovingTargets(targets) {\n        Object.assign(this._target, {\n            moving: targets,       \n        })\n    }\n\n    /**\n     * 设置当前拖动的 JFlow 对象\n     * @param {Instance} instance - JFlow 对象\n     */\n    setTempDraggingInstance(instance) {\n        instance._belongs = this;\n        this._tempNode = instance;\n        Object.assign(this._target, {\n            moving: [this._tempNode],\n            dragging: true,\n        })\n    }\n\n    /**\n     * 取消当前拖动的 JFlow 对象\n     * @return {number[]} point - JFlow 坐标\n     */\n    removeTempDraggingInstance() {\n        if(this._tempNode) {\n            // this.removeFromStack(this._tempNode);\n            const anchor = this._tempNode.anchor;\n            this._tempNode = null;\n            return anchor;\n        }\n    }\n    /**\n     * 在 Document 元素上初始化实例\n     * @param {Element} dom \n     */\n    $mount(dom) {\n        const { \n            canvas, \n            ctx, \n            scale: dpr, \n            width: c_width, \n            height: c_height, \n            raw_width,\n            raw_height,\n            left, top \n        } = createCanvas(dom);\n        this.reflow();\n        this.ctx = ctx;\n        this.DOMwrapper = dom;\n        this.canvas = canvas;\n        this.canvasMeta = {\n            width: raw_width,\n            height: raw_height,\n            actual_width: c_width,\n            actual_height: c_height\n        }\n        this.dpr = dpr;\n        this._createEventHandler();\n        this._getBoundingGroupRect();\n\n        const padding = this.padding;\n        const { width: p_width, height: p_height, x: p_x, y: p_y } = this.bounding_box;\n        const contentBox = {\n            x: padding,\n            y: padding,\n            width: c_width - padding * 2,\n            height: c_height - padding * 2,\n        }\n        const position = { x: 0, y: 0, offsetX: 0, offsetY: 0 };\n        const w_ratio = contentBox.width / p_width;\n        const h_ratio = contentBox.height / p_height;\n        const align = w_ratio <= h_ratio ? 'x' : 'y';\n        let scaleRatio;\n        if(this.initialZoom) {\n            scaleRatio = this.initialZoom;\n        } else {\n            scaleRatio = Math.min(w_ratio, h_ratio);\n        }\n       \n        this.scale = scaleRatio;\n        if(scaleRatio > this.maxZoom) {\n            this.maxZoom = scaleRatio;\n        }\n        if(scaleRatio < this.minZoom) {\n            this.minZoom = scaleRatio;\n        }\n        const realboxX = p_x * scaleRatio;\n        const realboxY = p_y * scaleRatio;\n        const realboxW = contentBox.width;\n        const realboxH = contentBox.height;\n        if(this.initialPosition) {\n            const { x, y } = this.initialPosition(realboxX, realboxY, realboxW, realboxH, contentBox.x, contentBox.y, c_width, c_height, p_x, p_y, p_width, p_height);\n            position.x = x;\n            position.y = y;\n        } else {\n            position.x = align === 'x' ? contentBox.x : (realboxW - p_width * scaleRatio) / 2 + padding\n            position.y = align === 'y' ? contentBox.y : (realboxH - p_height * scaleRatio) / 2 + padding\n        }\n        \n        position.offsetX = position.x - realboxX;\n        position.offsetY = position.y - realboxY;\n        this.position = position;\n        this._readyToRender = true;\n        this._render();\n    }\n\n    /**\n     * 设置Jflow进入连线模式\n     * @param {Object} source - 当前连线的出发原始数据\n     * @param {linkGen} linkGen - 生成连线单元的方法\n     */\n    setLinkingMode(source, linkGen) {\n        const renderNode = this.getRenderNodeBySource(source)\n        this._tempNode = new GhostNode();\n        this._tempLink = linkGen({\n            from: renderNode,\n            to: this._tempNode,\n        })\n        this.sendMessage({\n            instance: source\n        });\n        this.mode = JFLOW_MODE.LINKING;\n    }\n\n    /**\n     * 连线模式下，设置当前临时连线的属性\n     * @param {BaseLink~Configs} configs - 当前连线的出发原始数据\n     */\n    setLinkingLink(configs) {\n        if(this.mode === JFLOW_MODE.LINKING) {\n            this._tempLink.setConfig(configs);\n        }\n    }\n    /**\n     * 连线模式下，重连回临时鼠标节点\n     */\n    resetLinkingLink() {\n        if(this.mode === JFLOW_MODE.LINKING) {\n            this._tempLink.setConfig({\n                to: this._tempNode\n            })\n        }\n    }\n\n    /**\n     * 外层容器大小变化后，调用此方法可以改变当前canvas的状态\n     */\n    resizeCanvas() {\n        const {\n            width: c_width, \n            height: c_height, \n            raw_width,\n            raw_height,\n        } = resizeCanvas(this.canvas, this.DOMwrapper);\n        this.canvasMeta = {\n            width: raw_width,\n            height: raw_height,\n            actual_width: c_width,\n            actual_height: c_height\n        }\n    }\n\n    /**\n     * 移动画布到以目标绘图节点为中心的位置上\n     * @param {Node} node - 绘图节点\n     */\n    focusOn(node) {\n        const center = this._calculatePointBack([\n            this.canvasMeta.actual_width/2,\n            this.canvasMeta.actual_height/2\n        ]);\n        let offset = node.anchor;\n        if(node._belongs.calculateToCoordination) {\n            offset = node._belongs.calculateToCoordination(offset);\n        }\n\n        const deltaX = (center[0] - offset[0]) * this.scale;\n        const deltaY = (center[1] - offset[1]) * this.scale;\n        \n\n        this._recalculatePosition(deltaX, deltaY)\n        this._render();\n    }\n    \n    _getBoundingGroupRect() {\n        const points = this._stack.getBoundingRectPoints();\n        if(this.bounding_box) {\n            this.bounding_box = bounding_box(points);\n            const {\n                x: nowx,\n                y: nowy,\n            } = this.bounding_box;\n            const scale = this.scale;\n            this.position.x = this.position.offsetX + nowx * scale;\n            this.position.y = this.position.offsetY + nowy * scale;\n        } else {\n            this.bounding_box = bounding_box(points);\n        }\n    }\n\n    _createEventHandler() { \n        const canvas = this.canvas;\n        let destroyListener;\n        this.eventAdapter.apply(this);\n        const destroyPlainEventListener = () => {\n            this.eventAdapter.unload(this);\n        }\n        destroyListener = destroyPlainEventListener;\n\n        if(this.allowDrop) {\n            const dragoverHandler = this._onDragover.bind(this);\n            const dropHandler = this._onDrop.bind(this);\n            canvas.addEventListener('dragover', dragoverHandler);\n            canvas.addEventListener('drop', dropHandler);\n            destroyListener = () => {\n                destroyPlainEventListener();\n                canvas.removeEventListener('dragover', dragoverHandler);\n                canvas.removeEventListener('drop', dropHandler);\n            }\n        } \n        this.destroy = destroyListener;\n    }\n\n    _targetLockOn(offsetPoint, event) {\n        let point = this._calculatePointBack(offsetPoint);\n        const topLayerPoint = point;\n        this._currentp = point;\n        let stack = this._stack;\n        const br = this._getViewBox();\n        const target = stack.checkHit(\n            point, \n            // 应用于所有\n            (instance) => {\n                return (this._target.status.dragging \n                    && (instance === this._getMovingTarget()))\n            },\n            // 仅对于本层过滤\n            (instance) => {\n                return doOverlap(br, instance.getBoundingRect())\n            });\n        let linkStack = this._linkStack;\n        let belongs = this;\n        /*\n        if(target) {\n            linkStack = target._belongs._linkStack;\n            point = target._belongs._currentp;\n            stack = target._belongs._stack;\n            belongs = target._belongs\n        }*/\n        // 暂时设定只有顶层有连线\n        let targetLink;\n        if(!target || target._belongs === this) {\n            targetLink = linkStack.checkHit(point, (link) => {\n                if(!this._target.status.dragging) {\n                    return false;\n                }\n                const movingtarget = this._getMovingTarget();\n                return link.from === movingtarget || link.to === movingtarget;\n            });\n        }\n\n        Object.assign(this._target, {\n            instance: target,\n            link: targetLink, \n            isInstanceDirty: target === this._target.instance,\n            isLinkDirty: targetLink === this._target.link,\n        });\n        Object.assign(this._target.cache, {\n            stack,\n            belongs,\n            point,\n            topLayerPoint,\n        })\n        Object.assign(this._target.meta, {\n            x: offsetPoint[0],\n            y: offsetPoint[1],\n        });\n     \n        if(event === 'pressStart' && !this._target.status.dragging && !this._target.status.dragovering) {\n            let movingtarget = target;\n            while (movingtarget && movingtarget._belongs.lock && movingtarget !== this) {\n                movingtarget = movingtarget._belongs;\n            }\n            this.setMovingTargets(movingtarget && [ movingtarget ])\n            if(movingtarget) {\n                target.bubbleEvent(new JFlowEvent('afterResolveMovingTarget', {\n                    event,\n                    target: movingtarget,\n                    jflow: this,\n                    bubbles: true,\n                }))\n            }\n        }\n        return this._target;\n    }\n\n    _getMovingTarget() {\n        return this._target.moving && this._target.moving[0];\n    }\n\n    _processDragOver(instance, event) {\n        if(this._dragOverTarget !== instance) {\n            const target = this.readMessage()?.instance;\n            this._dragCurrentData = target;\n            if(this._dragOverTarget) {\n                const oldIns = this._dragOverTarget;\n                /**\n                * dragleave 退出事件\n                * @event Instance#dragleave\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragleave的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                oldIns.dispatchEvent(new JFlowEvent('dragleave', {\n                    event,\n                    instance: oldIns,\n                    target\n                }));\n            }\n            if(instance) {\n                /**\n                * dragenter 进入事件\n                * @event Instance#dragenter\n                * @type {object}\n                * @property {Event} event           - 原始事件 \n                * @property {Object} instance       - dragenter的对象 \n                * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n                */\n                instance.dispatchEvent(new JFlowEvent('dragenter', {\n                    event,\n                    instance,\n                    target,\n                }));\n            }\n            this._dragOverTarget = instance;\n        } else if(this._dragOverTarget){\n            /**\n            * dragover 进入事件\n            * @event Instance#dragover\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - dragover的对象 \n            * @property {target} target         - drag 携带的对象（特指从外面拖进canvas的对象） \n            */\n            this._dragOverTarget.dispatchEvent(new JFlowEvent('dragover', {\n                event,\n                instance,\n                target: this._dragCurrentData,\n            }));\n        }\n    }\n\n    _onDragover(event) {\n        // console.log(event);\n        event.preventDefault();\n        event.stopPropagation();\n        if(this._lastDragState.processing) return;\n        this._lastDragState.processing = true;\n        const { offsetX, offsetY } = event\n        Object.assign(this._target.status, {\n            dragovering: true,\n        })\n        this._targetLockOn([offsetX, offsetY])\n        const instance = this._target.instance || this._target.link;\n        this._processDragOver(instance, event);\n        if(this._target.isLinkDirty || this._target.isInstanceDirty) {\n            Promise.resolve().then(() => {\n                this._render();    \n                this._target.isLinkDirty = false; \n                this._target.isInstanceDirty = false;\n                this._lastDragState.processing = false;\n            })\n        } else {\n            this._lastDragState.processing = false;\n        } \n    }\n\n    _onDrop(event) {\n        const { offsetX, offsetY, clientX, clientY } = event\n        const payload = this.consumeMessage();\n        const instance = payload.instance;\n        if(this._dragOverTarget) {\n            const oldIns = this._dragOverTarget;\n            oldIns.dispatchEvent(new JFlowEvent('dragoverend', {\n                event,\n                instance: oldIns,\n            }));\n            this._dragOverTarget = null;\n        }\n        const {\n            link,\n            instance: target,\n        } = this._target;\n        const {\n            point, belongs\n        } = this._target.cache;\n        if(link) {   \n            /**\n             * 丢在线上事件\n             *\n             * @event BaseLink#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {BaseLink} link         - 目标连线 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            instance.anchor = point;\n            link.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                link,\n                jflow: this,\n                belongs,\n                point\n            }))\n        } else if(target) {\n            /**\n             * 丢在节点上事件\n             *\n             * @event Node#drop\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Object} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Node} target           - 目标节点\n             * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n             */\n            target.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point\n            }));\n        } else {\n            /**\n            * 丢在主图上事件\n            *\n            * @event JFlow#drop\n            * @type {object}\n            * @property {Event} event           - 原始事件 \n            * @property {Object} instance       - 拖动的对象 \n            * @property {JFlow} jflow           - 当前JFlow对象 \n            * @property {number[]} point        - 已经计算到绘图栈对应坐标系下的坐标\n            */\n            this.dispatchEvent(new JFlowEvent('drop', {\n                event,\n                instance,\n                jflow: this,\n                target,\n                point,\n            }))\n        }\n        requestAnimationFrame(() => {\n            this._target.instance = null;\n            this._target.link = null;\n            Object.assign(this._target.status, {\n               dragovering: false,\n            })\n        })\n    }\n    \n    /**\n     * 缩放操作处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    zoomHandler(offsetX, offsetY, deltaX, deltaY, event) {\n        if(this._zooming) return;\n        this._zooming = true;\n        const { width: p_width, height: p_height, x, y } = this.bounding_box;\n        const { actual_width: cw, actual_height: ch } = this.canvasMeta;\n        let minZoom = this.minZoom;\n        if(this.worldMargin) {\n            const m = this.worldMargin;\n            const maxWidth = p_width + m * 2;\n            const maxHeight = p_height + m * 2;\n            minZoom = Math.max(minZoom, Math.max(cw / maxWidth, ch / maxHeight));\n        }\n        let newScale = this.scale;\n        const amount = deltaY > 0 ? 1.1 : 1 / 1.1;\n        newScale *= amount;\n        newScale = Math.min(this.maxZoom, Math.max(minZoom, newScale))\n        // console.log(newScale);\n        // if (this.maxZoom && newScale > this.maxZoom){\n        //     // could just return but then won't stop exactly at maxZoom\n        //     newScale = this.maxZoom;\n        // }\n\n        // if(this.minZoom && newScale < this.minZoom) {\n        //     newScale = this.minZoom;\n        // }\n\n        var deltaScale    = newScale - this.scale;\n        var currentWidth  = p_width * this.scale;\n        var currentHeight = p_height * this.scale;\n        var deltaWidth    = p_width * deltaScale;\n        var deltaHeight   = p_height * deltaScale;\n\n        var tX = offsetX - this.position.x;\n        var tY = offsetY - this.position.y;\n        var pX = -tX / currentWidth;\n        var pY = -tY / currentHeight;\n\n        this.scale = newScale;\n        this._recalculatePosition(pX * deltaWidth, pY * deltaHeight);\n        \n        // this.position.x += pX * deltaWidth;\n        // this.position.y += pY * deltaHeight;\n        // this.position.offsetX = this.position.x - x * newScale;\n        // this.position.offsetY = this.position.y - y * newScale;\n        this.dispatchEvent(new JFlowEvent('zoompan'));\n        // this.setAnimeClock()\n        this.scheduleRender(() => {\n            this._zooming = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this.setAnimeClock(timestamp);\n        //     this._render();\n        //     this._zooming = false;\n        // })\n    }\n    /**\n     * 平移画布操作处理函数\n     * @param {Number} deltaX  - 水平滚动量\n     * @param {Number} deltaY  - 垂直滚动量\n     * @param {Number} event - 原生事件\n     */\n    panHandler(deltaX, deltaY, event) {\n        if(this._panning) return;\n        this._panning = true;\n        this._recalculatePosition(deltaX, deltaY);\n        /**\n         * 缩放平移事件\n         *\n         * @event JFlow#zoompan\n        */\n        this.dispatchEvent(new JFlowEvent('zoompan'));\n        this.scheduleRender(() => {\n            this._panning = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this.setAnimeClock(timestamp);\n        //     this._render();\n        //     this._panning = false;\n        // })\n    }\n    /**\n     * 开始按压处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressStartHandler(offsetX, offsetY, event) {\n        Object.assign(this._target.meta, {\n            initialX: offsetX,\n            initialY: offsetY,\n        })\n        this._targetLockOn([offsetX, offsetY], 'pressStart');\n        // 后续只支持 click 动作\n        if(this.mode === JFLOW_MODE.LINKING) return;\n        Object.assign(this._target.status, {\n            dragging: true,\n            processing: false,\n        });\n        if(this._target.moving) {\n            const moving = this._getMovingTarget();\n            /**\n             * 开始拖动组的事件（特指lock的顶层组）\n             *\n             * @event Node#pressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance       - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             */\n            moving.dispatchEvent(new JFlowEvent('pressStart', {\n                event,\n                instance: moving,\n                jflow: this,\n            }))\n        }\n\n        if(this._target.instance) {\n            /**\n             * 开始拖动对象事件（就是目标对象的拖动事件，事件支持冒泡）\n             *\n             * @event Node#instancePressStart\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Node} instance     - 拖动的对象 \n             * @property {JFlow} jflow           - 当前JFlow对象 \n             * @property {Boolean} bubbles       - 冒泡\n             */\n            const t = this._target.instance;\n            t.bubbleEvent(new JFlowEvent('instancePressStart', {\n                event,\n                target: t,\n                jflow: this,\n                bubbles: true,\n            }))\n        }\n    }\n    /**\n     * 按压中处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    pressMoveHandler(offsetX, offsetY, event) {\n        const {\n            dragging, processing\n        } = this._target.status;\n        const { x, y } = this._target.meta;\n        this.canvas.style.cursor = 'default';\n        if(!dragging && !processing) {\n            const {\n                link,\n                instance\n            } = this._targetLockOn([offsetX, offsetY]);\n            const t = instance || link;\n            if(t) {\n                \n                /**\n                * instance mousemove 原生事件，仅在无拖拽时触发\n                *\n                * @event Node#instancemousemove\n                * @type {object}\n                * @property {Event} event           - 原始事件\n                * @property {Node} instance           - 原始事件\n                * @property {JFlow} jflow           - 当前JFlow对象 \n                */\n                // instance.dispatchEvent(new JFlowEvent('instancemousemove', {\n                //     event,\n                //     instance,\n                //     jflow: this,\n                // }))\n                t.bubbleEvent(new JFlowEvent('instancemousemove', {\n                    event,\n                    instance: t,\n                    jflow: this,\n                    bubbles: true\n                }));\n            }\n\n            if(this.mode === JFLOW_MODE.LINKING) {\n                // if(instance) {\n                //     instance.bubbleEvent(new JFlowEvent('linking', {\n                //         event,\n                //         target: instance,\n                //         jflow: this,\n                //         bubbles: true,\n                //         callback: (p) => {\n                //             this._currentp = p;\n                //         }\n                //     }))\n                // }\n\n                this._tempNode.anchor = this._currentp;\n                \n                this.scheduleRender(() => {\n                    this._target.isLinkDirty = false; \n                    this._target.isInstanceDirty = false;\n                    this._target.status.processing = false;\n                })\n                // requestAnimationFrame((timestamp) => {\n                //     this.setAnimeClock(timestamp);\n                //     this._render();\n                //     this._target.isLinkDirty = false; \n                //     this._target.isInstanceDirty = false;\n                //     this._target.status.processing = false;\n                // })\n                return;\n            }\n        }\n        /**\n         * canvas mousemove 原生事件\n         *\n         * @event JFlow#canvasmousemove\n         * @type {object}\n         * @property {Event} event           - 原始事件\n         * @property {JFlow} jflow           - 当前JFlow对象 \n         */\n        this.dispatchEvent(new JFlowEvent('canvasmousemove', {\n            event,\n            jflow: this,\n        }))\n        \n        if(!dragging) return;\n        this.canvas.style.cursor = 'grabbing';\n        if(processing) return;\n        \n        const movingtarget = this._target.moving;// this._tempNode ? [this._tempNode] : this._target.moving;\n\n        this._target.status.processing = true;\n        const deltaX = offsetX - x;\n        const deltaY = offsetY - y;\n\n        if(movingtarget) {\n            movingtarget.forEach(t => {\n                t.anchor[0] += deltaX / this.scale;\n                t.anchor[1] += deltaY / this.scale;\n            })\n        } else {\n            this._recalculatePosition(deltaX, deltaY);    \n            this.dispatchEvent(new JFlowEvent('zoompan'));\n        }\n        const { instance, link } = this._targetLockOn([offsetX, offsetY]);\n        this._processDragOver(instance || link, event);\n        \n        this.scheduleRender(() => {\n            this._target.isLinkDirty = false; \n            this._target.isInstanceDirty = false;\n            this._target.status.processing = false;\n        })\n        // requestAnimationFrame((timestamp) => {\n        //     this._render();\n        //     this._target.isLinkDirty = false; \n        //     this._target.isInstanceDirty = false;\n        //     this._target.status.processing = false;\n        // })\n    }\n    /**\n     * 按压结束处理函数\n     * @param {Boolean} isDocument - 是否为 document 触发\n     * @param {Number} event - 原生事件\n     */\n    pressUpHanlder(isDocument, event) {\n        const meta = this._target.meta;\n        if(this.mode === JFLOW_MODE.LINKING) {\n            const t = this._target.instance;\n            const payload = this.consumeMessage();\n            // console.log(payload)\n            if(t) {\n                t.bubbleEvent(new JFlowEvent('link', {\n                    event,\n                    target: t,\n                    jflow: this,\n                    payload,\n                    bubbles: true,\n                }))        \n            } else {\n                const { offsetX, offsetY } = event\n                this.dispatchEvent(new JFlowEvent('link', {\n                    event,\n                    jflow: this,\n                    payload,\n                    anchor: this._calculatePointBack([offsetX, offsetY]),\n                }));\n            }\n            this._clearTarget();\n            if(this._tempNode) {\n                this._tempNode.destroy();\n                this._tempNode = null;\n            }\n            if(this._tempLink) {\n                this._tempLink.destroy();\n                this._tempLink = null;\n            }\n            this.mode = JFLOW_MODE.DEFAULT;\n            this._render();\n            return;\n        }\n        // if(meta.initialX === meta.x\n        //     && meta.initialY === meta.y) { \n        //         if(event.target !== this.canvas){\n        //             this._clearTarget();\n        //             return;\n        //         }\n        //         const t = this._target.instance || this._target.link;\n        //         if(t && !isDocument) {\n        //             /**\n        //             * 点击事件（冒泡）\n        //             *\n        //             * @event Node#click\n        //             * @type {object}\n        //             * @property {Event} event          - 原始事件 \n        //             * @property {Instance} target      - 点击的对象 \n        //             * @property {JFlow} jflow          - 当前JFlow对象 \n        //             * @property {Boolean} bubbles      - 冒泡\n        //             */\n        //             t.bubbleEvent(new JFlowEvent('click', {\n        //                 event,\n        //                 target: t,\n        //                 jflow: this,\n        //                 bubbles: true,\n        //             }))\n        //             this._clearTarget();\n        //             this._render();\n        //             return;\n        //         } else {\n        //             /**\n        //             * 点击事件\n        //             *\n        //             * @event JFlow#click\n        //             * @type {object}\n        //             * @property {Event} event          - 原始事件 \n        //             * @property {JFlow} jflow          - 当前JFlow对象 \n        //             */\n        //             this.dispatchEvent(new JFlowEvent('click', {\n        //                 event,\n        //                 jflow: this,\n        //             }));\n        //             this._clearTarget();\n        //             this._render();\n        //             return\n        //         }  \n        // } else \n        if(this._target.moving) {\n            let checkresult = false;\n            if(this._layout.static) {\n                checkresult = this.staticCheck(this._getMovingTarget());\n            }\n\n            if(!checkresult && this._target.link) {\n                const {\n                    point, belongs\n                } = this._target.cache;\n                const link = this._target.link;\n                const instance = this._getMovingTarget();\n                /**\n                 * 拖动到线上事件\n                 *\n                 * @event BaseLink#drop\n                 * @type {object}\n                 * @property {Event} event           - 原始事件 \n                 * @property {Object} instance     - 拖动的对象 \n                 * @property {BaseLink} link         - 目标连线 \n                 * @property {JFlow} jflow           - 当前JFlow对象 \n                 * @property {Group|JFlow} belongs   - 连线所在的绘图栈的对象\n                 */\n                link.dispatchEvent(new JFlowEvent('drop', {\n                    event,\n                    instance,\n                    link,\n                    jflow: this,\n                    belongs,\n                }));\n                this._target.link = null;\n                this._target.instance = null;\n            }\n            if(this._target.moving) {\n                if(this._target.instance) {\n                    /**\n                     * 拖动后放置到 Instance 上的事件，由被拖动到的对象触发\n                     *\n                     * @event Node#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Node} instance         - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     * @property {Instance} target       - 拖动到的对象\n                     * @property {boolean} bubbles       - 冒泡\n                     */\n                    //  console.log('pressEnd', this._target.instance)\n                    this._target.instance.bubbleEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                        target: this._target.instance,\n                        bubbles: true\n                    }));\n                } else {\n                    /**\n                     * 拖动后放置到主图上的事件\n                     *\n                     * @event JFlow#pressEnd\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Instance} instance       - 拖动的对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象 \n                     */\n                    this.dispatchEvent(new JFlowEvent('pressEnd', {\n                        event,\n                        instance: this._getMovingTarget(),\n                        jflow: this,\n                    }))\n                }\n            }\n            this._target.moving = null;\n            this.removeTempDraggingInstance()\n            // this._target.isMovingDirty = false;\n            this._render();\n        }\n        this._clearTarget();\n    }\n     /**\n     * 菜单弹出处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    clickHanlder(offsetX, offsetY, event) {\n        const {\n            link,\n            instance,\n            meta\n        } = this._targetLockOn([offsetX, offsetY]);\n        if(Math.abs(meta.initialX - meta.x) < 1\n            && Math.abs(meta.initialY - meta.y) < 1) { \n                if(event.target !== this.canvas){\n                    this._clearTarget();\n                    Object.assign(this._target.meta, {\n                        initialX: undefined,\n                        initialY: undefined, \n                    });\n                    return;\n                }\n                const { topLayerPoint } = this._target.cache\n                if(instance || link) {\n                    const target = (instance || link);\n                    /**\n                     * 点击事件（冒泡）\n                     *\n                     * @event Instance#contextclick\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {Instance} target       - 右键对象 \n                     * @property {JFlow} jflow           - 当前JFlow对象\n                     * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n                     * @property {Boolean} bubbles       - 冒泡\n                     */\n                    target.bubbleEvent(new JFlowEvent('click', {\n                        event,\n                        jflow: this,\n                        target,\n                        topLayerPoint,\n                        bubbles: true\n                    }));\n                } else {\n                    /**\n                     * 点击事件\n                     *\n                     * @event JFlow#contextclick\n                     * @type {object}\n                     * @property {Event} event           - 原始事件 \n                     * @property {JFlow} jflow           - 当前JFlow对象\n                     * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n                     */\n                    this.dispatchEvent(new JFlowEvent('click', {\n                        event,\n                        jflow: this,\n                        topLayerPoint,\n                    }));\n                }\n                this._clearTarget();\n                Object.assign(this._target.meta, {\n                    initialX: undefined,\n                    initialY: undefined, \n                });\n            }\n    }\n    /**\n     * 菜单弹出处理函数\n     * @param {Number} offsetX - 事件对象与canvas的内填充边（padding edge）在 X 轴方向上的偏移量。\n     * @param {Number} offsetY - 事件对象与canvas的内填充边（padding edge）在 Y 轴方向上的偏移量。 \n     * @param {Number} event - 原生事件\n     */\n    contextMenuHanlder(offsetX, offsetY, event) {\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY]);\n        const { topLayerPoint } = this._target.cache\n        if(instance || link) {\n            const target = (instance || link);\n            /**\n             * 右键事件（冒泡）\n             *\n             * @event Instance#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {Instance} target       - 右键对象 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             * @property {Boolean} bubbles       - 冒泡\n             */\n            target.bubbleEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                target,\n                topLayerPoint,\n                bubbles: true\n            }));\n        } else {\n            /**\n             * 右键事件\n             *\n             * @event JFlow#contextclick\n             * @type {object}\n             * @property {Event} event           - 原始事件 \n             * @property {JFlow} jflow           - 当前JFlow对象\n             * @property {number[]} topLayerPoint  - jflow坐标系上的位置\n             */\n            this.dispatchEvent(new JFlowEvent('contextclick', {\n                event,\n                jflow: this,\n                topLayerPoint,\n            }));\n        }\n    }\n\n    dblclickHandler(offsetX, offsetY, event) {\n        const {\n            link,\n            instance\n        } = this._targetLockOn([offsetX, offsetY]);\n        const { topLayerPoint } = this._target.cache\n        if(instance || link) {\n            const target = (instance || link);\n            target.bubbleEvent(new JFlowEvent('dblclick', {\n                event,\n                jflow: this,\n                target,\n                topLayerPoint,\n                bubbles: true\n            }));\n        } else {\n            this.dispatchEvent(new JFlowEvent('dblclick', {\n                event,\n                jflow: this,\n                topLayerPoint,\n            }));\n        }\n    }\n\n    /*_onZoom(event) {\n        event.preventDefault();\n        let { offsetX, offsetY, deltaX, deltaY } = event\n        if(event.ctrlKey) { \n            deltaY = -deltaY;\n            this.zoomHandler(offsetX, offsetY, deltaX, deltaY);\n        } else {\n            this.panHandler(-deltaX, -deltaY);\n        }\n    }\n\n    _onPressStart(event) { \n        const { offsetX, offsetY, deltaY, button } = event\n        if(button !== 0) return;\n        this.pressStartHandler(offsetX, offsetY);\n    }\n\n    _onPressMove(event) {\n        const { offsetX, offsetY } = event\n        this.pressMoveHandler(offsetX, offsetY);\n    }\n\n    _onPressUp(event, isDocument) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { button } = event\n        if(button !== 0) return;\n        this.pressUpHanlder(isDocument)\n    }\n\n    _onPressUpDocument(event) {\n        this._onPressUp(event, true);\n    }\n\n    _onContextMenu(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const { offsetX, offsetY } = event;\n        this.contextMenuHanlder(offsetX, offsetY);\n    }*/\n\n    _clearTarget(){\n        Object.assign(this._target.meta, {\n            x: undefined,\n            y: undefined,\n            // initialX: undefined,\n            // initialY: undefined, \n        })\n        Object.assign(this._target.status, {\n            dragging: false,\n            processing: false,\n        });\n        Object.assign(this._target, {\n            instance: null,\n            link: null,\n            moving: null,\n        });\n    }\n\n    _recalculatePosition(deltaX, deltaY, scale) {\n        const { x, y, width, height } = this.bounding_box;\n        const { actual_width: cw, actual_height: ch } = this.canvasMeta;\n        if(scale === undefined) {\n            scale = this.scale;\n        }\n        \n\n        if(this.worldMargin) {\n            // console.log(scale)\n            const m = this.worldMargin;\n            const bx1 = (x + width + m)*scale - cw;\n            const bx2 = (x - m)*scale;\n            // console.log(bx1, bx2)\n            const sx = x * scale;\n            const px = this.position.x + deltaX;\n            const cx = px - sx;\n            this.position.offsetX = Math.min(Math.max(-bx1, cx), -bx2);\n            // console.log(this.position.offsetX)\n            // this.position.offsetX = Math.max(Math.min(-bx2, cx), -bx1);\n            this.position.x = this.position.offsetX + sx;\n            // console.log(this.position.x, deltaX)\n            // console.log(this.position.offsetX)\n\n            const by1 = (y + height + m)*scale - ch;\n            const by2 = (y - m)*scale;\n            // console.log(by1, by2)\n            const sy = y * scale;\n            const py = this.position.y + deltaY;\n            const cy = py - sy;\n            this.position.offsetY = Math.min(Math.max(-by1, cy), -by2);\n            // this.position.offsetY = Math.max(Math.min(-by2, cy), -by1);\n            this.position.y = this.position.offsetY + sy;\n        } else {\n            this.position.x += deltaX;\n            this.position.y += deltaY; \n            this.position.offsetX = this.position.x - x * scale;\n            this.position.offsetY = this.position.y - y * scale;\n        }\n        \n    }\n\n    calculateToRealWorld(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [p[0] * scale + position.offsetX, p[1] * scale + position.offsetY]\n    }\n\n    _calculatePointBack(p) {\n        const scale = this.scale;\n        const position = this.position;\n        return [(p[0] - position.offsetX)/scale, (p[1] - position.offsetY) / scale];\n    }\n\n    _calculateDistance(l) {\n        const scale = this.scale;\n        return scale * l;\n    }\n\n    _resetTransform() {\n        const { width: c_width, height: c_height } = this.canvasMeta;\n        const position = this.position;\n        const scale = this.scale;\n        const ctx = this.ctx;\n        ctx.setTransform();\n        ctx.clearRect(0, 0, c_width, c_height);\n        ctx.scale(this.dpr, this.dpr);\n        ctx.transform(scale, 0, 0, scale, position.offsetX, position.offsetY);\n    }\n\n    _getViewBox() {\n        const cacheViewBox = [\n            ...this._calculatePointBack([0,0]),\n            ...this._calculatePointBack([this.canvasMeta.actual_width,this.canvasMeta.actual_height]),\n        ];\n        this._cacheViewBox = cacheViewBox;\n        return cacheViewBox;\n    }\n\n    getCacheViewBox() {\n        return this._cacheViewBox;\n    }\n\n    \n    _render() {\n        this.scheduleRender();\n    }\n\n     /**\n     * 绘制画布\n     */\n    __render() {\n        if(!this._readyToRender) return;\n        // if(this.hasAnimeAndFrameRendered()) return;\n        this.runAnimeFrame();\n        this._resetTransform();\n        const ctx = this.ctx;\n        const br = this._getViewBox();\n        this._viewBox = br;\n        // console.log(this._viewBox)\n        if(this.NodeRenderTop) {\n            this._linkStack.render(ctx, (link) => link.isInViewBox(br));\n            this._stack.render(ctx, (instance) => {\n                const result = doOverlap(br, instance.getBoundingRect());\n                // console.log(instance._layoutNode.type, result)\n                instance._isInViewBox = result;\n                return result;\n            });\n        } else {\n            this._stack.render(ctx, (instance) => {\n                const result = doOverlap(br, instance.getBoundingRect());\n                // console.log(instance._layoutNode.type, result)\n                instance._isInViewBox = result;\n                return result;\n            });\n            this._linkStack.render(ctx, (link) => link.isInViewBox(br));\n        }\n        if(this._tempNode) {\n            ctx.save();\n            this._tempNode.render(ctx)\n            ctx.restore();\n        }\n        if(this._tempLink) {\n            ctx.save();\n            this._tempLink.isInViewBox(br)\n            this._tempLink.render(ctx)\n            ctx.restore();\n        }\n        // this.setFrameRendered();\n    }\n}\nObject.assign(JFlow.prototype, MessageMixin);\nObject.assign(JFlow.prototype, StackMixin);\nObject.assign(JFlow.prototype, LayoutMixin);\nObject.assign(JFlow.prototype, NodeWeakMapMixin);\nObject.assign(JFlow.prototype, AnimeMixin);\nObject.assign(JFlow.prototype, MiniMapMixin);\nObject.assign(JFlow.prototype, ScheduleMixin);\n\nexport default JFlow;\nexport { JFLOW_MODE } from '../utils/constance';\nexport { default as JFlowEvent } from '../events';\nexport { default as commonEventAdapter } from '../events/commonAdapter';\nexport { default as Instance } from '../instance/instance';\nexport { default as Node } from '../instance/node';\nexport { default as BaseLink } from '../instance/base-link';\nexport { default as Point } from '../instance/shapes/point';\nexport { default as Rectangle } from '../instance/shapes/rectangle';\n// export { default as Group } from '../instance/shapes/rectangle-group';\nexport { default as Capsule } from '../instance/shapes/capsule';\nexport { default as CapsuleVertical } from '../instance/shapes/capsule-vertical';\n// export { default as CapsuleGroup } from '../instance/shapes/capsule-group';\n// export { default as CapsuleVerticalGroup } from '../instance/shapes/capsule-vertical-group';\nexport { default as Diamond } from '../instance/shapes/diamond';\n// export { default as DiamondGroup } from '../instance/shapes/diamond-group';\n// export { default as DiamondVerticalGroup } from '../instance/shapes/diamond-vertical-group';\nexport { default as Rhombus } from '../instance/shapes/rhombus';\n// export { default as RhombusGroup } from '../instance/shapes/rhombus-group';\nexport { default as Text } from '../instance/text';\nexport { default as Icon } from '../instance/image';\nexport { default as ShadowDom } from '../instance/shadowDom';\nexport { default as GroupFactory } from '../instance/groupFactory';\nexport { default as Link } from '../instance/link';\nexport { default as PolyLink } from '../instance/poly-link';\nexport { default as BezierLink } from '../instance/bezier-link';\nexport { default as LinearLayout} from '../layout/linear-layout';\n// export { default as TreeLayout } from '../ler-layouta;yout/tree-layout';\nexport { default as Lowcodelayout } from '../layout/low-code-layout';\nexport { default as ERLayout } from '../layout/er-layout/er-layout';\n// export { default as Orange } from '../instance/nodeWrapper/orange/orange'\n","export default {\n    provide(){\n        return {\n            addToStack: this.addToStack,\n            addToLinkStack: this.addToLinkStack,\n            removeFromStack: this.removeFromStack,\n            removeFromLinkStack: this.removeFromLinkStack,\n        }\n    },\n    data() {\n        return {\n            stack: [], // 主要是为了连线\n        }\n    },\n    methods: {\n        addToStack(instance, source) {\n            this._jflowInstance.addToStack(instance);\n            if(source) {\n                instance._jflow.setRenderNodeBySource(source, instance)\n            }\n        },\n        addToLinkStack(link) {\n            this._jflowInstance.addToLinkStack(link);\n        },\n        removeFromStack(instance) {\n            this._jflowInstance.removeFromStack(instance);\n        },\n        removeFromLinkStack(link) {\n            this._jflowInstance.removeFromLinkStack(link);\n        },\n        onStackChangeHandler() {\n            this._jflowInstance.recalculate();\n            this._jflowInstance.reflow();\n        }\n    }\n}","import JFlow from '../../core/flow';\nimport StackMixin from './StackMixin';\n/**\n * typs#slot 中的属性 \n * @typedef {Object} j-jflow-Node\n * @property {string}       type   - 布局节点类型\n * @property {Object}       configs  - 源数据\n * @property {LayoutNode}   meta   - 布局节点\n */\n/**\n * JFlow {@link JFlow} 的 vue 封装 \n * @module j-jflow\n * @property {JFlow~JFlowConfigs} configs - 传给 JFlow 的配置\n * @property {Boolean} loading            - 初始渲染状态，支持 sync\n */\nexport default {\n    mixins: [StackMixin],\n    provide(){\n        return {\n            renderJFlow: this.renderJFlow,\n            getJFlow: this.getInstance,\n        }\n    },\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        loading: Boolean,\n        genVueComponentKey: {\n            type: Function,\n        }\n    },\n    data() {\n        return {\n            // nodes: [],\n            // links: [],\n            renderNodes: [],\n            renderLinks: [],\n        }\n    },\n    render: function (createElement) {\n        if(!this.renderNodes.length) {\n            return createElement('div', this.$slots.default);\n        } else {\n            const vnodes = this.renderNodes.map(({ type, source, layoutNode }) => {\n                if(!this.$scopedSlots[type]) {\n                    if(this.$scopedSlots['jflowcommon']){\n                        type = 'jflowcommon';\n                    } else {\n                        return\n                    }\n                }\n                if(layoutNode.__vnode__) {\n                    return layoutNode.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ source, layoutNode });\n                if(this.genVueComponentKey) {\n                    vnode.key = this.genVueComponentKey(source);\n                }\n                \n                layoutNode.__vnode__ = vnode;\n                return vnode;\n            });\n            const vlinks = this.renderLinks.map(meta => {\n                let type = meta.type || 'plainlink'\n                if(!this.$scopedSlots[type]) {\n                    return null;\n                }\n                if(meta.__vnode__) {\n                    return meta.__vnode__;\n                }\n                const [vnode] = this.$scopedSlots[type]({ configs: meta });\n                if(this.genVueComponentKey) {\n                    const k1 = this.genVueComponentKey(meta.from.source);\n                    const k2 = this.genVueComponentKey(meta.to.source);\n                    const k3 = meta.part;\n                    vnode.key = `${k1}-${k2}-${k3}`\n                }\n                meta.__vnode__ = vnode;\n                return vnode\n            })\n\n            return createElement('div', [...vnodes, ...vlinks]);\n        }\n        \n    },\n    created() {\n        this._jflowInstance = new JFlow(this.configs);\n        this.genNodeLinkMeta();\n        this.loadingNodes();\n    },\n    beforeDestroy() {\n        this._jflowInstance.destroy();\n    },\n    methods: {\n        loadingNodes() {\n            this.$emit('update:loading', true)\n            let i = 0;\n            const tl = () => {\n                const end = i + 100;\n                const linkPart = this.links.slice(i, end);\n                if(linkPart.length) {\n                    // this.renderLinks.splice(this.renderLinks.length,  0, ...linkPart);\n                    this.renderLinks = this.renderLinks.concat(linkPart); // faster\n                    i = end;\n                    requestAnimationFrame(tl);\n                } else {\n                    requestAnimationFrame(this.mountJFlow.bind(this));\n                }\n            }\n            const tn = () => {\n                const end = i + 100;\n                const part = this.nodes.slice(i, end);\n                if(part.length) {\n                    // this.renderNodes.splice(this.renderNodes.length,  0, ...part);\n                    this.renderNodes = this.renderNodes.concat(part);\n                    i = end;\n                    requestAnimationFrame(tn);\n                } else {\n                    i = 0;\n                    requestAnimationFrame(tl)\n                }\n            }\n            requestAnimationFrame(tn)\n        },\n        mountJFlow() {\n            this._jflowInstance.$mount(this.$el);\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            this.$emit('update:loading', false)\n        },\n        genNodeLinkMeta() {\n            /** \n            * @member {j-jflow-Node[]} nodes\n            */\n            this.nodes = this._jflowInstance._layout.flowStack.map(meta => {\n                const { type, layoutNode, source } = meta;\n                const map = this._jflowInstance.source_Layout_Render_NodeMap;\n                let obj;\n                if(map.has(source)) {\n                    obj = map.get(source);\n                } else {\n                    obj = map.set(source);\n                }\n                obj.layoutNode = layoutNode;\n                return meta;\n            });\n            /** \n            * @member {Layout~LinkMeta[]} links\n            */\n            this.links = this._jflowInstance._layout.flowLinkStack.slice();\n        },\n        syncNodeLink() {\n            this.renderNodes = this.nodes.slice();\n            this.renderLinks = this.links.slice();\n        },\n        /**\n         * 绘制之前，vnode渲染之后\n         * @name j-jflow~preCallback\n         * @function\n         */\n        /**\n         * 重排\n         * @param {j-jflow~preCallback} preCallback - JFlow 绘制之前，vnode渲染之后\n         */\n        reflow(preCallback, afterCallback) {\n            this.genNodeLinkMeta();\n            this.syncNodeLink();\n            this.$nextTick(() => {\n                if(preCallback) {\n                    preCallback();\n                }\n                this._jflowInstance.recalculate();\n                this._jflowInstance.scheduleRender(() => {\n                    if(afterCallback) {\n                        afterCallback();\n                    }\n                });\n                \n            })\n        },\n        /**\n         * 获取单签 JFlow 实例\n         * @return {Jflow} - JFlow对象\n         */\n        getInstance() {\n            return this._jflowInstance;\n        },\n        /**\n         * 手动触发绘制\n         */\n        renderJFlow() {\n            if(this.__renderInSchedule__) {\n                return;\n            }\n            this.__renderInSchedule__ = true;\n            this.$nextTick(() => {\n                this._jflowInstance._render();\n                this.__renderInSchedule__ = false;\n            });\n        },\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport diff from 'object-diff';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inject: ['addToStack', 'removeFromStack'],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                // console.log(val, JSON.stringify(val) === JSON.stringify(oldVal), )\n                const diffed = diff(val, oldVal);\n                if(Object.keys(diffed).length === 0){\n                    return;\n                }\n                //\n                // const reflowKeys = Object.keys(diffed).filter(k => {\n                //     const lk = k.toLowerCase();\n                //     return !(lk.endsWith('color') || k.endsWith('style'));\n                // });\n                this._jflowInstance.setConfig(val);\n                // console.log('recalculateUp')\n                // this._jflowInstance.recalculateUp();\n                // console.log(reflowKeys.length, val)\n                // if(reflowKeys.length) {\n                //     this._jflowInstance._belongs.recalculateUp();\n                // }\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            },\n            source(val) {\n                this._jflowInstance._jflow.setRenderNodeBySource(val, this._jflowInstance);\n            }\n        },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            this.bindListeners();\n            this.addToStack(this._jflowInstance, this.source);\n        },\n        // updated() {\n        //     console.log('recalculateUp')\n\n        // },\n        destroyed() {\n            this._jflowInstance.destroy();\n            this.removeFromStack(this._jflowInstance);\n        },\n        methods: {\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\n/**\n * JFlow {@link BaseLink} 的 vue 封装 \n * @module jflow-link\n * @property {BaseLink~Configs} configs - 传给 BseLink 的配置, from, to属性会被替换为jflowid对应的 Instance\n * @property {String} from - source\n * @property {String} to - source\n */\nexport default function (nameNode, isLink) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inject: [ 'addToLinkStack', 'removeFromLinkStack', 'getJFlow' ],\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            from: Object,\n            to: Object,\n        },\n        // watch: {\n        //     from() {\n        //         this.resetLink();\n        //     },\n        //     to() {\n        //         this.resetLink();\n        //     },\n        //     configs(val, oldVal) {\n        //         this.setConfig(val);\n        //     },\n        // },\n        render: function (createElement) {\n            return null;\n        },\n        created() {\n            const jflow = this.getJFlow();\n            const fromInstance = jflow.getRenderNodeBySource(this.from);\n            const toInstance = jflow.getRenderNodeBySource(this.to);\n            // const key = this.$vnode.key;\n            if(fromInstance && toInstance) {\n                this._jflowInstance = new builder({\n                    ...this.configs,\n                    from: fromInstance,\n                    to: toInstance,\n                });\n                this.bindListeners();\n                this.addToLinkStack(this._jflowInstance);   \n            }\n        },\n        mounted() {\n            this.unwatch = this.$watch(() => [this.from, this.to, this.configs], () => {\n                this.refreshConfig();\n            })\n        },\n        methods: {\n            refreshConfig() {\n                const jflow = this.getJFlow();\n                const fromInstance = jflow.getRenderNodeBySource(this.from);\n                const toInstance = jflow.getRenderNodeBySource(this.to);\n                this._jflowInstance.setConfig({\n                    ...this.configs,\n                    from: fromInstance,\n                    to: toInstance,\n                });\n            },\n            // setConfig(val) {\n            //     const conf = {};\n            //     Object.keys(val).forEach(k => {\n            //         if(k !=='from' && k !== 'to'){\n            //             conf[k] = val[k];\n            //         }\n            //     })\n            //     this._jflowInstance.setConfig(conf);\n            // },\n            // resetLink() {\n            //     const jflow = this.getJFlow();\n            //     const fromInstance = jflow.getRenderNodeBySource(this.from);\n            //     const toInstance = jflow.getRenderNodeBySource(this.to);\n            //     this._jflowInstance.from = fromInstance;\n            //     this._jflowInstance.to = toInstance;\n            // },\n            bindListeners() {\n                Object.keys(this.$listeners).map(event => {\n                    const func = this.$listeners[event];\n                    this._jflowInstance.addEventListener(event, func);\n                })\n            }\n        },\n        destroyed() {\n            this.unwatch();\n            if(this._jflowInstance) {\n                this.removeFromLinkStack(this._jflowInstance);\n            }\n        }\n    }\n}","import * as JFlowInstance from '../../core/flow';\nimport StackMixin from './StackMixin';\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        mixins: [StackMixin],\n        inject: {\n            addToBelongStack: {\n                from: 'addToStack',\n            },\n            removeFromBelongStack: {\n                from: 'removeFromStack',\n            },\n            renderJFlow: {\n                from: 'renderJFlow',\n            },\n        },\n        render: function (createElement) {\n            return createElement('jflow-group', this.$slots.default);\n        },\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        watch: {\n            configs(val, oldVal) {\n                if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                    return;\n                }\n                this._jflowInstance.setConfig(val);\n                // this._jflowInstance._jflow._render();\n            },\n            '$listeners' (val, oldVal) {\n                let news = [];\n                let deletes = [];\n                const vnew = Object.keys(val).map(e => ({ event: e, handler: val[e] }));\n                const vold = Object.keys(oldVal).map(e => ({ event: e, handler: oldVal[e] }));\n                vnew.forEach((v) => {\n                    const hnew = v.handler;\n                    if(!vold.find((q) => q.handler === hnew)) {\n                        news.push(v);\n                    }\n                });\n                vold.forEach((v) => {\n                    const hold = v.handler;\n                    if(!vnew.find((q) => q.handler === hold)) {\n                        deletes.push(v);\n                    }\n                });\n\n                news.forEach((v) => {\n                    this._jflowInstance.addEventListener(v.event, v.handler);\n                });\n                deletes.forEach((v) => {\n                    this._jflowInstance.removeEventListener(v.event, v.handler);\n                });\n            },\n            visible(val) {\n                this._jflowInstance.visible = val;\n                // this._jflowInstance._belongs.recalculateUp();\n                // this._jflowInstance._jflow._render();\n            },\n            source(val) {\n                this._jflowInstance._jflow.setRenderNodeBySource(val, this._jflowInstance);\n            }\n        },\n        created() {\n            this._jflowInstance =  new builder(this.configs);\n            this._jflowInstance.visible = this.visible;\n            Object.keys(this.$listeners).map(event => {\n                const func = this.$listeners[event].bind(this);\n                this._jflowInstance.addEventListener(event, func);\n            })\n            this.addToBelongStack(this._jflowInstance, this.source);\n        },\n        mounted(){\n            this._jflowInstance.recalculate();\n        },\n        updated() {\n            this._jflowInstance.recalculateUp();\n        },\n        destroyed() {\n            this._jflowInstance.destroy();\n            this.removeFromBelongStack(this._jflowInstance);\n        },\n    }\n}","// import JFlowComponent from './components/JFlow';\nimport JFlowComponent from './components/JFlow';\nimport JFlowInstance from './components/JFlowInstance';\nimport JFlowLink from './components/JFlowLink';\nimport JFlowGroup from './components/JFlowGroup';\n \nconst JFLOW_NODES = [\n    /**\n     * JFlow {@link Point} 的 vue 封装 \n     * @module j-point\n     * @property {Point~PointConfigs} configs - 传给 Point 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Point',\n    /**\n     * JFlow {@link Rectangle} 的 vue 封装 \n     * @module j-rectangle\n     * @property {Rectangle~RectangleConfigs|GroupTemplate~GroupConfigs} configs - 传给 Rectangle 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rectangle',\n    /**\n     * JFlow {@link Capsule} 的 vue 封装 \n     * @module j-capsule\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Capsule 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Capsule',\n    /**\n     * JFlow {@link Diamond} 的 vue 封装 \n     * @module j-diamond\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Diamond',\n    /**\n     * JFlow {@link Rhombus} 的 vue 封装 \n     * @module j-rhombus\n     * @property {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 传给 Diamond 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Rhombus',\n    /**\n     * JFlow {@link Text} 的 vue 封装 \n     * @module j-text\n     * @property {Text~TextConfigs} configs - 传给 Text 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Text',\n    /**\n     * JFlow {@link Icon} 的 vue 封装 \n     * @module j-icon\n     * @property {Icon~IconConfigs} configs - 传给 Icon 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'Icon',\n\n    'ShadowDom',\n];\n/**\n * @typedef {BezierLink~Configs} j-bezier-link~Configs\n * @property {String} from   - 起始单元 jflowId\n * @property {String} to     - 终止单元 jflowId\n */\nconst JFLOW_LINKS = [\n    'Link',\n    'PolyLink',\n    \n    /**\n     * JFlow {@link BezierLink} 的 vue 封装 \n     * @module j-bezier-link\n     * @property {BezierLink~Configs} configs - 传给 BezierLink 的配置\n     */\n    'BezierLink'\n]\nconst JFLOW_GROUPS = [\n    /**\n     * JFlow {@link CapsuleGroup} 的 vue 封装 \n     * @module j-capsule-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleGroup',\n    /**\n     * JFlow {@link CapsuleVerticalGroup} 的 vue 封装 \n     * @module j-capsule-vertical-group\n     * @property {(Capsule~CapsuleConfigs|GroupTemplate~GroupConfigs)} configs - 传给 CapsuleVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'CapsuleVerticalGroup',\n    /**\n     * JFlow {@link DiamondGroup} 的 vue 封装 \n     * @module j-diamond-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondGroup',\n    /**\n     * JFlow {@link DiamondVerticalGroup} 的 vue 封装 \n     * @module j-diamond-vertical-group\n     * @property {(Diamond~DiamondConfigs|GroupTemplate~GroupConfigs)} configs - 传给 DiamondVerticalGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'DiamondVerticalGroup',\n    /**\n     * JFlow {@link RhombusGroup} 的 vue 封装 \n     * @module j-rhombus-group\n     * @property {(Rhombus~RhombusConfigs|GroupTemplate~GroupConfigs)} configs - 传给 RhombusGroup 的配置\n     * @property {Boolean} visible - 可见状态\n     * @property {String} jflowId - 全局唯一ID，用于连线单元\n     */\n    'RhombusGroup',\n\n    'PointGroup',\n]\n\nconst components = [\n    {\n        name: 'Jflow',\n        component: JFlowComponent,\n    },\n    {\n        /**\n         * JFlow {@link RectangleGroup} 的 vue 封装 \n         * @module j-group\n         * @property {RectangleGroup~RectangleGroupConfigs} configs - 传给 RectangleGroup 的配置\n         */\n        name: 'Group',\n        component: JFlowGroup('Group'),\n    }, \n    ...JFLOW_GROUPS.map(name => ({\n        name,\n        component: JFlowGroup(name)\n    })),\n    ...JFLOW_NODES.map(name => ({\n        name,\n        component: JFlowInstance(name)\n    })),\n    ...JFLOW_LINKS.map(name => ({\n        name,\n        component: JFlowLink(name)\n    })),\n];\nconst componentPrefix = 'j';\ncustomElements.define('jflow-group', class extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({mode: 'open'});\n    }\n});\n/**\n * @module JFlowVuePlugin \n */\nexport default {\n    /**\n     * 安装 JFlowVuePlugin\n     * @function\n     * @param {Vue} Vue - Vue\n     * @param {Object} options - Vue plugin 配置\n     * @param {string} options.prefix - 组件前缀，默认是 j\n     * @param {Object} options.custom - 自定义组件，形式为 { key: {@link:Instance} }\n     */\n    install: (Vue, options = {}) => {\n        let prefixToUse = componentPrefix;\n        if(options && options.prefix){\n            prefixToUse = options.prefix;\n        };\n        components.forEach(k => {\n            Vue.component(`${prefixToUse}${k.name}`, k.component);\n        });\n\n        if(options.customInstance) {\n            Object.keys(options.customInstance).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowInstance(options.customInstance[name]));\n            })\n        }\n        if(options.customGroups) {\n            Object.keys(options.customGroups).forEach(name => {\n                console.log(`${prefixToUse}${name}` )\n                Vue.component(`${prefixToUse}${name}`, JFlowGroup(options.customGroups[name]));\n            })\n        }\n        if(options.customLink) {\n            Object.keys(options.customLink).forEach(name => {\n                console.log(`${prefixToUse}${name}` )\n                Vue.component(`${prefixToUse}${name}`, JFlowLink(options.customLink[name]));\n            })\n        }\n    }\n}\n\n// export { * as JFlowInstance } from './components/JFlowInstance'; \n","const PIINRATIO = Math.PI / 180\nexport const DIRECTION = {\n    /** RIGHT */\n    RIGHT: 0,\n    /** BOTTOM */\n    BOTTOM: 1,\n    /** LEFT */\n    LEFT: 2,\n    /** TOP */\n    TOP: 3,\n\n    STARTLOOP: 6,\n    ENDLOOP: 16,\n};\n\nexport const DIRECTION_ANGLE = {\n    [DIRECTION.RIGHT]: 2 * 90 * PIINRATIO,\n    [DIRECTION.BOTTOM]: 3 * 90 * PIINRATIO,\n    [DIRECTION.LEFT]: 0,\n    [DIRECTION.TOP]: 90 * PIINRATIO,\n    [DIRECTION.STARTLOOP]: 2 * 90 * PIINRATIO,\n    [DIRECTION.ENDLOOP]: 2 * 90 * PIINRATIO,\n}\n\nexport function polylinePoints(\n    p1, p2,\n    start_dir = DIRECTION.TOP,\n    end_dir = DIRECTION.TOP,\n    spanX = 10,\n    spanY = 10,\n    gapX = 5,\n    gapY = 15,\n    bendPoint,\n    fromCenter,\n) {\n    let points = [];\n\n    if(start_dir === DIRECTION.BOTTOM) {\n        // if(end_dir === DIRECTION.TOP) {\n        // }\n        if(end_dir === DIRECTION.RIGHT) {\n            if (bendPoint && bendPoint.length === 2) {\n                // const [x, y] = bendPoint;\n                const x = bendPoint[0] + fromCenter[0];\n                const y = bendPoint[1] + fromCenter[1];\n                points.push([p1[0], y]);\n                points.push([x, y]);\n                points.push([x, p2[1]]);\n            } else {\n                points.push([p1[0], p2[1]]);\n            }\n        }\n        if(end_dir === DIRECTION.ENDLOOP) {\n            points.push([p1[0], p1[1] + gapY]);\n            points.push([p2[0] + gapX, p1[1] + gapY]);\n            points.push([p2[0] + gapX, p2[1]]);\n        }\n    }\n\n    if(start_dir === DIRECTION.RIGHT)  {\n        if(end_dir === DIRECTION.TOP) {\n            points.push([p2[0], p1[1]]);\n        }\n        if(end_dir === DIRECTION.RIGHT) {\n            if (bendPoint && bendPoint.length === 4) {\n                // const [x1, y1, x2, y2] = bendPoint;\n                const x1 = bendPoint[0] + fromCenter[0];\n                const x2 = bendPoint[2] + fromCenter[0];\n                const y1 = bendPoint[1] + fromCenter[1];\n                const y2 = bendPoint[3] + fromCenter[1];\n                points.push([x1, y1]);\n                points.push([x1, y2]);\n                points.push([x2, y2]);\n                points.push([x2, p2[1]]);\n            } else {\n                points.push([p1[0] + spanX, p1[1]]);\n                points.push([p1[0] + spanX, p2[1]]);\n            }\n        }\n    }\n\n    if(start_dir === DIRECTION.STARTLOOP) {\n        if(end_dir === DIRECTION.TOP) {\n            points.push([p2[0], p1[1]]);\n        }\n        if(end_dir === DIRECTION.ENDLOOP) {\n            points.push([p1[0] + spanX, p1[1]]);\n            points.push([p1[0] + spanX, p1[1] + spanY]);\n            points.push([p1[0] + gapX, p1[1] + spanY]);\n            points.push([p1[0] + gapX, p2[1]]);\n        }\n    }\n\n    points.unshift(p1);\n    points.push(p2);\n    return points;\n}\nfunction minusVec(p1, p2) {\n    return [p1[0] - p2[0], p1[1] - p2[1]]\n}\n\nfunction absVec(vec) {\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\n\nfunction scaleVec(vec, scale) {\n    return [vec[0] * scale, vec[1] * scale];\n}\n\nexport function segmentDistances(points) {\n    const segs = [];\n    let l = points.length;\n    let i = 1;\n    let reducedDist = 0;\n    while (i < l) {\n        const p1 = points[i-1]\n        const p2 = points[i]\n        const dist = Math.sqrt(dist2(p1, p2));\n        reducedDist += dist;\n        segs.push({\n            p1, p2,\n            dist,\n            reducedDist,\n        });\n        i++;\n    }\n    return segs\n}\n\nexport function makeRadiusFromVector(pbefore, p, pnext, radius) {\n    const vec1 = minusVec(p, pbefore);\n    const vec2 = minusVec(p, pnext);\n    const absVec1 = absVec(vec1);\n    const absVec2 = absVec(vec2);\n    if(!absVec1 || !absVec2) {\n        return {\n            p1: null,\n            p2: null,\n        }\n    }\n    const r1 = scaleVec(vec1, radius/absVec1);\n    const r2 = scaleVec(vec2, radius/absVec2);\n    return {\n        p1: minusVec(p, r1),\n        p2: minusVec(p, r2),\n    }\n}\nexport function isPolyLineIntersectionRectange(polyline, rect) {\n    let p = polyline[0];\n    let l = polyline.length;\n    let i = 1;\n    const [l0, l1, r0, r1] = rect;\n    while (i < l) {\n        const cp = polyline[i];\n        if(p[0] === cp[0]) {\n            // vertical\n            if(p[0] < r0 && p[0] > l0 \n                && !((p[1] > r1 && cp[1] > r1) || (p[1] < l1 && cp[1] < l1))){\n                    return true;\n                } \n        } else {\n            // horizontal\n            if(p[1] < r1 && p[1] > l1\n                && !((p[0] > r0 && cp[0] > r0) || (p[0] < l0 && cp[0] < l0))){\n                    return true;\n                } \n        }\n        p = cp;\n        i++;\n    }\n    return false;\n}\n\nexport function distToSegmentSquared(p, v, w) {\n    const l2 = dist2(v, w);\n    if (l2 === 0) return dist2(p, v);\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return dist2(p, [ v[0] + t * (w[0] - v[0]), v[1] + t * (w[1] - v[1]) ]);\n}\n\nfunction sqr(x) {\n    return x * x;\n}\nexport function dist2(v, w) {\n    return sqr(v[0] - w[0]) + sqr(v[1] - w[1]);\n}\n\n\nexport function translateToClientCoord(jflowInstance) {\n    const p = [\n        -jflowInstance.width / 2,\n        jflowInstance.height / 2,\n    ];\n    const gp = jflowInstance.calculateToRealWorld(p);\n    const { x, y } = jflowInstance._jflow.DOMwrapper.getBoundingClientRect();\n    return [gp[0] + x, gp[1] + y];\n}\n","import { Group } from '@joskii/jflow';\nimport { DIRECTION } from './utils';\nexport default class extends Group {\n    getIntersectionsSeprate() {\n        let p2 = this.anchor;\n        // if (_belongs && _belongs.calculateToCoordination) {\n        //     p2 = _belongs.calculateToCoordination(p2);\n        // }\n\n        const [x2, y2] = p2;\n        const w = this.width / 2;\n        const h = this.height / 2;\n        const hh = h / 2;\n        return {\n            [DIRECTION.RIGHT]: [x2 + w, y2],\n            [DIRECTION.LEFT]: [x2 - w, y2],\n            [DIRECTION.BOTTOM]: [x2, y2 + h],\n            [DIRECTION.TOP]: [x2, y2 - h],\n            [DIRECTION.STARTLOOP]: [x2 + w, y2-hh],\n            [DIRECTION.ENDLOOP]: [x2 + w, y2+hh],\n        };\n    }\n    \n    render(ctx){\n        ctx.save();\n        if(this.opacity !== 1) {\n            ctx.globalAlpha = this.opacity;\n        }\n        super.render(ctx);\n        ctx.restore();\n    }\n}","import { BaseLink } from '@joskii/jflow';\n\nimport {\n    DIRECTION,\n    DIRECTION_ANGLE,\n    polylinePoints,\n    distToSegmentSquared,\n    makeRadiusFromVector,\n    isPolyLineIntersectionRectange,\n    segmentDistances,\n} from './utils';\nconst APPROXIMATE = 20;\n\nfunction getInteratableSegment(points) {\n    let i = 1;\n    while (i < points.length) {\n        if(points[i-1][1] - points[i][1]){\n            return [points[i-1].slice(), points[i].slice()];\n        }\n        i++\n    }\n}\nfunction samepoint(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n\nclass LogicLink extends BaseLink {\n     /**\n     * 创建方形折线\n     * @param {PolyLink~Configs} configs - 配置\n     **/\n    constructor(configs) {\n        super(configs);\n        /** @member {Number}   - 点击响应范围 */\n        this.approximate   = configs.approximate || APPROXIMATE;\n        /** @member {Number}   - 拐角弧度 */\n        this.radius        = configs.radius || 0;\n        /** @member {Number}   - 起点终点在 x 方向最小的跨度 */\n        this.minSpanX      = configs.minSpanX || 10;\n        /** @member {Number}   - 起点终点在 y 方向最小的跨度 */\n        this.minSpanY      = configs.minSpanY || 10;\n        /** @member {Number}    - 虚线数组 */\n        this.lineDash      = configs.lineDash;\n        /** @member {Number}    - 双向箭头 */\n        this.doubleLink    = configs.doubleLink;\n        /** @member {Number}    - 连线上的文字字体 */\n        this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        /** @member {Number}    - 连线上的文字大小 */\n        this.fontSize      = configs.fontSize || '12px';\n        /** @member {Number}    - 连线上的文字 */\n        this.content       = configs.content || '';\n        this.noArrow       = !!configs.noArrow \n        this.bendPoint     = configs.bendPoint;\n        this.iterateEndY   = configs.iterateEndY;\n        this.minGapY       = configs.minGapY;\n        this.showAdd       = false;\n        this.showDragover  = false;\n        this.tailPoint     = configs.tailPoint;\n        this.tailRadius    = configs.tailRadius;\n\n        this.arrowSegment = configs.arrowSegment;\n\n        this.animePoint = configs.animePoint || {\n            enable: false,\n        }\n    }\n\n    setConfig(configs) {\n        Object.keys(configs).forEach(k => {\n            if(configs[k] !== undefined && configs[k] !== null) {\n                this[k] = configs[k];\n                if(k === 'animePoint') {\n                    const enable = configs.animePoint.enable;\n                    this.anime?.cancel();\n                    if(enable) {\n                        this.anime = this._jflow.requestJFlowAnime((elapsed) => {\n                            this.animePoint.offset = (elapsed / 10) % this.animePoint.gap\n                        })\n                    }\n                }\n            }\n        })\n    }\n\n    _calculateAnchorPoints() {\n        const dmsfrom = this.from.getIntersectionsSeprate();\n        const dmsto = this.to.getIntersectionsSeprate();\n        const center = this.from.getCenter();\n        const points = polylinePoints(\n            dmsfrom[this.fromDir],\n            dmsto[this.toDir],\n            this.fromDir,\n            this.toDir, \n            this.minSpanX || 100, \n            this.minSpanY || 55, \n            20, \n            this.minGapY || 15,\n            this.bendPoint,\n            center);\n        this._cachePoints = points\n        this._cacheAngle = [this.fromDir, this.toDir];\n        this._cacheInteractableSegment = getInteratableSegment(points);\n        if(this.iterateEndY) {\n            this._cacheInteractableSegment[1][1] = Math.min(this.iterateEndY + center[1], this._cacheInteractableSegment[1][1])\n        }\n\n        this._cacheSegment = segmentDistances(points);\n        \n    }\n    \n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return isPolyLineIntersectionRectange(this._cachePoints, br);\n    }\n\n    render(ctx) {\n        // this._calculateAnchorPoints();\n        ctx.save();\n        if(this.opacity !== 1) {\n            ctx.globalAlpha = this.opacity;\n        }\n        const radius = this.radius;\n        const points = this._cachePoints;\n        const ItSegment = this._cacheInteractableSegment;\n        const p = points[0];\n        const pEnd = points[points.length - 1];\n        const angleEnd = DIRECTION_ANGLE[this._cacheAngle[1]];\n        \n        ctx.fillStyle = ctx.strokeStyle = this.animePoint.enable ? this.animePoint.color : this.backgroundColor;\n        ctx.beginPath();\n        ctx.moveTo(p[0], p[1]);\n        points.slice(1, points.length - 1).forEach((p, idx) => {\n            if(this.radius) {\n                const pLast = points[idx];\n                const pNext = points[idx+2];\n                const { p1, p2 } = makeRadiusFromVector(pLast, p, pNext, radius);\n                if(p1 && p2){\n                    ctx.lineTo(p1[0], p1[1]);\n                    ctx.quadraticCurveTo(p[0], p[1], p2[0], p2[1]);\n                } else {\n                    ctx.lineTo(p[0], p[1]);\n                }  \n            } else {\n                ctx.lineTo(p[0], p[1]);\n            }\n        });\n        ctx.lineTo(pEnd[0], pEnd[1]);\n        if(this.tailPoint) {\n            const pbefore = points[points.length - 2];\n            const p = this.to.anchor;\n            const { p1, p2 } = makeRadiusFromVector(pbefore, p, [p[0], p[1] + 50], this.tailRadius);\n            ctx.lineTo(p1[0], p1[1]);\n            ctx.quadraticCurveTo(p[0], p[1], p2[0], p2[1]);\n        }\n\n        if(this.lineDash) {\n            ctx.save();\n            ctx.setLineDash(this.lineDash);\n        }\n        ctx.stroke();\n        if(this.lineDash) {\n            ctx.restore();\n        }\n\n        if(this.arrowSegment) {\n            console.log(this.arrowSegment)\n            ctx.save();\n            let reducedArrowSegment = 0;\n            let segid = 0;\n            const segLenth = this._cacheSegment.length;\n            console.log(this._cacheSegment)\n            while (segid < segLenth) {\n                const {\n                    p1, p2,\n                    dist,\n                    reducedDist,\n                } = this._cacheSegment[segid];\n                const dx = p2[0] - p1[0];\n                const dy = p2[1] - p1[1];\n                \n                while (reducedArrowSegment < reducedDist) {\n                    if(reducedArrowSegment > 0) {\n                        const r = 1 - (reducedDist - reducedArrowSegment) / dist;\n                        let x, y, angle;\n                        if(dx) {\n                            x = p1[0] + r * dx;\n                            y = p1[1];\n                            angle = dx > 0 ? DIRECTION_ANGLE[DIRECTION.RIGHT] : DIRECTION_ANGLE[DIRECTION.LEFT];\n                        } else if(dy) {\n                            // 向下\n                            x = p1[0];\n                            y = p1[1]  + r * dy;\n                            angle = dy > 0 ? DIRECTION_ANGLE[DIRECTION.BOTTOM] : DIRECTION_ANGLE[DIRECTION.TOP]\n                        }\n                        ctx.beginPath();\n                        ctx.translate(x, y);\n                        ctx.rotate(angle );\n                        ctx.moveTo(-5, 0);\n                        ctx.lineTo(0, -4);\n                        ctx.lineTo(0, 4);\n                        ctx.lineTo(-5, 0);\n                        ctx.fill();\n                        ctx.rotate(-angle);\n                        ctx.translate(-x, -y);\n                    }\n                    reducedArrowSegment += this.arrowSegment;\n                }\n                segid ++;\n            }\n            \n            ctx.restore();\n        }\n\n        if(this.animePoint.enable) {\n            const animeGap = this.animePoint.gap;\n            const animeOffset = this.animePoint.offset;\n            let reducedArrowSegment = animeOffset;\n            let segid = 0;\n            const segLenth = this._cacheSegment.length;\n            while (segid < segLenth) {\n                const {\n                    p1, p2,\n                    dist,\n                    reducedDist,\n                } = this._cacheSegment[segid];\n                const dx = p2[0] - p1[0];\n                const dy = p2[1] - p1[1];\n                \n                while (reducedArrowSegment < reducedDist) {\n                    if(reducedArrowSegment > 0) {\n                        const r = 1 - (reducedDist - reducedArrowSegment) / dist;\n                        ctx.beginPath();\n                        let x, y;\n                        if(dx) {\n                            x = p1[0] + r * dx;\n                            y = p1[1];\n                            if(dx < 0) {\n                                ctx.moveTo(x - 4, y);\n                                ctx.lineTo(x + 2, y - 4);\n                                ctx.lineTo(x + 2, y + 4);\n                            } else {\n                                ctx.moveTo(x + 4, y);\n                                ctx.lineTo(x - 2, y - 4);\n                                ctx.lineTo(x - 2, y + 4);\n                            }\n                        } else if(dy) {\n                            x = p1[0];\n                            y = p1[1]  + r * dy;\n                            if(dy < 0) {\n                                ctx.moveTo(x, y - 4);\n                                ctx.lineTo(x - 4, y + 2);\n                                ctx.lineTo(x + 4, y + 2);\n                            } else {\n                                ctx.moveTo(x, y + 4);\n                                ctx.lineTo(x - 4, y - 2);\n                                ctx.lineTo(x + 4, y - 2);\n                            }\n                        }\n                        // ctx.arc(x, y, 3, 0, 2 * Math.PI);\n                        ctx.closePath();\n                        ctx.fill();\n                    }\n                    reducedArrowSegment += animeGap;\n                }\n                segid ++;\n            }\n        }\n\n        if(this.showAdd){    \n            ctx.beginPath();\n            ctx.moveTo(ItSegment[0][0], ItSegment[0][1]);\n            ctx.lineTo(ItSegment[1][0], ItSegment[1][1]);\n            ctx.save();\n            \n            ctx.lineWidth = 2;\n            ctx.fillStyle = '#fff';\n            ctx.strokeStyle = '#4C88FF';\n            ctx.stroke();\n            const x = ItSegment[0][0];\n            const y = (ItSegment[1][1] - ItSegment[0][1])/2 + ItSegment[0][1]\n            ctx.translate(x, y);\n            ctx.beginPath();\n            ctx.moveTo(-4, -6);\n            ctx.lineTo(4, -6);\n            ctx.quadraticCurveTo(6, -6, 6, -4);\n            ctx.lineTo(6, 4);\n            ctx.quadraticCurveTo(6, 6, 4, 6);\n            ctx.lineTo(-4, 6);\n            ctx.quadraticCurveTo(-6, 6, -6, 4);\n            ctx.lineTo(-6, -4);\n            ctx.quadraticCurveTo(-6, -6, -4, -6);\n            ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            ctx.moveTo(-4, 0);\n            ctx.lineTo(4, 0);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.moveTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.stroke();\n            ctx.translate(-x, -y);\n            \n            ctx.restore();\n        }\n\n        if(this.showDragover) {\n            ctx.save()\n            ctx.lineWidth = 2;\n            ctx.fillStyle = '#fff';\n            ctx.strokeStyle = '#4C88FF';\n            ctx.setLineDash([5, 5])\n            const x = ItSegment[0][0];\n            const y = (ItSegment[1][1] - ItSegment[0][1])/2 + ItSegment[0][1]\n            ctx.translate(x, y);\n            ctx.beginPath();\n            ctx.rect(-33, -5, 66, 10);\n            ctx.fill();\n            ctx.stroke();\n            ctx.translate(-x, -y);\n            ctx.restore()\n        }\n\n        if(!this.noArrow) {\n            const atEnd = samepoint(ItSegment[1], points[points.length - 1])\n            if(atEnd && this.showAdd) {\n                ctx.save();\n                ctx.fillStyle = ctx.strokeStyle = '#4C88FF';\n            }\n            ctx.beginPath();\n            ctx.translate(pEnd[0], pEnd[1]);\n            ctx.rotate(angleEnd);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-5, -4);\n            ctx.lineTo(-5, 4);\n            ctx.lineTo(0, 0);\n            ctx.fill();\n            ctx.rotate(-angleEnd);\n            ctx.translate(-pEnd[0], -pEnd[1]);\n            if(atEnd) {\n                ctx.restore();\n            }\n        }\n        if(this.content) {\n            ctx.beginPath();\n            ctx.font = `${this.fontSize} ${this.fontFamily}`;\n            switch (this.fromDir) {\n                case DIRECTION.BOTTOM:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 2, p[1] + 10);\n                    break;\n                case DIRECTION.RIGHT:\n                case DIRECTION.STARTLOOP:\n                    ctx.textAlign = 'left';\n                    ctx.fillText(this.content, p[0] + 10, p[1] - 2);\n                    break;\n                default:\n                    break;\n            }\n        }\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const points = this._cacheInteractableSegment;\n        const dist = distToSegmentSquared(point, points[0], points[1]);\n        if(dist < this.approximate){\n            return true;\n        }\n        return false\n    }\n}\n\nexport default LogicLink;","import { BaseLink } from '@joskii/jflow';\nimport {\n    isPolyLineIntersectionRectange,\n    distToSegmentSquared,\n} from './utils';\n\nconst APPROXIMATE = 6;\nclass SwitchCaseLink extends BaseLink {\n    constructor(configs) {\n        super(configs);\n        this.approximate   = configs.approximate || APPROXIMATE;\n        this.showAdd = false;\n        // this.fontFamily    = configs.fontFamily = '-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji'\n        // this.fontSize      = configs.fontSize || '12px';\n        // this.content       = configs.content || '';\n        // this.lineDash      = configs.lineDash;\n        // this.approximate  = configs.approximate || APPROXIMATE;\n    }\n\n    _calculateAnchorPoints() {\n        // console.log(this.bendPoint)\n        const dmsfrom = this.from.getIntersectionsSeprate();\n        const dmsto = this.to.getIntersectionsSeprate();\n        const points = [dmsfrom[this.fromDir], dmsto[this.toDir]];\n        this._cachePoints = points\n        // this._cacheAngle = [this.fromDir, this.toDir]\n    }\n\n    isInViewBox(br) {\n        this._calculateAnchorPoints();\n        return isPolyLineIntersectionRectange(this._cachePoints, br);\n    }\n\n    render(ctx) {\n        ctx.save();\n        const [ p0, p1 ] = this._cachePoints;\n        ctx.fillStyle = ctx.strokeStyle = this.backgroundColor;\n        ctx.beginPath();\n\n        ctx.moveTo(p0[0], p0[1]);\n        ctx.lineTo(p1[0], p1[1]);\n        ctx.save();\n        ctx.setLineDash([2, 2]);\n        ctx.stroke();\n        ctx.restore();\n\n        ctx.fillStyle = '#fff';\n        ctx.beginPath();\n        ctx.arc(p0[0], p0[1]+4, 4, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(p1[0], p1[1]-4, 4, 0, 2 * Math.PI);\n\n        ctx.fill();\n        ctx.stroke();\n        if(this.showAdd) {\n            ctx.save();\n\n            ctx.lineWidth = 2;\n            ctx.fillStyle = '#fff';\n            // ctx.strokeStyle = '#4C88FF';\n            const x = p0[0];\n            const y = (p1[1] - p0[1])/2 + p0[1]\n            ctx.translate(x, y);\n            ctx.beginPath();\n            ctx.moveTo(0, -8);\n            ctx.lineTo(6.9, -4);\n            ctx.lineTo(6.9, 4);\n            ctx.lineTo(0, 8);\n            ctx.lineTo(-6.9, 4);\n            ctx.lineTo(-6.9, -4);\n            ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            ctx.moveTo(-4, 0);\n            ctx.lineTo(4, 0);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.moveTo(0, -4);\n            ctx.lineTo(0, 4);\n            ctx.stroke();\n            ctx.translate(-x, -y);\n\n            ctx.restore();\n        }\n\n\n        ctx.restore();\n    }\n\n    isHit(point) {\n        const points = this._cachePoints;\n        const dist = distToSegmentSquared(point, points[0], points[1]);\n        if(dist < this.approximate){\n            return true;\n        }\n        // return false\n        // const [ p0, p1 ] = this._cachePoints;\n        // const x = p0[0];\n        // const y = (p1[1] - p0[1])/2 + p0[1]\n        // return Math.pow(point[0] - x, 2) + Math.pow(point[1] - y, 2) < 64;\n    }\n}\n\nexport default SwitchCaseLink;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:_vm.$style.body},[_c('div',{class:_vm.$style.sidebar},_vm._l((_vm.conceptList),function(p){return _c('div',{key:p.concept},[_c('div',{class:_vm.$style.part,attrs:{\"draggable\":\"true\",\"type\":\"IfStatement\"},on:{\"dragstart\":function($event){return _vm.onDragStart($event, p.concept)},\"dragend\":_vm.onDragEnd}},[_vm._v(\" \"+_vm._s(p.concept)+\" \")]),_c('div',{ref:(\"templete-\" + (p.concept)),refInFor:true,class:[_vm.$style.literalRef]},[_c('div',{class:_vm.$style.part},[_vm._v(\" \"+_vm._s(p.concept)+\" \")])])])}),0),_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('j-jflow',{ref:\"jflow\",class:_vm.$style.wrapper,attrs:{\"configs\":_vm.configs,\"loading\":_vm.jflowloading,\"genVueComponentKey\":_vm.genVueComponentKey},on:{\"update:loading\":function($event){_vm.jflowloading=$event},\"click\":_vm.onClickCanvas,\"drop\":_vm.onDrop,\"pressEnd\":_vm.onPressEnd},scopedSlots:_vm._u([{key:\"LogicBasic\",fn:function(ref){\nvar source = ref.source;\nvar layoutNode = ref.layoutNode;\nreturn [_c('logic-Node',{attrs:{\"node\":source,\"layoutNode\":layoutNode},on:{\"pressStart\":function($event){return _vm.onPressStart(source)},\"outOfFlow\":function($event){return _vm.onOutOfFlow($event, source)}}})]}},{key:\"Start\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('start-Node',{attrs:{\"node\":source},on:{\"click\":_vm.startAllAnimate}})]}},{key:\"endpoint\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('end-point-node',{attrs:{\"node\":source}})]}},{key:\"End\",fn:function(ref){\nvar source = ref.source;\nreturn [_c('end-Node',{attrs:{\"node\":source}})]}},{key:\"switchcaselink\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('switch-link',{attrs:{\"linkConfigs\":configs}})]}},{key:\"plainlink\",fn:function(ref){\nvar configs = ref.configs;\nreturn [_c('logic-link',{attrs:{\"linkConfigs\":configs},on:{\"drop\":function($event){return _vm.onDropToLink($event, configs)}}})]}}])}),_c('div',{class:_vm.$style.minimap},[_c('div',{ref:\"minimap\",class:_vm.$style.content})])],1),_c('poppup-comp',{attrs:{\"meta\":_vm.poppups.selectionMeta}}),_c('modal-comp',{attrs:{\"meta\":_vm.modal.modalMeta}})],1),_c('div',[_c('div',[_vm._v(\"参数设置\")]),_c('div',[_c('ul',[_c('li',[_vm._v(\" 行间距: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.rowGap},on:{\"change\":function($event){return _vm.onChange($event, 'rowGap')}}})]),_c('li',[_vm._v(\" 列间距: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.columnGap},on:{\"change\":function($event){return _vm.onChange($event, 'columnGap')}}})]),_c('li',[_vm._v(\" 逻辑块高度: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.rowHeight},on:{\"change\":function($event){return _vm.onChange($event, 'rowHeight')}}})]),_c('li',[_vm._v(\" 逻辑块宽度: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.columnWidth},on:{\"change\":function($event){return _vm.onChange($event, 'columnWidth')}}})]),_c('li',[_vm._v(\" 折线最小延伸距离X: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.minSpanX},on:{\"change\":function($event){return _vm.onChange($event, 'minSpanX')}}})]),_c('li',[_vm._v(\" 折线最小延伸距离Y: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.minSpanY},on:{\"change\":function($event){return _vm.onChange($event, 'minSpanY')}}})]),_c('li',[_vm._v(\" 循环回来的线最小延伸距离Y: \"),_c('input',{attrs:{\"type\":\"number\"},domProps:{\"value\":_vm.layoutConstance.minGapY},on:{\"change\":function($event){return _vm.onChange($event, 'minGapY')}}})])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const layoutConstance = {\n    rowGap : 50,\n    columnGap : 75,\n    columnWidth : 189,\n    rowHeight : 32,\n    minSpanX: 163,\n    minSpanY: 50,\n    minGapY: 50\n}\n\nexport function initLayoutConstance() {\n    Object.keys(layoutConstance).forEach(k => {\n        const value = localStorage.getItem(k);\n        console.log(value)\n        if(value !== null) {\n            layoutConstance[k] = value;\n        }\n    })\n    \n}\n\nexport function setLayoutConstance(key, value) {\n    layoutConstance[key] = value;\n    localStorage.setItem(key, value);\n}\n\nexport function getLayoutConstance(key) {\n    return +layoutConstance[key];\n}\n\nexport function setSourceInitialAnchor(jflowInstance, source, point) {\n    const isSwitch = source.concept === 'Switch';\n    if(isSwitch) {\n        const i = jflowInstance.getRenderNodeBySource(source.cases[0])\n        i.anchor = point;\n    } else {\n        const i = jflowInstance.getRenderNodeBySource(source);\n        i.anchor = point;\n    }\n}\n\nexport function getSourceAnchor(jflowInstance, source) {\n    const isSwitch = source.concept === 'Switch';\n    if(isSwitch) {\n        const case0 = source.cases[0];\n        const i = jflowInstance.getRenderNodeBySource(case0);\n        return i.anchor;\n    } else {\n        const i = jflowInstance.getRenderNodeBySource(source);\n        return i.anchor;\n    }\n}\n","import { DIRECTION } from '../src/custom/utils';\nimport { layoutConstance, getLayoutConstance } from './utils';\nfunction getType(concept) {\n    switch (concept) {\n        case \"Assignment\":\n        case \"ForEach\":\n        case \"Switch\":\n        case \"While\":\n        case \"callInterface\":\n        case \"callLogic\":\n        case \"datasearch\":\n        case \"SwitchCase\":\n        case \"If\":\n            return \"LogicBasic\"\n        \n        default:\n            return concept\n    }\n}\n\nfunction toNode(node) {\n    if(node.concept === 'Switch') {\n        return node.cases[0];\n    }\n    return node\n}\n\nfunction verticalFlow(\n    node, list,\n    spanX = 1,\n    spanY = 1,\n    row = 0,\n    column = 0,\n    callback\n) {\n    let lastNode;\n\n    let reducedStartSpan = spanY;\n    let reducedEndSpan = spanY;\n\n    list.forEach((e, idx) => {\n        const { spanX: sx, spanY: sy } = e.reflowPreCalculate(row + reducedStartSpan, column, callback);\n        // // console.log(e);\n        // // console.log(sx, sy, reducedStartSpan, reducedEndSpan)\n        // if(e.concept === 'If'  || e.concept === 'Switch') {\n        //     reducedStartSpan += sy;\n        //     reducedEndSpan =  Math.max(reducedStartSpan, reducedEndSpan);\n        // } else \n        \n        if ((!lastNode || lastNode.concept !== 'Switch') && sy === 1 && sx === 1) {\n            // 单个块，顺序排列\n            reducedStartSpan += 1\n            reducedEndSpan = Math.max(reducedStartSpan, reducedEndSpan);\n        } else {\n            // 存在多行或多列，间隔排列\n            reducedStartSpan = reducedEndSpan;\n            reducedEndSpan += sy;\n            e.reflowPreCalculate(row + reducedStartSpan, column, callback);\n            if(e.concept === 'While' || e.concept === 'ForEach') {\n                reducedStartSpan += 1\n            } else {\n                reducedStartSpan += sy;\n            }\n            reducedEndSpan = Math.max(reducedStartSpan, reducedEndSpan);\n        }\n\n        spanX = Math.max(sx, spanX);\n        lastNode = e;\n    });\n    spanY = reducedEndSpan;\n\n    return { spanX, spanY };\n}\n\n/* \nfunction verticalFlow(node, list, spanX = 1, spanY = 1, row = 0, column = 0, callback) {\n    let lastMaxRow = row;\n    let lastNode;\n    let spanYPlain = spanY;\n    \n    list.forEach((b, idx) => {\n        const { spanX: sx, spanY: sy } = b.reflowPreCalculate(lastMaxRow, column, callback);\n\n        if ((!lastNode || lastNode.concept !== 'Switch') && sy === 1) {\n            const idxRow = row + idx;\n            lastMaxRow = Math.max(lastMaxRow, idxRow);\n            b.reflowPreCalculate(idxRow, column, callback);\n            spanYPlain += 1;\n            // console.log(spanYPlain);\n        } else {\n            lastMaxRow = lastMaxRow + sy\n            spanY += sy;\n        }\n        spanX = Math.max(sx, spanX);\n        lastNode = b;\n    });\n    spanY = Math.max(spanYPlain, spanY);\n    return {\n        spanX, spanY\n    };\n} */\n\nclass BaseNode {\n    constructor(source) {\n        this.source = source;\n        this.id = source.id;\n        this.concept = source.concept;\n        this.type = getType(source.concept);\n        this.parent = undefined;\n        this.parentIterateType = undefined;\n        this.idx = undefined;\n\n        this.row = undefined;\n        this.column = undefined;\n        this.spanX = undefined;\n        this.spanY = undefined;\n\n        this.rootNode = null;\n    }\n\n    reflowPreCalculate(row, column, callback) {\n        this.row = row;\n        this.column = column;\n        this.spanX = 1;\n        this.spanY = 1;\n        if(callback) {\n            callback(row, column, this);\n        }\n        return {\n            spanX: this.spanX,\n            spanY: this.spanY,\n            row,\n            column,\n        };\n    }\n\n    makeLink(callback) {\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n    }\n\n    linkSource(source) {\n        this.parent.source[this.parentIterateType].splice(this.idx + 1, 0, source);\n    }\n\n    delete() {\n        this.parent.source[this.parentIterateType].splice(this.idx, 1);\n    }\n\n    getNodes(jflow) {\n        const nodes = [];\n        this.traverse((n) => {\n            const renderNode = jflow.getRenderNodeBySource(n.source);\n            if (renderNode)\n                nodes.push(renderNode);\n        });\n        return nodes;\n    }\n}\nclass Logic extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n        const playgrounditerator = mapFunc('playground').bind(this);\n        this.playground = (source.playground || []).map((s, idx) => {\n            const n = playgrounditerator(s, idx);\n            n.isFree = true;\n            return n;\n        });\n    }\n\n    makeLink(callback) {\n        let last;\n        this.body.forEach((b) => {\n            if (!last) {\n                last = b;\n                return;\n            }\n            callback({\n                from: last,\n                to: toNode(b),\n                fromDir: DIRECTION.BOTTOM,\n                toDir: DIRECTION.TOP,\n            });\n\n            b = b.makeLink(callback);\n            last = b;\n        });\n\n        this.playground.forEach((n) => {\n            n.makeLink(callback);\n        });\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(b => {\n            b.traverse(callback);\n        });\n        this.playground.forEach(b => {\n            b.traverse(callback);\n        })\n    }\n\n    reflowBodyPreCalculate(row = 0, column = 0, callback) {\n        this.row = row;\n        this.column = column;\n\n\n        // let lastMaxRow = 0;\n        // this.body.forEach((b, idx) => {\n        //     const { spanY: sy } = b.reflowPreCalculate(row + spanY, column, callback);\n\n        //     // const { spanY: sy } = b.reflowPreCalculate(row, column, callback);\n        //     if (sy === 1) {\n        //         lastMaxRow = row + idx + 1\n        //         b.reflowPreCalculate(lastMaxRow, column, callback);\n        //     } else {\n        //         lastMaxRow = row + spanY\n        //     }\n        //     spanY += sy;\n        // });\n        const { spanX, spanY } = verticalFlow(this, this.body, 0, 0, 0, 0, callback);\n        this.spanX = spanX;\n        this.spanY = spanY;\n        return {\n            spanX, spanY, row, column,\n        };\n    }\n\n    reflowPlaygroundPreCalculate(callback) {\n        this.playground.forEach(node => {\n            node.reflowPreCalculate(0, 0, (row, column, layoutnode) => {\n                layoutnode.rootLayoutNode = node;\n            })\n        })\n    }\n}\n\nclass SwitchStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.hasEndPoint = true;\n        this.Endpoint = null;\n        this.cases = (source.cases || []).map(mapFunc('cases').bind(this));\n        this.preCases = this.cases.slice(0, this.cases.length - 1);\n        this.defaultCase = this.cases[this.cases.length - 1];\n        this.defaultCase.isDefault = true;\n    }\n\n    makeLink(callback) {\n        /* let last;\n        let lastCase;\n        this.cases.forEach((b, idx) => {\n            const lastInCase = b.makeLink(callback);\n            const isDefault = b.isDefault;\n            const remainCases = this.cases.slice(idx + 1);\n            let remainSpanX = 0;\n            let hasConsequent = false\n            remainCases.forEach(c => {\n                remainSpanX = Math.max(remainSpanX, c.spanX);\n                if(!c.isDefault) {\n                    hasConsequent = (hasConsequent || c.consequent.length > 0)\n                }\n            })\n\n            // console.log('case ' + idx , remainSpanX, lastInCase)\n            let roundCorner\n            if(remainSpanX >= 2) {\n                roundCorner = [remainSpanX + b.column - 1, b.row + b.spanY]\n            } else if((lastInCase || hasConsequent) && !isDefault) {\n                roundCorner = [b.column + 1, b.row + b.spanY]\n            }\n            // console.log('case ' + idx , remainSpanX, roundCorner)\n            if(b.consequent.length === 0 && (remainSpanX >= 2 || hasConsequent)) {\n                // // console.log(remainCases.map(c => c.spanX))\n                // // console.log('no case', roundCorner, b.column);\n                roundCorner.unshift(b.row);\n                roundCorner.unshift(b.column + 1)\n                // // console.log(roundCorner)\n            }\n            // 回来的线\n            callback({\n                from: lastInCase || b,\n                to: this.Endpoint,\n                fromDir: (lastInCase || isDefault) ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n                toDir: DIRECTION.RIGHT,\n                roundCorner,\n                minSpanX: getLayoutConstance('minSpanX'),\n                endRow: (idx + 1 < this.cases.length - 1 ? this.cases[idx + 1].row : this.Endpoint.row),\n                part: 'consequent'\n            });\n            if(lastCase) {\n                // case 间的线\n                callback({\n                    type: 'switchcaselink',\n                    from: lastCase,\n                    to: b,\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    lineDash: [5, 5],\n                    part: 'cases'\n                });\n            }\n\n            lastCase = b\n        }) */ \n\n\n\n        let spanX = this.defaultCase.spanX;\n        const lastInCase = this.defaultCase.makeLink(callback);\n        callback({\n            from: lastInCase || this.defaultCase,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent'\n        });\n\n        let l = this.preCases.length;\n        let maxSpanX = 0;\n        this.cases.forEach(c => {\n            maxSpanX = Math.max(maxSpanX, c.spanX);\n        })\n        let currentCase;\n        let lastCase;\n        let lastFromDEFAULTCase = this.defaultCase;\n        let noConsquentFlag = lastFromDEFAULTCase.spanX < 2;\n        while (l--) {\n            currentCase = this.preCases[l];\n            const lastInCase = currentCase.makeLink(callback);\n            let roundCorner;\n            if (maxSpanX >= 2) {\n                const spanY = lastInCase ? lastFromDEFAULTCase.row - lastInCase.row : 1;\n                roundCorner = [maxSpanX - (lastInCase ? 2 : 1), spanY];\n                if (currentCase.consequent.length === 0 && !noConsquentFlag) {\n                    roundCorner.unshift(0);\n                    roundCorner.unshift(1)\n                }\n            }\n            if(currentCase.consequent.length) {\n                noConsquentFlag = false;\n            }\n            // console.log(spanX, roundCorner)\n            \n            \n            callback({\n                from: lastInCase || currentCase,\n                to: this.Endpoint,\n                fromDir: lastInCase ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n                toDir: DIRECTION.RIGHT,\n                noArrow: true,\n                tailPoint: true,\n                tailRadius: 6,\n                roundCorner,\n                minSpanX: getLayoutConstance('minSpanX'),\n                endRow: lastCase ? lastCase.row : this.Endpoint.row,\n                part: 'consequent',\n            });\n\n            // if(lastCase) {\n                // case 间的线\n                callback({\n                    type: 'switchcaselink',\n                    from: currentCase,\n                    to: lastFromDEFAULTCase,\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    lineDash: [5, 5],\n                    part: 'cases'\n                });\n            // }\n\n            spanX = Math.max(spanX, currentCase.spanX);\n            lastCase = currentCase;\n            lastFromDEFAULTCase = currentCase;\n        }\n\n        return this.Endpoint;\n    }\n    traverse(callback) {\n        callback(this);\n        this.cases.forEach(b => {\n            b.traverse(callback);\n        });\n        this.Endpoint.traverse(callback);\n    }\n\n    reflowPreCalculate(row = 0, column = 0, callback) {\n        let spanX = 1;\n        let spanY = 0;\n        this.row = row;\n        this.column = column;\n        \n        this.preCases.forEach((c, idx) => {\n            const { spanY: sy, spanX: sx } = c.reflowPreCalculate(row + spanY, column, callback);\n            spanY += sy;\n            spanX = Math.max(spanX, sx);\n        });\n        const { spanY: sy, spanX: sx } = this.defaultCase.reflowPreCalculate(row + spanY, column, callback);\n        spanY += sy;\n        spanX = Math.max(spanX, sx);\n        const { spanY: syend, spanX: sxend } = this.Endpoint.reflowPreCalculate(row + spanY, column, callback);\n        spanY += syend;\n        spanX = Math.max(spanX, sxend);\n        this.spanX = Math.max(spanX, 2);\n        this.spanY = spanY;\n        // console.log(this.spanX)\n        return {\n            spanX: this.spanX, spanY, row, column,\n        };\n    }\n    // reflowPreCalculate(row, column, callback) {\n    //     super.reflowPreCalculate(row, column, callback);\n    //     // const nextColumn = column + 1;\n    //     this.cases.forEach((c, idx) => {\n    //         c.reflowPreCalculate(row, column, callback);\n    //     });\n\n    //     this.Endpoint.reflowPreCalculate(row + 2, column, callback)\n    // }\n}\n\nclass SwitchCase extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.isDefault = false;\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n    }\n\n    makeLink(callback) {\n        let last;\n        if(this.consequent.length) {\n            this.consequent.forEach((b, idx) => {\n                callback({\n                    from: last || this,\n                    to: toNode(b),\n                    fromDir: (last || this.isDefault) ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n                    toDir: DIRECTION.TOP,\n                    part: 'consequent'\n                });\n\n                b = b.makeLink(callback);\n                last = b;\n            });\n        }\n        return last;\n    }\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(b => {\n            b.traverse(callback);\n        });\n    }\n\n    reflowPreCalculate(row, column, callback) {\n        const isDefault = this.isDefault;\n        // let spanX = 0;\n        // let spanY = 1;\n        this.row = row;\n        this.column = column;\n        if (callback) {\n            callback(row, column, this);\n        }\n\n        const { spanX: sx, spanY: sy } = verticalFlow(this, this.consequent, 0, 0, row + 1, column + (isDefault ? 0 : 1), callback);\n        // this.spanX = spanX + 1;\n        // this.spanY = spanY;\n        // return {\n        //     spanX: this.spanX, spanY, row, column,\n        // };\n        \n        // this.consequent.forEach((b, idx) => {\n        //     const { spanY: sy, spanX: sx } = b.reflowPreCalculate(\n        //         row + idx + 1,\n        //         column + (isDefault ? 0 : 1),\n        //         callback);\n        //     spanX = Math.max(sx, spanX);\n        //     spanY += sy;\n        // });\n       \n        // let spanX = Math.max(sx, 1);\n        // this.spanX = spanX + (isDefault ? 0 : 1);\n        this.spanX = Math.max(sx, 1) + (isDefault ? 0 : 1);\n        // console.log('switch case ', this.idx, this.spanX, isDefault)\n        this.spanY = sy + 1;\n        return {\n            spanX: this.spanX,\n            spanY: this.spanY, \n            row, column,\n        };\n    }\n\n    linkSource(source, linkMeta) {\n        if(linkMeta.part === 'cases') {\n            super.linkSource(source);\n        } else {\n            this.source.consequent.unshift(source);\n        }   \n    }\n\n    getNodes(jflow) {\n        // const nodes = [];\n        // this.traverse((n) => {\n        //     const renderNode = jflow.getRenderNodeBySource(n.source);\n        //     if (renderNode)\n        //         nodes.push(renderNode);\n        // });\n        return this.parent.getNodes(jflow);\n    }\n\n    delete() {\n        if(this.parent.cases.length === 2) {\n            this.parent.delete();\n        } else {\n            super.delete();\n        }\n    }\n}\n//     reflowPreCalculate(row, column, callback) {\n//         this.consequent.forEach((c, idx) => {\n//             c.reflowPreCalculate(row + idx, column, callback);\n//         });\n//     }\n// }\n\nclass ForEachStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n    }\n\n    makeLink(callback) {\n        let last;\n        if(this.body.length) {\n            this.body.forEach((b, idx) => {\n                callback({\n                    from: last || this,\n                    to: toNode(b),\n                    fromDir: last ? DIRECTION.BOTTOM : DIRECTION.STARTLOOP,\n                    toDir: DIRECTION.TOP,\n                    part: 'foreachbody',\n                });\n\n                b = b.makeLink(callback);\n                last = b;\n            });\n        }\n        callback({\n            from: last || this,\n            to: this,\n            fromDir: last ? DIRECTION.BOTTOM : DIRECTION.STARTLOOP,\n            toDir: DIRECTION.ENDLOOP,\n            minSpanX: getLayoutConstance('minSpanX'),\n            minSpanY: getLayoutConstance('minSpanY'),\n            minGapY: getLayoutConstance('minGapY'),\n            part: 'foreachbody',\n        })\n        return this;\n    }\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(b => {\n            b.traverse(callback);\n        });\n    }\n    reflowPreCalculate(row, column, callback) {\n        // let spanX = 0;\n        // let spanY = 1;\n        this.row = row;\n        this.column = column;\n        if (callback) {\n            callback(row, column, this);\n        }\n        // this.body.forEach((b) => {\n        //     const { spanY: sy, spanX: sx } = b.reflowPreCalculate(row + spanY + 1, column + 1, callback);\n        //     spanX = Math.max(sx, spanX);\n        //     spanY += sy;\n        // });\n\n        // this.spanX = spanX + 1;\n        // this.spanY = spanY;\n        const { spanX, spanY } = verticalFlow(this, this.body, 0, 0, row + 1, column + 1, callback);\n        this.spanX = Math.max(spanX + 1, 2);\n        this.spanY = spanY + 1;\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            row, column,\n        };\n        // return verticalFlow(this, this.body, row, column, callback);\n    }\n    linkSource(source, linkMeta) {\n        if(linkMeta.part !== 'foreachbody') {\n            super.linkSource(source, linkMeta)\n        } else {\n            this.source.body.unshift(source);\n        }\n    }\n    // reflowPreCalculate(row, column, callback) {\n    //     super.reflowPreCalculate(row, column, callback);\n    //     const nextColumn = column + 1;\n    //     this.body.forEach((c, idx) => {\n    //         c.reflowPreCalculate(row + idx, nextColumn, callback);\n    //     });\n    // }\n}\n\nclass WhileStatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.body = (source.body || []).map(mapFunc('body').bind(this));\n    }\n\n    makeLink(callback) {\n        let last;\n        if(this.body.length) {\n            this.body.forEach((b, idx) => {\n                callback({\n                    from: last || this,\n                    to: toNode(b),\n                    fromDir: last ? DIRECTION.BOTTOM : DIRECTION.STARTLOOP,\n                    toDir: DIRECTION.TOP,\n                    part: 'whilebody',\n                });\n\n                b = b.makeLink(callback);\n                last = b;\n            });\n        }\n        callback({\n            from: last || this,\n            to: this,\n            fromDir: last ? DIRECTION.BOTTOM : DIRECTION.STARTLOOP,\n            toDir: DIRECTION.ENDLOOP,\n            // minSpanX: layoutConstance.minSpanX,\n            // minSpanY: layoutConstance.minSpanY,\n            // minGapY: layoutConstance.minGapY,\n            minSpanX: getLayoutConstance('minSpanX'),\n            minSpanY: getLayoutConstance('minSpanY'),\n            minGapY: getLayoutConstance('minGapY'),\n            part: 'whilebody',\n        })\n        return this;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.body.forEach(b => {\n            b.traverse(callback);\n        });\n    }\n    reflowPreCalculate(row, column, callback) {\n        this.row = row;\n        this.column = column;\n        if (callback) {\n            callback(row, column, this);\n        }\n        const { spanX, spanY } = verticalFlow(this, this.body, 0, 0, row + 1, column + 1, callback);\n        this.spanX = Math.max(spanX + 1, 2);\n        this.spanY = spanY + 1;\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            row, column,\n        };\n    }\n    linkSource(source, linkMeta) {\n        if(linkMeta.part !== 'whilebody') {\n            super.linkSource(source, linkMeta)\n        } else {\n            this.source.body.unshift(source);\n        }\n    }\n}\n\n\nclass IFstatement extends BaseNode {\n    constructor(source) {\n        super(source);\n        this.hasEndPoint = true;\n        this.Endpoint = null;\n        this.consequent = (source.consequent || []).map(mapFunc('consequent').bind(this));\n        this.alternate = (source.alternate || []).map(mapFunc('alternate').bind(this));\n    }\n\n    makeLink(callback) {\n        let last;\n        // Alternate\n        if(this.alternate.length) {\n            this.alternate.forEach((b, idx) => {\n                callback({\n                    from: last || this,\n                    to: toNode(b),\n                    fromDir: last ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n                    toDir: DIRECTION.TOP,\n                    part: 'alternate',\n                });\n\n                b = b.makeLink(callback);\n                last = b;\n            });\n        }\n        callback({\n            from: last || this,\n            to: this.Endpoint,\n            fromDir: last ? DIRECTION.BOTTOM : DIRECTION.RIGHT,\n            toDir: DIRECTION.RIGHT,\n            part: 'alternate',\n            minSpanColumn: this.spanConsquent,\n            minSpanX: getLayoutConstance('minSpanX'),\n            noArrow: true,\n            tailPoint: true,\n            tailRadius: 6,\n        })\n\n        // Consequent\n        last = null;\n        if(this.consequent.length) {\n            this.consequent.forEach((b, idx) => {\n                callback({\n                    from: last || this,\n                    to: toNode(b),\n                    fromDir: DIRECTION.BOTTOM,\n                    toDir: DIRECTION.TOP,\n                    part: 'consequent',\n                });\n\n                b = b.makeLink(callback);\n                last = b;\n            });\n        }\n        callback({\n            from: last || this,\n            to: this.Endpoint,\n            fromDir: DIRECTION.BOTTOM,\n            toDir: DIRECTION.TOP,\n            part: 'consequent',\n        })\n\n        return this.Endpoint;\n    }\n\n    traverse(callback) {\n        callback(this);\n        this.consequent.forEach(b => {\n            b.traverse(callback);\n        });\n        this.alternate.forEach(b => {\n            b.traverse(callback);\n        });\n        this.Endpoint.traverse(callback);\n    }\n\n    reflowPreCalculate(row, column, callback) {\n        this.row = row;\n        this.column = column;\n        if (callback) {\n            callback(row, column, this);\n        }\n        \n        const { spanX: csx, spanY: csy } = verticalFlow(this, this.consequent, 0, 0, row + 1, column, callback);\n        // // console.log(Math.max(csx, 1))\n        this.spanConsquent = Math.max(csx, 1);\n        const { spanX: asx, spanY: asy } = verticalFlow(this, this.alternate, 0, 0, row + 1, column + Math.max(csx, 1), callback);\n        this.spanAlternate = Math.max(asx, 1);\n        let spanY = Math.max(csy, asy) + 1;\n        let spanX = Math.max(csx, 1) + Math.max(asx, 1);\n        // console.log(spanY, spanX)\n        const { spanY: syend, spanX: sxend } = this.Endpoint.reflowPreCalculate(row + spanY, column, callback);\n        spanY += syend;\n        spanX = Math.max(spanX, sxend);\n        this.spanX = spanX;\n        this.spanY = spanY;\n        // console.log(this.spanX)\n        return {\n            spanX: this.spanX, \n            spanY: this.spanY, \n            row, column,\n        };\n    }\n\n    linkSource(source, linkMeta) {\n        this.source[linkMeta.part].unshift(source);\n    }\n}\n\nconst TYPE_MAPPING = {\n    'If': IFstatement,\n    \"Switch\": SwitchStatement,\n    \"SwitchCase\": SwitchCase,\n    \"ForEach\": ForEachStatement,\n    \"While\": WhileStatement,\n    Logic,\n    other: BaseNode,\n};\n\nfunction mapFunc(type) {\n    return function (n, idx) {\n        const p = makeAST(n);\n        p.parent = this;\n        p.idx = idx;\n        p.parentIterateType = type;\n\n        if (p.hasEndPoint) {\n            \n            if (!n.__endpoint__) {\n                n.__endpoint__ = {\n                    concept: 'endpoint',\n                    id: `${p.id}-endpoint`,\n                };\n            }\n            // console.log(n.__endpoint__ )\n            const e = makeAST(n.__endpoint__);\n            e.parent = this;\n            e.idx = idx;\n            e.parentIterateType = type;\n            p.Endpoint = e;\n        }\n\n        return p;\n    };\n}\nfunction makeAST(source) {\n    const type = source.concept;\n    const Constructor = TYPE_MAPPING[type] || TYPE_MAPPING.other;\n    const node = new Constructor(source);\n    return node;\n}\nexport {\n    makeAST,\n};","import { JFlowEvent } from '@joskii/jflow'\nimport { makeAST } from './base-node';\nimport { layoutConstance, getLayoutConstance, getSourceAnchor } from './utils';\nimport { dist2 } from '../src/custom/utils'\nclass LogicLayout {\n    constructor(source) {\n        // this.rowGap = layoutConstance.rowGap;\n        // this.columnGap = layoutConstance.columnGap;\n        // this.columnWidth = layoutConstance.columnWidth;\n        // rowHeight = layoutConstance.rowHeight;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n        this.source = null;\n        this.static = true;\n        this.reOrder(source)\n    }\n\n    staticCheck(instance, jflow) {\n        console.log(this.flowStack[0].source)\n        const nowAnchor = instance.anchor.slice();\n        let layoutAnchor = null;\n        let i = 0;\n        for (let i = 0; i < this.flowStack.length; i++) {\n            console.log(this.flowStack[i].source)\n            const { source, layoutNode } = this.flowStack[i];\n            const j = jflow.getRenderNodeBySource(source); // ast.getJflowInstance();\n            if(j === instance) {\n                const rowGap = getLayoutConstance('rowGap');\n                const rowHeight = getLayoutConstance('rowHeight');\n                const columnWidth = getLayoutConstance('columnWidth');\n                const columnGap = getLayoutConstance('columnGap');\n                const rootLayoutNode = layoutNode.rootLayoutNode;\n                let ax = 0;\n                let ay = 0;\n                if(rootLayoutNode) {\n                    const [x, y] = getSourceAnchor(jflow, rootLayoutNode.source)\n                    ax = x;\n                    ay = y;\n                }\n                const { row, column, source } = layoutNode;\n                layoutAnchor = [\n                    column * (columnWidth + columnGap) + ax,\n                    row * (rowHeight + rowGap) + ay,\n                ];\n                break;\n            }\n        }\n        if(!layoutAnchor) {\n            jflow.reflow();\n            return false;\n        } \n       \n        const d = dist2(nowAnchor, layoutAnchor);\n        if (d > 1000) {\n            instance.dispatchEvent(new JFlowEvent('outOfFlow', {\n                anchor: nowAnchor,\n                instance,\n                jflow,\n                point: nowAnchor,\n            }));\n            return true;\n        } else {\n            jflow.reflow();\n        }\n        return false;\n    }\n\n    reOrder(source) {\n        this.source = source;\n        this.flowStack = [];\n        this.flowLinkStack = [];\n\n        this.root = makeAST(this.source);\n\n        this.root.traverse((node) => {\n            if (node.concept === 'Switch' || node.concept === 'Logic') {\n                return;\n            }\n\n            this.flowStack.push({\n                type: node.type,\n                source: node.source,\n                layoutNode: node,\n            }); \n        });\n\n        // const layoutMapping = {\n        //     vertical: {},\n        //     horizontal: {},\n        // };\n        this.root.reflowBodyPreCalculate(0, 0, (row, column, node) => {\n            //console.log(column, row, node.concept, node.source.content)\n        })\n\n        this.root.reflowPlaygroundPreCalculate(() => {});\n        // this.root.reflowBodyPreCalculate(0, 0, (row, column, node) => {\n        //     if (!layoutMapping.vertical[row]) {\n        //         layoutMapping.vertical[row] = {};\n        //     }\n        //     layoutMapping.vertical[row][column] = node;\n\n        //     if (!layoutMapping.horizontal[column]) {\n        //         layoutMapping.horizontal[column] = {};\n        //     }\n        //     layoutMapping.horizontal[column][row] = node;\n        // });\n\n        // this.layoutMapping = layoutMapping;\n        const rowGap = getLayoutConstance('rowGap');\n        const rowHeight = getLayoutConstance('rowHeight');\n        const columnWidth = getLayoutConstance('columnWidth');\n        const columnGap = getLayoutConstance('columnGap');\n\n        this.root.makeLink((configs) => {\n            // console.log(configs)\n            const sourceLayoutNode = configs.from;\n            const { column, row } = sourceLayoutNode\n            if(configs.roundCorner) {\n                \n                // console.log(configs.roundCorner);\n                if (configs.roundCorner.length === 2) {\n                    const [x, y] = configs.roundCorner;\n                    configs.bendPoint = [\n                        (x) * (columnWidth + columnGap) + columnWidth /2 + 15,\n                        (y) * (rowHeight + rowGap) - rowHeight / 2 + 10,\n                    ]\n                }\n                if (configs.roundCorner.length === 4) {\n                    const [x1, y1, x2, y2] = configs.roundCorner;\n                    configs.bendPoint = [\n                        (x1) * (columnWidth + columnGap),\n                        (y1) * (rowHeight + rowGap),\n                        (x2) * (columnWidth + columnGap) + columnWidth /2 + 15,\n                        (y2) * (rowHeight + rowGap) - rowHeight / 2 + 10,\n                    ]\n                }\n            } else {\n                configs.bendPoint = []\n            }\n            if(configs.endRow) {\n                const iterateEndY = (configs.endRow - row) * (rowHeight + rowGap);\n                configs.iterateEndY = iterateEndY;\n            } else {\n                configs.iterateEndY = undefined\n            }\n            if(configs.minSpanColumn !== undefined) {\n                console.log('spanConsquent', configs.minSpanColumn)\n                configs.minSpanX += (configs.minSpanColumn - 1) * (columnWidth + columnGap);\n            }\n\n            if(sourceLayoutNode.source.concept === 'If') {\n                configs.content = (configs.part === 'alternate' ? 'No' : 'Yes');\n            }\n            if(sourceLayoutNode.source.concept === 'While') {\n                configs.content = (configs.part === 'whilebody' ? 'Yes' : 'No');\n            }\n            this.flowLinkStack.push(configs);\n        });\n        // console.log(layoutMapping)\n        // console.log(this.source);\n        // console.log(this.flowStack.map(t => t.type))\n    }\n\n    reflow(jflow) {\n        // const rowGap = rowGap;\n        // const columnGap = columnGap;\n        const rowGap = getLayoutConstance('rowGap');\n        const rowHeight = getLayoutConstance('rowHeight');\n        const columnWidth = getLayoutConstance('columnWidth');\n        const columnGap = getLayoutConstance('columnGap');\n        // const layoutMapping = this.layoutMapping;\n\n        // const {\n        //     vertical: verticalMapping,\n        //     horizontal: horizontalMapping,\n        // } = layoutMapping;\n        \n        this.flowStack.forEach(({ layoutNode }) => {\n            const rootLayoutNode = layoutNode.rootLayoutNode;\n            let ax = 0;\n            let ay = 0;\n            if(rootLayoutNode) {\n                const [x, y] = getSourceAnchor(jflow, rootLayoutNode.source)\n                // const i = jflow.getRenderNodeBySource(rootLayoutNode.source);\n                ax = x;\n                ay = y;\n            }\n            const { row, column, source } = layoutNode;\n            const instance = jflow.getRenderNodeBySource(source);\n            instance.anchor = [\n                column * (columnWidth + columnGap) + ax,\n                row * (rowHeight + rowGap) + ay,\n            ];\n        });\n\n        // this.flowLinkStack.forEach(linkConfig => {\n        //     if (linkConfig.roundCorner) {\n        //         const [x, y] = linkConfig.roundCorner;\n        //         linkConfig.bendPoint = [\n        //             x * (this.columnWidth + this.columnGap) + 10,\n        //             y * (rowHeight + this.rowGap) - rowHeight / 2 - 10\n        //         ]\n        //     }\n        // });\n\n       \n        // this.root.reflowPreCalculate(0, 0, ({ row, column, layoutNode }) => {\n        //     console.log(row, column, layoutNode.source.concept)\n        //     const instance = jflow.getRenderNodeBySource(layoutNode.source);\n        //     instance.setAnchor(columnAnchor[column], row * (rowGap + 32));\n        // });\n        \n    }\n}\n\nexport default LogicLayout;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.layoutNode.isDefault)?_c('j-logic-node-group',{attrs:{\"source\":_vm.node}}):_c('j-logic-node-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.configs},on:{\"click\":_vm.onClickWrapper,\"contextclick\":_vm.onContextClick,\"instancemousemove\":_vm.setPointerCursor,\"dblclick\":_vm.onDblclick,\"afterResolveMovingTarget\":_vm.onAfterResolveMovingTarget,\"mouseenter\":_vm.onMouseEnter,\"mouseleave\":_vm.onMouseLeave}},_vm.$listeners),[_c('j-group',{attrs:{\"configs\":_vm.iconGroup}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}})],1),_c('j-group',{attrs:{\"configs\":_vm.textGroup}},[_c('j-text',{attrs:{\"configs\":{\n            fontSize: '12px',\n            textColor: '#222',\n            content: _vm.node.content,\n            maxWidth: 159,\n            ellipsis: true,\n            textAlign: 'left'\n        }}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import AssignmentIcon from './assets/Assignment.png'\nimport ForEachIcon from './assets/ForEach.png'\nimport SwitchIcon from './assets/Switch.png'\nimport SwitchCaseIcon from './assets/SwitchCase.png'\nimport WhileIcon from './assets/While.png'\nimport callInterfaceIcon from './assets/callInterface.png'\nimport callLogicIcon from './assets/callLogic.png'\nimport datasearchIcon from './assets/datasearch.png'\nimport ifIcon from './assets/if.png'\n\nfunction makeImage(icon) {\n    const p = new Image();\n    p.src = icon;\n    return p;\n}\n\nexport const ConceptIconMap = {\n    'Assignment': makeImage(AssignmentIcon),\n    'ForEach': makeImage(ForEachIcon),\n    'Switch': makeImage(SwitchIcon),\n    'While': makeImage(WhileIcon),\n    'callInterface': makeImage(callInterfaceIcon),\n    'callLogic': makeImage(callLogicIcon),\n    'datasearch': makeImage(datasearchIcon),\n    'SwitchCase': makeImage(SwitchCaseIcon),\n    'If': makeImage(ifIcon),\n}\n\nexport const ConceptIconURLMap = {\n    'Assignment': AssignmentIcon,\n    'ForEach': ForEachIcon,\n    'Switch': SwitchIcon,\n    'While': WhileIcon,\n    'callInterface': callInterfaceIcon,\n    'callLogic': callLogicIcon,\n    'datasearch': datasearchIcon,\n    'SwitchCase': SwitchCaseIcon,\n    'If': ifIcon,\n}\n\nexport const ConceptColorMap = {\n    'Assignment': '#EBBC00',\n    'ForEach': '#A567F5',\n    'Switch': '#4C88FF',\n    'SwitchCase': '#4C88FF',\n    'While': '#97B20E',\n    'callInterface': '#756BFF',\n    'callLogic': '#F56CC7',\n    'datasearch': '#00B5D9',\n    'If': '#F2A130',\n}\n\nexport const ConceptSubColorMap = {\n    'Assignment': '#FDF9E6',\n    'ForEach': '#F6F0FE',\n    'Switch': '#EEF4FF',\n    'SwitchCase': '#EEF4FF',\n    'While': '#F5F8E7',\n    'callInterface': '#756BFF',\n    'callLogic': '#fff',\n    'datasearch': '#fff',\n    'If': '#fff',\n}","<template>\n    <j-logic-node-group  v-if=\"layoutNode.isDefault\" :source=\"node\">\n    </j-logic-node-group >\n    <j-logic-node-group \n        v-else\n        :source=\"node\" \n        :configs=\"configs\"\n        v-on=\"$listeners\"\n        @click=\"onClickWrapper\"\n        @contextclick=\"onContextClick\"\n        @instancemousemove=\"setPointerCursor\"\n        @dblclick=\"onDblclick\"\n        @afterResolveMovingTarget=\"onAfterResolveMovingTarget\"\n        @mouseenter=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\">\n        <j-group :configs=\"iconGroup\">\n            <j-icon :configs=\"imageConfig\" />\n        </j-group>\n\n        <j-group :configs=\"textGroup\">\n            <j-text :configs=\"{\n                fontSize: '12px',\n                textColor: '#222',\n                content: node.content,\n                maxWidth: 159,\n                ellipsis: true,\n                textAlign: 'left'\n            }\">\n            </j-text>\n        </j-group>\n    </j-logic-node-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport {\n    ConceptColorMap,\n    ConceptSubColorMap,\n    ConceptIconMap,\n} from './configs';\n\nfunction translateToClientCoord(jflowInstance) {\n    const p = [\n        -jflowInstance.width/2,\n        -jflowInstance.height/2,\n    ];\n    const gp = jflowInstance.calculateToRealWorld(p);\n    // console.log(jflowInstance._jflow.DOMwrapper.getBoundingClientRect())\n    const { x, y } = jflowInstance._jflow.DOMwrapper.getBoundingClientRect();\n    return [gp[0] + x, gp[1] + y];\n}\nconst rootLayout = new LinearLayout({\n    direction: 'horizontal',\n    gap: 10,\n});\nexport default { \n    inject: ['renderJFlow', 'poppups', 'modal', 'closePopper', 'setFocus', 'isOnFocus'],\n    props: {\n        node: Object,\n        layoutNode: Object,\n    },\n    data() {\n        const node = this.node;\n        \n        const subcolor = ConceptSubColorMap[node.concept]\n        const icon = ConceptIconMap[node.concept];\n        return {\n           \n            iconGroup: {\n                borderRadius: 4,\n                padding: 4,\n                backgroundColor: subcolor,\n            },\n            textGroup: {\n                width: 159,\n                paddingTop: 10,\n                paddingBottom: 10,\n            },\n            imageConfig: {\n                image: icon,\n                width: 24,\n                height: 24,\n            }\n        }\n    },\n    computed: {\n        selectionMeta() {\n            return this.poppups.selectionMeta;\n        },\n        selectionActive() {\n            return this.selectionMeta.active && this.selectionMeta.target === this.node;\n        },\n        modalMeta() {\n            return this.modal.modalMeta;\n        },\n        isFocused() {\n            return this.isOnFocus(this.node);\n        },\n        configs() {\n            const color = ConceptColorMap[this.node.concept];\n            const focused = this.isFocused\n            let shadow = {\n                shadowColor: 'transparent',\n            };\n            if (focused) {\n                shadow = {\n                    shadowColor: 'rgba(81, 124, 255)',\n                    shadowBlur: 15,\n                };\n            }\n            console.log('opacity', this.layoutNode.rootLayoutNode ? 0.5 : 1)\n            return {\n                layout: rootLayout,\n                borderWidth: 2,\n                borderColor: focused ? '#517CFF': color,\n                backgroundColor: '#fff',\n                borderRadius: 4,\n                height: 32,\n                opacity: this.layoutNode.rootLayoutNode ? 0.5 : 1,\n                ...shadow,\n            }\n        }\n    },\n    updated() {\n        this.renderJFlow();\n    },\n    methods: {\n        setPointerCursor($event) {\n            $event.detail.jflow.canvas.style.cursor = 'pointer';\n            $event.detail.bubbles = false;\n        },\n        onContextClick(event) {\n            event.detail.bubbles = false;\n            const { clientX, clientY } = event.detail.event;\n\n            Object.assign(this.selectionMeta, {\n                type: 'operate',\n                clientX,\n                clientY,\n                active: true,\n                target: this.layoutNode,\n            });\n        },\n        onDblclick() {\n            Object.assign(this.modalMeta, {\n                active: true,\n                target: this.node,\n            });\n        },\n        onAfterResolveMovingTarget(event) {\n            const jflow = event.detail.jflow;\n            const renderNodes = this.layoutNode.getNodes(jflow);\n            jflow.setMovingTargets(renderNodes);\n        },\n        onMouseEnter(event) {\n            const { currentTarget } = event;\n            console.log(event)\n            const [x, y] = translateToClientCoord(currentTarget);\n            Object.assign(this.selectionMeta, {\n                type: 'hovercontent',\n                clientX: x,\n                clientY: y,\n                active: true,\n                target: this.node,\n            });\n        },\n        onMouseLeave(event) {\n            if(this.selectionActive) {\n                this.closePopper()\n            }\n        },\n        onClickWrapper(event){\n            event.detail.bubbles = false;\n            this.setFocus(this.node);\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./logic-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./logic-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logic-node.vue?vue&type=template&id=1ffdde87&\"\nimport script from \"./logic-node.vue?vue&type=script&lang=js&\"\nexport * from \"./logic-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-logic-node-group',_vm._g({attrs:{\"source\":_vm.node,\"configs\":_vm.configs},on:{\"instancemousemove\":_vm.setPointerCursor}},_vm.$listeners),[_c('j-group',{attrs:{\"configs\":_vm.iconGroup}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-logic-node-group  \n        :source=\"node\" \n        :configs=\"configs\"\n        v-on=\"$listeners\"\n        @instancemousemove=\"setPointerCursor\">\n        <j-group :configs=\"iconGroup\">\n            <j-icon :configs=\"imageConfig\" />\n        </j-group>\n    </j-logic-node-group >\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport logicIcon from './assets/start.png';\nconst p = new Image();\np.src = logicIcon;\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n            },\n            iconGroup: {\n                padding: 10,\n                backgroundColor: '#fff',\n                borderColor: '#E0E0E0',\n                borderWidth: 1,\n            },\n            imageConfig: {\n                image: p,\n                width: 20,\n                height: 20,\n            }\n        }\n    },\n    methods: {\n        setPointerCursor($event) {\n            $event.detail.jflow.canvas.style.cursor = 'pointer';\n            $event.detail.bubbles = false;\n        },\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./start-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./start-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./start-node.vue?vue&type=template&id=7495fdd4&\"\nimport script from \"./start-node.vue?vue&type=script&lang=js&\"\nexport * from \"./start-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-logic-node-group',{attrs:{\"source\":_vm.node}},[_c('j-point',{attrs:{\"configs\":{\n            backgroundColor: '#666E80',\n            borderWidth: 1,\n            radius: 2,\n            ignoreHit: true,\n        }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<j-logic-node-group\n    :source=\"node\">\n    <j-point\n        :configs=\"{\n            backgroundColor: '#666E80',\n            borderWidth: 1,\n            radius: 2,\n            ignoreHit: true,\n        }\">\n    </j-point>\n</j-logic-node-group>\n</template>\n\n<script>\nexport default {\n    props: {\n        node: Object,\n    },\n    created() {\n        console.log(this.node)\n    }\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./endpoint-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./endpoint-node.vue?vue&type=template&id=06db6bda&\"\nimport script from \"./endpoint-node.vue?vue&type=script&lang=js&\"\nexport * from \"./endpoint-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-logic-node-group',{attrs:{\"source\":_vm.node,\"configs\":_vm.configs}},[_c('j-group',{attrs:{\"configs\":_vm.iconGroup}},[_c('j-icon',{attrs:{\"configs\":_vm.imageConfig}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-logic-node-group  \n        :source=\"node\" \n        :configs=\"configs\">\n        <!-- <j-text :configs=\"{\n            fontSize: '12px',\n            textColor: '#000',\n            content: '结束',\n        }\">\n        </j-text> -->\n        <j-group :configs=\"iconGroup\">\n            <j-icon :configs=\"imageConfig\" />\n        </j-group>\n    </j-logic-node-group>\n</template>\n\n<script>\nimport { LinearLayout } from '@joskii/jflow';\nimport logicIcon from './assets/end.png';\nconst p = new Image();\np.src = logicIcon;\nexport default {\n    props: {\n        node: Object,\n    },\n    data() {\n        return {\n            configs: {\n                layout: new LinearLayout({\n                    direction: 'vertical',\n                    gap: 10,\n                }),\n            },\n            iconGroup: {\n                padding: 10,\n                backgroundColor: '#fff',\n                borderColor: '#E0E0E0',\n                borderWidth: 1,\n            },\n            imageConfig: {\n                image: p,\n                width: 20,\n                height: 20,\n            }\n        }\n    },\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./end-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./end-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./end-node.vue?vue&type=template&id=675cfd9c&\"\nimport script from \"./end-node.vue?vue&type=script&lang=js&\"\nexport * from \"./end-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-logic-link',{attrs:{\"configs\":_vm.configs,\"from\":_vm.linkConfigs.from.source,\"to\":_vm.linkConfigs.to.source},on:{\"instancemousemove\":_vm.setPointerCursor,\"click\":_vm.onClick,\"mouseenter\":_vm.onMouseEnter,\"mouseleave\":_vm.onMouseLeave,\"dragenter\":_vm.onDragEnter,\"dragover\":_vm.onDragOver,\"dragleave\":_vm.onDragOverEnd,\"drop\":_vm.onDropToLink}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <j-logic-link\n        :configs=\"configs\"\n        :from=\"linkConfigs.from.source\"\n        :to=\"linkConfigs.to.source\"\n        @instancemousemove=\"setPointerCursor\"\n        @click=\"onClick\"\n        @mouseenter=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\"\n        @dragenter=\"onDragEnter\"\n        @dragover=\"onDragOver\"\n        @dragleave=\"onDragOverEnd\"\n        @drop=\"onDropToLink\">\n    </j-logic-link>\n</template>\n\n<script>\nimport { translateToClientCoord } from '../custom/utils';\nexport default {\n    inject: [\n        'renderJFlow', \n        'poppups', \n        'isOnFocus', \n        'animate', \n        'status'\n    ],\n    props: {\n        linkConfigs: Object,\n        // nodeDragging: Boolean,\n    },\n    data() {\n        return {\n            isDragOver: false,\n            showAdd: false,\n            showDragover: false,\n        };\n    },\n    computed: {\n        // nodeDragging() {\n        //     console.log('linknodedragging', this.nodeDragging.active)\n        //     return this.status.dragging.active;\n        // },\n        configs() {\n            // console.log(this.linkConfigs.bendPoint)\n            console.log(this.showAdd)\n            return {\n                ...this.linkConfigs,\n                // fromDir: undefined,\n                // toDir: undefined,\n                // isSelf: false,\n                // noArrow: this.linkConfigs.to.type === 'endpoint',\n                showAdd: this.showAdd,\n                showDragover: this.isDragOver,\n                radius: 5,\n                approximate: 2000,\n                opacity: this.linkConfigs.from.rootLayoutNode ? 0.5 : 1,\n                // arrowSegment: this.isFocused ? 400 : 0,\n                animePoint: {\n                    enable: this.isFocused || this.animate.link,\n                    color: '#517CFF',\n                    gap: 240,\n                },\n                backgroundColor: '#919499',\n            };\n        },\n        selectionMeta() {\n            return this.poppups.selectionMeta;\n        },\n        selectionActive() {\n            return this.selectionMeta.active && this.selectionMeta.target === this.linkConfigs;\n        },\n        isFocused() {\n            return this.isOnFocus(this.linkConfigs.from.source);\n        },\n    },\n    watch: {\n        'status.dragging.active'(val) {\n            this.isDragOver = val;\n        }\n    },\n    updated() {\n        this.renderJFlow();\n    },\n    methods: {\n        setPointerCursor($event) {\n            $event.detail.jflow.canvas.style.cursor = 'pointer';\n            $event.detail.bubbles = false;\n        },\n        // getTargetConcept($event) {\n        //     const node = $event.detail.target;\n        //     const source = this.getMovingSource();\n        //     return source?.concept || node?.concept;\n        // },\n        onDropToLink($event) {\n            this.$emit('drop', $event);\n            this.isDragOver = false;\n        },\n        onDragEnter($event) {\n            // const concept = this.getTargetConcept($event);\n            // if (LINK_ACCEPT_CONCEPT.includes(concept)) {\n                this.isDragOver = true;\n            // }\n        },\n        onDragOver($event) {\n            // $event.detail.jflow.canvas.style.cursor = 'default';\n            // const node = $event.detail.target;\n            // if (LINK_ACCEPT_CONCEPT.includes(node?.concept)) {\n            \n            const e = $event.detail.originEvent;\n            if (e.dataTransfer) {\n                e.dataTransfer.dropEffect = 'copy';\n            }\n\n            // }\n        },\n        onDragOverEnd() {\n            this.isDragOver = false;\n            // this.setCanvasCursor('default');\n            // if ($event.detail.target?.groupType === 'Rules') {\n            //     $event.detail.event.dataTransfer.dropEffect = 'none';\n            // }\n        },\n        onMouseEnter() {\n            this.showAdd = true;\n        },\n        onMouseLeave() {\n            if(!this.selectionActive) {\n                this.showAdd = false;\n            }\n        },\n        onClick(event) {\n            console.log(event)\n            event.detail.bubbles = false;\n            const { clientX, clientY } = event.detail.event;\n            // const [x, y] = translateToClientCoord(currentTarget);\n            this.showAdd = true;\n            Object.assign(this.selectionMeta, {\n                type: 'addMenu',\n                clientX,\n                clientY,\n                active: true,\n                target: this.linkConfigs,\n            });\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logic-link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logic-link.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logic-link.vue?vue&type=template&id=32a7d55d&\"\nimport script from \"./logic-link.vue?vue&type=script&lang=js&\"\nexport * from \"./logic-link.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('j-switch-case-link',{attrs:{\"configs\":_vm.configs,\"from\":_vm.linkConfigs.from.source,\"to\":_vm.linkConfigs.to.source},on:{\"instancemousemove\":_vm.setPointerCursor,\"click\":_vm.onClick,\"mouseenter\":_vm.onMouseEnter,\"mouseleave\":_vm.onMouseLeave}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let uuid = 0;\nfunction getUid() {\n    return `gen${uuid++}`;\n}\n\nexport function genNode(concept) {\n    switch (concept) {\n        case \"Assignment\":\n            return {\n                id: getUid(),\n                concept,\n                content: '',\n            }\n        case \"ForEach\":\n        case \"While\":\n            return {\n                id: getUid(),\n                concept,\n                content: '',\n                body: [],\n            }\n        case \"Switch\":\n            return {\n                id: getUid(),\n                concept,\n                cases: [\n                    genNode('SwitchCase'),\n                    genNode('SwitchCase'),\n                    genNode('SwitchCase'),\n                    genNode('SwitchCase'),\n                ],\n            }\n        // case \"callInterface\":\n        // case \"callLogic\":\n        // case \"datasearch\":\n        case \"SwitchCase\":\n            return {\n                id: getUid(),\n                concept,\n                content: '',\n                consequent: [],\n            }\n        case \"If\":\n            return {\n                id: getUid(),\n                concept,\n                content: '',\n                consequent: [],\n                alternate: [],\n            }\n        \n        default:\n            return null\n    }\n}","<template>\n   <j-switch-case-link\n        :configs=\"configs\"\n        @instancemousemove=\"setPointerCursor\"\n        @click=\"onClick\"\n        @mouseenter=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\"\n        :from=\"linkConfigs.from.source\"\n        :to=\"linkConfigs.to.source\">\n    </j-switch-case-link>\n</template>\n\n<script>\nimport { genNode } from \"../data/data\";\nexport default {\n    inject: ['renderJFlow', 'reOrderAndReflow'],\n    props: {\n        linkConfigs: Object,\n    },\n    data() {\n        return {\n            showAdd: false,\n        }\n    },\n    computed: {\n        configs() {\n            // console.log(this.linkConfigs.bendPoint)\n            return {\n                ...this.linkConfigs,\n                showAdd: this.showAdd,\n                backgroundColor: this.showAdd ? '#4C88FF' : '#919499',\n            };\n        },\n    },\n    updated() {\n        this.renderJFlow();\n    },\n    methods: {\n        setPointerCursor($event) {\n            $event.detail.jflow.canvas.style.cursor = 'pointer';\n            $event.detail.bubbles = false;\n        },\n        onClick() {\n            const node = genNode('SwitchCase');\n            this.linkConfigs.from.linkSource(node, this.linkConfigs);\n            this.reOrderAndReflow();\n        },\n        onMouseEnter() {\n            console.log('enter')\n            this.showAdd = true;\n        },\n        onMouseLeave() {\n             console.log('leave')\n            this.showAdd = false;\n        },\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch-link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./switch-link.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./switch-link.vue?vue&type=template&id=b1cd99e4&\"\nimport script from \"./switch-link.vue?vue&type=script&lang=js&\"\nexport * from \"./switch-link.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.meta.active),expression:\"meta.active\"}],class:_vm.$style.root,style:(_vm.translateStyle)},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <transition name=\"fade\">\n        <div v-show=\"meta.active\" \n            :class=\"$style.root\"\n            :style=\"translateStyle\">\n            <slot></slot>\n        </div>\n    </transition>\n</template>\n\n<script>\n\nexport default {\n    props: {\n        meta: Object,\n    },\n    computed: {\n        translateStyle() {\n            console.log(this.meta)\n            return `transform: translate(${this.meta.clientX}px, ${this.meta.clientY}px)`\n        }\n    }\n}\n</script>\n\n<style>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n<style module>\n.root {\n    position: absolute;\n    min-width: 208px;\n    left: 0;\n    top: 0;\n    transform: translate(0, 0);\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-wrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu-wrapper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./menu-wrapper.vue?vue&type=template&id=77cb8b0c&\"\nimport script from \"./menu-wrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./menu-wrapper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./menu-wrapper.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./menu-wrapper.vue?vue&type=style&index=1&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style1.locals || style1)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.root},[_c('div',{class:_vm.$style.title},[_vm._v(\" 建议添加逻辑 \")]),_c('ul',{class:_vm.$style.list},_vm._l((_vm.list),function(config){return _c('li',{key:config.concept,on:{\"click\":function($event){return _vm.addConceptNode(config.concept)}}},[_c('img',{class:_vm.$style.icon,attrs:{\"src\":config.icon}}),_c('span',[_vm._v(_vm._s(config.concept))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :class=\"$style.root\">\n        <div :class=\"$style.title\">\n            建议添加逻辑\n        </div>\n        <ul :class=\"$style.list\">\n            <li v-for=\"config in list\" \n                :key=\"config.concept\"\n                @click=\"addConceptNode(config.concept)\">\n                <img :src=\"config.icon\" :class=\"$style.icon\" />\n                <span>{{config.concept}}</span>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport {\n    ConceptColorMap,\n    ConceptSubColorMap,\n    ConceptIconURLMap,\n} from '../configs';\nimport { genNode } from \"../data/data\";\nfunction getList() {\n    return [\n        \"Assignment\",\n        \"ForEach\",\n        \"Switch\",\n        \"While\",\n        \"If\"\n    ].map(c => ({\n        concept: c,\n        color: ConceptColorMap[c],\n        subcolor: ConceptSubColorMap[c],\n        icon: ConceptIconURLMap[c],\n    }))\n}\n\nexport default {\n    inject: ['reOrderAndReflow', 'closePopper', 'focusOn'],\n    props: {\n        meta: Object,\n    },\n    data() {\n        return {\n            list: getList(),\n        }\n    },\n    methods: {\n        addConceptNode(c) {\n            const node = genNode(c);\n            const linkConfigs = this.meta.target;\n            linkConfigs.from.linkSource(node, linkConfigs);\n            this.reOrderAndReflow(node);\n            this.closePopper();\n            // this.$nextTick(() => {\n            //     this.focusOn(node);\n            // })\n        }\n    }\n}\n</script>\n\n<style module>\n.root {\n    background: #fff;\n    border: 1px solid #E0E0E0;\n}\n.title {\n    color: #C4C4C4;\n    border-bottom: 1px solid #E0E0E0;\n    padding: 10 12;\n}\n.list{ \n    list-style: none;\n    padding-left: 10px\n}\n.list > li { \n    list-style-type: none;\n    padding: 10px 12px;\n    cursor: pointer;;\n}\n.list > li:hover { \n    background: #E0E0E0;\n}\n.icon { \n    width: 18px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add-menu.vue?vue&type=template&id=e5d31afc&\"\nimport script from \"./add-menu.vue?vue&type=script&lang=js&\"\nexport * from \"./add-menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add-menu.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.root},[_c('div',{class:_vm.$style.title},[_vm._v(\" \"+_vm._s(_vm.meta.concept)+\" \")]),_c('ul',{class:_vm.$style.list},[_c('li',{on:{\"click\":_vm.removeNode}},[_c('span',[_vm._v(\"删除\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :class=\"$style.root\">\n        <div :class=\"$style.title\">\n            {{ meta.concept }}\n        </div>\n        <ul :class=\"$style.list\">\n            <li @click=\"removeNode\">\n                <span>删除</span>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport {\n    ConceptColorMap,\n    ConceptSubColorMap,\n    ConceptIconURLMap,\n} from '../configs';\nimport { genNode } from \"../data/data\";\nfunction getList() {\n    return [\n        \"Assignment\",\n        \"ForEach\",\n        \"Switch\",\n        \"While\",\n        \"If\"\n    ].map(c => ({\n        concept: c,\n        color: ConceptColorMap[c],\n        subcolor: ConceptSubColorMap[c],\n        icon: ConceptIconURLMap[c],\n    }))\n}\n\nexport default {\n    inject: ['reOrderAndReflow', 'closePopper'],\n    props: {\n        meta: Object,\n    },\n    data() {\n        return {\n            list: getList(),\n        }\n    },\n    methods: {\n        removeNode() {\n            const layoutNode = this.meta.target;\n            layoutNode.delete();\n            this.reOrderAndReflow();\n            this.closePopper();\n        }\n    }\n}\n</script>\n\n<style module>\n.root {\n    background: #fff;\n    border: 1px solid #E0E0E0;\n}\n.title {\n    color: #C4C4C4;\n    border-bottom: 1px solid #E0E0E0;\n    padding: 10 12;\n}\n.list{ \n    list-style: none;\n    padding-left: 10px\n}\n.list > li { \n    list-style-type: none;\n    padding: 10px 12px;\n    cursor: pointer;;\n}\n.list > li:hover { \n    background: #E0E0E0;\n}\n.icon { \n    width: 18px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./op-menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./op-menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./op-menu.vue?vue&type=template&id=7c8bd4b6&\"\nimport script from \"./op-menu.vue?vue&type=script&lang=js&\"\nexport * from \"./op-menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./op-menu.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.meta.active),expression:\"meta.active\"}],class:_vm.$style.root,style:(_vm.translateStyle)},[_vm._v(\" \"+_vm._s(_vm.meta.target.content)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<transition name=\"fade\">\n  <div :class=\"$style.root\" v-show=\"meta.active\" :style=\"translateStyle\">\n      {{ meta.target.content }}\n  </div>\n</transition>\n</template>\n\n<script>\nexport default {\n    props: {\n        meta: Object,\n    },\n    computed: {\n        translateStyle() {\n            console.log(this.meta)\n            return `transform: translate(${this.meta.clientX}px, ${this.meta.clientY - 46}px)`\n        }\n    }\n}\n</script>\n\n<style module>\n.root{\n     background: #22242E;\n    color: #fff;\n    padding: 10px 12px;\n    position: absolute;\n    /* transform: translate(-50%, -100%); */\n    font-size: 14px;\n    left: 0;\n    top: 0;\n    transform: translate(0, 0);\n}\n.root::after {\n     display: block;\n    content: ' ';\n    width: 8px;\n    height: 8px;\n    position: absolute;\n    bottom: 0px;\n    left: 50%;\n    background: #000;\n    transform: translate(-3px, 3px) rotate(45deg);\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-hover.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-hover.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./content-hover.vue?vue&type=template&id=7861c1a8&\"\nimport script from \"./content-hover.vue?vue&type=script&lang=js&\"\nexport * from \"./content-hover.vue?vue&type=script&lang=js&\"\nimport style0 from \"./content-hover.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import wrapper from './menu-wrapper.vue';\nimport addMenu from './add-menu.vue';\nimport opMenu from './op-menu.vue';\nimport contentHover from './content-hover.vue';\n\nfunction getComponent(type) {\n    switch (type) {\n        case 'addMenu':\n            return addMenu;\n        case 'operate':\n            return opMenu;\n        case 'hovercontent':\n            return contentHover;\n        default:\n            return null;\n    }\n}\nexport default {\n    functional: true,\n    props: {\n        meta: Object,\n    },\n    render(c, context) {\n        const {\n            meta,\n        } = context.props;\n        const key = context.data.key;\n        const targetComponent = getComponent(meta.type);\n        if(meta.type === 'hovercontent') {\n            return c(targetComponent, {\n                key,\n                props: context.props,\n                on: context.listeners,\n            });\n        }\n        return c(wrapper, {\n            props: {\n                meta,\n            },\n        }, [\n            c(targetComponent, {\n                key,\n                props: context.props,\n                on: context.listeners,\n            })]);\n    },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.meta.active),expression:\"meta.active\"}],class:_vm.$style.wrapper},[(_vm.target)?_c('div',{class:_vm.$style.root},[_c('div',{class:_vm.$style.header},[_c('div',[_vm._v(_vm._s(_vm.target.concept))]),_c('button',{on:{\"click\":_vm.onClose}},[_vm._v(\"close\")])]),_c('div',{class:_vm.$style.content},[_c('textarea',{class:_vm.$style.box,domProps:{\"value\":_vm.target.content},on:{\"blur\":_vm.onChangeContent}})])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <transition name=\"fade\">\n    <div :class=\"$style.wrapper\" v-show=\"meta.active\">\n        <div :class=\"$style.root\" v-if=\"target\">\n            <div :class=\"$style.header\">\n                <div>{{ target.concept }}</div>\n                <button @click=\"onClose\">close</button>\n            </div>\n            <div :class=\"$style.content\">\n                <textarea :class=\"$style.box\" :value=\"target.content\" \n                    @blur=\"onChangeContent\">\n                </textarea>\n            </div>\n        </div>\n    </div>\n    </transition>\n</template>\n\n<script>\nexport default {\n    inject: ['renderJFlow'],\n    props: {\n        meta: Object\n    },\n    computed: {\n        target() {\n            return this.meta.target || {}\n        }\n    },\n    methods: {\n        onClose() {\n            Object.assign(this.meta, {\n                active: false,\n            })\n        },\n        onChangeContent(event) {\n            const c = event.target.value;\n            this.target.content = c;\n            this.renderJFlow();\n        }\n    }\n}\n</script>\n\n<style module>\n.wrapper{\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    top: 0;\n    left: 0;\n    justify-content: center;\n    align-items: center;\n    background: rgba(0, 0, 0, 0.5);\n}\n\n.root {\n    width: 500px;\n    height: 375px;\n    background: #fff;\n}\n.header{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px;\n}\n.content{\n    padding: 10px;\n}\n.box {\n    width: 100%;\n    height: 300px;\n    overflow: scroll;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./modal.vue?vue&type=template&id=6c2afcbc&\"\nimport script from \"./modal.vue?vue&type=script&lang=js&\"\nexport * from \"./modal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./modal.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n<div>\n<div :class=\"$style.body\">\n    <div :class=\"$style.sidebar\">\n        <div v-for=\"p in conceptList\" :key=\"p.concept\">\n            <div draggable=\"true\" \n                :class=\"$style.part\" \n                type=\"IfStatement\"\n                @dragstart=\"onDragStart($event, p.concept)\"\n                @dragend=\"onDragEnd\">\n                {{p.concept}}\n            </div>\n            <div :ref=\"`templete-${p.concept}`\" :class=\"[$style.literalRef]\">\n                <div :class=\"$style.part\" >\n                    {{ p.concept }}\n                </div>\n                <!-- <div :class=\"$style.literal\" :style=\"sizeStyle\" :name=\"node.icon\"></div> -->\n            </div>\n        </div>\n      </div>\n      <div style=\"position: relative;\">\n    <j-jflow ref=\"jflow\" \n        :class=\"$style.wrapper\" \n        :configs=\"configs\"\n        :loading.sync=\"jflowloading\"\n        :genVueComponentKey=\"genVueComponentKey\"\n        @click=\"onClickCanvas\"\n        @drop=\"onDrop\"\n        @pressEnd=\"onPressEnd\">\n            <template #LogicBasic=\"{ source, layoutNode }\">\n                <logic-Node \n                    :node=\"source\" \n                    :layoutNode=\"layoutNode\"\n                    @pressStart=\"onPressStart(source)\"\n                    @outOfFlow=\"onOutOfFlow($event, source)\">\n                </logic-Node>\n            </template>\n            <template #Start=\"{ source }\">\n                <start-Node :node=\"source\" @click=\"startAllAnimate\"></start-Node>\n            </template>\n            <template #endpoint=\"{ source }\">\n                <end-point-node :node=\"source\"></end-point-node>\n            </template>\n            <template #End=\"{ source }\">\n                <end-Node :node=\"source\"></end-Node>\n            </template>\n            <template #switchcaselink=\"{configs}\" >\n                <switch-link :linkConfigs=\"configs\">\n                </switch-link>\n            </template>\n            <template #plainlink=\"{ configs }\">\n                <logic-link :linkConfigs=\"configs\"\n                    @drop=\"onDropToLink($event, configs)\">\n                </logic-link>\n            </template>\n    </j-jflow>\n    <div :class=\"$style.minimap\">\n            <div :class=\"$style.content\" ref=\"minimap\" >\n            </div>\n        </div>\n      </div>\n    \n    <poppup-comp\n            :meta=\"poppups.selectionMeta\">\n        </poppup-comp>\n        <modal-comp \n            :meta=\"modal.modalMeta\">\n        </modal-comp>\n        \n        \n</div>\n<div>\n            <div>参数设置</div>\n            <div>\n                <ul>\n                    <li>\n                        行间距: <input type=\"number\" :value=\"layoutConstance.rowGap\" @change=\"onChange($event, 'rowGap')\"></input>\n                    </li>\n                    <li>\n                        列间距: <input type=\"number\" :value=\"layoutConstance.columnGap\" @change=\"onChange($event, 'columnGap')\"></input>\n                    </li>\n                    <li>\n                        逻辑块高度: <input type=\"number\" :value=\"layoutConstance.rowHeight\" @change=\"onChange($event, 'rowHeight')\"></input>\n                    </li>\n                    <li>\n                        逻辑块宽度: <input type=\"number\" :value=\"layoutConstance.columnWidth\" @change=\"onChange($event, 'columnWidth')\"></input>\n                    </li>\n                    <li>\n                        折线最小延伸距离X: <input type=\"number\" :value=\"layoutConstance.minSpanX\" @change=\"onChange($event, 'minSpanX')\"></input>\n                    </li>\n                    <li>\n                        折线最小延伸距离Y: <input type=\"number\" :value=\"layoutConstance.minSpanY\" @change=\"onChange($event, 'minSpanY')\"></input>\n                    </li>\n                    <li>\n                        循环回来的线最小延伸距离Y: <input type=\"number\" :value=\"layoutConstance.minGapY\" @change=\"onChange($event, 'minGapY')\"></input>\n                    </li>\n                </ul>\n            </div>\n        </div>\n</div>\n</template>\n\n<script>\nimport sourceData from '../data/data.json';\nimport logicLayout from '../layout/logic-layout';\nimport logicNode from './logic-node.vue';\nimport startNode from './start-node.vue';\nimport EndPointNode from './endpoint-node.vue';\nimport endNode from './end-node.vue';\nimport LogicLink from './link-component/logic-link.vue';\nimport SwitchLink from './link-component/switch-link.vue';\nimport poppupComp from './poppups/poppup';\nimport modalComp from './model/modal.vue';\nimport { initLayoutConstance, setLayoutConstance, layoutConstance, setSourceInitialAnchor } from '../layout/utils';\n\nimport {\n    ConceptColorMap,\n    ConceptSubColorMap,\n    ConceptIconURLMap,\n} from './configs';\nimport { genNode } from \"./data/data\";\nfunction getList() {\n    return [\n        \"Assignment\",\n        \"ForEach\",\n        \"Switch\",\n        \"While\",\n        \"If\"\n    ].map(c => ({\n        concept: c,\n        color: ConceptColorMap[c],\n        subcolor: ConceptSubColorMap[c],\n        icon: ConceptIconURLMap[c],\n    }))\n}\n\nlet uuid = 0;\ninitLayoutConstance();\nexport default {    \n    components: {\n        startNode,\n        endNode,\n        logicNode,\n        EndPointNode,\n        LogicLink,\n        SwitchLink,\n        poppupComp,\n        modalComp\n    },\n    provide() {\n        return {\n            renderJFlow: this.renderJFlow,\n            reOrderAndReflow: this.reOrderAndReflow,\n            focusOn: this.focusOn,\n            closePopper: this.closePopper,\n            poppups: this.poppups,\n            modal: this.modal,\n            animate: this.animate,\n            status: this.status,\n\n            setFocus: this.setFocus,\n            isOnFocus: this.isOnFocus,\n        }\n    },\n    data() {\n        const layout = new logicLayout(sourceData);\n        const configs = Object.freeze({\n            allowDrop: true,\n            layout,\n            initialZoom: 1,\n            minZoom: .2,\n            NodeRenderTop: true,\n            worldMargin: 400,\n            setInitialPosition(realboxX, realboxY, realboxW, realboxH, cx, cy, cwidth, cheight) {\n                return {\n                    x: realboxX + cwidth / 2,\n                    y: cy,\n                };\n            },\n        })\n        return {\n            configs,\n            sourceData,\n            jflowloading: false,\n            currentTarget: null,\n            poppups: {\n                selectionMeta: {\n                    type: undefined,\n                    active: false,\n                    clientX: 0,\n                    clientY: 0,\n                    target: null,\n                    payload: null,\n                },\n            },\n            modal: {\n                modalMeta: {\n                    active: false,\n                    target: null,\n                },\n            },\n\n            conceptList: getList(),\n\n            layoutConstance,\n\n            focus: null,\n            animate: {\n                link: false,\n            },\n            status: {\n                dragging: {\n                    active: false,\n                }\n            }\n        }\n    },\n    watch: {\n        jflowloading(val) {\n            if(!val) {\n                this.captureMap();\n            }\n        },\n        'status.dragging.active'(val) {\n            console.log('NodeDragging', val)\n        }\n    },\n    methods: {\n        captureMap() {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.captureMap(this.$refs.minimap, 10);\n        },\n        startAllAnimate(e) {\n            console.log('startAllAnimate')\n            e.detail.bubbles = false;\n            this.animate.link = true;\n        },\n        onClickCanvas() {\n            this.closePopper();\n            this.setFocus(null);\n            this.animate.link = false;\n        },\n        renderJFlow() {\n            console.log('renderJFlow')\n            this.$refs.jflow.renderJFlow();\n        },\n        reOrderAndReflow(node) {\n            // logger('reOrderAndReflow');\n            this.configs.layout.reOrder(this.sourceData);\n            this.$refs.jflow.reflow(undefined, () => {\n                this.captureMap();\n                if(node) {\n                    if(node.concept === 'Switch') {\n                        this.focusOn(node.cases[0]);\n                    } else {\n                        this.focusOn(node);\n                    }\n                }\n            });\n        },\n\n        onPressStart(source) {\n            this.currentTarget = source;\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const layoutNode = jflowInstance.getLayoutNodeBySource(source);\n            if(layoutNode.rootLayoutNode) {\n                this.status.dragging.active = true;\n            }\n        },\n        onPressEnd() {\n            this.currentTarget = null;\n            this.status.dragging.active = false;\n        },\n        onDragEnd() {\n            this.status.dragging.active = false;\n        },\n        // onCanvasMousemove() {\n\n        // },\n        onDropToLink(e, linkConfigs) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            let node = e.detail.instance;\n            if(this.currentTarget) {\n                node = this.currentTarget;\n                const layoutNode = jflowInstance.getLayoutNodeBySource(node);\n                if(layoutNode.source.concept === 'SwitchCase') {\n                    node = layoutNode.parent.source;\n                    layoutNode.parent.delete();\n                } else {\n                    layoutNode.delete();\n                }\n            }\n            linkConfigs.from.linkSource(node, linkConfigs);\n            this.reOrderAndReflow(node);\n            this.status.dragging.active = false;\n           \n        },\n        setFocus(node) {\n            this.focus = node;\n            this.animate.link = false;\n        },\n        isOnFocus(target) {\n            return this.focus === target;\n        },\n        focusOn(source) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const i = jflowInstance.getRenderNodeBySource(source);\n             console.log('isInViewBox', i.isInViewBox)\n            if (i && !i.isInViewBox) {\n                jflowInstance.focusOn(i);\n                this.captureMap();\n            }\n        },\n        onDrop(e) {\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const astblock = e.detail.instance;\n            const point = e.detail.point;\n            this.sourceData.playground.push(astblock);\n            this.configs.layout.reOrder(this.sourceData);\n            this.$refs.jflow.reflow(() => {\n                setSourceInitialAnchor(jflowInstance, astblock, point)\n            }, this.captureMap);    \n            this.status.dragging.active = false;        \n        },\n        // onLink(event) {\n        //     const jflowInstance = this.$refs.jflow.getInstance()\n        //     const source = event.detail.payload.instance;\n        //     console.log(source)\n        //     const anchor = event.detail.anchor;\n        //     const newNode = { id: `auto-${uuid++}`};\n        //     this.sourceData.push(newNode);\n        //     if(!source.next) {\n        //         source.next = [];\n        //     }\n        //     source.next.push(newNode.id);\n        //     this.configs.layout.reOrder(this.sourceData);\n        //     this.$refs.jflow.reflow(() => {\n        //         const renderNode = jflowInstance.getRenderNodeBySource(newNode) \n        //         renderNode.anchor = anchor;\n        //     });\n        // },\n        // onLinking(meta) {\n        //     const { source, target } = meta;\n        //     if(!source.next) {\n        //         source.next = [];\n        //     }\n        //     const exist = source.next.find(t => t === target.id);\n        //     if(!exist) {\n        //         source.next.push(target.id);\n        //         this.configs.layout.reOrder(this.sourceData);\n        //         this.$refs.jflow.reflow();\n        //     }\n        // },\n        genVueComponentKey(source){\n            return source.id;\n        },\n        // removelink(linkConfigs) {\n        //     const sourceNext = linkConfigs.from.source.next;\n        //     const toId = linkConfigs.to.source.id;\n\n        //     const idx = sourceNext.indexOf(toId);\n        //     sourceNext.splice(idx, 1);\n\n        //     this.configs.layout.reOrder(this.sourceData);\n        //     this.$refs.jflow.reflow();\n        // }\n        onDragStart(e, concept) {\n            const { dataTransfer } = e;\n            const node = this.$refs[`templete-${concept}`][0];\n            \n            const { width, height } = node.getBoundingClientRect();\n            console.log(width, height)\n            \n            dataTransfer.setDragImage(node, -width - 10, -height - 10);\n            this.dragging = true;\n            e.dataTransfer.effectAllowed = 'copyMove';\n            const jflowInstance = this.$refs.jflow.getInstance();\n            jflowInstance.sendMessage({ \n                instance: genNode(concept),\n            });\n            this.status.dragging.active = true;\n        },\n\n        closePopper() {\n            Object.assign(this.poppups.selectionMeta, {\n                type: undefined,\n                active: false,\n                clientX: 0,\n                clientY: 0,\n                target: null,\n                payload: null,\n            });\n        },\n\n        onChange(e, key){\n            const value = +e.target.value;\n            setLayoutConstance(key, value);\n            this.reOrderAndReflow();\n        },\n\n        onOutOfFlow(e, source) {\n            const point = e.detail.point;\n            const jflowInstance = this.$refs.jflow.getInstance();\n            const layoutNode = jflowInstance.getLayoutNodeBySource(source);\n            let node = source;\n            if(layoutNode.source.concept === 'SwitchCase') {\n                node = layoutNode.parent.source;\n                layoutNode.parent.delete();\n            } else {\n                layoutNode.delete();\n            }\n            this.sourceData.playground.push(node);\n            this.configs.layout.reOrder(this.sourceData);\n            this.$refs.jflow.reflow(() => {\n                setSourceInitialAnchor(jflowInstance, node, point)\n            }, this.captureMap);  \n        }\n    }\n}\n</script>\n\n<style module>\n#app {\n  font-family: PingFang SC, Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.wrapper{\n    width: 1200px;\n    height: 600px;\n    border: 1px solid #ccc;\n}\n.body{\n    display: flex;\n    flex-direction: horizontal;\n}\n.sidebar{\n    width: 180px;\n    border: 2px solid gold;\n}\n.sidebar > div {\n    padding: 16px;\n    display: flex;\n    justify-content: center;\n}\n.part {\n    width: 80px;\n    height: 50px;\n    background-color: gold;\n    text-align: center;\n    line-height: 50px;\n}\n.literalRef {\n    position: absolute;\n    z-index: -999;\n    top: -999px;\n    left: -999px;\n}\n\n.minimap{\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    background: #fff;\n}\n.minimap > .content {\n\n    width: 260px;\n    height: 180px;\n}\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=de04e53c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&module=true&lang=css&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport { JFlowVuePlugin, Point } from '@joskii/jflow';\nimport LogicNodeGroup from './custom/logic-node';\nimport LogicLink from './custom/logic-link';\nimport SwitchCaseLink from './custom/switchcase-link';\nimport App from './App.vue'\n\nVue.config.productionTip = false;\nVue.use(JFlowVuePlugin, {\n    customLink: {\n        LogicLink,\n        SwitchCaseLink\n    },\n    customGroups: {\n        LogicNodeGroup\n    },\n});\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASVSURBVHgB7ZlPTBxVHMe/b4bdlgArJdES/3UVrW3SBFqlpuqBRqMxLYV6NDGUi0pjUzb2oL1QDxZvi7HtticgPdSTUJCDiUnx0AuYAEljSyLJ+qemerC4XdJll5nn+y1d3H0zs/tmdvDS+VzIvv3N29+b9/19f28GICAgIOChZ3issREeYdgEzk/VtWmGFhfTRwGe1HUz9v6hlXlLjKl3gfMOittqaHt7jy4vwyUafObiZOQkM/RrIqkO8TFKfw1Dn0tMRgaK40RMBzjOFOIyNWtt8ICvC7g4EYlzjiGxrVZJiGQT30aGC3KpMYzpku9NrRse8EVCibHGKHQ+LrJsVQhPIpQ92Pd2JnlhInK3sFjO2fzxrn/2wiVVLyAxWd/BuTYm3/XdT/eg9bkTuPnLKBaWvpJ/dJmDx8CFfBh6CuOiDra5rQMdVXBJ6FrcuRGR0Nbi8fYXTueT17UtaG7aj/raJ/Hn3RkY5upGrmIZ3WCMbmBzYXBNMxenrmTnXaTgbQdIx/drjGHGWYlu62qfwMG2C2hq2GW5Jn3/Nr778T2siL+OyWgY+fBwqhcucF3EZH8Z3ZyTk2/eth9vvXTZNnmiXiyu88A4Wh5/x3lyE64L2dUOkEWawk3s9N6+67TyPAtL5yx1sUEo+wwVOBRR3gE7iwyFIkIy55WTz63dw9IfY0JGvyMsrrWD5UJxN5254g44WSTpnSRD0igHaf4n4US//fU90pnbUGTDaisFlt0Bskjo5jU5edJx54GrFZMnQqEG3Px1tGzyIetuRFkuPJeYaDiGCjjaKOld+PTXkPROFrlv58d5i1SB4u78PYMVaQFU7NHmQ3hx5ynse/4UHql71tZqD7+7BVNXVn9wmt8iIS8WWYnZxbP4WWh/x6OvY3vTy3jqsTcQrmmwxDlZLeOY5+HsUTtJlSxgXe8kGTqE/QdZ5Ct7vlCSjB1ZUbx2CdvHpjB7a1AU+zfyV7Z1UVoDmnkMUvJkkW+2X/acPKGa/HpsBK/uGURrywn5qyiy4X55ULMEFUGTuPF3P2lt+Shv0SUw62GxRvqcLP6w3my43d3YdEhCs4uDJWNMY0k5rmQHMqY2BMsizglNns3r+P+Civ76jU+RzaU2xjidYPXsZ3KsxYWcCrn+QeOqq6IWKkHuc/3GJ7gj7FTCsbE5duLE1ciQ+PZk8RgtgvoA2aDfUA+g5NOShYrjy2itqfU7PSeUPUpcmoj0G8CAfHijAvOzLqhTk0xlhGxix4+khspdq3gWskpqu+gNr4neUI2k6HA3c+vz/AFPIglm9vZ1pqcrzaF0nKZFMN2Ic5R252rqYuVB15Ulw8CneSjXq3qkdvU8IOrijLhiQB6nuti9o0d5noJFFrtMHo4v+7pS/XCB60fK/AmVa8Ow6dj0HFyp65JF0oN+MWSR4s7H+o7cG4FLPD0Te7FaLxapQlWvVVSt1qtFqlD1e6FKVluNRarg45s5e0mlra9RlC1SBd/eTjtZrfRzCwitdnvVu+2M8Bknq/VikSpsyv8HyGqZqcU5A70yT2pMi33QuTyOgICAgIAAn/kX98D8AlgkDYYAAAAASUVORK5CYII=\"","export { default } from  \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&module=true&lang=css&\"","export { default } from  \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-hover.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-hover.vue?vue&type=style&index=0&module=true&lang=css&\"","export { default } from  \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modal.vue?vue&type=style&index=0&module=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOaSURBVHgB7Zm/TxNhGMe/d6WUCoQyGAcHmxgdNJFzcMFBGHQGdzTdwAVJdOaYJSku4tYgfwDMMsAiJjpwmOigMdZBE3SwQPlR2t75PtcDez96996PdjD3SQjX9/rePc973/f7Pu8ViImJiflvKRckif7QRgS0AQpaFbHCDrNGUzGpYjSdU4qIGBERU16Splnw6/gXPJGtivi2W5AeI2IiewJaQcqUE5jVNLgGKQpY6HugzCAiIkngqCDRCK+ywyHOLpFJKrSE9gvSCAt+C5bghWQvem49RUqaYsd91m6U8PresjSGkIR6AvtL0qwGyNZ2sfcC0nfmIbD/hHawg6ONJ1APd2zXEETI/RPKHAISKAFD7wWmd9sIdl0cRoqNPD0BU59qGSdbL1H9/toehIDVrjpmgkjKdwIOFnkGySV5Zdy1/8mnZZx8XHY6FWhe+EpAt8iGZDLN7SQZGvXE+Rtc16n//oDKu2dOkippKuYGcsoCOOFOYP+VlHeySDFzGelh+UzvvOjzYlOGWvpqO+fHaj0TcLPI5NX7SA1NIgxhJeWaAFmk1tC7STI0QVPSI3Rl7yIKql9W9CRoolsoCipy/Tllo1XflgnwWmRUBLVaWwJBLDIqKImKsojaz03buVZWa0rA0Lu1ENPpvj6B7msT6ARu86Ku4uZgTimdNphKiSowAkvwNNrpkfmOBU/Qveie4jmbTLOiaHZCUwJaIwETpHdef48SumfPbdnWLmi41PzZWswVrR2O38q6NjsN3fP4jWxvF7Db/NmUAFtlaQUsmtrYhQ7XpnSr6xS14hq756STIxVVFaZV2uZCf9hETrSayEybNJnbCblQi8HaZhN4bNDNhZph278F5r/T1vagpYMXbqUFm5vPBx4qjjs915WY9rAsiVmELN68qP9ixd37YMWdZy3UbklVP6+gsr3odIo8f5xJRnHrz1WNUhJdCeSdVudk9h669W2jv9VZqx7oo1774bDqAhu1RvAlr+v42g8wScmGpEz4rY/c6h6m9zmmdxmc+N6R7RXYRlxEHrYVu0+Xk9eOjCyyorzQn4CFEqs8x90qTycC7YmDzgu/FslDqLcSvFbrZZFscZJ59O5E6BdbhtXmre2nVksRBrVIHiJ5M+cmqRZwWSQPkbzcJe2ygEZp0+H1XbJIo6YPHbxxvWhpZbWEX4vkoS2/DzhYbSCL5KEtCRBsXmQSxgapzmQT1GViYmJiYtrKX9S6vSHmMGiOAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"menu-wrapper_root_3OsrO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"modal_wrapper_tvxCi\",\"root\":\"modal_root_3rpNL\",\"header\":\"modal_header_25Bf4\",\"content\":\"modal_content_32hqm\",\"box\":\"modal_box_2SpVE\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH4SURBVHgB7Zm/SitBFMa/M0mEm0vgWtziVjc2NhYGRLFcn8AUFmJlrY2g1q6tImjhA9hYWcQ3SCn+gVjY2LidhUXEoIKbnXFmbRSccc1EZ4X5wVbnHPb79uwss2cAj8fjcQllTbyZqQWMCnUGMS3LqvgaWukVl9YHG0dRloIPDbTrwR8M3K1B0BK+E6JtPHWlkdatMc0UVOJFqdOUSaNwg+xGMmUywYzl8sk7FK+oYaC4ZkrQdqA9O1lFEl8hDwiaGjw4bb4X0naAd+MQOYELXtfFtAYYkctX5w2M0bQ2pi8TNeSHqi5gXsQ/gB9voIg+wP7+Q3khRGFoGFSufJgfHzfxuLcFfnMNW6w7oMRXNvdRHBnLJF5RmghQ2dhPa63vD0t+zS9nFv4a+l1BeTGELdYGSuMBeqXwfxi2OF3Eqgu2+M+oa7wB13gDrvEGxEMHLrE2kESX6BW1qbPF2sDDbthTF1SN2pHaYm1AbYk7q3OIT5qZ8pXw7sVZWtOP7XRf/geUkPvNFbjAf4VcYzIQITdQSxfRD7a4OERuEJ83wIg1kBfiZF0X0hpQs0jOsQPXSA1yOh3pwsZFzJIkxMuhgxMEcI4XDVqMBtK5vJzPO+mEvCfFSWB1wPGa9mytyruFkFF6XvBFc1MRcdAhE9TQjdM9Ho8nXzwDBbGcWeR0jjkAAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app_3cl75\",\"wrapper\":\"App_wrapper_pE_0j\",\"body\":\"App_body_1uhyl\",\"sidebar\":\"App_sidebar_3dMLz\",\"part\":\"App_part_1uPSl\",\"literalRef\":\"App_literalRef_3cFYm\",\"minimap\":\"App_minimap_3pLYf\",\"content\":\"App_content_pIJBB\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMFSURBVHgB7ZkxaBNRGMf/L4kGHSRCJwVtndqpSjBTSyMOgraQujpYB12TTTMlWYxjnB2axbkBq6BQeqJTxWKmikMsgjjYIRRaDLZ5fl/itef17t1dcpdYuB8kl8t77/L93/u+l/u+A0JCQkLsyJTlKL8QIAI+kynKxN4pZOljDhIJ/k4CmxFAi0qUanmxCR/xTYCV4Ra/1qT3yvJDUYJP+CJgriwX2gIFutiom/6dFaHVeJEXVfRJXwJmyzJNVyjQx7RV++l497jbsh7PQoTEveW80NAjPQngwNwTWITC8PkUcGOye/7uM7C0Bmxtw86Iaq/x4UkA+/l+HAUpyM8tYMPZaH7ps6/DxutCFMZ4FuJKgJsATV4C7kwBI2fU12IhSx9IzIZ1e8etBKpuA91RQMddgBr1nLRqnzhPfVLdoxdYSOUV8G3Lup2FnJC45rQajgJuPZFfrXYXnun7170bbkYVHyxi5xeuaEXRtBsfhQLeHknigvE79u3ZJPCAjD93Fn1zceQwZn40/92xaOISJ6NofVkpaXbjY1BAM5A1nrOf86ybA9QPWERyDHj+HvjYMDQIzKjGRVSNNPiy8ZSDNAjjdXS3NJFWjVELsPiBoPE6QZ4E/I+EAoZNKGDYhAKGTShg2IQCho0nATstBM7PbW/9nQRoxpNnK/aJuR/wBPHttBHKvz+pxijzAUoI3tItdVo/XW90U0A9cfcLNvxNHXhdP1qCibTxVDVWmVJ2kvk4Vs15AcO31vNXgekJ9AUnLzzrdinly0diTDXeVVL/W2DVrup2gVLC3E3vucLGd6oUrHWPlkjUyT0yfSf1OnOPZa4dQdZOyNQ4cDvlLISDlGd8vQE7i5ogt4m1UKkpkvnD7h7g1dgHihRYd+36cEVuevyoEJWfHyA7hhfdGK7Tc2lRJcQcH2w0l0527bdhLUY10sBLi2a4uEsiFu3cyqm4C96mqZQ48OKumWNbXjdDK1Kkv8as8gGHhwB1g/+PmP7GB63IzMGKBGD4QBjEQ76QkJBjzh9lJR0IqhO8agAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMFSURBVHgB7ZkxaBNRGMf/L4kGHSRCJwVtndqpSjBTSyMOgraQujpYB12TTTMlWYxjnB2axbkBq6BQeqJTxWKmikMsgjjYIRRaDLZ5fl/itef17t1dcpdYuB8kl8t77/L93/u+l/u+A0JCQkLsyJTlKL8QIAI+kynKxN4pZOljDhIJ/k4CmxFAi0qUanmxCR/xTYCV4Ra/1qT3yvJDUYJP+CJgriwX2gIFutiom/6dFaHVeJEXVfRJXwJmyzJNVyjQx7RV++l497jbsh7PQoTEveW80NAjPQngwNwTWITC8PkUcGOye/7uM7C0Bmxtw86Iaq/x4UkA+/l+HAUpyM8tYMPZaH7ps6/DxutCFMZ4FuJKgJsATV4C7kwBI2fU12IhSx9IzIZ1e8etBKpuA91RQMddgBr1nLRqnzhPfVLdoxdYSOUV8G3Lup2FnJC45rQajgJuPZFfrXYXnun7170bbkYVHyxi5xeuaEXRtBsfhQLeHknigvE79u3ZJPCAjD93Fn1zceQwZn40/92xaOISJ6NofVkpaXbjY1BAM5A1nrOf86ybA9QPWERyDHj+HvjYMDQIzKjGRVSNNPiy8ZSDNAjjdXS3NJFWjVELsPiBoPE6QZ4E/I+EAoZNKGDYhAKGTShg2IQCho0nATstBM7PbW/9nQRoxpNnK/aJuR/wBPHttBHKvz+pxijzAUoI3tItdVo/XW90U0A9cfcLNvxNHXhdP1qCibTxVDVWmVJ2kvk4Vs15AcO31vNXgekJ9AUnLzzrdinly0diTDXeVVL/W2DVrup2gVLC3E3vucLGd6oUrHWPlkjUyT0yfSf1OnOPZa4dQdZOyNQ4cDvlLISDlGd8vQE7i5ogt4m1UKkpkvnD7h7g1dgHihRYd+36cEVuevyoEJWfHyA7hhfdGK7Tc2lRJcQcH2w0l0527bdhLUY10sBLi2a4uEsiFu3cyqm4C96mqZQ48OKumWNbXjdDK1Kkv8as8gGHhwB1g/+PmP7GB63IzMGKBGD4QBjEQ76QkJBjzh9lJR0IqhO8agAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATMSURBVHgB7VnPbxtFFH4zjt3YDYqLyCEgtS7hABQUS+WARFGTAzeQ6LG0hUQCnFv8HyS5ccO5xQgpgSrliBAnSKUYNUgcWqkRP9JD07qRIIdUjUvJOrZ3Z3hv3aS7s+PYa29sVfUXrZyZfbvz3ps3b958C9BFF882GASEy58WRxhYSR7iZwFkUkoZB8bi9k0pC/h/ngHLW1KuguC5S19HczXfNfFohEu+/ERJlvsoGxvVyfZAC5hPy3ivsTspwEoDE3EaSuJfdVSHb6qGJPFekjP4EEJiajG1k8e+XJnxmfG5aB6aRFMGkOJHisUpWTTSwtazqYlM4DUWkWIMjVlo1hAOPrGYMiYjxs5d9GYaggMZsrz42X9j4BO+ZuBKyvjSVpx5PR7uZTD4RggGTnLof5FD7PlqH6GyK8F4APBwU8DWuoDNPy27T0ECOJu/8rkxbIH1AzSIhub+cch8j8qPqPdixxi8ciYMx9/i+wo3go0bFqwtmWBsC+/N6qKPP1GyxUUcLu7kJLBhVx8q+9p7YRg6E4JmcPx0yL7WfzVh7WfTPSMO5euhrgGPw8alPHn93dQR+7dVDL3TA4Ovh+BatqyfjTo4cBHTolIXK8V3UMrvoeqQCPQP+s4ptWdgfqKYACmm1IHe/jjSkvJrSxUwClJ7LxwF36hpQFhY0xiLif12bzBhc/+OsC8/sHf1GtDOGXmfMfaJs48WbJBh4wsMkvPpba0RWgNs7ztAijebbYJCjxHRbpzaEELvn3W2yftBgd5lPJB15bYwzDZumPttrKEm8WdalfPEhFoJhqMM3p/uhXajUgT46Ytd1/4gLD6qVrHeEBJ8xNmkHN0JUEYaPOUem3GZVOU8BjAmXEIDQ/5zc1AYeNk9NmPeUsZrgOQnnO1mNpeg0P+SJ8KH1Q6ddglng6rKTiEW96jnSaVeA5hbyE+FGTQ0O3MDBjxl8BogoeBsag4ebQOlUgUFtUOThdxCdJLqFIyCUjNJyKsyHgMEiFVnu/CP/xo9KDz8W5l9BvdUGU0IsZyzef+OBZ3CllK1Cgk3VRmPAZJLl9DmX6Jj64AO/y4gIabKeAy4NPdczrmQK0UJ9663P4w2rqvMBcvr2DxtGhVczDrb6ysVaDfWrppKj8zp5LQGmLtmxtk2tiXcXmnfWri94qVbODJ3OlmtAeMLxzCBuWfh1tWKbchhg8a4taR6HxbO16Ada+7EZsmcVtfCtWzpUI2gdxO9osZ+Le8TahpAsyBDckYd4LdvD8eI6rs13BATM+cPIH3rVmqXU48yHPiksy9IYouw53kvsSVnL2T7DiSRG9IA2bllHS/65gcR5EVbO7HRgqWYV/cabK1ezB5N1nu+IW60VCqdi0Qiy0RvOPt//7GMKZbBq3hQP3G6cUNIWdpb1lf05C6RueVo9Fwj7/IVA7pw2oNNr5/i8MJQyD7FHVXo9R0sCv/FumrrrgWbfxy0u9cPm6YNICxO4EcIyZFylAkIEpjxMExnLn7Vl/HzmO8DzYW5vgXO2CjSfd9AYJCz5VjspF/lCS2lke+QgrSQxWPM/jKZ8PMseZxKFrO3LzOeYQVoEsF9ZkVCjDglnJ1hZGMTQOTA3vkalaWDEn4kuSml+IUqXrto7KKLLlrG/4VSAdWttKMUAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAU+SURBVHgB7VnLbxtFGP/tI3FeTVJVcQX04aiihxaViANSuRCLptAjAsGRZ88p6h+QmntV51yEyhFExRFEimwucECCBEGEOFC3AQppozqtm8bperfft6mT2ZlZe9e7PlTNT7LsGc/O95hvvtcCO9jBkw0DKeHGHCYtYMIw8DJ9JuBh1ANGHxGpegYqNFdxPSyYQHlsCmWkgEQCXC1hdMjFtOHhTJPZGIQr9FV+YKHwVN7/3RE6EuAR4zOk0TNIAcTEpU4FiS3AyhVMk7bPxdV4BEYqrotC9iQuxXwuOm5+hwthWjfsYfTueQ32yEuwh47AzBzw5xiecwdu/ToatUU8WP0BGyvf+HMhHBXHXsFHSFMA32Qa+Ip+Tsr/WZn96Nv3IXqzb28xHAUb/3+B+9fOo1FfgoaredtEfnce1Xb7RBJg+VvMGyaeDzxIzPYfPIu+p08jCer/XsQaCaI5kfLYCeTbPd9WAJ3ZsNZ3HfsSZt9+pAF3fQl3f31TPY0I5mS2+pM0/67MvD14tGPmmVGd7fNevCfvHQDR/m+utacLPYEbJeR6GiiRt8k155Jonpm/Q1pm0xs+dll7X0JOompbGA+7D6EnYDm+q8w1x0wwKfMuMda49zv9fqPlSUjCjTocc0KgFYC1T+nAO+IcX9hObX7t6ozPfBPthBggWgGQKd0u6eOOVgDWfmDMrjKBtxl8tqjYdyshMkSLaYrYcPR3QSuASQmZOO6XNRITm+Z3OZYQHFsknqa1e8sTNymrpNmSSHz38T90z2Ltrxk4td8QFcwoMy3DIsHki81rqz+9GBTOQ17OYm15M5eirXgsvXtOIQwNYt5Z/RGJQUzKXqmZmtQpYm/Ro3SdvsriOp0JTYiDnpHj6DbCTJTzKhGGJpVRBDBNHBTH1tBRdBt2iJJsibZlBNMZf408QcVJzhPGZibcdQ4c+phsdBVJwKYS5p5l2roUXhFAXtQqw7QGu3s6GtqKAC1zoccBqglxAS5I6mk8RBPsEpOb0EjoSWrig5IP2eqOtMjbFoBTAMtWCXB+s/rzFJKCLzDHAB1cOb321JpZMaGGiwVx7NTUwMO4f/08ug2ZNsWoa/IaRQBDChS6QMXaFwNMt+BQ/SxhXp7Q3YHAoo2VrzHgFAL3wLdbcnFyBcVzZt8+xIE19Fzof1z8izChNsO0Bc2tK7gtXuSBQwUlG/XvwC9TgYvGfns4pVKTT/jen9sJKPFTyZ7AuLxO60Y9D7PieP3vT5Q1zOTQ4WJgji/d3cX3kQa4YxGgB30rUiuAbaMoM7ZO3QMZPZRsyXkMu9akF7z+z0XFA3HnTrdWKwDXn2RbgVNgjbDZyOg/cJayxle3xpzzZ7JvoVMwjTVJAdx6DGs7htfEFs4ZQuBgW/frWo0Qg4dnN6u2Z05j+IW5ju9As3YW7xXbfpj2GS37QsvU0qDa+II4x1Fz15FPFSZbRewo8DsSix+QCQYLJM/Fe636pW0bW+SRiqSFQDmXprdhiF0LEUR3ljxPZ30hESQE94cmAw+m1VqkC8s2L+c91Kle2HsyWFzpEEkAbmlQb6ZEKlE25NNgQTJ7o19cZra+/Lnvnl1dc5dcZs3C6+NpNXeb0JnT1kZ+DXvKT864kmLBgu31JT+3cdq016OYTccCMPx+qYkZQ+japYQqBdBCdioYg9ohdkHDHqFhIU/EPkNKYK2TyYzHZZ6R6CUftyD9Lh6/mYx/Ilx3zNYo6kex9TCk9pqVG2LcU+LOAb1SzRFzOWwnhFVjs1Cap9es33PGm9Zr1h3s4EnHQ/vALAsXKXDEAAAAAElFTkSuQmCC\"","export { default } from  \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-menu.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add-menu.vue?vue&type=style&index=0&module=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH8SURBVHgB7dlPKERBHAfw72x7WDng5M/Fn4ty8efioNhSLiQKJ8pZygUHpZRywIHIwQVnDmxclEI5uAgHchEnnOxxlYz5WdTaN9vbmTH7ZD61tc3sq/m+95s/uws4juM4/xnL1Dk+zLs4x4h4G0VunINjcW6Frcs+IA0wNsQHRe8aAoAxdM8us22vvpD0qtDHnQ+EzyrwJA/AUYfgiMo6wvBpcgZWTU/4+1wIliUSMMpqgNMTYGkWeHqAMdYC3FwD+3vJJ7C6BFycwQgrAWjQsc3UttgWcHQAbVYCRCJAY1N6+/GBfgjfq5CXyyzKoLAIqK4RpXSV2k4hXsQTamuHEq0AO1swgiZ3bT1QXIasWV9GvRSXqg2eBCKA1/zwS6uEahtgRHkllGkF6OxBzgWihHRoPYH7WxhRXgVlygHoKBAztIzqnHSVS+jYwDHABKUAVDrxZwSCUglF8pLnm59n+wJxXCgqhFVKAWjnbOtInwN5IlTvQDKcLcpzgDaxltbUtkfxRWV/F1Zp7QPNrem7cUkprNLaBwiVEt15mg99/X8wANU7DZzQmd827QAkFwP/4juAqV3XtEwB4uL1vaqb+hVBUVzWIV2FOMMigoJhQ9YlDfAaxgKH/EJbxBgO88OYkvVn/H+AjA7zKHtDBXKAh3A3v8wO4TiO4/yWdxHwaVbarNdOAAAAAElFTkSuQmCC\"","export { default } from  \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./op-menu.vue?vue&type=style&index=0&module=true&lang=css&\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./op-menu.vue?vue&type=style&index=0&module=true&lang=css&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"content-hover_root_O4Qe3\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOeSURBVHgB7ZnPaxNBFMe/E5v0F2K8FRGbgmBPmoOCKNJs/4HivaA9NkXanAQvTQ968GJ6aNVTc/Degx68JSqe9NBWUATBLVTxILgisWna7vhmk2Ldnc3+miQF84GUyexs837NzJs3QJcu/zcMiugrPcww7KcZYmP0NQ3wJP37ZP0pNxiYzgGd2usmzHJVu1WGAiIpkCytJGuozgLm3F9hfaPTO2UTWKhq0zpCEkoBIfgutufJonNQAiuGVSSwAv2lR7MUKvkQFvdCZ+ALFW2mGOSlQAoMlpYfqLO6HBKoUNGyuQDjvamHTHWVg2fQBkiotTh2NEPLGV5jY/DBLt8ut0t4AXk5vYveVT9jPRWwwobhAtoMKZERv+01rmkIDZaWbnKwFXQQUiS3rWULbs9dFaCNKRUDL1Ezhc5iJLAz4jYfXEMoxnkenRdeQAtI77zbQ6kHGtb/jCMEeeGkzAtSDzSsH4rhvuM4Qx/V1JCQ7j/yEGIYQwjupC7h/eVJfKDP49FxxYqwWWmvvUNklY3JG5hKZvqf7z/3drC09Q539TdQgYl9zZ7FOjwQg5mBIk709JJXLlpemRw6h6gwHEvb+5whxGNpKEbMCxFSz9MTEcPKmQ04FWB8GC3iWvJUpPlBhyJHRiCbxCm0GBFOwhuTQ6MIiCOFj/kZ1ApEWN0/ewUB8aVA2zD2aoiKTAHPHFwFBi2x94Ivrw7ZeuwdlP1RBaG1YbS0tUHCv7WUCAbX7T0OBRhn6/QnhRbw0vhiCf7K+IowkHE37X1ODzBeJg9MQCGb1V+4/ek1nn6Plh+Ko6a9TxJCbI0JXUMgUgex+x5gWKnEBpYpnQgeLk5EQczeJ02nB0rLPxBiHsycPk9L41Wr/eTbR2uSCusrQv+tZUfsnT3ysXyRdHM9RLghrP2sESYKBa/DWFnWLd0HEqi5nkG9EIIrF54wORZk/VIFxMmHWV44IjBWdCs7uu7EcdTyaNOm5oHuZn2BqwLCC7QWub7YLigDbVr0bZoLiXpMJ0OJhF+saNPF5mN8QBWykqiUoY0wjvXKeNbzcOUrG6VC63VIdsFWQZYvx1l/xt/YAFCpscBdqgOqaISN7xJ+oPMAXT7MmWBTsK6HVMPFopELIrwg1BVTo3KXp+YNKEBYPY6+vKFNBV62I13yHVJEFMJSCAQXwi4mMFAII/gBSq9Z6zUlq3KQIgFTh69ZqS2EXKMweSEyXlrby+jSpUtk/gB2wEhpV3BI9QAAAABJRU5ErkJggg==\""],"sourceRoot":""}